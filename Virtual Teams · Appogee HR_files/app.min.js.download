!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m="1.11.0",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(l.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:k&&!k.call("\ufeffÂ ")?function(a){return null==a?"":k.call(a)}:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||n.guid++,e):void 0},now:function(){return+new Date},support:l}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+-new Date,t=a.document,u=0,v=0,w=eb(),x=eb(),y=eb(),z=function(a,b){return a===b&&(j=!0),0},A="undefined",B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ab=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(cb){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function db(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;if((b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[],!a||"string"!=typeof a)return d;if(1!==(i=b.nodeType)&&9!==i)return[];if(n&&!e){if(f=Z.exec(a))if(h=f[1]){if(9===i){if(g=b.getElementById(h),!g||!g.parentNode)return d;if(g.id===h)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h)return d.push(g),d}else{if(f[2])return G.apply(d,b.getElementsByTagName(a)),d;if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(h)),d}if(c.qsa&&(!o||!o.test(a))){if(q=p=s,u=b,v=9===i&&a,1===i&&"object"!==b.nodeName.toLowerCase()){m=ob(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--)m[j]=q+pb(m[j]);u=$.test(a)&&mb(b.parentNode)||b,v=m.join(",")}if(v)try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}return xb(a.replace(P,"$1"),b,d,e)}function eb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function fb(a){return a[s]=!0,a}function gb(a){var b=l.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function hb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function ib(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function jb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function lb(a){return fb(function(b){return b=+b,fb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function mb(a){return a&&typeof a.getElementsByTagName!==A&&a}c=db.support={},f=db.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},k=db.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;return e!==l&&9===e.nodeType&&e.documentElement?(l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=gb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=gb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&gb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=gb(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==A?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==A&&n?b.getElementsByClassName(a):void 0},p=[],o=[],(c.qsa=Y.test(e.querySelectorAll))&&(gb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),gb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")})),(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&gb(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},z=b?function(a,b){if(a===b)return j=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:4&d?-1:1)}:function(a,b){if(a===b)return j=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0;if(f===g)return ib(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)k.unshift(c);while(h[d]===k[d])d++;return d?ib(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e):l},db.matches=function(a,b){return db(a,null,null,b)},db.matchesSelector=function(a,b){if((a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']"),!(!c.matchesSelector||!n||p&&p.test(b)||o&&o.test(b)))try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return db(b,l,null,[a]).length>0},db.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},db.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):void 0;return void 0!==f?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},db.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},db.uniqueSort=function(a){var b,d=[],e=0,f=0;if(j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z),j){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return i=null,a},e=db.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=db.selectors={cacheLength:50,createPseudo:fb,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ab,bb),a[3]=(a[4]||a[5]||"").replace(ab,bb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||db.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&db.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&T.test(c)&&(b=ob(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ab,bb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=db.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[u,n,m];break}}else if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(t&&((l[s]||(l[s]={}))[a]=[u,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||db.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?fb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:fb(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?fb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:fb(function(a){return function(b){return db(a,b).length>0}}),contains:fb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:fb(function(a){return U.test(a||"")||db.error("unsupported lang: "+a),a=a.replace(ab,bb).toLowerCase(),function(b){var c;do{if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:lb(function(){return[0]}),last:lb(function(a,b){return[b-1]}),eq:lb(function(a,b,c){return[0>c?c+b:c]}),even:lb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:lb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:lb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:lb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=jb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=kb(b);function nb(){}nb.prototype=d.filters=d.pseudos,d.setFilters=new nb;function ob(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=Q.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?db.error(a):x(a,i).slice(0)}function pb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function qb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=v++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[s]||(b[s]={}),(h=i[d])&&h[0]===u&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function rb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function sb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function tb(a,b,c,d,e,f){return d&&!d[s]&&(d=tb(d)),e&&!e[s]&&(e=tb(e,f)),fb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||wb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:sb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=sb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=sb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ub(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=qb(function(a){return a===b},i,!0),l=qb(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return!g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++)if(c=d.relative[a[j].type])m=[qb(rb(m),c)];else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[s]){for(e=++j;f>e;e++)if(d.relative[a[e].type])break;return tb(j>1&&rb(m),j>1&&pb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(P,"$1"),c,e>j&&ub(a.slice(j,e)),f>e&&ub(a=a.slice(e)),f>e&&pb(a))}m.push(c)}return rb(m)}function vb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=null==t?1:Math.random()||.1,x=v.length;for(k&&(h=g!==l&&g);q!==x&&null!=(m=v[q]);q++){if(e&&m){n=0;while(o=a[n++])if(o(m,g,i)){j.push(m);break}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}if(p+=q,c&&q!==p){n=0;while(o=b[n++])o(r,s,g,i);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=E.call(j));s=sb(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&db.uniqueSort(j)}return k&&(u=w,h=t),r};return c?fb(f):f}g=db.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=ob(a)),c=b.length;while(c--)f=ub(b[c]),f[s]?d.push(f):e.push(f);f=y(a,vb(e,d))}return f};function wb(a,b,c){for(var d=0,e=b.length;e>d;d++)db(a,b[d],c);return c}function xb(a,b,e,f){var h,i,j,k,l,m=ob(a);if(!f&&1===m.length){if(i=m[0]=m[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&n&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(ab,bb),b)||[])[0],!b)return e;a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){if(j=i[h],d.relative[k=j.type])break;if((l=d.find[k])&&(f=l(j.matches[0].replace(ab,bb),$.test(i[0].type)&&mb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&pb(i),!a)return G.apply(e,f),e;break}}}return g(a,m)(f,b,!n,e,$.test(a)&&mb(b.parentNode)||b),e}return c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=gb(function(a){return 1&a.compareDocumentPosition(l.createElement("div"))}),gb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||hb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&gb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||hb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),gb(function(a){return null==a.getAttribute("disabled")})||hb(J,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),db}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=a.document,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,B=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:A.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:z,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=z.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return y.find(a);this.length=1,this[0]=d}return this.context=z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};B.prototype=n.fn,y=n(z);var C=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!n(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function E(a,b){do{a=a[b]}while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return E(a,"nextSibling")},prev:function(a){return E(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(D[a]||(e=n.unique(e)),C.test(a)&&(e=e.reverse())),this.pushStack(e)}});var F=/\S+/g,G={};function H(a){var b=G[a]={};return n.each(a.match(F)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?G[a]||H(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&n.each(arguments,function(a,c){var d;while((d=n.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){if(a===!0?!--n.readyWait:!n.isReady){if(!z.body)return setTimeout(n.ready);n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(z,[n]),n.fn.trigger&&n(z).trigger("ready").off("ready"))}}});function J(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",K,!1),a.removeEventListener("load",K,!1)):(z.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(z.addEventListener||"load"===event.type||"complete"===z.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===z.readyState)setTimeout(n.ready);else if(z.addEventListener)z.addEventListener("DOMContentLoaded",K,!1),a.addEventListener("load",K,!1);else{z.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&z.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!n.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}J(),n.ready()}}()}return I.promise(b)};var L="undefined",M;for(M in n(l))break;l.ownLast="0"!==M,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c=z.getElementsByTagName("body")[0];c&&(a=z.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",b=z.createElement("div"),c.appendChild(a).appendChild(b),typeof b.style.zoom!==L&&(b.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(l.inlineBlockNeedsLayout=3===b.offsetWidth)&&(c.style.zoom=1)),c.removeChild(a),a=b=null)}),function(){var a=z.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}}a=null}(),n.acceptData=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function R(a,b,d,e){if(n.acceptData(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h
;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(n.acceptData(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--)d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d]));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},W=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},X=/^(?:checkbox|radio)$/i;!function(){var a=z.createDocumentFragment(),b=z.createElement("div"),c=z.createElement("input");if(b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a>",l.leadingWhitespace=3===b.firstChild.nodeType,l.tbody=!b.getElementsByTagName("tbody").length,l.htmlSerialize=!!b.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,a.appendChild(c),l.appendChecked=c.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,a.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){l.noCloneEvent=!1}),b.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete b.test}catch(d){l.deleteExpando=!1}}a=b=c=null}(),function(){var b,c,d=z.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),l[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Y=/^(?:input|select|textarea)$/i,Z=/^key/,$=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,ab=/^([^.]*)(?:\.(.+)|)$/;function bb(){return!0}function cb(){return!1}function db(){try{return z.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof n===L||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(F)||[""],h=b.length;while(h--)f=ab.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(F)||[""],j=b.length;while(j--)if(h=ab.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,m,o=[d||z],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||z,3!==d.nodeType&&8!==d.nodeType&&!_.test(p+n.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[n.expando]?b:new n.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),k=n.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!n.isWindow(d)){for(i=k.delegateType||p,_.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||z)&&o.push(l.defaultView||l.parentWindow||a)}m=0;while((h=o[m++])&&!b.isPropagationStopped())b.type=m>1?i:k.bindType||p,f=(n._data(h,"events")||{})[b.type]&&n._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&n.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&n.acceptData(d)&&g&&d[p]&&!n.isWindow(d)){l=d[g],l&&(d[g]=null),n.event.triggered=p;try{d[p]()}catch(r){}n.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((n.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?n(c,this).index(i)>=0:n.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=$.test(e)?this.mouseHooks:Z.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||z),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||z,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==db()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===db()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=z.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===L&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&(a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault())?bb:cb):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:cb,isPropagationStopped:cb,isImmediatePropagationStopped:cb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=bb,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=bb,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submitBubbles||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?b.form:void 0;c&&!n._data(c,"submitBubbles")&&(n.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),n._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.changeBubbles||(n.event.special.change={setup:function(){return Y.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),n.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),n.event.simulate("change",this,a,!0)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;Y.test(b.nodeName)&&!n._data(b,"changeBubbles")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a,!0)}),n._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!Y.test(this.nodeName)}}),l.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=cb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return n().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=cb),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});function eb(a){var b=fb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var fb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gb=/ jQuery\d+="(?:null|\d+)"/g,hb=new RegExp("<(?:"+fb+")[\\s/>]","i"),ib=/^\s+/,jb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kb=/<([\w:]+)/,lb=/<tbody/i,mb=/<|&#?\w+;/,nb=/<(?:script|style|link)/i,ob=/checked\s*(?:[^=]|=\s*.checked.)/i,pb=/^$|\/(?:java|ecma)script/i,qb=/^true\/(.*)/,rb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},tb=eb(z),ub=tb.appendChild(z.createElement("div"));sb.optgroup=sb.option,sb.tbody=sb.tfoot=sb.colgroup=sb.caption=sb.thead,sb.th=sb.td;function vb(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==L?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==L?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,vb(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function wb(a){X.test(a.type)&&(a.defaultChecked=a.checked)}function xb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function yb(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function zb(a){var b=qb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ab(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}function Bb(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Cb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(yb(b).text=a.text,zb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&X.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}n.extend({clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!hb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ub.innerHTML=a.outerHTML,ub.removeChild(f=ub.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=vb(f),h=vb(a),g=0;null!=(e=h[g]);++g)d[g]&&Cb(e,d[g]);if(b)if(c)for(h=h||vb(a),d=d||vb(f),g=0;null!=(e=h[g]);g++)Bb(e,d[g]);else Bb(a,f);return d=vb(f,"script"),d.length>0&&Ab(d,!i&&vb(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,m=a.length,o=eb(b),p=[],q=0;m>q;q++)if(f=a[q],f||0===f)if("object"===n.type(f))n.merge(p,f.nodeType?[f]:f);else if(mb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(kb.exec(f)||["",""])[1].toLowerCase(),k=sb[i]||sb._default,h.innerHTML=k[1]+f.replace(jb,"<$1></$2>")+k[2],e=k[0];while(e--)h=h.lastChild;if(!l.leadingWhitespace&&ib.test(f)&&p.push(b.createTextNode(ib.exec(f)[0])),!l.tbody){f="table"!==i||lb.test(f)?"<table>"!==k[1]||lb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)n.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}n.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),l.appendChecked||n.grep(vb(p,"input"),wb),q=0;while(f=p[q++])if((!d||-1===n.inArray(f,d))&&(g=n.contains(f.ownerDocument,f),h=vb(o.appendChild(f),"script"),g&&Ab(h),c)){e=0;while(f=h[e++])pb.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.deleteExpando,m=n.event.special;null!=(d=a[h]);h++)if((b||n.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]&&(delete j[f],k?delete d[i]:typeof d.removeAttribute!==L?d.removeAttribute(i):d[i]=null,c.push(f))}}}),n.fn.extend({text:function(a){return W(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(vb(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&Ab(vb(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(vb(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return W(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(gb,""):void 0;if(!("string"!=typeof a||nb.test(a)||!l.htmlSerialize&&hb.test(a)||!l.leadingWhitespace&&ib.test(a)||sb[(kb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(jb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(vb(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(vb(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,o=k-1,p=a[0],q=n.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&ob.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(k&&(i=n.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=n.map(vb(i,"script"),yb),f=g.length;k>j;j++)d=i,j!==o&&(d=n.clone(d,!0,!0),f&&n.merge(g,vb(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,n.map(g,zb),j=0;f>j;j++)d=g[j],pb.test(d.type||"")&&!n._data(d,"globalEval")&&n.contains(h,d)&&(d.src?n._evalUrl&&n._evalUrl(d.src):n.globalEval((d.text||d.textContent||d.innerHTML||"").replace(rb,"")));i=c=null}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],g=n(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Db,Eb={};function Fb(b,c){var d=n(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:n.css(d[0],"display");return d.detach(),e}function Gb(a){var b=z,c=Eb[a];return c||(c=Fb(a,b),"none"!==c&&c||(Db=(Db||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Db[0].contentWindow||Db[0].contentDocument).document,b.write(),b.close(),c=Fb(a,b),Db.detach()),Eb[a]=c),c}!function(){var a,b,c=z.createElement("div"),d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],a.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(a.style.opacity),l.cssFloat=!!a.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===c.style.backgroundClip,a=c=null,l.shrinkWrapBlocks=function(){var a,c,e,f;if(null==b){if(a=z.getElementsByTagName("body")[0],!a)return;f="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c=z.createElement("div"),e=z.createElement("div"),a.appendChild(c).appendChild(e),b=!1,typeof e.style.zoom!==L&&(e.style.cssText=d+";width:1px;padding:1px;zoom:1",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b=3!==e.offsetWidth),a.removeChild(c),a=c=e=null}return b}}();var Hb=/^margin/,Ib=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Jb,Kb,Lb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Jb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),Ib.test(g)&&Hb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):z.documentElement.currentStyle&&(Jb=function(a){return a.currentStyle},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ib.test(g)&&!Lb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Mb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h=z.createElement("div"),i="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",j="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",b=h.getElementsByTagName("a")[0],b.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(b.style.opacity),l.cssFloat=!!b.style.cssFloat,h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,b=h=null,n.extend(l,{reliableHiddenOffsets:function(){if(null!=c)return c;var a,b,d,e=z.createElement("div"),f=z.getElementsByTagName("body")[0];if(f)return e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=z.createElement("div"),a.style.cssText=i,f.appendChild(a).appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",b=e.getElementsByTagName("td"),b[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===b[0].offsetHeight,b[0].style.display="",b[1].style.display="none",c=d&&0===b[0].offsetHeight,f.removeChild(a),e=f=null,c},boxSizing:function(){return null==d&&k(),d},boxSizingReliable:function(){return null==e&&k(),e},pixelPosition:function(){return null==f&&k(),f},reliableMarginRight:function(){var b,c,d,e;if(null==g&&a.getComputedStyle){if(b=z.getElementsByTagName("body")[0],!b)return;c=z.createElement("div"),d=z.createElement("div"),c.style.cssText=i,b.appendChild(c).appendChild(d),e=d.appendChild(z.createElement("div")),e.style.cssText=d.style.cssText=j,e.style.marginRight=e.style.width="0",d.style.width="1px",g=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(c)}return g}});function k(){var b,c,h=z.getElementsByTagName("body")[0];h&&(b=z.createElement("div"),c=z.createElement("div"),b.style.cssText=i,h.appendChild(b).appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",n.swap(h,null!=h.style.zoom?{zoom:1}:{},function(){d=4===c.offsetWidth}),e=!0,f=!1,g=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(c,null)||{}).top,e="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width),h.removeChild(b),c=h=null)}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Nb=/alpha\([^)]*\)/i,Ob=/opacity\s*=\s*([^)]*)/,Pb=/^(none|table(?!-c[ea]).+)/,Qb=new RegExp("^("+T+")(.*)$","i"),Rb=new RegExp("^([+-])=("+T+")","i"),Sb={position:"absolute",visibility:"hidden",display:"block"},Tb={letterSpacing:0,fontWeight:400},Ub=["Webkit","O","Moz","ms"];function Vb(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ub.length;while(e--)if(b=Ub[e]+c,b in a)return b;return d}function Wb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=n._data(d,"olddisplay",Gb(d.nodeName)))):f[g]||(e=V(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Xb(a,b,c){var d=Qb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Yb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Zb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Jb(a),g=l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Kb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ib.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Yb(a,b,c||(g?"border":"content"),d,f)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Kb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=Vb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Rb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]="",i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Vb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Kb(a,b,d)),"normal"===f&&b in Tb&&(f=Tb[b]),""===c||c?(e=parseFloat(f),c===!0||n.isNumeric(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Pb.test(n.css(a,"display"))?n.swap(a,Sb,function(){return Zb(a,b,d)}):Zb(a,b,d):void 0},set:function(a,c,d){var e=d&&Jb(a);return Xb(a,c,d?Yb(a,b,d,l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Ob.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Nb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Nb.test(f)?f.replace(Nb,e):f+" "+e)}}),n.cssHooks.marginRight=Mb(l.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},Kb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){
n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Hb.test(a)||(n.cssHooks[a+b].set=Xb)}),n.fn.extend({css:function(a,b){return W(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Jb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Wb(this,!0)},hide:function(){return Wb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function $b(a,b,c,d,e){return new $b.prototype.init(a,b,c,d,e)}n.Tween=$b,$b.prototype={constructor:$b,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=$b.propHooks[this.prop];return a&&a.get?a.get(this):$b.propHooks._default.get(this)},run:function(a){var b,c=$b.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):$b.propHooks._default.set(this),this}},$b.prototype.init.prototype=$b.prototype,$b.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},$b.propHooks.scrollTop=$b.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=$b.prototype.init,n.fx.step={};var _b,ac,bc=/^(?:toggle|show|hide)$/,cc=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),dc=/queueHooks$/,ec=[jc],fc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=cc.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&cc.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do{h=h||".5",g/=h,n.style(c.elem,a,g+f)}while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function gc(){return setTimeout(function(){_b=void 0}),_b=n.now()}function hc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=U[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function ic(a,b,c){for(var d,e=(fc[b]||[]).concat(fc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function jc(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&V(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k=Gb(a.nodeName),"none"===j&&(j=k),"inline"===j&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==k?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],bc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}if(!n.isEmptyObject(o)){r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=ic(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function kc(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function lc(a,b,c){var d,e,f=0,g=ec.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=_b||gc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:_b||gc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(kc(k,j.opts.specialEasing);g>f;f++)if(d=ec[f].call(j,a,k,j.opts))return d;return n.map(k,ic,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(lc,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],fc[c]=fc[c]||[],fc[c].unshift(b)},prefilter:function(a,b){b?ec.unshift(a):ec.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=lc(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&dc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(hc(b,!0),a,d,e)}}),n.each({slideDown:hc("show"),slideUp:hc("hide"),slideToggle:hc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(_b=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),_b=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ac||(ac=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(ac),ac=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e=z.createElement("div");e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=e.getElementsByTagName("a")[0],c=z.createElement("select"),d=c.appendChild(z.createElement("option")),b=e.getElementsByTagName("input")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==e.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=d.selected,l.enctype=!!z.createElement("form").enctype,c.disabled=!0,l.optDisabled=!d.disabled,b=z.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value,a=b=c=d=e=null}();var mc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(mc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.text(a)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var nc,oc,pc=n.expr.attrHandle,qc=/^(?:checked|selected)$/i,rc=l.getSetAttribute,sc=l.input;n.fn.extend({attr:function(a,b){return W(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===L?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?oc:nc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(F);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?sc&&rc||!qc.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(rc?c:d)},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),oc={set:function(a,b,c){return b===!1?n.removeAttr(a,c):sc&&rc||!qc.test(c)?a.setAttribute(!rc&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=pc[b]||n.find.attr;pc[b]=sc&&rc||!qc.test(b)?function(a,b,d){var e,f;return d||(f=pc[b],pc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,pc[b]=f),e}:function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),sc&&rc||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void(a.defaultValue=b):nc&&nc.set(a,b,c)}}),rc||(nc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},pc.id=pc.name=pc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:nc.set},n.attrHooks.contenteditable={set:function(a,b,c){nc.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var tc=/^(?:input|select|textarea|button|object)$/i,uc=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return W(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({propFix:{for:"htmlFor",class:"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):tc.test(a.nodeName)||uc.test(a.nodeName)&&a.href?0:-1}}}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var vc=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(F)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(F)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(F)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===L||"boolean"===c)&&(this.className&&n._data(this,"__className__",this.className),this.className=this.className||a===!1?"":n._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(vc," ").indexOf(b)>=0)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var wc=n.now(),xc=/\?/,yc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(yc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var zc,Ac,Bc=/#.*$/,Cc=/([?&])_=[^&]*/,Dc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ec=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fc=/^(?:GET|HEAD)$/,Gc=/^\/\//,Hc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ic={},Jc={},Kc="*/".concat("*");try{Ac=location.href}catch(Lc){Ac=z.createElement("a"),Ac.href="",Ac=Ac.href}zc=Hc.exec(Ac.toLowerCase())||[];function Mc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(F)||[];if(n.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nc(a,b,c,d){var e={},f=a===Jc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Oc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Pc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Qc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ac,type:"GET",isLocal:Ec.test(zc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Oc(Oc(a,n.ajaxSettings),b):Oc(n.ajaxSettings,a)},ajaxPrefilter:Mc(Ic),ajaxTransport:Mc(Jc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Dc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||Ac)+"").replace(Bc,"").replace(Gc,zc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(F)||[""],null==k.crossDomain&&(c=Hc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===zc[1]&&c[2]===zc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(zc[3]||("http:"===zc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),Nc(Ic,k,b,v),2===t)return v;h=k.global,h&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Fc.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(xc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Cc.test(e)?e.replace(Cc,"$1_="+wc++):e+(xc.test(e)?"&":"?")+"_="+wc++)),k.ifModified&&(n.lastModified[e]&&v.setRequestHeader("If-Modified-Since",n.lastModified[e]),n.etag[e]&&v.setRequestHeader("If-None-Match",n.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Kc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Nc(Jc,k,b,v)){v.readyState=1,h&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Pc(k,v,c)),u=Qc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(n.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||n.css(a,"display"))},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var Rc=/%20/g,Sc=/\[\]$/,Tc=/\r?\n/g,Uc=/^(?:submit|button|image|reset|file)$/i,Vc=/^(?:input|select|textarea|keygen)/i;function Wc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Sc.test(a)?d(a,e):Wc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Wc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Wc(c,a[c],b,e);return d.join("&").replace(Rc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Vc.test(this.nodeName)&&!Uc.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Tc,"\r\n")}}):{name:b.name,value:c.replace(Tc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$c()||_c()}:$c;var Xc=0,Yc={},Zc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Yc)Yc[a](void 0,!0)}),l.cors=!!Zc&&"withCredentials"in Zc,Zc=l.ajax=!!Zc,Zc&&n.ajaxTransport(function(a){if(!a.crossDomain||l.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Xc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Yc[g],b=void 0,f.onreadystatechange=n.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Yc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function $c(){try{return new a.XMLHttpRequest}catch(b){}}function _c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=z.head||n("head")[0]||z.documentElement;return{send:function(d,e){b=z.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ad=[],bd=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ad.pop()||n.expando+"_"+wc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bd,"$1"+e):b.jsonp!==!1&&(b.url+=(xc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ad.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||z;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var cd=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&cd)return cd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h,a.length),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&n.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var dd=a.document.documentElement;function ed(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?(typeof e.getBoundingClientRect!==L&&(d=e.getBoundingClientRect()),c=ed(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||dd;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||dd})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return W(this,function(a,d,e){var f=ed(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Mb(l.pixelPosition,function(a,c){return c?(c=Kb(a,b),Ib.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return W(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)
},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var fd=a.jQuery,gd=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=gd),b&&a.jQuery===n&&(a.jQuery=fd),n},typeof b===L&&(a.jQuery=a.$=n),n});(function(t,e){function i(e,i){var n,o,a,r=e.nodeName.toLowerCase();return"area"===r?(n=e.parentNode,o=n.name,e.href&&o&&"map"===n.nodeName.toLowerCase()?(a=t("img[usemap=#"+o+"]")[0],!!a&&s(a)):!1):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var n=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var s,n,o=t(this[0]);o.length&&o[0]!==document;){if(s=o.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var s=t.attr(e,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(e,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,s){function n(e,i,s,n){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===s?["Left","Right"]:["Top","Bottom"],a=s.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+s]=function(i){return i===e?r["inner"+s].call(this):this.each(function(){t(this).css(a,n(this,i)+"px")})},t.fn["outer"+s]=function(e,i){return"number"!=typeof e?r["outer"+s].call(this,e):this.each(function(){t(this).css(a,n(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i){var s,n=t.plugins[e];if(n&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(s=0;n.length>s;s++)t.options[n[s][0]]&&n[s][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)}})})(jQuery),function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),s===e)return o[i]===e?null:o[i];o[i]=s}else{if(s===e)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(e){var i,s,n,o,a=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=e.pageX,l=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,h=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("ui-draggable"),n=s.options,o=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var s=t(this).data("ui-draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("ui-draggable"),n=this;t.each(s.sortables,function(){var o=!1,a=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){var s,n,o,a,r,h,l,c,u,d,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=i.offset.left,v=m+p.helperProportions.width,_=i.offset.top,b=_+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)r=p.snapElements[u].left,h=r+p.snapElements[u].width,l=p.snapElements[u].top,c=l+p.snapElements[u].height,r-g>v||m>h+g||l-g>b||_>c+g||!t.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(s=g>=Math.abs(l-b),n=g>=Math.abs(c-_),o=g>=Math.abs(r-v),a=g>=Math.abs(h-m),s&&(i.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h}).left-p.margins.left)),d=s||n||o||a,"outer"!==f.snapMode&&(s=g>=Math.abs(l-_),n=g>=Math.abs(c-b),o=g>=Math.abs(r-m),a=g>=Math.abs(h-v),s&&(i.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(s||n||o||a||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=s||n||o||a||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,s=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(e=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(t){function e(t,e,i){
return t>e&&e+i>t}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];i.length>e;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===s.options.scope&&e.accept.call(e.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(n=!0,!1):undefined}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,i,s){if(!i.offset)return!1;var n,o,a=(t.positionAbs||t.position.absolute).left,r=a+t.helperProportions.width,h=(t.positionAbs||t.position.absolute).top,l=h+t.helperProportions.height,c=i.offset.left,u=c+i.proportions.width,d=i.offset.top,p=d+i.proportions.height;switch(s){case"fit":return a>=c&&u>=r&&h>=d&&p>=l;case"intersect":return a+t.helperProportions.width/2>c&&u>r-t.helperProportions.width/2&&h+t.helperProportions.height/2>d&&p>l-t.helperProportions.height/2;case"pointer":return n=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,o=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(o,d,i.proportions.height)&&e(n,c,i.proportions.width);case"touch":return(h>=d&&p>=h||l>=d&&p>=l||d>h&&l>p)&&(a>=c&&u>=a||r>=c&&u>=r||c>a&&r>u);default:return!1}},t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions.height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions={width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight})}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,o,a=t.ui.intersect(e,this,this.options.tolerance),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===n}),o.length&&(s=t.data(o[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,n,o,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)s=t.trim(e[i]),o="ui-resizable-"+s,n=t("<div class='ui-resizable-handle "+o+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,o,a=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=e(this.helper.css("left")),n=e(this.helper.css("top")),a.containment&&(s+=t(a.containment).scrollLeft()||0,n+=t(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i,s=this.helper,n={},o=this.originalMousePosition,a=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,c=this.size.height,u=e.pageX-o.left||0,d=e.pageY-o.top||0,p=this._change[a];return p?(i=p.apply(this,[e,u,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==c&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&t.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,h=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(a,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,s,n,o,a,r=this.options;a={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=a.minHeight*this.aspectRatio,n=a.minWidth/this.aspectRatio,s=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,e>a.minWidth&&(a.minWidth=e),n>a.minHeight&&(a.minHeight=n),a.maxWidth>s&&(a.maxWidth=s),a.maxHeight>o&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,s=this.size,n=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(s.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(s.height-t.height),t.left=e.left+(s.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,s=this.axis,n=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,a=i(t.width)&&e.minWidth&&e.minWidth>t.width,r=i(t.height)&&e.minHeight&&e.minHeight>t.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(s),u=/nw|ne|n/.test(s);return a&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),a&&c&&(t.left=h-e.minWidth),n&&c&&(t.left=h-e.maxWidth),r&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,n,o=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(n=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],e=0;i.length>e;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);n.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&t.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-a},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,o,a,r,h,l=t(this).data("ui-resizable"),c=l.options,u=l.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(l.containerElement=t(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(p),s=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){s[t]=e(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,o=l.containerSize.height,a=l.containerSize.width,r=t.ui.hasScroll(p,"left")?p.scrollWidth:a,h=t.ui.hasScroll(p)?p.scrollHeight:o,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(e){var i,s,n,o,a=t(this).data("ui-resizable"),r=a.options,h=a.containerOffset,l=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(u=h),l.left<(a._helper?h.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-h.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=r.helper?h.left:0),l.top<(a._helper?h.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-h.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?h.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,i=Math.abs((a._helper?a.offset.left-u.left:a.offset.left-u.left)+a.sizeDiff.width),s=Math.abs((a._helper?a.offset.top-u.top:a.offset.top-h.top)+a.sizeDiff.height),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o&&(i-=a.parentData.left),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),h=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("ui-resizable"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0},h=function(e,s){t(e).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),o={},a=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):t.each(n.alsoResize,function(t,e){h(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size,n=e.originalSize,o=e.originalPosition,a=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,c=Math.round((s.width-n.width)/h)*h,u=Math.round((s.height-n.height)/l)*l,d=n.width+c,p=n.height+u,f=i.maxWidth&&d>i.maxWidth,g=i.maxHeight&&p>i.maxHeight,m=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,m&&(d+=h),v&&(p+=l),f&&(d-=h),g&&(p-=l),/^(se|s|e)$/.test(a)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(a)?(e.size.width=d,e.size.height=p,e.position.top=o.top-u):/^(sw)$/.test(a)?(e.size.width=d,e.size.height=p,e.position.left=o.left-c):(e.size.width=d,e.size.height=p,e.position.top=o.top-u,e.position.left=o.left-c)}})}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):undefined}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,h=e.pageY;return o>r&&(i=r,r=o,o=i),a>h&&(i=h,h=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:h-a}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||o>i.right||i.top>h||a>i.bottom):"fit"===n.tolerance&&(l=i.left>o&&r>i.right&&i.top>a&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):undefined}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-t(document).scrollTop()<a.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-a.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<a.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+a.scrollSpeed)),
e.pageX-t(document).scrollLeft()<a.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-a.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<a.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return n?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&s||"left"===o&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,s,n,o,a=[],r=[],h=this._connectWith();if(h&&e)for(i=h.length-1;i>=0;i--)for(n=t(h[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&r.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(r.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){a.push(this)});return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,o,a,r,h,l,c,u,d,p,f=null,g=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],g=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(a=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],o=this.items.length-1;o>=0;o--)t.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[o][l]-c)&&(d=!0,u+=this.items[o][l]),a>Math.abs(u-c)&&(a=Math.abs(u-c),r=this.items[o],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[g].element,!0),this._trigger("change",s,this._uiHash()),this.containers[g]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,o){var a,r=o.re.exec(i),h=r&&o.parse(r),l=o.space||"rgba";return h?(a=s[l](h),s[c[l].cache]=a[c[l].cache],n=s._rgba=a._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),s):o[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,a,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(a),a=e);var u=this,d=t.type(n),p=this._rgba=[];return a!==e&&(n=[n,a,r,h],d="array"),"string"===d?this.parse(s(n)||o._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var o=s.cache;f(s.props,function(t,e){if(!u[o]&&s.to){if("alpha"===t||null==n[t])return;u[o]=s.to(u._rgba)}u[o][e.idx]=i(n[t],e,!0)}),u[o]&&0>t.inArray(null,u[o].slice(0,3))&&(u[o][3]=1,s.from&&(u._rgba=s.from(u[o])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,o){var a,r=i[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===a[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),o=c[n],a=0===this.alpha()?l("transparent"):this,r=a[o.cache]||o.to(a._rgba),h=r.slice();return s=s[o.cache],f(o.props,function(t,n){var o=n.idx,a=r[o],l=s[o],c=u[n.type]||{};null!==l&&(null===a?h[o]=l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),h[o]=i((l-a)*e+a,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(s,n,o),h=Math.min(s,n,o),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-o)/l+360:n===r?60*(o-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==a?1:a]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],o=t[3],a=.5>=s?s*(1+i):s+i-s*i,r=2*s-a;return[Math.round(255*n(r,a,e+1/3)),Math.round(255*n(r,a,e)),Math.round(255*n(r,a,e-1/3)),o]},f(c,function(s,n){var o=n.props,a=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[a]&&(this[a]=h(this._rgba)),s===e)return this[a].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[a].slice();return f(o,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[a]=d,n):l(d)},f(o,function(e,i){l.fn[e]||(l.fn[e]=function(n){var o,a=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===a?c:("function"===a&&(n=n.call(this,c),a=t.type(n)),null==n&&i.empty?this:("string"===a&&(o=r.exec(n),o&&(n=c+parseFloat(o[2])*("+"===o[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,r="";if("transparent"!==n&&("string"!==t.type(n)||(o=s(n)))){if(n=l(o||n),!d.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&a&&a.style;)try{r=t.css(a,"backgroundColor"),a=a.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(o[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(o[i]=n[i]);return o}function s(e,i){var s,n,a={};for(s in i)n=i[s],e[s]!==n&&(o[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(a[s]=n));return a}var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,o,a,r){var h=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr("class")||"",l=h.children?a.find("*").addBack():a;l=l.map(function(){var e=t(this);return{el:e,start:i(this)}}),o=function(){t.each(n,function(t,i){e[i]&&a[i+"Class"](e[i])})},o(),l=l.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),a.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,o){return s?t.effects.animateClass.call(this,{add:i},s,n,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,o,a,r){return"boolean"==typeof n||n===e?o?t.effects.animateClass.call(this,n?{add:s}:{remove:s},o,a,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,o,a)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,o){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,o)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,o;for(o=0;s.length>o;o++)null!==s[o]&&(n=t.data(i+s[o]),n===e&&(n=""),t.css(s[o],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(s),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(n[i]=o[0]*s+o[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(o)&&o.call(n[0]),t.isFunction(e)&&e()}var n=t(this),o=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):a.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,o=i.queue,a=t.effects.effect[i.effect];return t.fx.off||!a?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(e):this.queue(o||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t){var e=0,i={},s={}
;i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?(this._activate(e),undefined):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e),undefined)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:o=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[s-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,s=this.options,n=s.heightStyle,o=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e);this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),s=i.attr("id"),n=i.next(),o=n.attr("id");s||(s=a+"-header-"+e,i.attr("id",s)),o||(o=a+"-panel-"+e,n.attr("id",o)),i.attr("aria-controls",o),n.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(s.event),"fill"===n?(i=o.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(i=0,this.headers.next().each(function(){i=Math.max(i,t(this).css("height","").height())}).height(i))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n[0]===s[0],a=o&&i.collapsible,r=a?t():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:a?t():n,newPanel:r};e.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",e,l)===!1||(i.active=a?!1:this.headers.index(n),this.active=o?t():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-expanded":"false","aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,n){var o,a,r,h=this,l=0,c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){h._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(a=d),a=a||d.easing||u.easing,r=r||d.duration||u.duration,e.length?t.length?(o=t.show().outerHeight(),e.animate(i,{duration:r,easing:a,step:function(t,e){e.now=Math.round(t)}}),t.hide().animate(s,{duration:r,easing:a,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?l+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(o-e.outerHeight()-l),l=0)}}),undefined):e.animate(i,r,a,p):t.animate(s,r,a,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,a="input"===n;this.isMultiLine=o?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,i=!0,undefined;e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:e=!0,this._keyEvent("next",n);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),undefined;if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,t.preventDefault(),undefined):(this._searchTimeout(t),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(t),this._change(t),undefined)}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(s){s.target===e.element[0]||s.target===i||t.contains(i,s.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)}),undefined;var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:s})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):undefined},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,i=++e;return function(s){i===e&&t.__response(s),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[t](e),undefined):(this.search(null,e),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t){var e,i,s,n,o="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||n?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var e=a.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,a.document.one("mouseup",function(){e=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:(t(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(e){return r.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+a+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,o=[];s.primary||s.secondary?(this.options.text&&o.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(o.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(o.inline?e.parent()[0]:o.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function n(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var o,a="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return n(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,a,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,a,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,o,r){var h,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],a,p)),n(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],a,p),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,a);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,a),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,a)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,o){var a,r,h,l,c=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?t.extend({},t.datepicker._defaults):c?"all"===s?t.extend({},c.settings):this._get(c,s):null:(a=s||{},"string"==typeof s&&(a={},a[s]=o),c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),n(c.settings,a),null!==h&&a.dateFormat!==e&&a.minDate===e&&(c.settings.minDate=this._formatDate(c,h)),
null!==l&&a.dateFormat!==e&&a.maxDate===e&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in a&&(a.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,"onSelect"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var s,n,o=t.datepicker._getInst(i.target);return t.datepicker._get(o,"constrainInput")?(s=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!s||s.indexOf(n)>-1):e},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,s,o,a,r,h,l;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(i,"beforeShow"),o=s?s.apply(e,[e,i]):{},o!==!1&&(n(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),a=!1,t(e).parents().each(function(){return a|="fixed"===t(this).css("position"),!a}),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),r=t.datepicker._checkOffset(i,r,a),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":a?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(e),n=s[1],a=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+o>l&&l>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,r=this._curInst;!r||e&&r!==t.data(e,a)||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),n=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),s,n):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(r,"onClose"),o&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===s?this._get(o,"showCurrentAtPos"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===s?"Month":"Year")]=o["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,"onSelect"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,s,n){if(null==i||null==s)throw"Invalid arguments";if(s="object"==typeof s?""+s:s+"",""===s)return null;var o,a,r,h,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,g=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,v=-1,_=-1,b=-1,y=!1,w=function(t){var e=i.length>o+1&&i.charAt(o+1)===t;return e&&o++,e},k=function(t){var e=w(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{1,"+i+"}"),o=s.substring(l).match(n);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},x=function(i,n,o){var a=-1,r=t.map(w(i)?o:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(r,function(t,i){var n=i[1];return s.substr(l,n.length).toLowerCase()===n.toLowerCase()?(a=i[0],l+=n.length,!1):e}),-1!==a)return a+1;throw"Unknown name at position "+l},D=function(){if(s.charAt(l)!==i.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;i.length>o;o++)if(y)"'"!==i.charAt(o)||w("'")?D():y=!1;else switch(i.charAt(o)){case"d":_=k("d");break;case"D":x("D",d,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=x("M",f,g);break;case"y":m=k("y");break;case"@":h=new Date(k("@")),m=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"!":h=new Date((k("!")-this._ticksTo1970)/1e4),m=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"'":w("'")?D():y=!0;break;default:D()}if(s.length>l&&(r=s.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),b>-1)for(v=1,_=b;;){if(a=this._getDaysInMonth(m,v-1),a>=_)break;v++,_-=a}if(h=this._daylightSavingAdjust(new Date(m,v-1,_)),h.getFullYear()!==m||h.getMonth()+1!==v||h.getDate()!==_)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,o);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=h("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}l=h.exec(i)}return new Date(o,a,r)},a=null==i||""===i?s:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,h,l,c,u,d,p,f,g,m,v,_,b,y,w,k,x,D,C,I,P,T,M,S,z,A,H,E,N,W,O,F,R,L=new Date,j=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),Q=this._get(t,"stepMonths"),X=1!==U[0]||1!==U[1],$=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-q,te=t.drawYear;if(0>Z&&(Z+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-Q,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+Q,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?$:j,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;U[0]>k;k++){for(x="",this.maxRows=4,D=0;U[1]>D;D++){if(C=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),I=" ui-corner-all",P="",X){if(P+="<div class='ui-datepicker-group",U[1]>1)switch(D){case 0:P+=" ui-datepicker-group-first",I=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:P+=" ui-datepicker-group-last",I=" ui-corner-"+(Y?"left":"right");break;default:P+=" ui-datepicker-group-middle",I=""}P+="'>"}for(P+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===k?Y?o:s:"")+(/all|right/.test(I)&&0===k?Y?s:o:"")+this._generateMonthYearHeader(t,Z,te,G,J,k>0||D>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",T=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)M=(w+c)%7,T+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[M]+"'>"+p[M]+"</span></th>";for(P+=T+"</tr></thead><tbody>",S=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),z=(this._getFirstDayOfMonth(te,Z)-c+7)%7,A=Math.ceil((z+S)/7),H=X?this.maxRows>A?this.maxRows:A:A,this.maxRows=H,E=this._daylightSavingAdjust(new Date(te,Z,1-z)),N=0;H>N;N++){for(P+="<tr>",W=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(E)+"</td>":"",w=0;7>w;w++)O=m?m.apply(t.input?t.input[0]:null,[E]):[!0,""],F=E.getMonth()!==Z,R=F&&!_||!O[0]||G&&G>E||J&&E>J,W+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(E.getTime()===C.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===E.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+O[1]+(E.getTime()===$.getTime()?" "+this._currentClass:"")+(E.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":R?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+(E.getTime()===j.getTime()?" ui-state-highlight":"")+(E.getTime()===$.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+E.getDate()+"</a>")+"</td>",E.setDate(E.getDate()+1),E=this._daylightSavingAdjust(E);P+=W+"</tr>"}Z++,Z>11&&(Z=0,te++),P+="</tbody></table>"+(X?"</div>"+(U[0]>0&&D===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=P}y+=x}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h,l,c,u,d,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(_||(b+=y+(!o&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!o&&m&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"}(jQuery),function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),undefined;if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(n.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),
this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(t.each(i,function(i,s){var n,o;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(e.element[0],arguments)},o={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,o){s.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,o=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(s,n){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,o){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(o))}}).css("position",o)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(s){var n=this,o=!1,a={};t.each(s,function(t,s){n._setOption(t,s),t in e&&(o=!0),t in i&&(a[t]=s)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(t,e){var i,s,n=this.uiDialog;"dialogClass"===t&&n.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=n.is(":data(ui-draggable)"),i&&!e&&n.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(s=n.is(":data(ui-resizable)"),s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),i={my:s[0]+(0>n[0]?n[0]:"+"+n[0])+" "+s[1]+(0>n[1]?n[1]:"+"+n[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var o,a,r,h=t(this),l=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(h,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",g=i.test(u),m={},v="show"===c;h.parent().is(".ui-effects-wrapper")?t.effects.save(h.parent(),l):t.effects.save(h,l),h.show(),o=t.effects.createWrapper(h).css({overflow:"hidden"}),a=o[p](),r=parseFloat(o.css(f))||0,m[p]=v?a:0,g||(h.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),m[f]=v?r:a+r),v&&(o.css(p,0),g||o.css(f,r+a)),o.animate(m,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&h.hide(),t.effects.restore(h,l),t.effects.removeWrapper(h),n()}})}}(jQuery),function(t){t.effects.effect.bounce=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,e.mode||"effect"),l="hide"===h,c="show"===h,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||l?1:0),g=e.duration/f,m=e.easing,v="up"===u||"down"===u?"top":"left",_="up"===u||"left"===u,b=a.queue(),y=b.length;for((c||l)&&r.push("opacity"),t.effects.save(a,r),a.show(),t.effects.createWrapper(a),d||(d=a["top"===v?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[v]=0,a.css("opacity",0).css(v,_?2*-d:2*d).animate(o,g,m)),l&&(d/=Math.pow(2,p-1)),o={},o[v]=0,s=0;p>s;s++)n={},n[v]=(_?"-=":"+=")+d,a.animate(n,g,m).animate(o,g,m),d=l?2*d:d/2;l&&(n={opacity:0},n[v]=(_?"-=":"+=")+d,a.animate(n,g,m)),a.queue(function(){l&&a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),a.dequeue()}}(jQuery),function(t){t.effects.effect.clip=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,e.mode||"hide"),l="show"===h,c=e.direction||"vertical",u="vertical"===c,d=u?"height":"width",p=u?"top":"left",f={};t.effects.save(a,r),a.show(),s=t.effects.createWrapper(a).css({overflow:"hidden"}),n="IMG"===a[0].tagName?s:a,o=n[d](),l&&(n.css(d,0),n.css(p,o/2)),f[d]=l?o:0,f[p]=l?0:o/2,n.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){l||a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.drop=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","opacity","height","width"],a=t.effects.setMode(n,e.mode||"hide"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h?"pos":"neg",u={opacity:r?1:0};t.effects.save(n,o),n.show(),t.effects.createWrapper(n),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===c?-s:s),u[l]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.explode=function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),g||p.hide(),i()}var o,a,r,h,l,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),_=Math.ceil(p.outerHeight()/u),b=[];for(o=0;u>o;o++)for(h=m.top+o*_,c=o-(u-1)/2,a=0;d>a;a++)r=m.left+a*v,l=a-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-o*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:r+(g?l*v:0),top:h+(g?c*_:0),opacity:g?0:1}).animate({left:r+(g?0:l*v),top:h+(g?0:c*_),opacity:g?1:0},e.duration||500,e.easing,s)}}(jQuery),function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t){t.effects.effect.fold=function(e,i){var s,n,o=t(this),a=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(o,e.mode||"hide"),h="show"===r,l="hide"===r,c=e.size||15,u=/([0-9]+)%/.exec(c),d=!!e.horizFirst,p=h!==d,f=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(o,a),o.show(),s=t.effects.createWrapper(o).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],u&&(c=parseInt(u[1],10)/100*n[l?0:1]),h&&s.css(d?{height:0,width:c}:{height:c,width:0}),m[f[0]]=h?n[0]:c,v[f[1]]=h?n[1]:0,s.animate(m,g,e.easing).animate(v,g,e.easing,function(){l&&o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()})}}(jQuery),function(t){t.effects.effect.highlight=function(e,i){var s=t(this),n=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(s,e.mode||"show"),a={backgroundColor:s.css("backgroundColor")};"hide"===o&&(a.opacity=0),t.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&s.hide(),t.effects.restore(s,n),i()}})}}(jQuery),function(t){t.effects.effect.pulsate=function(e,i){var s,n=t(this),o=t.effects.setMode(n,e.mode||"show"),a="show"===o,r="hide"===o,h=a||"hide"===o,l=2*(e.times||5)+(h?1:0),c=e.duration/l,u=0,d=n.queue(),p=d.length;for((a||!n.is(":visible"))&&(n.css("opacity",0).show(),u=1),s=1;l>s;s++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,l+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),o="hide"===n,a=parseInt(e.percent,10)||150,r=a/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:o?a:100,from:o?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),o=t.effects.setMode(s,e.mode||"effect"),a=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),r=e.direction||"both",h=e.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?a/100:1,x:"vertical"!==r?a/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==o&&(n.origin=h||["middle","center"],n.restore=!0),n.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},n.fade&&("show"===o&&(n.from.opacity=0,n.to.opacity=1),"hide"===o&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(a,e.mode||"effect"),f=e.restore||"effect"!==p,g=e.scale||"both",m=e.origin||["middle","center"],v=a.css("position"),_=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show(),s={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===e.mode&&"show"===p?(a.from=e.to||b,a.to=e.from||s):(a.from=e.from||("show"===p?b:s),a.to=e.to||("hide"===p?b:s)),o={from:{y:a.from.height/s.height,x:a.from.width/s.width},to:{y:a.to.height/s.height,x:a.to.width/s.width}},("box"===g||"both"===g)&&(o.from.y!==o.to.y&&(_=_.concat(u),a.from=t.effects.setTransition(a,u,o.from.y,a.from),a.to=t.effects.setTransition(a,u,o.to.y,a.to)),o.from.x!==o.to.x&&(_=_.concat(d),a.from=t.effects.setTransition(a,d,o.from.x,a.from),a.to=t.effects.setTransition(a,d,o.to.x,a.to))),("content"===g||"both"===g)&&o.from.y!==o.to.y&&(_=_.concat(c).concat(l),a.from=t.effects.setTransition(a,c,o.from.y,a.from),a.to=t.effects.setTransition(a,c,o.to.y,a.to)),t.effects.save(a,_),a.show(),t.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),m&&(n=t.effects.getBaseline(m,s),a.from.top=(s.outerHeight-a.outerHeight())*n.y,a.from.left=(s.outerWidth-a.outerWidth())*n.x,a.to.top=(s.outerHeight-a.to.outerHeight)*n.y,a.to.left=(s.outerWidth-a.to.outerWidth)*n.x),a.css(a.from),("content"===g||"both"===g)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=r.concat(u).concat(d),a.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,l),i.from={height:s.height*o.from.y,width:s.width*o.from.x,outerHeight:s.outerHeight*o.from.y,outerWidth:s.outerWidth*o.from.x},i.to={height:s.height*o.to.y,width:s.width*o.to.x,outerHeight:s.height*o.to.y,outerWidth:s.width*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,u,o.from.y,i.from),i.to=t.effects.setTransition(i,u,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,d,o.from.x,i.from),i.to=t.effects.setTransition(i,d,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,l)})})),a.animate(a.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===p&&a.hide(),t.effects.restore(a,_),f||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):t.each(["top","left"],function(t,e){a.css(e,function(e,i){var s=parseInt(i,10),n=t?a.to.left:a.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.shake=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(n,e.mode||"effect"),r=e.direction||"left",h=e.distance||20,l=e.times||3,c=2*l+1,u=Math.round(e.duration/c),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},g={},m={},v=n.queue(),_=v.length;for(t.effects.save(n,o),n.show(),t.effects.createWrapper(n),f[d]=(p?"-=":"+=")+h,g[d]=(p?"+=":"-=")+2*h,m[d]=(p?"-=":"+=")+2*h,n.animate(f,u,e.easing),s=1;l>s;s++)n.animate(g,u,e.easing).animate(m,u,e.easing);n.animate(g,u,e.easing).animate(f,u/2,e.easing).queue(function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,c+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","width","height"],a=t.effects.setMode(n,e.mode||"show"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u={};t.effects.save(n,o),n.show(),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,c?isNaN(s)?"-"+s:-s:s),u[l]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),o="fixed"===n.css("position"),a=t("body"),r=o?a.scrollTop():0,h=o?a.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,o,a,r,h=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:h=!1,n=this.previousFilter||"",o=String.fromCharCode(e.keyCode),a=!1,clearTimeout(this.filterTimer),o===n?a=!0:o=n+o,r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=a&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(o=String.fromCharCode(e.keyCode),r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.height(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(e),undefined)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,a=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var i,s,n=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];return t("body").append(n),i=a.offsetWidth,n.css("overflow","scroll"),s=a.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),o=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,p,g,m,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),k=(e.collision||"flip").split(" "),x={};return _=n(b),b[0].preventDefault&&(e.at="left top"),p=_.width,g=_.height,m=_.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),o=i(x.at,p,g),v.left+=o[0],v.top+=o[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,C=d+_+s(this,"marginBottom")+w.height,I=t.extend({},v),P=i(x.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?I.left-=u:"center"===e.my[0]&&(I.left-=u/2),"bottom"===e.my[1]?I.top-=d:"center"===e.my[1]&&(I.top-=d/2),I.left+=P[0],I.top+=P[1],t.support.offsetFractions||(I.left=h(I.left),I.top=h(I.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,s){t.ui.position[k[i]]&&t.ui.position[k[i]][s](I,{targetWidth:p,targetHeight:g,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:C,offset:[o[0]+P[0],o[1]+P[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=m.left-I.left,s=i+p-u,n=m.top-I.top,o=n+g-d,h={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:c,left:I.left,top:I.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>o?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>g&&g>r(n+o)&&(h.vertical="middle"),h.important=a(r(i),r(s))>a(r(n),r(o))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(I,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,o=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-o-n;e.collisionWidth>o?h>0&&0>=l?(i=t.left+h+e.collisionWidth-o-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+o-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=a(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-o-n;e.collisionHeight>o?h>0&&0>=l?(i=t.top+h+e.collisionHeight-o-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+o-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=a(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,a=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-a-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-a-o,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,a=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-a-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-a-o,
t.top+p+f+g>c&&(0>s||r(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-h,t.top+p+f+g>u&&(i>0||u>r(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(a?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)e.style[o]=s[o];e.appendChild(r),i=a||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),e)},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)a.push(o);this.handles=n.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,r,h,l,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(n>i||n===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(n=i,o=t(this),a=e)}),r=this._start(e,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),h=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,o;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),o!==!1&&this.values(e,i,!0))):i!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:i}),o!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),c["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](c,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?100*((s-n)/(o-n)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,o,a,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(a=this.options.step,n=o=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;o=this._trimAlignValue(n+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;o=this._trimAlignValue(n-a)}this._slide(i,r,o)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);void 0!==n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t),void 0)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,this.element.val(this._format(i)),void 0}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?(e(this._value).call(this,t),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function i(){return++n}function s(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var n=0,o=/#.*$/;t.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(s,o){return t(o).attr("aria-controls")===n?(i=s,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(s),o=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var o,a,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),c=l.attr("aria-controls");s(n)?(o=n.hash,a=e.element.find(e._sanitizeSelector(o))):(r=e._tabId(l),o="#"+r,a=e.element.find(o),a.length||(a=e._createPanel(r),a.insertAfter(e.panels[i-1]||e.tablist)),a.attr("aria-live","polite")),a.length&&(e.panels=e.panels.add(a)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":o.substring(1),"aria-labelledby":h}),a.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)e===!0||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n.closest("li"),a=o[0]===s[0],r=a&&i.collapsible,h=r?t():this._getPanelForTab(o),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():o,newPanel:h};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=r?!1:this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){function s(){o.running=!1,o._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,s):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,o=this.tabs.eq(e),a=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),h={tab:o,panel:r};s(a[0])||(this.xhr=t.ajax(this._ajaxSettings(a,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,o){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),
this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),this.options[e]=i,void 0):(this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e)}),void 0)},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s?this._open(e,t,s):(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=o),this._open(e,t,i)})}),i&&this._open(e,t,i),void 0)},_open:function(i,s,n){function o(t){l.of=t,a.is(":hidden")||a.position(l)}var a,r,h,l=t.extend({},this.options.position);if(n){if(a=this._find(s),a.length)return a.find(".ui-tooltip-content").html(n),void 0;s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),a=this._tooltip(s),e(s,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):a.position(t.extend({of:s},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){a.is(":visible")&&(o(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:a}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(a)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(e){var s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),o.stop(!0),this._hide(o,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:o}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+s++,n=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=e,n},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})}(jQuery);define("jqueryui",["jquery"],function(){});(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);(function(t,e){if(typeof define==="function"&&define.amd){define("backbone",["underscore","jquery","exports"],function(i,r,s){t.Backbone=e(t,s,i,r)})}else if(typeof exports!=="undefined"){var i=require("underscore");e(t,exports,i)}else{t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}})(this,function(t,e,i,r){var s=t.Backbone;var n=[];var a=n.push;var o=n.slice;var h=n.splice;e.VERSION="1.1.2";e.$=r;e.noConflict=function(){t.Backbone=s;return this};e.emulateHTTP=false;e.emulateJSON=false;var u=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);r.push({callback:e,context:i,ctx:i||this});return this},once:function(t,e,r){if(!c(this,"once",t,[e,r])||!e)return this;var s=this;var n=i.once(function(){s.off(t,n);e.apply(this,arguments)});n._callback=e;return this.on(t,n,r)},off:function(t,e,r){var s,n,a,o,h,u,l,f;if(!this._events||!c(this,"off",t,[e,r]))return this;if(!t&&!e&&!r){this._events=void 0;return this}o=t?[t]:i.keys(this._events);for(h=0,u=o.length;h<u;h++){t=o[h];if(a=this._events[t]){this._events[t]=s=[];if(e||r){for(l=0,f=a.length;l<f;l++){n=a[l];if(e&&e!==n.callback&&e!==n.callback._callback||r&&r!==n.context){s.push(n)}}}if(!s.length)delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t];var r=this._events.all;if(i)f(i,e);if(r)f(r,arguments);return this},stopListening:function(t,e,r){var s=this._listeningTo;if(!s)return this;var n=!e&&!r;if(!r&&typeof e==="object")r=this;if(t)(s={})[t._listenId]=t;for(var a in s){t=s[a];t.off(e,r,this);if(n||i.isEmpty(t._events))delete this._listeningTo[a]}return this}};var l=/\s+/;var c=function(t,e,i,r){if(!i)return true;if(typeof i==="object"){for(var s in i){t[e].apply(t,[s,i[s]].concat(r))}return false}if(l.test(i)){var n=i.split(l);for(var a=0,o=n.length;a<o;a++){t[e].apply(t,[n[a]].concat(r))}return false}return true};var f=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],o=e[2];switch(e.length){case 0:while(++r<s)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<s)(i=t[r]).callback.call(i.ctx,n);return;case 2:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a,o);return;default:while(++r<s)(i=t[r]).callback.apply(i.ctx,e);return}};var d={listenTo:"on",listenToOnce:"once"};i.each(d,function(t,e){u[e]=function(e,r,s){var n=this._listeningTo||(this._listeningTo={});var a=e._listenId||(e._listenId=i.uniqueId("l"));n[a]=e;if(!s&&typeof r==="object")s=this;e[t](r,s,this);return this}});u.bind=u.on;u.unbind=u.off;i.extend(e,u);var p=e.Model=function(t,e){var r=t||{};e||(e={});this.cid=i.uniqueId("c");this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)r=this.parse(r,e)||{};r=i.defaults({},r,i.result(this,"defaults"));this.set(r,e);this.changed={};this.initialize.apply(this,arguments)};i.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return this.get(t)!=null},set:function(t,e,r){var s,n,a,o,h,u,l,c;if(t==null)return this;if(typeof t==="object"){n=t;r=e}else{(n={})[t]=e}r||(r={});if(!this._validate(n,r))return false;a=r.unset;h=r.silent;o=[];u=this._changing;this._changing=true;if(!u){this._previousAttributes=i.clone(this.attributes);this.changed={}}c=this.attributes,l=this._previousAttributes;if(this.idAttribute in n)this.id=n[this.idAttribute];for(s in n){e=n[s];if(!i.isEqual(c[s],e))o.push(s);if(!i.isEqual(l[s],e)){this.changed[s]=e}else{delete this.changed[s]}a?delete c[s]:c[s]=e}if(!h){if(o.length)this._pending=r;for(var f=0,d=o.length;f<d;f++){this.trigger("change:"+o[f],this,c[o[f]],r)}}if(u)return this;if(!h){while(this._pending){r=this._pending;this._pending=false;this.trigger("change",this,r)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:true}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,i.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!i.isEmpty(this.changed);return i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):false;var e,r=false;var s=this._changing?this._previousAttributes:this.attributes;for(var n in t){if(i.isEqual(s[n],e=t[n]))continue;(r||(r={}))[n]=e}return r},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{};if(t.parse===void 0)t.parse=true;var e=this;var r=t.success;t.success=function(i){if(!e.set(e.parse(i,t),t))return false;if(r)r(e,i,t);e.trigger("sync",e,i,t)};q(this,t);return this.sync("read",this,t)},save:function(t,e,r){var s,n,a,o=this.attributes;if(t==null||typeof t==="object"){s=t;r=e}else{(s={})[t]=e}r=i.extend({validate:true},r);if(s&&!r.wait){if(!this.set(s,r))return false}else{if(!this._validate(s,r))return false}if(s&&r.wait){this.attributes=i.extend({},o,s)}if(r.parse===void 0)r.parse=true;var h=this;var u=r.success;r.success=function(t){h.attributes=o;var e=h.parse(t,r);if(r.wait)e=i.extend(s||{},e);if(i.isObject(e)&&!h.set(e,r)){return false}if(u)u(h,t,r);h.trigger("sync",h,t,r)};q(this,r);n=this.isNew()?"create":r.patch?"patch":"update";if(n==="patch")r.attrs=s;a=this.sync(n,this,r);if(s&&r.wait)this.attributes=o;return a},destroy:function(t){t=t?i.clone(t):{};var e=this;var r=t.success;var s=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(i){if(t.wait||e.isNew())s();if(r)r(e,i,t);if(!e.isNew())e.trigger("sync",e,i,t)};if(this.isNew()){t.success();return false}q(this,t);var n=this.sync("delete",this,t);if(!t.wait)s();return n},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||M();if(this.isNew())return t;return t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=i.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;if(!r)return true;this.trigger("invalid",this,r,i.extend(e,{validationError:r}));return false}});var v=["keys","values","pairs","invert","pick","omit"];i.each(v,function(t){p.prototype[t]=function(){var e=o.call(arguments);e.unshift(this.attributes);return i[t].apply(i,e)}});var g=e.Collection=function(t,e){e||(e={});if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,i.extend({silent:true},e))};var m={add:true,remove:true,merge:true};var y={add:true,remove:false};i.extend(g.prototype,u,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:false},e,y))},remove:function(t,e){var r=!i.isArray(t);t=r?[t]:i.clone(t);e||(e={});var s,n,a,o;for(s=0,n=t.length;s<n;s++){o=t[s]=this.get(t[s]);if(!o)continue;delete this._byId[o.id];delete this._byId[o.cid];a=this.indexOf(o);this.models.splice(a,1);this.length--;if(!e.silent){e.index=a;o.trigger("remove",o,this,e)}this._removeReference(o,e)}return r?t[0]:t},set:function(t,e){e=i.defaults({},e,m);if(e.parse)t=this.parse(t,e);var r=!i.isArray(t);t=r?t?[t]:[]:i.clone(t);var s,n,a,o,h,u,l;var c=e.at;var f=this.model;var d=this.comparator&&c==null&&e.sort!==false;var v=i.isString(this.comparator)?this.comparator:null;var g=[],y=[],_={};var b=e.add,w=e.merge,x=e.remove;var E=!d&&b&&x?[]:false;for(s=0,n=t.length;s<n;s++){h=t[s]||{};if(h instanceof p){a=o=h}else{a=h[f.prototype.idAttribute||"id"]}if(u=this.get(a)){if(x)_[u.cid]=true;if(w){h=h===o?o.attributes:h;if(e.parse)h=u.parse(h,e);u.set(h,e);if(d&&!l&&u.hasChanged(v))l=true}t[s]=u}else if(b){o=t[s]=this._prepareModel(h,e);if(!o)continue;g.push(o);this._addReference(o,e)}o=u||o;if(E&&(o.isNew()||!_[o.id]))E.push(o);_[o.id]=true}if(x){for(s=0,n=this.length;s<n;++s){if(!_[(o=this.models[s]).cid])y.push(o)}if(y.length)this.remove(y,e)}if(g.length||E&&E.length){if(d)l=true;this.length+=g.length;if(c!=null){for(s=0,n=g.length;s<n;s++){this.models.splice(c+s,0,g[s])}}else{if(E)this.models.length=0;var k=E||g;for(s=0,n=k.length;s<n;s++){this.models.push(k[s])}}}if(l)this.sort({silent:true});if(!e.silent){for(s=0,n=g.length;s<n;s++){(o=g[s]).trigger("add",o,this,e)}if(l||E&&E.length)this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,s=this.models.length;r<s;r++){this._removeReference(this.models[r],e)}e.previousModels=this.models;this._reset();t=this.add(t,i.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);this.remove(e,t);return e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);this.remove(e,t);return e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){if(i.isEmpty(t))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var i in t){if(t[i]!==e.get(i))return false}return true})},findWhere:function(t){return this.where(t,true)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");t||(t={});if(i.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(i.bind(this.comparator,this))}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{};if(t.parse===void 0)t.parse=true;var e=t.success;var r=this;t.success=function(i){var s=t.reset?"reset":"set";r[s](i,t);if(e)e(r,i,t);r.trigger("sync",r,i,t)};q(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};if(!(t=this._prepareModel(t,e)))return false;if(!e.wait)this.add(t,e);var r=this;var s=e.success;e.success=function(t,i){if(e.wait)r.add(t,e);if(s)s(t,i,e)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?i.clone(e):{};e.collection=this;var r=new this.model(t,e);if(!r.validationError)return r;this.trigger("invalid",this,r.validationError,e);return false},_addReference:function(t,e){this._byId[t.cid]=t;if(t.id!=null)this._byId[t.id]=t;if(!t.collection)t.collection=this;t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(e&&t==="change:"+e.idAttribute){delete this._byId[e.previous(e.idAttribute)];if(e.id!=null)this._byId[e.id]=e}this.trigger.apply(this,arguments)}})
;var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(_,function(t){g.prototype[t]=function(){var e=o.call(arguments);e.unshift(this.models);return i[t].apply(i,e)}});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(t){g.prototype[t]=function(e,r){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,r)}});var w=e.View=function(t){this.cid=i.uniqueId("view");t||(t={});i.extend(this,i.pick(t,E));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var x=/^(\S+)\s*(.*)$/;var E=["model","collection","el","id","attributes","className","tagName","events"];i.extend(w.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(t,i){if(this.$el)this.undelegateEvents();this.$el=t instanceof e.$?t:e.$(t);this.el=this.$el[0];if(i!==false)this.delegateEvents();return this},delegateEvents:function(t){if(!(t||(t=i.result(this,"events"))))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(!i.isFunction(r))r=this[t[e]];if(!r)continue;var s=e.match(x);var n=s[1],a=s[2];r=i.bind(r,this);n+=".delegateEvents"+this.cid;if(a===""){this.$el.on(n,r)}else{this.$el.on(n,a,r)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var t=i.extend({},i.result(this,"attributes"));if(this.id)t.id=i.result(this,"id");if(this.className)t["class"]=i.result(this,"className");var r=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(r,false)}else{this.setElement(i.result(this,"el"),false)}}});e.sync=function(t,r,s){var n=T[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:n,dataType:"json"};if(!s.url){a.url=i.result(r,"url")||M()}if(s.data==null&&r&&(t==="create"||t==="update"||t==="patch")){a.contentType="application/json";a.data=JSON.stringify(s.attrs||r.toJSON(s))}if(s.emulateJSON){a.contentType="application/x-www-form-urlencoded";a.data=a.data?{model:a.data}:{}}if(s.emulateHTTP&&(n==="PUT"||n==="DELETE"||n==="PATCH")){a.type="POST";if(s.emulateJSON)a.data._method=n;var o=s.beforeSend;s.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",n);if(o)return o.apply(this,arguments)}}if(a.type!=="GET"&&!s.emulateJSON){a.processData=false}if(a.type==="PATCH"&&k){a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var h=s.xhr=e.ajax(i.extend(a,s));r.trigger("request",r,h,s);return h};var k=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var T={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var $=e.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var S=/\((.*?)\)/g;var H=/(\(\?)?:\w+/g;var A=/\*\w+/g;var I=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend($.prototype,u,{initialize:function(){},route:function(t,r,s){if(!i.isRegExp(t))t=this._routeToRegExp(t);if(i.isFunction(r)){s=r;r=""}if(!s)s=this[r];var n=this;e.history.route(t,function(i){var a=n._extractParameters(t,i);n.execute(s,a);n.trigger.apply(n,["route:"+r].concat(a));n.trigger("route",r,a);e.history.trigger("route",n,r,a)});return this},execute:function(t,e){if(t)t.apply(this,e)},navigate:function(t,i){e.history.navigate(t,i);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=i.result(this,"routes");var t,e=i.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(I,"\\$&").replace(S,"(?:$1)?").replace(H,function(t,e){return e?t:"([^/?]+)"}).replace(A,"([^?]*?)");return new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return i.map(r,function(t,e){if(e===r.length-1)return t||null;return t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[];i.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var R=/^[#\/]|\s+$/g;var O=/^\/+|\/+$/g;var P=/msie [\w.]+/;var C=/\/$/;var j=/#.*$/;N.started=false;i.extend(N.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(t==null){if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(C,"");if(!t.indexOf(i))t=t.slice(i.length)}else{t=this.getHash()}}return t.replace(R,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=true;this.options=i.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment();var s=document.documentMode;var n=P.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);this.root=("/"+this.root+"/").replace(O,"/");if(n&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow;this.navigate(r)}if(this._hasPushState){e.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!n){e.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=r;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.fragment=this.getFragment(null,true);this.location.replace(this.root+"#"+this.fragment);return true}else if(this._hasPushState&&this.atRoot()&&o.hash){this.fragment=this.getHash().replace(R,"");this.history.replaceState({},document.title,this.root+this.fragment)}}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);N.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getFragment(this.getHash(this.iframe))}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){t=this.fragment=this.getFragment(t);return i.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!N.started)return false;if(!e||e===true)e={trigger:!!e};var i=this.root+(t=this.getFragment(t||""));t=t.replace(j,"");if(this.fragment===t)return;this.fragment=t;if(t===""&&i!=="/")i=i.slice(0,-1);if(this._hasPushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,i)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getFragment(this.getHash(this.iframe))){if(!e.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,t,e.replace)}}else{return this.location.assign(i)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});e.history=new N;var U=function(t,e){var r=this;var s;if(t&&i.has(t,"constructor")){s=t.constructor}else{s=function(){return r.apply(this,arguments)}}i.extend(s,r,e);var n=function(){this.constructor=s};n.prototype=r.prototype;s.prototype=new n;if(t)i.extend(s.prototype,t);s.__super__=r.prototype;return s};p.extend=g.extend=$.extend=w.extend=N.extend=U;var M=function(){throw new Error('A "url" property or function must be specified')};var q=function(t,e){var i=e.error;e.error=function(r){if(i)i(t,r,e);t.trigger("error",t,r,e)}};return e});(function(){"use strict";function getPageId(config){if(config&&config.hasOwnProperty("config")){for(var key in config.config){if(config.config.hasOwnProperty(key)){for(var key2 in config.config[key]){if(key2=="pageId"){return config.config[key][key2]}}}}}}define("i18n",["module"],function(module){return{load:function(name,req,onLoad,config){var pageId=getPageId(config);if(!pageId){onLoad();return}var locale=config.config.i18n.locale;if(locale=="en_US"){return onLoad()}var url="/json/"+locale+"/"+pageId+".json";$.ajax({url:url,type:"GET",dataType:"json",success:function(response){onLoad(response)},error:function(data){onLoad()}});return;req([name],function(value){onLoad(value)})}}})})();define("appogee/vat",[],function(){function trans(word){return word}var VAT_KEY_UP_TIMER;return{COUNTRIES:[{iso_code:"AT",vat_code:"AT",value:"Austria",name:trans("Austria"),localised_name:"USt.",reg_ex:/^U\d{8}$/i},{iso_code:"BE",vat_code:"BE",value:"Belgium",name:trans("Belgium"),localised_name:"BTW, TVA, NWSt",reg_ex:/^[01]\d{9}$|^\d{9}$/},{iso_code:"BG",vat_code:"BG",value:"Bulgaria",name:trans("Bulgaria"),localised_name:"&#1044;&#1044;&#1057;",reg_ex:/^\d{9,10}$/},{iso_code:"HR",vat_code:"HR",value:"Croatia",name:trans("Croatia"),localised_name:"PDV",reg_ex:/^\d{11}$/},{iso_code:"CY",vat_code:"CY",value:"Cyprus",name:trans("Cyprus"),localised_name:"&Phi;&Pi;&Alpha;",reg_ex:/^\d{8}[A-Z]$/i},{iso_code:"CZ",vat_code:"CZ",value:"Czech_Republic",name:trans("Czech Republic"),localised_name:"DPH",reg_ex:/^\d{8,13}$/i},{iso_code:"DK",vat_code:"DK",value:"Denmark",name:trans("Denmark"),localised_name:"moms",reg_ex:/^\d{8}$/},{iso_code:"EE",vat_code:"EE",value:"Estonia",name:trans("Estonia"),localised_name:"km",reg_ex:/^\d{9}$/},{iso_code:"FI",vat_code:"FI",value:"Finland",name:trans("Finland"),localised_name:"ALV, Moms",reg_ex:/^\d{8}$/},{iso_code:"FR",vat_code:"FR",value:"France",name:trans("France"),localised_name:"TVA",reg_ex:/^[A-HJ-NP-Z0-9]{2}\d{9}$/i},{iso_code:"DE",vat_code:"DE",value:"Germany",name:trans("Germany"),localised_name:"MwSt., Ust.",reg_ex:/^\d{9}$/},{iso_code:"GR",vat_code:"EL",value:"Greece",name:trans("Greece"),localised_name:"&Phi;&Pi;&Alpha;",reg_ex:/^\d{9}$/},{iso_code:"HU",vat_code:"HU",value:"Hungary",name:trans("Hungary"),localised_name:"&Aacute;FA",reg_ex:/^\d{8}$/},{iso_code:"IE",vat_code:"IE",value:"Ireland",name:trans("Ireland"),localised_name:"CBL, VAT",reg_ex:/^\d{7}[A-Z]{1,2}$|^\d[A-Z+*]\d{5}[A-Z]$/i},{iso_code:"IT",vat_code:"IT",value:"Italy",name:trans("Italy"),localised_name:"IVA",reg_ex:/^\d{11}$/},{iso_code:"LV",vat_code:"LV",value:"Latvia",name:trans("Latvia"),localised_name:"PVN",reg_ex:/^\d{11}$/},{iso_code:"LT",vat_code:"LT",value:"Lithuania",name:trans("Lithuania"),localised_name:"PVM",reg_ex:/^\d{9}$|^\d{12}$/},{iso_code:"LU",vat_code:"LU",value:"Luxembourg",name:trans("Luxembourg"),localised_name:"TVA",reg_ex:/^\d{8}$/},{iso_code:"MT",vat_code:"MT",value:"Malta",name:trans("Malta"),localised_name:"VAT",reg_ex:/^\d{8}$/},{iso_code:"NL",vat_code:"NL",value:"Netherlands",name:trans("Netherlands"),localised_name:"BTW",reg_ex:/^\d{9}B\d{2}$/i},{iso_code:"PL",vat_code:"PL",value:"Poland",name:trans("Poland"),localised_name:"PTU, VAT",reg_ex:/^\d{10}$/},{iso_code:"PT",vat_code:"PT",value:"Portugal",name:trans("Portugal"),localised_name:"IVA",reg_ex:/^\d{9}$/},{iso_code:"RO",vat_code:"RO",value:"Romania",name:trans("Romania"),localised_name:"TVA",reg_ex:/^\d{2,10}$/},{iso_code:"SK",vat_code:"SK",value:"Slovakia",name:trans("Slovakia"),localised_name:"DPH",reg_ex:/^\d{10}$/},{iso_code:"SI",vat_code:"SI",value:"Slovenia",name:trans("Slovenia"),localised_name:"DDV",reg_ex:/^\d{8}$/},{iso_code:"ES",vat_code:"ES",value:"Spain",name:trans("Spain"),localised_name:"IVA",reg_ex:/^[A-Z]\d{7}[A-Z0-9]$|^[A-Z0-9]\d{7}[A-Z]$/i},{iso_code:"SE",vat_code:"SE",value:"Sweden",name:trans("Sweden"),localised_name:"Moms",reg_ex:/^\d{12}$/},{iso_code:"GB",vat_code:"GB",value:"United_Kingdom",name:trans("United Kingdom"),localised_name:"VAT",reg_ex:/^\d{9}$|^\d{12}$|^GD\d{3}$|^HA\d{3}$/i},{iso_code:"IM",vat_code:"GB",value:"Isle_Of_Man",name:trans("Isle Of Man"),localised_name:"VAT",reg_ex:/^\d{9}$|^\d{12}$|^GD\d{3}$|^HA\d{3}$/i}],findVatCountry:function(iso_code){if(iso_code){iso_code=iso_code.toUpperCase();for(var i=0;i<this.COUNTRIES.length;i++){if(this.COUNTRIES[i].iso_code==iso_code)return this.COUNTRIES[i]}}return null},findCountry:function(vat_country_code){vat_country_code=vat_country_code.toUpperCase();for(var i=0;i<this.COUNTRIES.length;i++){if(this.COUNTRIES[i].vat_code==vat_country_code)return this.COUNTRIES[i]}return null},isVatChargable:function(country_val,vat_code){for(var i=0;i<this.COUNTRIES.length;i++){if(this.COUNTRIES[i].value==country_val||this.COUNTRIES[i].iso_code==country_val){if(vat_code===undefined||vat_code===null||this.COUNTRIES[i].vat_code=="GB"||vat_code==""){return this.COUNTRIES[i]}else{return null}}}return null},validateVatNumber:function(vat_number,country){if(country===undefined)country=this.findCountry(vat_number.substring(0,2));if(country){var pattern=new RegExp(country.reg_ex);var vat_country=vat_number.substring(0,2).toUpperCase().replace(/\s+/g,"");vat_number=vat_number.substring(2).toUpperCase().replace(/\s+/g,"");if(vat_country==country.vat_code&&pattern.test(vat_number)){vat_number=this.applySpecialBehaviour(vat_number,country);return vat_country+vat_number}}return null},applySpecialBehaviour:function(vat_number,country){if(country.iso_code=="BE"){if(vat_number.length<10)vat_number="0"+vat_number}else if(country.iso_code=="CZ"){if(vat_number.length>10)vat_number=vat_number.substring(3)}return vat_number},checkVatCode:function(vat_input,country_ddlb,onKeyUp){var me=this;if(onKeyUp){clearTimeout(VAT_KEY_UP_TIMER);vat_code_key_timer=setTimeout(function(){me.__checkVatCode(vat_input,country_ddlb)},750)}else{return me.__checkVatCode(vat_input,country_ddlb)}},__checkVatCode:function(vat_input,country_ddlb){var vat_country;if(typeof jQuery!="undefined"&&country_ddlb instanceof jQuery){vat_country=this.findVatCountry(country_ddlb.find("option:selected").val())}else{var country_data=country_ddlb.options[country_ddlb.selectedIndex].dataset;vat_country=this.findVatCountry(country_data.iso)}if(vat_country){if(typeof jQuery!="undefined"&&vat_input instanceof jQuery){var vat_code=this.validateVatNumber(vat_input.val(),vat_country);if(vat_code)vat_input.val(vat_code);vat_input.css("background-color",vat_code?"#DFF0D8":"#F7DDDD");return vat_code!==null}else{var vat_code=this.validateVatNumber(vat_input.value,vat_country);if(vat_code)vat_input.value=vat_code;vat_input.style.backgroundColor=vat_code?"#DFF0D8":"#F7DDDD";return vat_code!==null}}}}});define("appogee/util",["jquery","underscore","appogee/vat"],function($,_,vat){"use strict";var ABR_MONTHS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"];function formatString(str){var args=[];if(arguments.length>1){args=Array.prototype.slice.call(arguments);args=args.slice(1,args.length)}var formattedString=str;if(args&&args.length&&args.length==1&&_.isObject(args[0])){var ob=args[0];formattedString=str.replace(/{([^\]]+?)}/g,function(match){match=match.substring(1,match.length-1);if(ob.hasOwnProperty(match)){return _.escape(ob[match])}return match})}else{formattedString=str.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!="undefined"?_.escape(args[number]):match})}return formattedString}function formatBytes(bytes){if(bytes<1024){return bytes+" B"}var units=["KB","MB","GB","TB","PB","EB","ZB","YB"];var unit=-1;do{bytes/=1024;unit++}while(bytes>=1024);return bytes.toFixed(1)+" "+units[unit]}function isFirefox(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function isChrome(){return navigator.userAgent.toLowerCase().indexOf("chrome")>-1}var EXT_MAP={py:"py.png",less:"less.png",ai:"ai.png",tiff:"tiff.png",aiff:"aiff.png",ods:"ods.png",odt:"odt.png",jpg:"jpg.png",mp4:"mp4.png",rtf:"rtf.png",rar:"rar.png",avi:"avi.png",ppt:"ppt.png",dxf:"dxf.png",txt:"txt.png",odf:"odf.png",_page:"_page.png",xml:"xml.png",php:"php.png",java:"java.png",zip:"zip.png",hpp:"hpp.png",mid:"mid.png",gif:"gif.png",html:"html.png",dwg:"dwg.png",rb:"rb.png",tgz:"tgz.png",ics:"ics.png",wav:"wav.png",yml:"yml.png",css:"css.png",mpg:"mpg.png",dotx:"dotx.png",psd:"psd.png",js:"js.png",dat:"dat.png",bmp:"bmp.png",xlsx:"xlsx.png",key:"key.png",sql:"sql.png",otp:"otp.png",ots:"ots.png",ott:"ott.png",png:"png.png",qt:"qt.png",scss:"scss.png",c:"c.png",exe:"exe.png",_blank:"_blank.png",aac:"aac.png",dmg:"dmg.png",doc:"doc.png",eps:"eps.png",flv:"flv.png",tga:"tga.png",iso:"iso.png",h:"h.png",cpp:"cpp.png",pdf:"pdf.png",xls:"xls.png",sass:"sass.png",mp3:"mp3.png",docx:"doc.png",pptx:"ppt.png",pps:"ppt.png"};function getFileTypeImageUrl(filename,size){size=(size||32)+"";if(["16","32","48","512"].indexOf(size)==-1){throw"Invalid size, must be 16, 32, 48 or 512"}var i=filename.lastIndexOf(".");var img="_blank.png";if(i>-1){var ext=filename.substring(i+1,filename.length).toLowerCase();if(ext in EXT_MAP){img=EXT_MAP[ext]}}return"/img/Free-file-icons/{0}px/{1}".format(size,img)}var date={toISOString:function(date){return this.toString(date,"%Y-%m-%d")},fromISOString:function(strDate){strDate=strDate.substring(0,10);var bits=strDate.split("-");var y=parseInt(bits[0]);var m=parseInt(bits[1])-1;var d=parseInt(bits[2]);var date=new Date(y,m,d);return date},toString:function(d,formatString){if(typeof d==="string"){d=this.fromISOString(d)}if(!formatString){formatString="%Y-%m-%d"}var strD=formatString.replace("%d",util.padLeft(d.getDate(),"0",2));strD=strD.replace("%m",util.padLeft(d.getMonth()+1,"0",2));strD=strD.replace("%b",ABR_MONTHS[d.getMonth()]);strD=strD.replace("%B",MONTHS[d.getMonth()]);strD=strD.replace("%Y",d.getFullYear());strD=strD.replace("%y",(d.getFullYear()+"").substring(2,4));strD=strD.replace("%H",util.padLeft(d.getHours(),"0",2));strD=strD.replace("%M",util.padLeft(d.getMinutes(),"0",2));strD=strD.replace("%S",util.padLeft(d.getSeconds(),"0",2));return strD},getWeekNo:function(date){var target=new Date(date.valueOf());target.setUTCHours(0);var dayNr=(date.getDay()+6)%7;target.setDate(target.getDate()-dayNr+3);var firstThursday=target.valueOf();target.setMonth(0,1);if(target.getDay()!=4){target.setMonth(0,1+(4-target.getDay()+7)%7)}var weekno=1+Math.ceil((firstThursday-target)/6048e5);return weekno}};var datetime={fromISOString:function(strDate){return new Date(strDate)},toString:function(d,formatString){if(typeof d==="string"){d=this.fromISOString(d)}if(!formatString){formatString="%Y-%m-%d %H:%M:%S"}return date.toString(d,formatString)}};function getUrlParam(name,url){if(!url){url=window.location.href}name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)");var results=regex.exec(url);if(!results){return null}if(!results[2]){return""}return decodeURIComponent(results[2].replace(/\+/g," "))}function decodeHtmlEntity(str){return str.replace(/&#(\d+);/g,function(match,dec){return String.fromCharCode(dec)})}function encodeHtmlEntity(str){var buf=[];for(var i=str.length-1;i>=0;i--){buf.unshift(["&#",str[i].charCodeAt(),";"].join(""))}return buf.join("")}function parseJsonFromHtml(scriptId){var data=$("#"+scriptId).html();var ob=null;if(data){ob=JSON.parse(decodeHtmlEntity(data.substring(7,data.length)))}return ob}function getOrdinal(n){if(parseFloat(n)==parseInt(n)&&!isNaN(n)){var s=["th","st","nd","rd"],v=n%100;return n+(s[(v-20)%10]||s[v]||s[0])}return n}function isMac(){if(!window){return false}if(!window.navigator){return false}var nav=window.navigator;if(nav.appVersion){return nav.appVersion.toLowerCase().indexOf("macintosh")>-1}else if(nav.platform){return nav.platform.toLowerCase().indexOf("mac")>-1}else if(nav.userAgent){return nav.userAgent.toLowerCase().indexOf("macintosh")>-1}}function randomString(length){length=length||6;var randstr="";var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<length;i++){randstr+=chars.charAt(Math.floor(Math.random()*chars.length))}return randstr}function joinWithAnd(arr,word){if(!word){word="and"}var s=arr.join("~");var i=s.lastIndexOf("~");if(i>-1){s=s.substring(0,i)+" "+word+" "+s.substring(i+1,s.length)}s=s.replace(/~/g,", ");return s}function joinWithPs(){var args=Array.prototype.slice.call(arguments);return"<p>"+args.join("</p><p>")+"</p>"}function getPythonWeekday(d){d=typeof d=="object"?d.getDay():d;if(d<0||d>6){throw"getPythonWeekday: d out of range"}return d===0?6:d-1}function stamp(obs,values){obs.forEach(function(ob){$.extend(ob,values)});return obs}function removeHtmlTags(html){var tagBody="(?:[^\"'>]|\"[^\"]*\"|'[^']*')*";var tagOrComment=new RegExp("<(?:"+"!--(?:(?:-*[^->])*--+|-?)"+"|script\\b"+tagBody+">[\\s\\S]*?</script\\s*"+"|style\\b"+tagBody+">[\\s\\S]*?</style\\s*"+"|/?[a-z]"+tagBody+")>","gi");var oldHtml;do{oldHtml=html;html=html.replace(tagOrComment,"")}while(html!==oldHtml);return html.replace(/</g,"&lt;")}function getDiffMonths(d1,d2){return(d1.getFullYear()-d2.getFullYear())*12+d1.getMonth()-d2.getMonth()}function calculateFullYearsBetween(d1,d2){if(d1>d2){var x=d2;d2=d1;d1=x}var d=new Date(d1.getTime());var years=0;while(d<=d2){years++;d.setFullYear(d.getFullYear()+1)}if(years>0){years--}return years}function splitName(name){if(!name){return["",""]}var f="";var l="";if(name.indexOf(" ")==-1){l=name}else{var bits=name.split(" ");l=bits.pop();f=bits.join(" ")}return[f,l]}function isMobile(){var mobile=false;var regEx1=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;var regEx2=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;if(regEx1.test(navigator.userAgent)||regEx2.test(navigator.userAgent.substr(0,4))){mobile=true}return mobile}var util={round:function(x,dp){dp=dp===undefined?2:dp;var y=Math.pow(10,dp);return Math.round(x*y)/y},h2d:function(hours,hoursInDay){return this.round(hours/hoursInDay,2)},d2h:function(days,hoursInDay){return this.round(days*hoursInDay,2)},padLeft:function(str,padChar,length){str+="";while(str.length<length){str=padChar+str}return str},padRight:function(str,padChar,length){str+="";while(str.length<length){str+=padChar}return str},validateFloat:function(f){return!isNaN(f)},pluralize:function(num,word){return num==1?word:word+"s"},properCase:function(str){return str.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})},formatString:formatString,splitName:splitName,formatBytes:formatBytes,isFirefox:isFirefox,isChrome:isChrome,date:date,datetime:datetime,getFileTypeImageUrl:getFileTypeImageUrl,getUrlParam:getUrlParam,isMac:isMac,randomString:randomString,joinWithAnd:joinWithAnd,joinWithPs:joinWithPs,getPythonWeekday:getPythonWeekday,stamp:stamp,getDiffMonths:getDiffMonths,calculateFullYearsBetween:calculateFullYearsBetween,decodeHtmlEntity:decodeHtmlEntity,encodeHtmlEntity:encodeHtmlEntity,parseJsonFromHtml:parseJsonFromHtml,removeHtmlTags:removeHtmlTags,vat:vat,getOrdinal:getOrdinal,isMobile:isMobile};return util});define("appogee/i18n",["i18n!","appogee/util"],function(i18n,util){"use strict";function isArray(x){if(x===undefined){return false}if(x===null){return false}if(typeof x==="object"&&x.hasOwnProperty("length")){return true}return false}function isObject(x){if(x===undefined){return false}if(x===null){return false}if(typeof x==="object"&&!x.hasOwnProperty("length")){return true}return false}var Strings=function(strings){strings=strings||{};for(var key in strings){if(strings.hasOwnProperty(key)){if(isObject(strings[key])){this[key]=new Strings(strings[key])}else{this[key]=strings[key]}}}this.scan()};Strings.prototype.setDefaultStrings=function(key,defaultStrings){var ob=this;if(key){if(!this.hasOwnProperty(key)){this[key]=new Strings(defaultStrings)}ob=this[key]}for(var k in defaultStrings){if(defaultStrings.hasOwnProperty(k)&&!ob[k]){ob[k]=defaultStrings[k]}}this.scan()};Strings.prototype.scan=function(ob){ob=ob||this;var autoKey=null;for(var key in ob){if(ob.hasOwnProperty(key)){if(isObject(ob[key])){this.scan(ob[key])}else{if(key.substring(key.length-1,key.length)=="1"){autoKey=key.substring(0,key.length-1);ob[autoKey]=ob.get(autoKey)}else if(key.length>5&&key.substring(key.length-5,key.length)=="Title"){autoKey=key.substring(0,key.length-5);ob[autoKey]=ob.get(autoKey)}}}}};Strings.prototype.get=function(key){var strs=[];var i=null;if(this.hasOwnProperty(key)){if(isArray(this[key])){strs=this[key]}else{strs.push(this[key])}}else if(this.hasOwnProperty(key+"1")){var strings=[];i=1;while(this.hasOwnProperty(key+i)){strings.push(this[key+i]);i++}strs.push(util.joinWithPs.apply(this,strings))}else if(this.hasOwnProperty(key+"Title")){var title=this.get(key+"Title");var msg=this.get(key+"Msg");strs.push(title);strs.push(msg)}strs=strs.slice(0);if(arguments.length>1){for(i=0;i<strs.length;i++){var args=Array.prototype.slice.call(arguments);args.splice(0,1,strs[i]);strs[i]=util.formatString.apply(this,args)}}if(strs.length===0){return""}else if(strs.length===1){return strs[0]}else{return strs}};var strings=new Strings(i18n);return{getStrings:function(key,defaults){if(defaults){strings.setDefaultStrings(key,defaults)}var s=null;if(key){if(strings.hasOwnProperty(key)){s=new Strings(strings[key])}else{s=new Strings}}else{s=strings}return s},getString:function(key,module){var s=this.getStrings(module);return s.get(key)}}});define("enums/CommonStrings",["appogee/i18n"],function(i18n){"use strict";var S,R={next:"Next",prev:"Prev",yes:"Yes",no:"No",cancel:"Cancel",formInvalid:"Form Invalid",ok:"OK",doYouWishToContinue:"Do you wish to continue?",select:"- Select -",selectDivision:"Select Division",selectTeam:"Select Team",loading:"Loading",saving:"Saving",saveSuccessful:"Save Successful",saveUnsuccessful:"Save Unsuccessful",selectLeaveProfile:"Select Leave Profile",offline:"You are offline! Please check your network.",sessionExpired:"Your session has expired. Please reload the page to log in again.",noAccess:"You do not have access to the requested resource.",genericError:"An error occurred when loading the request.",invalidInput:"Invalid Input",crikeyTitle:"Crikey!",crikeyMsg:"An unexpected error has occurred on our servers. Our engineers have been notified and will investigate the problem. In the meantime, please try your request again. If you continue to experience the issue, please log a ticket with the helpdesk.",alreadyDeletedTitle:"Already Deleted",alreadyDeletedMsg:"This resource has already been deleted.",licenseExceededTitle:"License Count Exceeded",licenseExceededMsg1:"Your license count has been exceeded. This can happen if you have added more Employees to your directory than your license permits. Please work to resolve this issue to avoid disruption to your service.",licenseExceededMsg2:"This can be done in 2 ways:",licenseExceededMsg3:"Archive some employees. This can be done from the Options menu on any Employee Profile.",licenseExceededMsg4:'Purchase a license extension. This can be done from the <a href="/config/licensing">Licensing page</a>.',welcomeTo10Title:"Welcome to {app_name} version 10",welcomeAdminTo10Msg1:"You may have already noticed a few changes to the layout of {app_name}, but there are many other new changes and features.",welcomeAdminTo10Msg2:'For an overview of whatâs new, please refer to <a href="https://appogeehr.freshdesk.com/support/solutions/articles/22000200571" target="_BLANK">this help article</a>. You can also access this information at any time by clicking the <i class="glyphicon glyphicon-question-sign" /> at the top of any page in {app_name}.',welcomeAdminTo10Msg3:"If you are an Administrator or HR Manager for {app_name} you will have received an important email about these changes detailing actions you may need to take to keep your office calendars up to date.",welcomeTo10Msg1:"You may have already noticed a few changes to the layout of {app_name}, but there are many other new changes and features.",welcomeTo10Msg2:'For an overview of whatâs new, please refer to <a href="https://appogeehr.freshdesk.com/support/solutions/articles/22000200571" target="_BLANK">this help article</a>. You can also access this information at any time by clicking the <i class="glyphicon glyphicon-question-sign" /> at the top of any page in {app_name}.'};var CommonStrings={init:function(){if(!S){S=i18n.getStrings(null,R);this.next=S.next;this.prev=S.prev;this.yes=S.yes;this.no=S.no;this.cancel=S.cancel;this.formInvalid=S.formInvalid;this.ok=S.ok;this.doYouWishToContinue=S.doYouWishToContinue;this.select=S.select;this.selectDivision=S.selectDivision;this.selectTeam=S.selectTeam;this.loading=S.loading;this.loadingDots=S.loading+" ...";this.saving=S.saving;this.savingDots=S.saving+" ...";this.saveSuccessful=S.saveSuccessful;this.saveUnsuccessful=S.saveUnsuccessful;this.selectLeaveProfile=S.selectLeaveProfile;this.offline=S.offline;this.sessionExpired=S.sessionExpired;this.noAccess=S.noAccess;this.genericError=S.genericError;this.invalidInput=S.invalidInput;this.crikeyTitle=S.crikeyTitle;this.crikeyMsg=S.crikeyMsg;this.alreadyDeletedTitle=S.alreadyDeletedTitle;this.alreadyDeletedMsg=S.alreadyDeletedMsg;this.licenseExceededTitle=S.licenseExceededTitle;this.licenseExceededMsg1=S.licenseExceededMsg1;this.licenseExceededMsg2=S.licenseExceededMsg2;this.licenseExceededMsg3=S.licenseExceededMsg3;this.licenseExceededMsg4=S.licenseExceededMsg4;this.welcomeTo10Title=S.welcomeTo10Title;this.welcomeAdminTo10Msg1=S.welcomeAdminTo10Msg1;this.welcomeAdminTo10Msg2=S.welcomeAdminTo10Msg2;this.welcomeAdminTo10Msg3=S.welcomeAdminTo10Msg3;this.welcomeTo10Msg1=S.welcomeTo10Msg1;this.welcomeTo10Msg2=S.welcomeTo10Msg2}}};return CommonStrings});define("jquery.appogee.util",["jquery"],function($){
$.fn.center=function(){this.css("position","absolute");this.css("top",Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())+"px");this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px");return this};$.fn.centerX=function(){this.css("position","absolute");this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px");return this};$.fn.centerY=function(){this.css("position","absolute");this.css("top",Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())+"px");return this};$.fn.preload=function(){this.each(function(){$("<img/>")[0].src=this})}});define("appogee/notifier",["jquery","enums/CommonStrings","jquery.appogee.util"],function($,CommonStrings){"use strict";var messageTypes={Danger:"danger",Success:"success",Ajax:"ajax"};var Notifier=function(){this.artificialDelay=2e3;this.lastNotice=null;this.autoHideTimer=null;this.autoHideTimeout=2e3;this.btnSaveSelector=null;this.btnSaveValue=null};Notifier.prototype.ajax=function(message,options){return this.notify(message,messageTypes.Ajax,options)};Notifier.prototype.success=function(message,options){options=$.extend({autoHide:true},options||{});if(this.btnSaveSelector){$(this.btnSaveSelector).prop("disabled",false);$(this.btnSaveSelector+" > span").html(this.btnSaveValue);this.btnSaveSelector=null;if(!message){message=CommonStrings.saveSuccessful}}return this.notify(message,messageTypes.Success,options)};Notifier.prototype.error=function(message,options){options=$.extend({autoHide:true},options||{});if(this.btnSaveSelector){$(this.btnSaveSelector).prop("disabled",false);$(this.btnSaveSelector+" > span").html(this.btnSaveValue);this.btnSaveSelector=null;if(!message){message=CommonStrings.saveUnsuccessful}}return this.notify(message,messageTypes.Danger,options)};Notifier.prototype.saving=function(btnSaveSelector){this.btnSaveSelector=btnSaveSelector||"#btnSave";this.btnSaveValue=$(this.btnSaveSelector+" > span").html();$(this.btnSaveSelector).prop("disabled",true);$(this.btnSaveSelector+" > span").html(CommonStrings.savingDots);return this.notify(CommonStrings.savingDots)};Notifier.prototype.notify=function(message,messageType,options){var me=this;options=$.extend({autoHide:false,artificiallyDelay:true},options||{});messageType=messageType||messageTypes.Ajax;$(".notifier").removeClass("ajax").removeClass("danger");if(messageType==messageTypes.Ajax){$(".notifier").addClass("ajax")}else if(messageType==messageTypes.Danger){$(".notifier").addClass("danger")}this.lastNotice=new Date;if(this.autoHideTimer){clearInterval(this.autoHideTimer)}if($("#subnavbar").length>0){$("#pageNotifier").css("top",175)}$(".notifier").html(message).fadeIn("fast",function(){if(options.autoHide){me.autoHideTimer=setTimeout(function(){me.hide()},me.autoHideTimeout)}}).each(function(){$(this).centerX()});return this};Notifier.prototype.hide=function(withabsolutelynodelay){if(withabsolutelynodelay){$(".notifier").hide()}else{$(".notifier").fadeOut("slow")}return this};return Notifier});define("appogee/xhr",["jquery","appogee/notifier","enums/CommonStrings"],function($,Notifier,CommonStrings){"use strict";var API_VERSION="v2";var API_BASE="/api/"+API_VERSION;var ajax={get:function(url,callback,options){this._request("GET",url,null,callback,options)},post:function(url,data,callback,options){this._request("POST",url,data,callback,options)},put:function(url,data,callback,options){this._request("PUT",url,data,callback,options)},delete:function(url,callback,options){this._request("DELETE",url,null,callback,options)},_request:function(method,url,data,callback,options){options=$.extend({type:method,url:url,data:data,success:callback,contentType:"application/json",dataType:"json",artificialDelay:false},options||{});if(options.artificialDelay){if(options.artificialDelay===true){options.artificialDelay=1e3}var d=(new Date).getTime();options.success=function(){var args=arguments;var t=(new Date).getTime()-d;if(t<options.artificialDelay){setTimeout(function(){callback.apply(this,args)},options.artificialDelay-t)}else{callback.apply(this,args)}}}if(options.contentType=="application/json"&&options.data!==null){options.data=JSON.stringify(options.data)}$.ajax(options)}};var api={get:function(url,callback,options){ajax.get(API_BASE+url,callback,options)},post:function(url,data,callback,options){ajax.post(API_BASE+url,data,callback,options)},put:function(url,data,callback,options){ajax.put(API_BASE+url,data,callback,options)},delete:function(url,callback,options){ajax.delete(API_BASE+url,callback,options)}};function load(urls,callback,options){if(!urls||urls.length===0){callback();return}options=$.extend({cachePolicies:{},isApi:false},options||{});var _responses={};var _count=urls.length;var _check=function(){if(--_count===0){var responses=[];$.each(urls,function(i,url){responses.push(_responses[url])});callback(responses)}};$.each(urls,function(i,url){var loadedFromCache=false;var cacheKey=url.replace(API_BASE,"");if(cacheKey in options.cachePolicies){var data=null;if(options.cachePolicies[cacheKey].type=="session"&&window.sessionStorage){data=window.sessionStorage.getItem(cacheKey)}else if(options.cachePolicies[cacheKey].type=="local"&&window.localStorage){data=window.localStorage.getItem(cacheKey)}if(data){data=JSON.parse(data);var timestamp=new Date(data.timestamp);var age=Math.floor((new Date-timestamp)/60/60);if(options.cachePolicies[cacheKey].expirySeconds>age){_responses[url]=data.data;_check();loadedFromCache=true}}}if(!loadedFromCache){ajax.get((options.isApi?API_BASE:"")+url,function(response){_responses[url]=response;_check();var cacheKey=url.replace(API_BASE,"");if(cacheKey in options.cachePolicies){if(options.cachePolicies[cacheKey].type=="session"&&window.sessionStorage){window.sessionStorage.setItem(cacheKey,JSON.stringify({timestamp:(new Date).toISOString(),data:response}))}else if(options.cachePolicies[cacheKey].type=="local"&&window.localStorage){window.localStorage.setItem(cacheKey,JSON.stringify({timestamp:(new Date).toISOString(),data:response}))}}})}})}function pageLoad(urls,callback,options){var notifier=null;if(!options.preventNotifier){notifier=new Notifier;notifier.notify(CommonStrings.loadingDots)}options.artificialDelay=false;var title=CommonStrings.loadingDots;var timer=setInterval(function(){if(title.length>=30){title=CommonStrings.loadingDots}title+=".";$("#h2PageTitle").html(title)},100);load(urls,function(response){clearInterval(timer);$(".load_hide").fadeIn();$(".form-loader,.load_show").hide();if(notifier!==null){notifier.hide()}callback(response)},options)}return{API_VERSION:API_VERSION,ajax:ajax,api:api,load:load,pageLoad:pageLoad}});define("appogee/cookies",[],function(){"use strict";function getCookie(cookieName){var cookieValue=document.cookie;var start=cookieValue.indexOf(" "+cookieName+"=");if(start==-1){start=cookieValue.indexOf(cookieName+"=")}if(start==-1){cookieValue=null}else{start=cookieValue.indexOf("=",start)+1;var end=cookieValue.indexOf(";",start);if(end==-1){end=cookieValue.length}cookieValue=window.unescape(cookieValue.substring(start,end))}return cookieValue}function setCookie(cookieName,value,expiryDays,path){var cookieValue=window.escape(value);if(expiryDays){var exdate=new Date;exdate.setDate(exdate.getDate()+expiryDays);cookieValue+="; expires="+exdate.toUTCString()}if(!path){path="/"}cookieValue+=";path="+path;if(!_isLocal()){cookieValue+=";domain="+".appogeehr.com"}document.cookie=cookieName+"="+cookieValue}function _isLocal(){return location.href.indexOf("http://127.0.0.1")>-1}function _getConfig(){var config=getCookie("cfg");if(!config){config={}}else{config=JSON.parse(atob(config))}return config}function _setConfig(config){config=btoa(JSON.stringify(config));setCookie("cfg",config)}function setConfig(key,value){var config=_getConfig();config[key]=value;_setConfig(config)}function getConfig(key,defaultValue){if(typeof defaultValue==="undefined"){defaultValue=null}var config=_getConfig();if(!config.hasOwnProperty(key)){return defaultValue}return config[key]}return{get:getCookie,set:setCookie,setConfig:setConfig,getConfig:getConfig}});define("appogee/localConfig",[],function(){"use strict";var COOKIE_NAME="AHR_C";return{get:function(key,defaultValue){if(!window.sessionStorage){return defaultValue||{}}var c=window.sessionStorage.getItem(COOKIE_NAME);if(c){c=JSON.parse(atob(c))}else{c={}}if(c.hasOwnProperty(key)){return c[key]}return defaultValue||{}},set:function(key,value){if(!window.sessionStorage){return}var c=window.sessionStorage.getItem("AHR_C");if(c){c=JSON.parse(atob(c))}else{c={}}c[key]=value;var pickled=JSON.stringify(c);pickled=btoa(pickled);window.sessionStorage.setItem("AHR_C",pickled)}}});define("appogee/view/AbstractColumn",["underscore"],function(_){var ViewColumn=function(label,sortField){if(_.isString(label)){this.label=label;this.labelTooltip=null}else if(label){this.label=label.text;this.labelTooltip=label.tooltip}this.width=null;this.visible=true;this.filterField=null;this.filterValues=null;this.isFiltered=false;this.sortField=sortField;this.sortOption=null;this.sortOptions=["asc"];this._view=null};ViewColumn.prototype.setFilter=function(field,values){this.filterField=field;this.filterValues=values};ViewColumn.prototype._setView=function(view){this._view=view};ViewColumn.prototype.setVisible=function(visible){this.visible=visible;this._view._populate()};ViewColumn.prototype.flattenObject=function(data,prefix){var flattened={};prefix=prefix||"";for(field in data){if(_.isObject(data[field])&&!_.isArray(data[field])){var subData=this.flattenObject(data[field],prefix+field+".");for(subField in subData){flattened[subField]=subData[subField]}flattened[prefix+field]=data[field]}else{flattened[prefix+field]=data[field]}}return flattened};return ViewColumn});define("appogee/view/TextColumn",["appogee/view/AbstractColumn"],function(AbstractColumn){function TextColumn(label,formattedString,sortField){AbstractColumn.apply(this,[label,sortField]);this.formattedString=formattedString}TextColumn.prototype=new AbstractColumn;TextColumn.prototype.render=function(data){data=this.flattenObject(data);var val=this.formattedString;for(field in data)if(data[field]==null)val=val.replace("["+field+"]","");else val=val.replace("["+field+"]",data[field]);return val};return TextColumn});(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define("hbs/handlebars",factory);else if(typeof exports==="object")exports["Handlebars"]=factory();else root["Handlebars"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(8)["default"];exports.__esModule=true;var _runtime=__webpack_require__(1);var _runtime2=_interopRequireDefault(_runtime);var _AST=__webpack_require__(2);var _AST2=_interopRequireDefault(_AST);var _Parser$parse=__webpack_require__(3);var _Compiler$compile$precompile=__webpack_require__(4);var _JavaScriptCompiler=__webpack_require__(5);var _JavaScriptCompiler2=_interopRequireDefault(_JavaScriptCompiler);var _Visitor=__webpack_require__(6);var _Visitor2=_interopRequireDefault(_Visitor);var _noConflict=__webpack_require__(7);var _noConflict2=_interopRequireDefault(_noConflict);var _create=_runtime2["default"].create;function create(){var hb=_create();hb.compile=function(input,options){return _Compiler$compile$precompile.compile(input,options,hb)};hb.precompile=function(input,options){return _Compiler$compile$precompile.precompile(input,options,hb)};hb.AST=_AST2["default"];hb.Compiler=_Compiler$compile$precompile.Compiler;hb.JavaScriptCompiler=_JavaScriptCompiler2["default"];hb.Parser=_Parser$parse.parser;hb.parse=_Parser$parse.parse;return hb}var inst=create();inst.create=create;_noConflict2["default"](inst);inst.Visitor=_Visitor2["default"];inst["default"]=inst;exports["default"]=inst;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9)["default"];var _interopRequireDefault=__webpack_require__(8)["default"];exports.__esModule=true;var _import=__webpack_require__(10);var base=_interopRequireWildcard(_import);var _SafeString=__webpack_require__(11);var _SafeString2=_interopRequireDefault(_SafeString);var _Exception=__webpack_require__(12);var _Exception2=_interopRequireDefault(_Exception);var _import2=__webpack_require__(13);var Utils=_interopRequireWildcard(_import2);var _import3=__webpack_require__(14);var runtime=_interopRequireWildcard(_import3);var _noConflict=__webpack_require__(7);var _noConflict2=_interopRequireDefault(_noConflict);function create(){var hb=new base.HandlebarsEnvironment;Utils.extend(hb,base);hb.SafeString=_SafeString2["default"];hb.Exception=_Exception2["default"];hb.Utils=Utils;hb.escapeExpression=Utils.escapeExpression;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb)};return hb}var inst=create();inst.create=create;_noConflict2["default"](inst);inst["default"]=inst;exports["default"]=inst;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var AST={Program:function Program(statements,blockParams,strip,locInfo){this.loc=locInfo;this.type="Program";this.body=statements;this.blockParams=blockParams;this.strip=strip},MustacheStatement:function MustacheStatement(path,params,hash,escaped,strip,locInfo){this.loc=locInfo;this.type="MustacheStatement";this.path=path;this.params=params||[];this.hash=hash;this.escaped=escaped;this.strip=strip},BlockStatement:function BlockStatement(path,params,hash,program,inverse,openStrip,inverseStrip,closeStrip,locInfo){this.loc=locInfo;this.type="BlockStatement";this.path=path;this.params=params||[];this.hash=hash;this.program=program;this.inverse=inverse;this.openStrip=openStrip;this.inverseStrip=inverseStrip;this.closeStrip=closeStrip},PartialStatement:function PartialStatement(name,params,hash,strip,locInfo){this.loc=locInfo;this.type="PartialStatement";this.name=name;this.params=params||[];this.hash=hash;this.indent="";this.strip=strip},ContentStatement:function ContentStatement(string,locInfo){this.loc=locInfo;this.type="ContentStatement";this.original=this.value=string},CommentStatement:function CommentStatement(comment,strip,locInfo){this.loc=locInfo;this.type="CommentStatement";this.value=comment;this.strip=strip},SubExpression:function SubExpression(path,params,hash,locInfo){this.loc=locInfo;this.type="SubExpression";this.path=path;this.params=params||[];this.hash=hash},PathExpression:function PathExpression(data,depth,parts,original,locInfo){this.loc=locInfo;this.type="PathExpression";this.data=data;this.original=original;this.parts=parts;this.depth=depth},StringLiteral:function StringLiteral(string,locInfo){this.loc=locInfo;this.type="StringLiteral";this.original=this.value=string},NumberLiteral:function NumberLiteral(number,locInfo){this.loc=locInfo;this.type="NumberLiteral";this.original=this.value=Number(number)},BooleanLiteral:function BooleanLiteral(bool,locInfo){this.loc=locInfo;this.type="BooleanLiteral";this.original=this.value=bool==="true"},UndefinedLiteral:function UndefinedLiteral(locInfo){this.loc=locInfo;this.type="UndefinedLiteral";this.original=this.value=undefined},NullLiteral:function NullLiteral(locInfo){this.loc=locInfo;this.type="NullLiteral";this.original=this.value=null},Hash:function Hash(pairs,locInfo){this.loc=locInfo;this.type="Hash";this.pairs=pairs},HashPair:function HashPair(key,value,locInfo){this.loc=locInfo;this.type="HashPair";this.key=key;this.value=value},helpers:{helperExpression:function helperExpression(node){return!!(node.type==="SubExpression"||node.params.length||node.hash)},scopedId:function scopedId(path){return/^\.|this\b/.test(path.original)},simpleId:function simpleId(path){return path.parts.length===1&&!AST.helpers.scopedId(path)&&!path.depth}}};exports["default"]=AST;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(8)["default"];var _interopRequireWildcard=__webpack_require__(9)["default"];exports.__esModule=true;exports.parse=parse;var _parser=__webpack_require__(15);var _parser2=_interopRequireDefault(_parser);var _AST=__webpack_require__(2);var _AST2=_interopRequireDefault(_AST);var _WhitespaceControl=__webpack_require__(16);var _WhitespaceControl2=_interopRequireDefault(_WhitespaceControl);var _import=__webpack_require__(17);var Helpers=_interopRequireWildcard(_import);var _extend=__webpack_require__(13);exports.parser=_parser2["default"];var yy={};_extend.extend(yy,Helpers,_AST2["default"]);function parse(input,options){if(input.type==="Program"){return input}_parser2["default"].yy=yy;yy.locInfo=function(locInfo){return new yy.SourceLocation(options&&options.srcName,locInfo)};var strip=new _WhitespaceControl2["default"];return strip.accept(_parser2["default"].parse(input))}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(8)["default"];exports.__esModule=true;exports.Compiler=Compiler;exports.precompile=precompile;exports.compile=compile;var _Exception=__webpack_require__(12);var _Exception2=_interopRequireDefault(_Exception);var _isArray$indexOf=__webpack_require__(13);var _AST=__webpack_require__(2);var _AST2=_interopRequireDefault(_AST);var slice=[].slice;function Compiler(){}Compiler.prototype={compiler:Compiler,equals:function equals(other){var len=this.opcodes.length;if(other.opcodes.length!==len){return false}for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||!argEquals(opcode.args,otherOpcode.args)){return false}}len=this.children.length;for(var i=0;i<len;i++){if(!this.children[i].equals(other.children[i])){return false}}return true},guid:0,compile:function compile(program,options){this.sourceNode=[];this.opcodes=[];this.children=[];this.options=options;this.stringParams=options.stringParams;this.trackIds=options.trackIds;options.blockParams=options.blockParams||[];var knownHelpers=options.knownHelpers;options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,if:true,unless:true,with:true,log:true,lookup:true};if(knownHelpers){for(var _name in knownHelpers){if(_name in knownHelpers){options.knownHelpers[_name]=knownHelpers[_name]}}}return this.accept(program)},compileProgram:function compileProgram(program){var childCompiler=new this.compiler,result=childCompiler.compile(program,this.options),guid=this.guid++;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;this.useDepths=this.useDepths||result.useDepths;return guid},accept:function accept(node){this.sourceNode.unshift(node);var ret=this[node.type](node);this.sourceNode.shift();return ret},Program:function Program(program){this.options.blockParams.unshift(program.blockParams);var body=program.body,bodyLength=body.length;for(var i=0;i<bodyLength;i++){this.accept(body[i])}this.options.blockParams.shift();this.isSimple=bodyLength===1;this.blockParams=program.blockParams?program.blockParams.length:0;return this},BlockStatement:function BlockStatement(block){transformLiteralToPath(block);var program=block.program,inverse=block.inverse;program=program&&this.compileProgram(program);inverse=inverse&&this.compileProgram(inverse);var type=this.classifySexpr(block);if(type==="helper"){this.helperSexpr(block,program,inverse)}else if(type==="simple"){this.simpleSexpr(block);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("blockValue",block.path.original)}else{this.ambiguousSexpr(block,program,inverse);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},PartialStatement:function PartialStatement(partial){this.usePartial=true;var params=partial.params;if(params.length>1){throw new _Exception2["default"]("Unsupported number of partial arguments: "+params.length,partial)}else if(!params.length){params.push({type:"PathExpression",parts:[],depth:0})}var partialName=partial.name.original,isDynamic=partial.name.type==="SubExpression";if(isDynamic){this.accept(partial.name)}this.setupFullMustacheParams(partial,undefined,undefined,true);var indent=partial.indent||"";if(this.options.preventIndent&&indent){this.opcode("appendContent",indent);indent=""}this.opcode("invokePartial",isDynamic,partialName,indent);this.opcode("append")},MustacheStatement:function MustacheStatement(mustache){this.SubExpression(mustache);if(mustache.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ContentStatement:function ContentStatement(content){if(content.value){this.opcode("appendContent",content.value)}},CommentStatement:function CommentStatement(){},SubExpression:function SubExpression(sexpr){transformLiteralToPath(sexpr);var type=this.classifySexpr(sexpr);if(type==="simple"){this.simpleSexpr(sexpr)}else if(type==="helper"){this.helperSexpr(sexpr)}else{this.ambiguousSexpr(sexpr)}},ambiguousSexpr:function ambiguousSexpr(sexpr,program,inverse){var path=sexpr.path,name=path.parts[0],isBlock=program!=null||inverse!=null;this.opcode("getContext",path.depth);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.accept(path);this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function simpleSexpr(sexpr){this.accept(sexpr.path);this.opcode("resolvePossibleLambda")},helperSexpr:function helperSexpr(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),path=sexpr.path,name=path.parts[0];if(this.options.knownHelpers[name]){this.opcode("invokeKnownHelper",params.length,name)}else if(this.options.knownHelpersOnly){throw new _Exception2["default"]("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr)}else{path.falsy=true;this.accept(path);this.opcode("invokeHelper",params.length,path.original,_AST2["default"].helpers.simpleId(path))}},PathExpression:function PathExpression(path){this.addDepth(path.depth);this.opcode("getContext",path.depth);var name=path.parts[0],scoped=_AST2["default"].helpers.scopedId(path),blockParamId=!path.depth&&!scoped&&this.blockParamIndex(name);if(blockParamId){this.opcode("lookupBlockParam",blockParamId,path.parts)}else if(!name){this.opcode("pushContext")}else if(path.data){this.options.data=true;this.opcode("lookupData",path.depth,path.parts)}else{this.opcode("lookupOnContext",path.parts,path.falsy,scoped)}},StringLiteral:function StringLiteral(string){this.opcode("pushString",string.value)},NumberLiteral:function NumberLiteral(number){this.opcode("pushLiteral",number.value)},BooleanLiteral:function BooleanLiteral(bool){this.opcode("pushLiteral",bool.value)},UndefinedLiteral:function UndefinedLiteral(){this.opcode("pushLiteral","undefined")},NullLiteral:function NullLiteral(){this.opcode("pushLiteral","null")},Hash:function Hash(hash){var pairs=hash.pairs,i=0,l=pairs.length;this.opcode("pushHash");for(;i<l;i++){this.pushParam(pairs[i].value)}while(i--){this.opcode("assignToHash",pairs[i].key)}this.opcode("popHash")},opcode:function opcode(name){this.opcodes.push({opcode:name,args:slice.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function addDepth(depth){if(!depth){return}this.useDepths=true},classifySexpr:function classifySexpr(sexpr){var isSimple=_AST2["default"].helpers.simpleId(sexpr.path);var isBlockParam=isSimple&&!!this.blockParamIndex(sexpr.path.parts[0]);var isHelper=!isBlockParam&&_AST2["default"].helpers.helperExpression(sexpr);var isEligible=!isBlockParam&&(isHelper||isSimple);if(isEligible&&!isHelper){var _name2=sexpr.path.parts[0],options=this.options;if(options.knownHelpers[_name2]){isHelper=true}else if(options.knownHelpersOnly){isEligible=false}}if(isHelper){return"helper"}else if(isEligible){return"ambiguous"}else{return"simple"}},pushParams:function pushParams(params){for(var i=0,l=params.length;i<l;i++){this.pushParam(params[i])}},pushParam:function pushParam(val){var value=val.value!=null?val.value:val.original||"";if(this.stringParams){if(value.replace){value=value.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")}if(val.depth){this.addDepth(val.depth)}this.opcode("getContext",val.depth||0);this.opcode("pushStringParam",value,val.type);if(val.type==="SubExpression"){this.accept(val)}}else{if(this.trackIds){var blockParamIndex=undefined;if(val.parts&&!_AST2["default"].helpers.scopedId(val)&&!val.depth){blockParamIndex=this.blockParamIndex(val.parts[0])}if(blockParamIndex){var blockParamChild=val.parts.slice(1).join(".");this.opcode("pushId","BlockParam",blockParamIndex,blockParamChild)}else{value=val.original||value;if(value.replace){value=value.replace(/^\.\//g,"").replace(/^\.$/g,"")}this.opcode("pushId",val.type,value)}}this.accept(val)}},setupFullMustacheParams:function setupFullMustacheParams(sexpr,program,inverse,omitEmpty){var params=sexpr.params;this.pushParams(params);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);if(sexpr.hash){this.accept(sexpr.hash)}else{this.opcode("emptyHash",omitEmpty)}return params},blockParamIndex:function blockParamIndex(name){for(var depth=0,len=this.options.blockParams.length;depth<len;depth++){var blockParams=this.options.blockParams[depth],param=blockParams&&_isArray$indexOf.indexOf(blockParams,name);if(blockParams&&param>=0){return[depth,param]}}}};function precompile(input,options,env){if(input==null||typeof input!=="string"&&input.type!=="Program"){throw new _Exception2["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input)}options=options||{};if(!("data"in options)){options.data=true}if(options.compat){options.useDepths=true}var ast=env.parse(input,options),environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}function compile(input,_x,env){var options=arguments[1]===undefined?{}:arguments[1];if(input==null||typeof input!=="string"&&input.type!=="Program"){throw new _Exception2["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input)}if(!("data"in options)){options.data=true}if(options.compat){options.useDepths=true}var compiled=undefined;function compileInput(){var ast=env.parse(input,options),environment=(new env.Compiler).compile(ast,options),templateSpec=(new env.JavaScriptCompiler).compile(environment,options,undefined,true);return env.template(templateSpec)}function ret(context,execOptions){if(!compiled){compiled=compileInput()}return compiled.call(this,context,execOptions)}ret._setup=function(setupOptions){if(!compiled){compiled=compileInput()}return compiled._setup(setupOptions)};ret._child=function(i,data,blockParams,depths){if(!compiled){compiled=compileInput()}return compiled._child(i,data,blockParams,depths)};return ret}function argEquals(a,b){if(a===b){return true}if(_isArray$indexOf.isArray(a)&&_isArray$indexOf.isArray(b)&&a.length===b.length){for(var i=0;i<a.length;i++){if(!argEquals(a[i],b[i])){return false}}return true}}function transformLiteralToPath(sexpr){if(!sexpr.path.parts){var literal=sexpr.path;sexpr.path=new _AST2["default"].PathExpression(false,0,[literal.original+""],literal.original+"",literal.loc)}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(8)["default"];exports.__esModule=true;var _COMPILER_REVISION$REVISION_CHANGES=__webpack_require__(10);var _Exception=__webpack_require__(12);var _Exception2=_interopRequireDefault(_Exception);var _isArray=__webpack_require__(13);var _CodeGen=__webpack_require__(18);var _CodeGen2=_interopRequireDefault(_CodeGen);function Literal(value){this.value=value}function JavaScriptCompiler(){}JavaScriptCompiler.prototype={nameLookup:function nameLookup(parent,name){if(JavaScriptCompiler.isValidJavaScriptVariableName(name)){return[parent,".",name]}else{return[parent,"['",name,"']"]}},depthedLookup:function depthedLookup(name){return[this.aliasable("this.lookup"),'(depths, "',name,'")']},compilerInfo:function compilerInfo(){var revision=_COMPILER_REVISION$REVISION_CHANGES.COMPILER_REVISION,versions=_COMPILER_REVISION$REVISION_CHANGES.REVISION_CHANGES[revision];return[revision,versions]},appendToBuffer:function appendToBuffer(source,location,explicit){if(!_isArray.isArray(source)){source=[source]}source=this.source.wrap(source,location);if(this.environment.isSimple){return["return ",source,";"]}else if(explicit){return["buffer += ",source,";"]}else{source.appendToBuffer=true;return source}},initializeBuffer:function initializeBuffer(){return this.quotedString("")},compile:function compile(environment,options,context,asObject){this.environment=environment;this.options=options;this.stringParams=this.options.stringParams;this.trackIds=this.options.trackIds;this.precompile=!asObject;this.name=this.environment.name;this.isChild=!!context;this.context=context||{programs:[],environments:[]};this.preamble();this.stackSlot=0;this.stackVars=[];this.aliases={};this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.blockParams=[];this.compileChildren(environment,options);this.useDepths=this.useDepths||environment.useDepths||this.options.compat;this.useBlockParams=this.useBlockParams||environment.useBlockParams;var opcodes=environment.opcodes,opcode=undefined,firstLoc=undefined,i=undefined,l=undefined;for(i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];this.source.currentLocation=opcode.loc;firstLoc=firstLoc||opcode.loc;this[opcode.opcode].apply(this,opcode.args)}this.source.currentLocation=firstLoc;this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new _Exception2["default"]("Compile completed with content left on stack")}var fn=this.createFunctionContext(asObject);if(!this.isChild){var ret={compiler:this.compilerInfo(),main:fn};var programs=this.context.programs;for(i=0,l=programs.length;i<l;i++){if(programs[i]){ret[i]=programs[i]}}if(this.environment.usePartial){ret.usePartial=true}if(this.options.data){ret.useData=true}if(this.useDepths){ret.useDepths=true}if(this.useBlockParams){ret.useBlockParams=true}if(this.options.compat){ret.compat=true}if(!asObject){ret.compiler=JSON.stringify(ret.compiler);this.source.currentLocation={start:{line:1,column:0}};ret=this.objectLiteral(ret);if(options.srcName){ret=ret.toStringWithSourceMap({file:options.destName});ret.map=ret.map&&ret.map.toString()}else{ret=ret.toString()}}else{ret.compilerOptions=this.options}return ret}else{return fn}},preamble:function preamble(){this.lastContext=0;this.source=new _CodeGen2["default"](this.options.srcName)},createFunctionContext:function createFunctionContext(asObject){var varDeclarations="";var locals=this.stackVars.concat(this.registers.list);if(locals.length>0){varDeclarations+=", "+locals.join(", ")}var aliasCount=0;for(var alias in this.aliases){var node=this.aliases[alias];if(this.aliases.hasOwnProperty(alias)&&node.children&&node.referenceCount>1){varDeclarations+=", alias"+ ++aliasCount+"="+alias;node.children[0]="alias"+aliasCount}}var params=["depth0","helpers","partials","data"];if(this.useBlockParams||this.useDepths){params.push("blockParams")}if(this.useDepths){params.push("depths")}var source=this.mergeSource(varDeclarations);if(asObject){
params.push(source);return Function.apply(this,params)}else{return this.source.wrap(["function(",params.join(","),") {\n  ",source,"}"])}},mergeSource:function mergeSource(varDeclarations){var isSimple=this.environment.isSimple,appendOnly=!this.forceBuffer,appendFirst=undefined,sourceSeen=undefined,bufferStart=undefined,bufferEnd=undefined;this.source.each(function(line){if(line.appendToBuffer){if(bufferStart){line.prepend("  + ")}else{bufferStart=line}bufferEnd=line}else{if(bufferStart){if(!sourceSeen){appendFirst=true}else{bufferStart.prepend("buffer += ")}bufferEnd.add(";");bufferStart=bufferEnd=undefined}sourceSeen=true;if(!isSimple){appendOnly=false}}});if(appendOnly){if(bufferStart){bufferStart.prepend("return ");bufferEnd.add(";")}else if(!sourceSeen){this.source.push('return "";')}}else{varDeclarations+=", buffer = "+(appendFirst?"":this.initializeBuffer());if(bufferStart){bufferStart.prepend("return buffer + ");bufferEnd.add(";")}else{this.source.push("return buffer;")}}if(varDeclarations){this.source.prepend("var "+varDeclarations.substring(2)+(appendFirst?"":";\n"))}return this.source.merge()},blockValue:function blockValue(name){var blockHelperMissing=this.aliasable("helpers.blockHelperMissing"),params=[this.contextName(0)];this.setupHelperArgs(name,0,params);var blockName=this.popStack();params.splice(1,0,blockName);this.push(this.source.functionCall(blockHelperMissing,"call",params))},ambiguousBlockValue:function ambiguousBlockValue(){var blockHelperMissing=this.aliasable("helpers.blockHelperMissing"),params=[this.contextName(0)];this.setupHelperArgs("",0,params,true);this.flushInline();var current=this.topStack();params.splice(1,0,current);this.pushSource(["if (!",this.lastHelper,") { ",current," = ",this.source.functionCall(blockHelperMissing,"call",params),"}"])},appendContent:function appendContent(content){if(this.pendingContent){content=this.pendingContent+content}else{this.pendingLocation=this.source.currentLocation}this.pendingContent=content},append:function append(){if(this.isInline()){this.replaceStack(function(current){return[" != null ? ",current,' : ""']});this.pushSource(this.appendToBuffer(this.popStack()))}else{var local=this.popStack();this.pushSource(["if (",local," != null) { ",this.appendToBuffer(local,undefined,true)," }"]);if(this.environment.isSimple){this.pushSource(["else { ",this.appendToBuffer("''",undefined,true)," }"])}}},appendEscaped:function appendEscaped(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function getContext(depth){this.lastContext=depth},pushContext:function pushContext(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function lookupOnContext(parts,falsy,scoped){var i=0;if(!scoped&&this.options.compat&&!this.lastContext){this.push(this.depthedLookup(parts[i++]))}else{this.pushContext()}this.resolvePath("context",parts,i,falsy)},lookupBlockParam:function lookupBlockParam(blockParamId,parts){this.useBlockParams=true;this.push(["blockParams[",blockParamId[0],"][",blockParamId[1],"]"]);this.resolvePath("context",parts,1)},lookupData:function lookupData(depth,parts){if(!depth){this.pushStackLiteral("data")}else{this.pushStackLiteral("this.data(data, "+depth+")")}this.resolvePath("data",parts,0,true)},resolvePath:function resolvePath(type,parts,i,falsy){var _this=this;if(this.options.strict||this.options.assumeObjects){this.push(strictLookup(this.options.strict,this,parts,type));return}var len=parts.length;for(;i<len;i++){this.replaceStack(function(current){var lookup=_this.nameLookup(current,parts[i],type);if(!falsy){return[" != null ? ",lookup," : ",current]}else{return[" && ",lookup]}})}},resolvePossibleLambda:function resolvePossibleLambda(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function pushStringParam(string,type){this.pushContext();this.pushString(type);if(type!=="SubExpression"){if(typeof string==="string"){this.pushString(string)}else{this.pushStackLiteral(string)}}},emptyHash:function emptyHash(omitEmpty){if(this.trackIds){this.push("{}")}if(this.stringParams){this.push("{}");this.push("{}")}this.pushStackLiteral(omitEmpty?"undefined":"{}")},pushHash:function pushHash(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function popHash(){var hash=this.hash;this.hash=this.hashes.pop();if(this.trackIds){this.push(this.objectLiteral(hash.ids))}if(this.stringParams){this.push(this.objectLiteral(hash.contexts));this.push(this.objectLiteral(hash.types))}this.push(this.objectLiteral(hash.values))},pushString:function pushString(string){this.pushStackLiteral(this.quotedString(string))},pushLiteral:function pushLiteral(value){this.pushStackLiteral(value)},pushProgram:function pushProgram(guid){if(guid!=null){this.pushStackLiteral(this.programExpression(guid))}else{this.pushStackLiteral(null)}},invokeHelper:function invokeHelper(paramSize,name,isSimple){var nonHelper=this.popStack(),helper=this.setupHelper(paramSize,name),simple=isSimple?[helper.name," || "]:"";var lookup=["("].concat(simple,nonHelper);if(!this.options.strict){lookup.push(" || ",this.aliasable("helpers.helperMissing"))}lookup.push(")");this.push(this.source.functionCall(lookup,"call",helper.callParams))},invokeKnownHelper:function invokeKnownHelper(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(this.source.functionCall(helper.name,"call",helper.callParams))},invokeAmbiguous:function invokeAmbiguous(name,helperCall){this.useRegister("helper");var nonHelper=this.popStack();this.emptyHash();var helper=this.setupHelper(0,name,helperCall);var helperName=this.lastHelper=this.nameLookup("helpers",name,"helper");var lookup=["(","(helper = ",helperName," || ",nonHelper,")"];if(!this.options.strict){lookup[0]="(helper = ";lookup.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))}this.push(["(",lookup,helper.paramsInit?["),(",helper.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",helper.callParams)," : helper))"])},invokePartial:function invokePartial(isDynamic,name,indent){var params=[],options=this.setupParams(name,1,params,false);if(isDynamic){name=this.popStack();delete options.name}if(indent){options.indent=JSON.stringify(indent)}options.helpers="helpers";options.partials="partials";if(!isDynamic){params.unshift(this.nameLookup("partials",name,"partial"))}else{params.unshift(name)}if(this.options.compat){options.depths="depths"}options=this.objectLiteral(options);params.push(options);this.push(this.source.functionCall("this.invokePartial","",params))},assignToHash:function assignToHash(key){var value=this.popStack(),context=undefined,type=undefined,id=undefined;if(this.trackIds){id=this.popStack()}if(this.stringParams){type=this.popStack();context=this.popStack()}var hash=this.hash;if(context){hash.contexts[key]=context}if(type){hash.types[key]=type}if(id){hash.ids[key]=id}hash.values[key]=value},pushId:function pushId(type,name,child){if(type==="BlockParam"){this.pushStackLiteral("blockParams["+name[0]+"].path["+name[1]+"]"+(child?" + "+JSON.stringify("."+child):""))}else if(type==="PathExpression"){this.pushString(name)}else if(type==="SubExpression"){this.pushStackLiteral("true")}else{this.pushStackLiteral("null")}},compiler:JavaScriptCompiler,compileChildren:function compileChildren(environment,options){var children=environment.children,child=undefined,compiler=undefined;for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler;var index=this.matchExistingProgram(child);if(index==null){this.context.programs.push("");index=this.context.programs.length;child.index=index;child.name="program"+index;this.context.programs[index]=compiler.compile(child,options,this.context,!this.precompile);this.context.environments[index]=child;this.useDepths=this.useDepths||compiler.useDepths;this.useBlockParams=this.useBlockParams||compiler.useBlockParams}else{child.index=index;child.name="program"+index;this.useDepths=this.useDepths||child.useDepths;this.useBlockParams=this.useBlockParams||child.useBlockParams}}},matchExistingProgram:function matchExistingProgram(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child)){return i}}},programExpression:function programExpression(guid){var child=this.environment.children[guid],programParams=[child.index,"data",child.blockParams];if(this.useBlockParams||this.useDepths){programParams.push("blockParams")}if(this.useDepths){programParams.push("depths")}return"this.program("+programParams.join(", ")+")"},useRegister:function useRegister(name){if(!this.registers[name]){this.registers[name]=true;this.registers.list.push(name)}},push:function push(expr){if(!(expr instanceof Literal)){expr=this.source.wrap(expr)}this.inlineStack.push(expr);return expr},pushStackLiteral:function pushStackLiteral(item){this.push(new Literal(item))},pushSource:function pushSource(source){if(this.pendingContent){this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation));this.pendingContent=undefined}if(source){this.source.push(source)}},replaceStack:function replaceStack(callback){var prefix=["("],stack=undefined,createdStack=undefined,usedLiteral=undefined;if(!this.isInline()){throw new _Exception2["default"]("replaceStack on non-inline")}var top=this.popStack(true);if(top instanceof Literal){stack=[top.value];prefix=["(",stack];usedLiteral=true}else{createdStack=true;var _name=this.incrStack();prefix=["((",this.push(_name)," = ",top,")"];stack=this.topStack()}var item=callback.call(this,stack);if(!usedLiteral){this.popStack()}if(createdStack){this.stackSlot--}this.push(prefix.concat(item,")"))},incrStack:function incrStack(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function topStackName(){return"stack"+this.stackSlot},flushInline:function flushInline(){var inlineStack=this.inlineStack;this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal){this.compileStack.push(entry)}else{var stack=this.incrStack();this.pushSource([stack," = ",entry,";"]);this.compileStack.push(stack)}}},isInline:function isInline(){return this.inlineStack.length},popStack:function popStack(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal){return item.value}else{if(!inline){if(!this.stackSlot){throw new _Exception2["default"]("Invalid stack pop")}this.stackSlot--}return item}},topStack:function topStack(){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];if(item instanceof Literal){return item.value}else{return item}},contextName:function contextName(context){if(this.useDepths&&context){return"depths["+context+"]"}else{return"depth"+context}},quotedString:function quotedString(str){return this.source.quotedString(str)},objectLiteral:function objectLiteral(obj){return this.source.objectLiteral(obj)},aliasable:function aliasable(name){var ret=this.aliases[name];if(ret){ret.referenceCount++;return ret}ret=this.aliases[name]=this.source.wrap(name);ret.aliasable=true;ret.referenceCount=1;return ret},setupHelper:function setupHelper(paramSize,name,blockHelper){var params=[],paramsInit=this.setupHelperArgs(name,paramSize,params,blockHelper);var foundHelper=this.nameLookup("helpers",name,"helper");return{params:params,paramsInit:paramsInit,name:foundHelper,callParams:[this.contextName(0)].concat(params)}},setupParams:function setupParams(helper,paramSize,params){var options={},contexts=[],types=[],ids=[],param=undefined;options.name=this.quotedString(helper);options.hash=this.popStack();if(this.trackIds){options.hashIds=this.popStack()}if(this.stringParams){options.hashTypes=this.popStack();options.hashContexts=this.popStack()}var inverse=this.popStack(),program=this.popStack();if(program||inverse){options.fn=program||"this.noop";options.inverse=inverse||"this.noop"}var i=paramSize;while(i--){param=this.popStack();params[i]=param;if(this.trackIds){ids[i]=this.popStack()}if(this.stringParams){types[i]=this.popStack();contexts[i]=this.popStack()}}if(this.trackIds){options.ids=this.source.generateArray(ids)}if(this.stringParams){options.types=this.source.generateArray(types);options.contexts=this.source.generateArray(contexts)}if(this.options.data){options.data="data"}if(this.useBlockParams){options.blockParams="blockParams"}return options},setupHelperArgs:function setupHelperArgs(helper,paramSize,params,useRegister){var options=this.setupParams(helper,paramSize,params,true);options=this.objectLiteral(options);if(useRegister){this.useRegister("options");params.push("options");return["options=",options]}else{params.push(options);return""}}};(function(){var reservedWords=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield await"+" null true false").split(" ");var compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++){compilerWords[reservedWords[i]]=true}})();JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)};function strictLookup(requireTerminal,compiler,parts,type){var stack=compiler.popStack(),i=0,len=parts.length;if(requireTerminal){len--}for(;i<len;i++){stack=compiler.nameLookup(stack,parts[i],type)}if(requireTerminal){return[compiler.aliasable("this.strict"),"(",stack,", ",compiler.quotedString(parts[i]),")"]}else{return stack}}exports["default"]=JavaScriptCompiler;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(8)["default"];exports.__esModule=true;var _Exception=__webpack_require__(12);var _Exception2=_interopRequireDefault(_Exception);var _AST=__webpack_require__(2);var _AST2=_interopRequireDefault(_AST);function Visitor(){this.parents=[]}Visitor.prototype={constructor:Visitor,mutating:false,acceptKey:function acceptKey(node,name){var value=this.accept(node[name]);if(this.mutating){if(value&&(!value.type||!_AST2["default"][value.type])){throw new _Exception2["default"]('Unexpected node type "'+value.type+'" found when accepting '+name+" on "+node.type)}node[name]=value}},acceptRequired:function acceptRequired(node,name){this.acceptKey(node,name);if(!node[name]){throw new _Exception2["default"](node.type+" requires "+name)}},acceptArray:function acceptArray(array){for(var i=0,l=array.length;i<l;i++){this.acceptKey(array,i);if(!array[i]){array.splice(i,1);i--;l--}}},accept:function accept(object){if(!object){return}if(this.current){this.parents.unshift(this.current)}this.current=object;var ret=this[object.type](object);this.current=this.parents.shift();if(!this.mutating||ret){return ret}else if(ret!==false){return object}},Program:function Program(program){this.acceptArray(program.body)},MustacheStatement:function MustacheStatement(mustache){this.acceptRequired(mustache,"path");this.acceptArray(mustache.params);this.acceptKey(mustache,"hash")},BlockStatement:function BlockStatement(block){this.acceptRequired(block,"path");this.acceptArray(block.params);this.acceptKey(block,"hash");this.acceptKey(block,"program");this.acceptKey(block,"inverse")},PartialStatement:function PartialStatement(partial){this.acceptRequired(partial,"name");this.acceptArray(partial.params);this.acceptKey(partial,"hash")},ContentStatement:function ContentStatement(){},CommentStatement:function CommentStatement(){},SubExpression:function SubExpression(sexpr){this.acceptRequired(sexpr,"path");this.acceptArray(sexpr.params);this.acceptKey(sexpr,"hash")},PathExpression:function PathExpression(){},StringLiteral:function StringLiteral(){},NumberLiteral:function NumberLiteral(){},BooleanLiteral:function BooleanLiteral(){},UndefinedLiteral:function UndefinedLiteral(){},NullLiteral:function NullLiteral(){},Hash:function Hash(hash){this.acceptArray(hash.pairs)},HashPair:function HashPair(pair){this.acceptRequired(pair,"value")}};exports["default"]=Visitor;module.exports=exports["default"]},function(module,exports,__webpack_require__){(function(global){"use strict";exports.__esModule=true;exports["default"]=function(Handlebars){var root=typeof global!=="undefined"?global:window,$Handlebars=root.Handlebars;Handlebars.noConflict=function(){if(root.Handlebars===Handlebars){root.Handlebars=$Handlebars}}};module.exports=exports["default"]}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";exports["default"]=function(obj){return obj&&obj.__esModule?obj:{default:obj}};exports.__esModule=true},function(module,exports,__webpack_require__){"use strict";exports["default"]=function(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(typeof obj==="object"&&obj!==null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}};exports.__esModule=true},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9)["default"];var _interopRequireDefault=__webpack_require__(8)["default"];exports.__esModule=true;exports.HandlebarsEnvironment=HandlebarsEnvironment;exports.createFrame=createFrame;var _import=__webpack_require__(13);var Utils=_interopRequireWildcard(_import);var _Exception=__webpack_require__(12);var _Exception2=_interopRequireDefault(_Exception);var VERSION="3.0.1";exports.VERSION=VERSION;var COMPILER_REVISION=6;exports.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};exports.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{};this.partials=partials||{};registerDefaultHelpers(this)}HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function registerHelper(name,fn){if(toString.call(name)===objectType){if(fn){throw new _Exception2["default"]("Arg not supported with multiple helpers")}Utils.extend(this.helpers,name)}else{this.helpers[name]=fn}},unregisterHelper:function unregisterHelper(name){delete this.helpers[name]},registerPartial:function registerPartial(name,partial){if(toString.call(name)===objectType){Utils.extend(this.partials,name)}else{if(typeof partial==="undefined"){throw new _Exception2["default"]("Attempting to register a partial as undefined")}this.partials[name]=partial}},unregisterPartial:function unregisterPartial(name){delete this.partials[name]}};function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(){if(arguments.length===1){return undefined}else{throw new _Exception2["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}});instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse,fn=options.fn;if(context===true){return fn(this)}else if(context===false||context==null){return inverse(this)}else if(isArray(context)){if(context.length>0){if(options.ids){options.ids=[options.name]}return instance.helpers.each(context,options)}else{return inverse(this)}}else{if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.name);options={data:data}}return fn(context,options)}});instance.registerHelper("each",function(context,options){if(!options){throw new _Exception2["default"]("Must pass iterator to #each")}var fn=options.fn,inverse=options.inverse,i=0,ret="",data=undefined,contextPath=undefined;if(options.data&&options.ids){contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0])+"."}if(isFunction(context)){context=context.call(this)}if(options.data){data=createFrame(options.data)}function execIteration(field,index,last){if(data){data.key=field;data.index=index;data.first=index===0;data.last=!!last;if(contextPath){data.contextPath=contextPath+field}}ret=ret+fn(context[field],{data:data,blockParams:Utils.blockParams([context[field],field],[contextPath+field,null])})}if(context&&typeof context==="object"){if(isArray(context)){for(var j=context.length;i<j;i++){execIteration(i,i,i===context.length-1)}}else{var priorKey=undefined;for(var key in context){if(context.hasOwnProperty(key)){if(priorKey){execIteration(priorKey,i-1)}priorKey=key;i++}}if(priorKey){execIteration(priorKey,i-1,true)}}}if(i===0){ret=inverse(this)}return ret});instance.registerHelper("if",function(conditional,options){if(isFunction(conditional)){conditional=conditional.call(this)}if(!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})});instance.registerHelper("with",function(context,options){if(isFunction(context)){context=context.call(this)}var fn=options.fn;if(!Utils.isEmpty(context)){if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0]);options={data:data}}return fn(context,options)}else{return options.inverse(this)}});instance.registerHelper("log",function(message,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;instance.log(level,message)});instance.registerHelper("lookup",function(obj,field){return obj&&obj[field]})}var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function log(level,message){if(typeof console!=="undefined"&&logger.level<=level){var method=logger.methodMap[level];(console[method]||console.log).call(console,message)}}};exports.logger=logger;var log=logger.log;exports.log=log;function createFrame(object){var frame=Utils.extend({},object);frame._parent=object;return frame}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;function SafeString(string){this.string=string}SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string};exports["default"]=SafeString;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var loc=node&&node.loc,line=undefined,column=undefined;if(loc){line=loc.start.line;column=loc.start.column;message+=" - "+line+":"+column}var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}if(Error.captureStackTrace){Error.captureStackTrace(this,Exception)}if(loc){this.lineNumber=line;this.column=column}}Exception.prototype=new Error;exports["default"]=Exception;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.extend=extend;exports.indexOf=indexOf;exports.escapeExpression=escapeExpression;exports.isEmpty=isEmpty;exports.blockParams=blockParams;exports.appendContextPath=appendContextPath;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g,possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++){for(var key in arguments[i]){if(Object.prototype.hasOwnProperty.call(arguments[i],key)){obj[key]=arguments[i][key]}}}return obj}var toString=Object.prototype.toString;exports.toString=toString;var isFunction=function isFunction(value){return typeof value==="function"};if(isFunction(/x/)){exports.isFunction=isFunction=function(value){return typeof value==="function"&&toString.call(value)==="[object Function]"}}var isFunction;exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value==="object"?toString.call(value)==="[object Array]":false};exports.isArray=isArray;function indexOf(array,value){for(var i=0,len=array.length;i<len;i++){if(array[i]===value){return i}}return-1}function escapeExpression(string){if(typeof string!=="string"){if(string&&string.toHTML){return string.toHTML()}else if(string==null){return""}else if(!string){return string+""}string=""+string}if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)}function isEmpty(value){if(!value&&value!==0){return true}else if(isArray(value)&&value.length===0){return true}else{return false}}function blockParams(params,ids){params.path=ids;return params}function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9)["default"];var _interopRequireDefault=__webpack_require__(8)["default"];exports.__esModule=true;exports.checkRevision=checkRevision;exports.template=template;exports.wrapProgram=wrapProgram;exports.resolvePartial=resolvePartial;exports.invokePartial=invokePartial;exports.noop=noop;var _import=__webpack_require__(13);var Utils=_interopRequireWildcard(_import);var _Exception=__webpack_require__(12);var _Exception2=_interopRequireDefault(_Exception);var _COMPILER_REVISION$REVISION_CHANGES$createFrame=__webpack_require__(10);function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=_COMPILER_REVISION$REVISION_CHANGES$createFrame.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=_COMPILER_REVISION$REVISION_CHANGES$createFrame.REVISION_CHANGES[currentRevision],compilerVersions=_COMPILER_REVISION$REVISION_CHANGES$createFrame.REVISION_CHANGES[compilerRevision];throw new _Exception2["default"]("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}else{throw new _Exception2["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+").")}}}function template(templateSpec,env){if(!env){throw new _Exception2["default"]("No environment passed to template")}if(!templateSpec||!templateSpec.main){throw new _Exception2["default"]("Unknown template object: "+typeof templateSpec)}env.VM.checkRevision(templateSpec.compiler);function invokePartialWrapper(partial,context,options){if(options.hash){context=Utils.extend({},context,options.hash)}partial=env.VM.resolvePartial.call(this,partial,context,options);var result=env.VM.invokePartial.call(this,partial,context,options);if(result==null&&env.compile){options.partials[options.name]=env.compile(partial,templateSpec.compilerOptions,env);result=options.partials[options.name](context,options)}if(result!=null){if(options.indent){var lines=result.split("\n");for(var i=0,l=lines.length;i<l;i++){if(!lines[i]&&i+1===l){break}lines[i]=options.indent+lines[i]}result=lines.join("\n")}return result}else{throw new _Exception2["default"]("The partial "+options.name+" could not be compiled when running in runtime-only mode")}}var container={strict:function strict(obj,name){if(!(name in obj)){throw new _Exception2["default"]('"'+name+'" not defined in '+obj)}return obj[name]},lookup:function lookup(depths,name){var len=depths.length;for(var i=0;i<len;i++){if(depths[i]&&depths[i][name]!=null){return depths[i][name]}}},lambda:function lambda(current,context){return typeof current==="function"?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function fn(i){return templateSpec[i]},programs:[],program:function program(i,data,declaredBlockParams,blockParams,depths){var programWrapper=this.programs[i],fn=this.fn(i);if(data||depths||blockParams||declaredBlockParams){programWrapper=wrapProgram(this,i,fn,data,declaredBlockParams,blockParams,depths)}else if(!programWrapper){programWrapper=this.programs[i]=wrapProgram(this,i,fn)}return programWrapper},data:function data(value,depth){while(value&&depth--){value=value._parent}return value},merge:function merge(param,common){var obj=param||common;if(param&&common&&param!==common){obj=Utils.extend({},common,param)}return obj},noop:env.VM.noop,compilerInfo:templateSpec.compiler};function ret(context){var options=arguments[1]===undefined?{}:arguments[1];var data=options.data;ret._setup(options);if(!options.partial&&templateSpec.useData){data=initData(context,data)}var depths=undefined,blockParams=templateSpec.useBlockParams?[]:undefined;if(templateSpec.useDepths){depths=options.depths?[context].concat(options.depths):[context]}return templateSpec.main.call(container,context,container.helpers,container.partials,data,blockParams,depths)}ret.isTop=true;ret._setup=function(options){if(!options.partial){container.helpers=container.merge(options.helpers,env.helpers);if(templateSpec.usePartial){container.partials=container.merge(options.partials,env.partials)}}else{container.helpers=options.helpers;container.partials=options.partials}};ret._child=function(i,data,blockParams,depths){if(templateSpec.useBlockParams&&!blockParams){throw new _Exception2["default"]("must pass block params")}if(templateSpec.useDepths&&!depths){throw new _Exception2["default"]("must pass parent depths")}return wrapProgram(container,i,templateSpec[i],data,0,blockParams,depths)};return ret}function wrapProgram(container,i,fn,data,declaredBlockParams,blockParams,depths){function prog(context){var options=arguments[1]===undefined?{}:arguments[1];return fn.call(container,context,container.helpers,container.partials,options.data||data,blockParams&&[options.blockParams].concat(blockParams),depths&&[context].concat(depths))}prog.program=i;prog.depth=depths?depths.length:0;prog.blockParams=declaredBlockParams||0;return prog}function resolvePartial(partial,context,options){if(!partial){partial=options.partials[options.name]}else if(!partial.call&&!options.name){options.name=partial;partial=options.partials[partial]}return partial}function invokePartial(partial,context,options){options.partial=true;if(partial===undefined){throw new _Exception2["default"]("The partial "+options.name+" could not be found")}else if(partial instanceof Function){return partial(context,options)}}function noop(){return""}function initData(context,data){if(!data||!("root"in data)){data=data?_COMPILER_REVISION$REVISION_CHANGES$createFrame.createFrame(data):{};data.root=context}return data}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var handlebars=function(){var parser={trace:function trace(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,
openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];break;case 2:this.$=new yy.Program($$[$0],null,{},yy.locInfo(this._$));break;case 3:this.$=$$[$0];break;case 4:this.$=$$[$0];break;case 5:this.$=$$[$0];break;case 6:this.$=$$[$0];break;case 7:this.$=$$[$0];break;case 8:this.$=new yy.CommentStatement(yy.stripComment($$[$0]),yy.stripFlags($$[$0],$$[$0]),yy.locInfo(this._$));break;case 9:this.$=new yy.ContentStatement($$[$0],yy.locInfo(this._$));break;case 10:this.$=yy.prepareRawBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 11:this.$={path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1]};break;case 12:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],false,this._$);break;case 13:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],true,this._$);break;case 14:this.$={path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 15:this.$={path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 16:this.$={path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 17:this.$={strip:yy.stripFlags($$[$0-1],$$[$0-1]),program:$$[$0]};break;case 18:var inverse=yy.prepareBlock($$[$0-2],$$[$0-1],$$[$0],$$[$0],false,this._$),program=new yy.Program([inverse],null,{},yy.locInfo(this._$));program.chained=true;this.$={strip:$$[$0-2].strip,program:program,chain:true};break;case 19:this.$=$$[$0];break;case 20:this.$={path:$$[$0-1],strip:yy.stripFlags($$[$0-2],$$[$0])};break;case 21:this.$=yy.prepareMustache($$[$0-3],$$[$0-2],$$[$0-1],$$[$0-4],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 22:this.$=yy.prepareMustache($$[$0-3],$$[$0-2],$$[$0-1],$$[$0-4],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 23:this.$=new yy.PartialStatement($$[$0-3],$$[$0-2],$$[$0-1],yy.stripFlags($$[$0-4],$$[$0]),yy.locInfo(this._$));break;case 24:this.$=$$[$0];break;case 25:this.$=$$[$0];break;case 26:this.$=new yy.SubExpression($$[$0-3],$$[$0-2],$$[$0-1],yy.locInfo(this._$));break;case 27:this.$=new yy.Hash($$[$0],yy.locInfo(this._$));break;case 28:this.$=new yy.HashPair(yy.id($$[$0-2]),$$[$0],yy.locInfo(this._$));break;case 29:this.$=yy.id($$[$0-1]);break;case 30:this.$=$$[$0];break;case 31:this.$=$$[$0];break;case 32:this.$=new yy.StringLiteral($$[$0],yy.locInfo(this._$));break;case 33:this.$=new yy.NumberLiteral($$[$0],yy.locInfo(this._$));break;case 34:this.$=new yy.BooleanLiteral($$[$0],yy.locInfo(this._$));break;case 35:this.$=new yy.UndefinedLiteral(yy.locInfo(this._$));break;case 36:this.$=new yy.NullLiteral(yy.locInfo(this._$));break;case 37:this.$=$$[$0];break;case 38:this.$=$$[$0];break;case 39:this.$=yy.preparePath(true,$$[$0],this._$);break;case 40:this.$=yy.preparePath(false,$$[$0],this._$);break;case 41:$$[$0-2].push({part:yy.id($$[$0]),original:$$[$0],separator:$$[$0-1]});this.$=$$[$0-2];break;case 42:this.$=[{part:yy.id($$[$0]),original:$$[$0]}];break;case 43:this.$=[];break;case 44:$$[$0-1].push($$[$0]);break;case 45:this.$=[];break;case 46:$$[$0-1].push($$[$0]);break;case 53:this.$=[];break;case 54:$$[$0-1].push($$[$0]);break;case 59:this.$=[];break;case 60:$$[$0-1].push($$[$0]);break;case 65:this.$=[];break;case 66:$$[$0-1].push($$[$0]);break;case 73:this.$=[];break;case 74:$$[$0-1].push($$[$0]);break;case 77:this.$=[];break;case 78:$$[$0-1].push($$[$0]);break;case 81:this.$=[];break;case 82:$$[$0-1].push($$[$0]);break;case 85:this.$=[];break;case 86:$$[$0-1].push($$[$0]);break;case 89:this.$=[$$[$0]];break;case 90:$$[$0-1].push($$[$0]);break;case 91:this.$=[$$[$0]];break;case 92:$$[$0-1].push($$[$0]);break}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function parseError(str,hash){throw new Error(str)},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number"){token=self.symbols_[token]||token}return token}var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex()}action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])if(this.terminals_[p]&&p>2){expected.push("'"+this.terminals_[p]+"'")}if(this.lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'"}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'")}this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0)recovering--}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]}r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined"){return r}if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};var lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash)}else{throw new Error(str)}},setInput:function setInput(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function input(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return ch},unput:function unput(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len-1);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1)this.yylineno-=lines.length-1;var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len]}return this},more:function more(){this._more=true;return this},less:function less(n){this.unput(this.match.slice(n))},pastInput:function pastInput(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function upcomingInput(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function showPosition(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function next(){if(this.done){return this.EOF}if(!this._input)this.done=true;var token,match,tempMatch,index,col,lines;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(!this.options.flex)break}}if(match){lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines)this.yylineno+=lines.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(token){return token}else{return}}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(typeof r!=="undefined"){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function topState(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)}};lexer.options={};lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:if(yy_.yytext.slice(-2)==="\\\\"){strip(0,1);this.begin("mu")}else if(yy_.yytext.slice(-1)==="\\"){strip(0,1);this.begin("emu")}else{this.begin("mu")}if(yy_.yytext){return 14}break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:yy_.yytext=yy_.yytext.substr(5,yy_.yyleng-9);this.popState();return 16;break;case 4:return 14;break;case 5:this.popState();return 13;break;case 6:return 59;break;case 7:return 62;break;case 8:return 17;break;case 9:this.popState();this.begin("raw");return 21;break;case 10:return 53;break;case 11:return 27;break;case 12:return 45;break;case 13:this.popState();return 42;break;case 14:this.popState();return 42;break;case 15:return 32;break;case 16:return 37;break;case 17:return 49;break;case 18:return 46;break;case 19:this.unput(yy_.yytext);this.popState();this.begin("com");break;case 20:this.popState();return 13;break;case 21:return 46;break;case 22:return 67;break;case 23:return 66;break;case 24:return 66;break;case 25:return 81;break;case 26:break;case 27:this.popState();return 52;break;case 28:this.popState();return 31;break;case 29:yy_.yytext=strip(1,2).replace(/\\"/g,'"');return 74;break;case 30:yy_.yytext=strip(1,2).replace(/\\'/g,"'");return 74;break;case 31:return 79;break;case 32:return 76;break;case 33:return 76;break;case 34:return 77;break;case 35:return 78;break;case 36:return 75;break;case 37:return 69;break;case 38:return 71;break;case 39:return 66;break;case 40:return 66;break;case 41:return"INVALID";break;case 42:return 5;break}};lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];lexer.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[5],inclusive:false},raw:{rules:[3,4],inclusive:false},INITIAL:{rules:[0,1,42],inclusive:true}};return lexer}();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser}();exports["default"]=handlebars;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(8)["default"];exports.__esModule=true;var _Visitor=__webpack_require__(6);var _Visitor2=_interopRequireDefault(_Visitor);function WhitespaceControl(){}WhitespaceControl.prototype=new _Visitor2["default"];WhitespaceControl.prototype.Program=function(program){var isRoot=!this.isRootSeen;this.isRootSeen=true;var body=program.body;for(var i=0,l=body.length;i<l;i++){var current=body[i],strip=this.accept(current);if(!strip){continue}var _isPrevWhitespace=isPrevWhitespace(body,i,isRoot),_isNextWhitespace=isNextWhitespace(body,i,isRoot),openStandalone=strip.openStandalone&&_isPrevWhitespace,closeStandalone=strip.closeStandalone&&_isNextWhitespace,inlineStandalone=strip.inlineStandalone&&_isPrevWhitespace&&_isNextWhitespace;if(strip.close){omitRight(body,i,true)}if(strip.open){omitLeft(body,i,true)}if(inlineStandalone){omitRight(body,i);if(omitLeft(body,i)){if(current.type==="PartialStatement"){current.indent=/([ \t]+$)/.exec(body[i-1].original)[1]}}}if(openStandalone){omitRight((current.program||current.inverse).body);omitLeft(body,i)}if(closeStandalone){omitRight(body,i);omitLeft((current.inverse||current.program).body)}}return program};WhitespaceControl.prototype.BlockStatement=function(block){this.accept(block.program);this.accept(block.inverse);var program=block.program||block.inverse,inverse=block.program&&block.inverse,firstInverse=inverse,lastInverse=inverse;if(inverse&&inverse.chained){firstInverse=inverse.body[0].program;while(lastInverse.chained){lastInverse=lastInverse.body[lastInverse.body.length-1].program}}var strip={open:block.openStrip.open,close:block.closeStrip.close,openStandalone:isNextWhitespace(program.body),closeStandalone:isPrevWhitespace((firstInverse||program).body)};if(block.openStrip.close){omitRight(program.body,null,true)}if(inverse){var inverseStrip=block.inverseStrip;if(inverseStrip.open){omitLeft(program.body,null,true)}if(inverseStrip.close){omitRight(firstInverse.body,null,true)}if(block.closeStrip.open){omitLeft(lastInverse.body,null,true)}if(isPrevWhitespace(program.body)&&isNextWhitespace(firstInverse.body)){omitLeft(program.body);omitRight(firstInverse.body)}}else if(block.closeStrip.open){omitLeft(program.body,null,true)}return strip};WhitespaceControl.prototype.MustacheStatement=function(mustache){return mustache.strip};WhitespaceControl.prototype.PartialStatement=WhitespaceControl.prototype.CommentStatement=function(node){var strip=node.strip||{};return{inlineStandalone:true,open:strip.open,close:strip.close}};function isPrevWhitespace(body,i,isRoot){if(i===undefined){i=body.length}var prev=body[i-1],sibling=body[i-2];if(!prev){return isRoot}if(prev.type==="ContentStatement"){return(sibling||!isRoot?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(prev.original)}}function isNextWhitespace(body,i,isRoot){if(i===undefined){i=-1}var next=body[i+1],sibling=body[i+2];if(!next){return isRoot}if(next.type==="ContentStatement"){return(sibling||!isRoot?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(next.original)}}function omitRight(body,i,multiple){var current=body[i==null?0:i+1];if(!current||current.type!=="ContentStatement"||!multiple&&current.rightStripped){return}var original=current.value;current.value=current.value.replace(multiple?/^\s+/:/^[ \t]*\r?\n?/,"");current.rightStripped=current.value!==original}function omitLeft(body,i,multiple){var current=body[i==null?body.length-1:i-1];if(!current||current.type!=="ContentStatement"||!multiple&&current.leftStripped){return}var original=current.value;current.value=current.value.replace(multiple?/\s+$/:/[ \t]+$/,"");current.leftStripped=current.value!==original;return current.leftStripped}exports["default"]=WhitespaceControl;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(8)["default"];exports.__esModule=true;exports.SourceLocation=SourceLocation;exports.id=id;exports.stripFlags=stripFlags;exports.stripComment=stripComment;exports.preparePath=preparePath;exports.prepareMustache=prepareMustache;exports.prepareRawBlock=prepareRawBlock;exports.prepareBlock=prepareBlock;var _Exception=__webpack_require__(12);var _Exception2=_interopRequireDefault(_Exception);function SourceLocation(source,locInfo){this.source=source;this.start={line:locInfo.first_line,column:locInfo.first_column};this.end={line:locInfo.last_line,column:locInfo.last_column}}function id(token){if(/^\[.*\]$/.test(token)){return token.substr(1,token.length-2)}else{return token}}function stripFlags(open,close){return{open:open.charAt(2)==="~",close:close.charAt(close.length-3)==="~"}}function stripComment(comment){return comment.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function preparePath(data,parts,locInfo){locInfo=this.locInfo(locInfo);var original=data?"@":"",dig=[],depth=0,depthString="";for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part,isLiteral=parts[i].original!==part;original+=(parts[i].separator||"")+part;if(!isLiteral&&(part===".."||part==="."||part==="this")){if(dig.length>0){throw new _Exception2["default"]("Invalid path: "+original,{loc:locInfo})}else if(part===".."){depth++;depthString+="../"}}else{dig.push(part)}}return new this.PathExpression(data,depth,dig,original,locInfo)}function prepareMustache(path,params,hash,open,strip,locInfo){var escapeFlag=open.charAt(3)||open.charAt(2),escaped=escapeFlag!=="{"&&escapeFlag!=="&";return new this.MustacheStatement(path,params,hash,escaped,strip,this.locInfo(locInfo))}function prepareRawBlock(openRawBlock,content,close,locInfo){if(openRawBlock.path.original!==close){var errorNode={loc:openRawBlock.path.loc}
;throw new _Exception2["default"](openRawBlock.path.original+" doesn't match "+close,errorNode)}locInfo=this.locInfo(locInfo);var program=new this.Program([content],null,{},locInfo);return new this.BlockStatement(openRawBlock.path,openRawBlock.params,openRawBlock.hash,program,undefined,{},{},{},locInfo)}function prepareBlock(openBlock,program,inverseAndProgram,close,inverted,locInfo){if(close&&close.path&&openBlock.path.original!==close.path.original){var errorNode={loc:openBlock.path.loc};throw new _Exception2["default"](openBlock.path.original+" doesn't match "+close.path.original,errorNode)}program.blockParams=openBlock.blockParams;var inverse=undefined,inverseStrip=undefined;if(inverseAndProgram){if(inverseAndProgram.chain){inverseAndProgram.program.body[0].closeStrip=close.strip}inverseStrip=inverseAndProgram.strip;inverse=inverseAndProgram.program}if(inverted){inverted=inverse;inverse=program;program=inverted}return new this.BlockStatement(openBlock.path,openBlock.params,openBlock.hash,program,inverse,openBlock.strip,inverseStrip,close&&close.strip,this.locInfo(locInfo))}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _isArray=__webpack_require__(13);var SourceNode=undefined;try{if(false){var SourceMap=require("source-map");SourceNode=SourceMap.SourceNode}}catch(err){}if(!SourceNode){SourceNode=function(line,column,srcFile,chunks){this.src="";if(chunks){this.add(chunks)}};SourceNode.prototype={add:function add(chunks){if(_isArray.isArray(chunks)){chunks=chunks.join("")}this.src+=chunks},prepend:function prepend(chunks){if(_isArray.isArray(chunks)){chunks=chunks.join("")}this.src=chunks+this.src},toStringWithSourceMap:function toStringWithSourceMap(){return{code:this.toString()}},toString:function toString(){return this.src}}}function castChunk(chunk,codeGen,loc){if(_isArray.isArray(chunk)){var ret=[];for(var i=0,len=chunk.length;i<len;i++){ret.push(codeGen.wrap(chunk[i],loc))}return ret}else if(typeof chunk==="boolean"||typeof chunk==="number"){return chunk+""}return chunk}function CodeGen(srcFile){this.srcFile=srcFile;this.source=[]}CodeGen.prototype={prepend:function prepend(source,loc){this.source.unshift(this.wrap(source,loc))},push:function push(source,loc){this.source.push(this.wrap(source,loc))},merge:function merge(){var source=this.empty();this.each(function(line){source.add(["  ",line,"\n"])});return source},each:function each(iter){for(var i=0,len=this.source.length;i<len;i++){iter(this.source[i])}},empty:function empty(){var loc=arguments[0]===undefined?this.currentLocation||{start:{}}:arguments[0];return new SourceNode(loc.start.line,loc.start.column,this.srcFile)},wrap:function wrap(chunk){var loc=arguments[1]===undefined?this.currentLocation||{start:{}}:arguments[1];if(chunk instanceof SourceNode){return chunk}chunk=castChunk(chunk,this,loc);return new SourceNode(loc.start.line,loc.start.column,this.srcFile,chunk)},functionCall:function functionCall(fn,type,params){params=this.generateList(params);return this.wrap([fn,type?"."+type+"(":"(",params,")"])},quotedString:function quotedString(str){return'"'+(str+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function objectLiteral(obj){var pairs=[];for(var key in obj){if(obj.hasOwnProperty(key)){var value=castChunk(obj[key],this);if(value!=="undefined"){pairs.push([this.quotedString(key),":",value])}}}var ret=this.generateList(pairs);ret.prepend("{");ret.add("}");return ret},generateList:function generateList(entries,loc){var ret=this.empty(loc);for(var i=0,len=entries.length;i<len;i++){if(i){ret.add(",")}ret.add(castChunk(entries[i],this,loc))}return ret},generateArray:function generateArray(entries,loc){var ret=this.generateList(entries,loc);ret.prepend("[");ret.add("]");return ret}};exports["default"]=CodeGen;module.exports=exports["default"]}])});define("appogee/view/LinkColumn",["hbs/handlebars","appogee/view/AbstractColumn"],function(Handlebars,AbstractColumn){function LinkColumn(label,formattedString,formattedURL,sortField){AbstractColumn.apply(this,[label,sortField]);this.formattedString=formattedString;this.formattedURL=formattedURL}LinkColumn.prototype=new AbstractColumn;LinkColumn.prototype.render=function(data){data=this.flattenObject(data);var val=this.formattedString;var url=this.formattedURL;for(field in data){if(data[field]==null){val=val.replace("["+field+"]","");url=url.replace("["+field+"]","")}else{val=val.replace("["+field+"]",data[field]);url=url.replace("["+field+"]",data[field])}}var html='<a href="'+url+'">'+val+"</a>";return new Handlebars.SafeString(html)};return LinkColumn});define("appogee/view/JSColumn",["hbs/handlebars","appogee/view/AbstractColumn"],function(Handlebars,AbstractColumn){function JSColumn(label,formattedString,cssClass,onClick,sortField,renderFunc){AbstractColumn.apply(this,[label,sortField]);this.formattedString=formattedString;this.cssClass=cssClass;this.onClick=onClick;this.renderFunc=renderFunc}JSColumn.prototype=new AbstractColumn;JSColumn.prototype.render=function(data){var html=null;var linkTemplate='<a href="javascript: void(0);" class="'+this.cssClass+'" data-key="'+data.key+'">{0}</a>';if(this.renderFunc){html=this.renderFunc(data,linkTemplate)}else{data=this.flattenObject(data);var val=this.formattedString;for(field in data){if(data[field]==null){val=val.replace("["+field+"]","")}else{val=val.replace("["+field+"]",data[field])}}html=linkTemplate.format(val)}return new Handlebars.SafeString(html)};return JSColumn});define("appogee/view/ImageColumn",["hbs/handlebars","underscore","appogee/view/AbstractColumn"],function(Handlebars,_,AbstractColumn){function ImageColumn(label,field,mappings,urlFormatter,sortField){AbstractColumn.apply(this,[label,sortField]);this.field=field;this.mappings=mappings;this.urlFormatter=urlFormatter||function(x){return x}}ImageColumn.prototype=new AbstractColumn;ImageColumn.prototype.render=function(data){data=this.flattenObject(data);var html="";if(this.field in data){if(this.mappings&&data[this.field]in this.mappings){var mapping=this.mappings[data[this.field]];if(_.isString(mapping)){html='<img src="'+mapping+'" />'}else{var url=mapping.src||"";var tooltip=mapping.tooltip||"";for(field in data)if(data[field]==null)tooltip=tooltip.replace("["+field+"]","");else tooltip=tooltip.replace("["+field+"]",data[field]);html='<img src="'+this.urlFormatter(url)+'" title="'+tooltip+'" />'}}else if(data[this.field]){var url=data[this.field];html='<img src="'+this.urlFormatter(url)+'" />'}}return new Handlebars.SafeString(html)};return ImageColumn});define("hbs/underscore",[],function(){var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){return new wrapper(obj)};_.VERSION="1.3.3";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return}}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});if(obj.length===+obj.length)results.length=obj.length;return results};_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial)throw new TypeError("Reduce of empty array with no initial value");return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var reversed=_.toArray(obj).reverse();if(context&&!initial)iterator=_.bind(iterator,context);return initial?_.reduce(reversed,iterator,memo,context):_.reduce(reversed,iterator)};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value});return results};_.reject=function(obj,iterator,context){var results=[];if(obj==null)return results;each(obj,function(value,index,list){if(!iterator.call(context,value,index,list))results[results.length]=value});return results};_.every=_.all=function(obj,iterator,context){var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker});return!!result};_.include=_.contains=function(obj,target){var found=false;if(obj==null)return found;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;found=any(obj,function(value){return value===target});return found};_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(_.isFunction(method)?method||value:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})});return result.value};_.shuffle=function(obj){var shuffled=[],rand;each(obj,function(value,index,list){rand=Math.floor(Math.random()*(index+1));shuffled[index]=shuffled[rand];shuffled[rand]=value});return shuffled};_.sortBy=function(obj,val,context){var iterator=_.isFunction(val)?val:function(obj){return obj[val]};return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a===void 0)return 1;if(b===void 0)return-1;return a<b?-1:a>b?1:0}),"value")};_.groupBy=function(obj,val){var result={};var iterator=_.isFunction(val)?val:function(obj){return obj[val]};each(obj,function(value,index){var key=iterator(value,index);(result[key]||(result[key]=[])).push(value)});return result};_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);var low=0,high=array.length;while(low<high){var mid=low+high>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(_.isArguments(obj))return slice.call(obj);if(obj.toArray&&_.isFunction(obj.toArray))return obj.toArray();return _.values(obj)};_.size=function(obj){return _.isArray(obj)?obj.length:_.keys(obj).length};_.first=_.head=_.take=function(array,n,guard){return n!=null&&!guard?slice.call(array,0,n):array[0]};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(n!=null&&!guard){return slice.call(array,Math.max(array.length-n,0))}else{return array[array.length-1]}};_.rest=_.tail=function(array,index,guard){return slice.call(array,index==null||guard?1:index)};_.compact=function(array){return _.filter(array,function(value){return!!value})};_.flatten=function(array,shallow){return _.reduce(array,function(memo,value){if(_.isArray(value))return memo.concat(shallow?value:_.flatten(value));memo[memo.length]=value;return memo},[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iterator){var initial=iterator?_.map(array,iterator):array;var results=[];if(array.length<3)isSorted=true;_.reduce(initial,function(memo,value,index){if(isSorted?_.last(memo)!==value||!memo.length:!_.include(memo,value)){memo.push(value);results.push(array[index])}return memo},[]);return results};_.union=function(){return _.uniq(_.flatten(arguments,true))};_.intersection=_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})};_.difference=function(array){var rest=_.flatten(slice.call(arguments,1),true);return _.filter(array,function(value){return!_.include(rest,value)})};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,"length"));var results=new Array(length);for(var i=0;i<length;i++)results[i]=_.pluck(args,""+i);return results};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i,l;if(isSorted){i=_.sortedIndex(array,item);return array[i]===item?i:-1}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;i<l;i++)if(i in array&&array[i]===item)return i;return-1};_.lastIndexOf=function(array,item){if(array==null)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);var i=array.length;while(i--)if(i in array&&array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step}return range};var ctor=function(){};_.bind=function bind(func,context){var bound,args;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length==0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait){var context,args,timeout,throttling,more,result;var whenDone=_.debounce(function(){more=throttling=false},wait);return function(){context=this;args=arguments;var later=function(){timeout=null;if(more)func.apply(context,args);whenDone()};if(!timeout)timeout=setTimeout(later,wait);if(throttling){more=true}else{result=func.apply(context,args)}whenDone();throttling=true;return result}};_.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)func.apply(context,args)};if(immediate&&!timeout)func.apply(context,args);clearTimeout(timeout);timeout=setTimeout(later,wait)}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;return memo=func.apply(this,arguments)}};_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments,0));return wrapper.apply(this,args)}};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){if(times<=0)return func();return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys[keys.length]=key;return keys};_.values=function(obj){return _.map(obj,_.identity)};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){obj[prop]=source[prop]}});return obj};_.pick=function(obj){var result={};each(_.flatten(slice.call(arguments,1)),function(key){if(key in obj)result[key]=obj[key]});return result};_.defaults=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(obj[prop]==null)obj[prop]=source[prop]}});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};function eq(a,b,stack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a._chain)a=a._wrapped;if(b._chain)b=b._wrapped;if(a.isEqual&&_.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&_.isFunction(b.isEqual))return b.isEqual(a);var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=stack.length;while(length--){if(stack[length]==a)return true}stack.push(a);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=size in a==size in b&&eq(a[size],b[size],stack)))break}}}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return false;for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],stack)))break}}if(result){for(key in b){if(_.has(b,key)&&!size--)break}result=!size}}stack.pop();return result}_.isEqual=function(a,b){return eq(a,b,[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType==1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};_.isArguments=function(obj){return toString.call(obj)=="[object Arguments]"};if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))}}_.isFunction=function(obj){return toString.call(obj)=="[object Function]"};_.isString=function(obj){return toString.call(obj)=="[object String]"};_.isNumber=function(obj){return toString.call(obj)=="[object Number]"};_.isFinite=function(obj){return _.isNumber(obj)&&isFinite(obj)};_.isNaN=function(obj){return obj!==obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isDate=function(obj){return toString.call(obj)=="[object Date]"};_.isRegExp=function(obj){return toString.call(obj)=="[object RegExp]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){for(var i=0;i<n;i++)iterator.call(context,i)};_.escape=function(string){return(""+string).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};_.result=function(object,property){if(object==null)return null;var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name])})};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/.^/;var escapes={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"};for(var p in escapes)escapes[escapes[p]]=p;var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;var unescaper=/\\(\\|'|r|n|t|u2028|u2029)/g;var unescape=function(code){return code.replace(unescaper,function(match,escape){return escapes[escape]})};_.template=function(text,data,settings){settings=_.defaults(settings||{},_.templateSettings);var source="__p+='"+text.replace(escaper,function(match){return"\\"+escapes[match]}).replace(settings.escape||noMatch,function(match,code){return"'+\n_.escape("+unescape(code)+")+\n'"}).replace(settings.interpolate||noMatch,function(match,code){return"'+\n("+unescape(code)+")+\n'"}).replace(settings.evaluate||noMatch,function(match,code){return"';\n"+unescape(code)+"\n;__p+='"})+"';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __p='';"+"var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+source+"return __p;\n";var render=new Function(settings.variable||"obj","_",source);if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var wrapper=function(obj){this._wrapped=obj};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj};var addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);unshift.call(args,this._wrapped);return result(func.apply(_,args),this._chain)}};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){var wrapped=this._wrapped;method.apply(wrapped,arguments);var length=wrapped.length;if((name=="shift"||name=="splice")&&length===0)delete wrapped[0];return result(wrapped,this._chain)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain)}});wrapper.prototype.chain=function(){this._chain=true;return this};wrapper.prototype.value=function(){return this._wrapped};return _});(function(window){var JSON=window.JSON||{};(function(){"use strict";function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();define("hbs/json2",[],function(){return JSON})}).call(this,this);define("hbs",["hbs/handlebars","hbs/underscore","hbs/json2"],function(Handlebars,_,JSON){function precompile(string,_unused,options){var ast,environment;options=options||{};if(!("data"in options)){options.data=true}if(options.compat){options.useDepths=true}ast=Handlebars.parse(string);environment=(new Handlebars.Compiler).compile(ast,options);return(new Handlebars.JavaScriptCompiler).compile(environment,options)}var fs;var getXhr;var progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];var fetchText=function(){throw new Error("Environment unsupported.")};var buildMap=[];var filecode="w+";var templateExtension="hbs";var customNameExtension="@hbs";var devStyleDirectory="/styles/";var buildStyleDirectory="/demo-build/styles/";var helperDirectory="templates/helpers/";var buildCSSFileName="screen.build.css";var onHbsReadMethod="onHbsRead";Handlebars.registerHelper("$",function(){});if(typeof window!=="undefined"&&window.navigator&&window.document&&!window.navigator.userAgent.match(/Node.js/)){getXhr=function(){var xhr;var i;var progId;if(typeof XMLHttpRequest!=="undefined"){return arguments[0]===true?new XDomainRequest:new XMLHttpRequest}else{for(i=0;i<3;i++){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}}if(!xhr){throw new Error("getXhr(): XMLHttpRequest not available")}return xhr};getIEVersion=function(){var rv=-1;if(navigator.appName=="Microsoft Internet Explorer"){var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(re.exec(ua)!=null){rv=parseFloat(RegExp.$1)}}return rv};fetchText=function(url,callback){var xdm=false;if(url.indexOf("http")!=0){xdm=false}else{var uidx=url.substr(0,5)==="https"?8:7;var hidx=window.location.href.substr(0,5)==="https"?8:7;var dom=url.substr(uidx).split("/").shift();var msie=getIEVersion();xdm=dom!=window.location.href.substr(hidx).split("/").shift()&&msie>=7}if(xdm){var xdr=getXhr(true);xdr.open("GET",url);xdr.onload=function(){callback(xdr.responseText,url)};xdr.onprogress=function(){};xdr.ontimeout=function(){};xdr.onerror=function(){};setTimeout(function(){xdr.send()},0)}else{var xhr=getXhr();xhr.open("GET",url,true);xhr.onreadystatechange=function(evt){if(xhr.readyState===4){callback(xhr.responseText,url)}};xhr.send(null)}}}else if(typeof process!=="undefined"&&process.versions&&!!process.versions.node){fs=require.nodeRequire("fs");fetchText=function(path,callback){var body=fs.readFileSync(path,"utf8")||"";body=body.replace(/^\uFEFF/,"");callback(body,path)}}else if(typeof java!=="undefined"&&typeof java.io!=="undefined"){fetchText=function(path,callback){var fis=new java.io.FileInputStream(path);var streamReader=new java.io.InputStreamReader(fis,"UTF-8");var reader=new java.io.BufferedReader(streamReader);var line;var text="";while((line=reader.readLine())!==null){text+=new String(line)+"\n"}reader.close();callback(text,path)}}var cache={};var fetchOrGetCached=function(path,callback){if(cache[path]){callback(cache[path])}else{fetchText(path,function(data,path){cache[path]=data;callback.call(this,data)})}};var styleList=[];var styleMap={};var config;var filesToRemove=[];return{get:function(){return Handlebars},write:function(pluginName,name,write){if(name+customNameExtension in buildMap){var text=buildMap[name+customNameExtension];write.asModule(pluginName+"!"+name,text)}},version:"3.0.3",load:function(name,parentRequire,load,_config){config=config||_config;var compiledName=name+customNameExtension;config.hbs=config.hbs||{};var disableHelpers=config.hbs.helpers==false;var partialsUrl="";if(config.hbs.partialsUrl){partialsUrl=config.hbs.partialsUrl;if(!partialsUrl.match(/\/$/))partialsUrl+="/"}if(config.hbs.fetchText){fetchText=config.hbs.fetchText}var partialDeps=[];function recursiveNodeSearch(statements,res){_(statements).forEach(function(statement){if(statement&&statement.type&&statement.type==="PartialStatement"){if(statement.name.type!=="SubExpression"){res.push(statement.name.original)}}if(statement&&statement.program&&statement.program.body){recursiveNodeSearch(statement.program.body,res)}if(statement&&statement.inverse&&statement.inverse.body){recursiveNodeSearch(statement.inverse.body,res)}});return res}function findPartialDeps(nodes,metaObj){var res=[];if(nodes&&nodes.body){
res=recursiveNodeSearch(nodes.body,[])}if(metaObj&&metaObj.partials&&metaObj.partials.length){_(metaObj.partials).forEach(function(partial){res.push(partial)})}return _.unique(res)}function getMetaData(nodes){var statement,res,test;if(nodes&&nodes.body){statement=nodes.body[0];if(statement&&statement.type==="CommentStatement"){try{res=statement.value.replace(new RegExp("^[\\s]+|[\\s]+$","g"),"");test=JSON.parse(res);return res}catch(e){return JSON.stringify({description:res})}}}return"{}"}function composeParts(parts){if(!parts){return[]}var res=[parts[0]];var cur=parts[0];var i;for(i=1;i<parts.length;++i){if(parts.hasOwnProperty(i)){cur+="."+parts[i];res.push(cur)}}return res}function isHelper(statement){return!!(statement.type==="SubExpression"||statement.params&&statement.params.length||statement.hash)}function checkStatementForHelpers(statement,helpersres){if(isHelper(statement)){if(typeof statement.path!=="undefined"){registerHelper(statement.path.original,helpersres)}}if(statement&&statement.params){statement.params.forEach(function(param){checkStatementForHelpers(param,helpersres)})}if(statement&&statement.hash&&statement.hash.pairs){_(statement.hash.pairs).forEach(function(pair){checkStatementForHelpers(pair.value,helpersres)})}}function registerHelper(helperName,helpersres){if(typeof Handlebars.helpers[helperName]==="undefined"){helpersres.push(helperName)}}function recursiveVarSearch(statements,res,prefix,helpersres){prefix=prefix?prefix+".":"";var newprefix="";var flag=false;_(statements).forEach(function(statement){var parts;var part;var sideways;if(isHelper(statement)||statement.type==="MustacheStatement"){checkStatementForHelpers(statement,helpersres)}if(statement&&statement.mustache){recursiveVarSearch([statement.mustache],res,prefix+newprefix,helpersres)}if(statement&&statement.program&&statement.program.body){sideways=recursiveVarSearch([statement.path],[],"",helpersres)[0]||"";if(statement.inverse&&statement.inverse.body){recursiveVarSearch(statement.inverse.body,res,prefix+newprefix+(sideways?prefix+newprefix?"."+sideways:sideways:""),helpersres)}recursiveVarSearch(statement.program.body,res,prefix+newprefix+(sideways?prefix+newprefix?"."+sideways:sideways:""),helpersres)}});return res}function getExternalDeps(nodes){var res=[];var helpersres=[];if(nodes&&nodes.body){res=recursiveVarSearch(nodes.body,[],undefined,helpersres)}var defaultHelpers=["helperMissing","blockHelperMissing","each","if","unless","with","log","lookup"];return{vars:_(res).chain().unique().map(function(e){if(e===""){return"."}if(e.length&&e[e.length-1]==="."){return e.substr(0,e.length-1)+"[]"}return e}).value(),helpers:_(helpersres).chain().unique().map(function(e){if(_(defaultHelpers).contains(e)){return undefined}return e}).compact().value()}}function cleanPath(path){var tokens=path.split("/");for(var i=0;i<tokens.length;i++){if(tokens[i]===".."){delete tokens[i-1];delete tokens[i]}else if(tokens[i]==="."){delete tokens[i]}}return tokens.join("/").replace(/\/\/+/g,"/")}function fetchAndRegister(langMap){fetchText(path,function(text,path){var readCallback=config.isBuild&&config[onHbsReadMethod]?config[onHbsReadMethod]:function(name,path,text){return text};var nodes=Handlebars.parse(readCallback(name,path,text));var meta=getMetaData(nodes);var extDeps=getExternalDeps(nodes);var vars=extDeps.vars;var helps=extDeps.helpers||[];var debugOutputStart="";var debugOutputEnd="";var debugProperties="";var deps=[];var depStr,helpDepStr,metaObj,head,linkElem;var baseDir=name.substr(0,name.lastIndexOf("/")+1);if(meta!=="{}"){try{metaObj=JSON.parse(meta)}catch(e){console.log("couldn't parse meta for %s",path)}}var partials=findPartialDeps(nodes,metaObj);config.hbs=config.hbs||{};config.hbs._partials=config.hbs._partials||{};for(var i in partials){if(partials.hasOwnProperty(i)&&typeof partials[i]==="string"){var partialReference=partials[i];var partialPath;if(partialReference.match(/^(\.|\/)+/)){partialPath=cleanPath(baseDir+partialReference)}else{partialPath=cleanPath(partialsUrl+partialReference)}if(omitExtension){if(path===parentRequire.toUrl(partialPath)){continue}}else{if(path===parentRequire.toUrl(partialPath+"."+(config.hbs&&config.hbs.templateExtension?config.hbs.templateExtension:templateExtension))){continue}}config.hbs._partials[partialPath]=config.hbs._partials[partialPath]||[];config.hbs._partials[partialPath].references=config.hbs._partials[partialPath].references||[];config.hbs._partials[partialPath].references.push(partialReference);config.hbs._loadedDeps=config.hbs._loadedDeps||{};deps[i]="hbs!"+partialPath}}depStr=deps.join("', '");helps=helps.concat(metaObj&&metaObj.helpers?metaObj.helpers:[]);helpDepStr=disableHelpers?"":function(){var i;var paths=[];var pathGetter=config.hbs&&config.hbs.helperPathCallback?config.hbs.helperPathCallback:function(name){return(config.hbs&&config.hbs.helperDirectory?config.hbs.helperDirectory:helperDirectory)+name};for(i=0;i<helps.length;i++){paths[i]="'"+pathGetter(helps[i],path)+"'"}return paths}().join(",");if(helpDepStr){helpDepStr=","+helpDepStr}if(metaObj){try{if(metaObj.styles){styleList=_.union(styleList,metaObj.styles);if(require.isBrowser&&!config.isBuild){head=document.head||document.getElementsByTagName("head")[0];_(metaObj.styles).forEach(function(style){if(!styleMap[style]){linkElem=document.createElement("link");linkElem.href=config.baseUrl+devStyleDirectory+style+".css";linkElem.media="all";linkElem.rel="stylesheet";linkElem.type="text/css";head.appendChild(linkElem);styleMap[style]=linkElem}})}else if(config.isBuild){(function(){var fs=require.nodeRequire("fs");var str=_(metaObj.styles).map(function(style){if(!styleMap[style]){styleMap[style]=true;return"@import url("+style+".css);\n"}return""}).join("\n");fs.open(__dirname+buildStyleDirectory+buildCSSFileName,filecode,"0666",function(e,id){fs.writeSync(id,str,null,encoding="utf8");fs.close(id)});filecode="a"})()}}}catch(e){console.log("error injecting styles")}}if(!config.isBuild&&!config.serverRender){debugOutputStart="\x3c!-- START - "+name+" --\x3e";debugOutputEnd="\x3c!-- END - "+name+" --\x3e";debugProperties="t.meta = "+meta+";\n"+"t.helpers = "+JSON.stringify(helps)+";\n"+"t.deps = "+JSON.stringify(deps)+";\n"+"t.vars = "+JSON.stringify(vars)+";\n"}var mapping=false;var configHbs=config.hbs||{};var options=_.extend(configHbs.compileOptions||{},{originalKeyFallback:configHbs.originalKeyFallback});var prec=precompile(text,mapping,options);var tmplName="'hbs!"+name+"',";if(depStr)depStr=", '"+depStr+"'";var partialReferences=[];if(config.hbs._partials[name])partialReferences=config.hbs._partials[name].references;var handlebarsPath=config.hbs&&config.hbs.handlebarsPath?config.hbs.handlebarsPath:"hbs/handlebars";text="/* START_TEMPLATE */\n"+"define("+tmplName+"['"+handlebarsPath+"'"+depStr+helpDepStr+"], function( Handlebars ){ \n"+"var t = Handlebars.template("+prec+");\n"+"Handlebars.registerPartial('"+name+"', t);\n";for(var i=0;i<partialReferences.length;i++)text+="Handlebars.registerPartial('"+partialReferences[i]+"', t);\n";text+=debugProperties+"return t;\n"+"});\n"+"/* END_TEMPLATE */\n";if(config.isBuild){buildMap[compiledName]=text}if(!config.isBuild){text+="\r\n//# sourceURL="+path}if(!config.isBuild){parentRequire(deps,function(){load.fromText(text);parentRequire([name],function(value){load(value)})})}else{load.fromText(name,text);parentRequire([name],function(value){load(value)})}if(config.removeCombined&&path){filesToRemove.push(path)}})}var path;var omitExtension=config.hbs&&config.hbs.templateExtension===false;if(omitExtension){path=parentRequire.toUrl(name)}else{path=parentRequire.toUrl(name+"."+(config.hbs&&config.hbs.templateExtension?config.hbs.templateExtension:templateExtension))}fetchAndRegister(false)},onLayerEnd:function(){if(config.removeCombined&&fs){filesToRemove.forEach(function(path){if(fs.existsSync(path)){fs.unlinkSync(path)}})}}}});define("templates/helpers/initials",["hbs/handlebars","appogee"],function(Handlebars,appogee){function initials(){var initials="";for(var i=0;i<arguments.length-1;i++){arguments[i].split(" ").forEach(function(bit){return initials+=bit.substring(0,1).toUpperCase()})}return initials}Handlebars.registerHelper("initials",initials);return initials});define("hbs!templates/_avatar",["hbs/handlebars","templates/helpers/initials"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'\t<div class="avatar '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.size:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'" style="background-image: url(\''+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.imageUrl:stack1,depth0))+"');\"></div>\n"},2:function(depth0,helpers,partials,data){var helper;return"avatar-"+this.escapeExpression((helper=(helper=helpers.size||(depth0!=null?depth0.size:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"size",hash:{},data:data}):helper))},4:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.name:stack1,{name:"if",hash:{},fn:this.program(5,data,0),inverse:this.program(7,data,0),data:data}))!=null?stack1:""},5:function(depth0,helpers,partials,data){var stack1;return'\t<div class="avatar initials '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.size:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">'+this.escapeExpression((helpers.initials||depth0&&depth0.initials||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.name:stack1,{name:"initials",hash:{},data:data}))+"</div>\n"},7:function(depth0,helpers,partials,data){var stack1;return'\t<div class="avatar initials '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.size:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">'+this.escapeExpression((helpers.initials||depth0&&depth0.initials||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.firstName:stack1,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.lastName:stack1,{name:"initials",hash:{},data:data}))+"</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.imageUrl:stack1,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.program(4,data,0),data:data}))!=null?stack1:""},useData:true});Handlebars.registerPartial("templates/_avatar",t);return t});define("appogee/view/AvatarColumn",["hbs/handlebars","underscore","appogee/view/AbstractColumn","hbs!templates/_avatar"],function(Handlebars,_,AbstractColumn,tmpl){function AvatarColumn(label,field,mappings,urlFormatter,sortField){AbstractColumn.apply(this,[label,sortField]);this.field=field;this.mappings=mappings;this.urlFormatter=urlFormatter||function(x){return x}}AvatarColumn.prototype=new AbstractColumn;AvatarColumn.prototype.render=function(data){var html=tmpl({employee:data});return new Handlebars.SafeString(html)};return AvatarColumn});define("appogee/view/FloatColumn",["appogee/view/AbstractColumn"],function(AbstractColumn){function round(x,dp){dp=dp==undefined?2:dp;y=Math.pow(10,dp);return Math.round(x*y)/y}function FloatColumn(label,formattedString,sortField){AbstractColumn.apply(this,[label,sortField]);this.formattedString=formattedString;this.dp=2}FloatColumn.prototype=new AbstractColumn;FloatColumn.prototype.render=function(data){data=this.flattenObject(data);var val=this.formattedString;for(field in data){if(data[field]==null){val=val.replace("["+field+"]","")}else{var fVal=data[field];try{fVal=round(parseFloat(fVal),this.dp)}catch(e){}val=val.replace("["+field+"]",fVal)}}return val};return FloatColumn});define("appogee/view/CurrencyColumn",["appogee/view/AbstractColumn"],function(AbstractColumn){function round(x,dp){dp=dp==undefined?2:dp;y=Math.pow(10,dp);return Math.round(x*y)/y}function CurrencyColumn(label,formattedString,sortField){AbstractColumn.apply(this,[label,sortField]);this.formattedString=formattedString;this.dp=2}CurrencyColumn.prototype=new AbstractColumn;CurrencyColumn.prototype.render=function(data){data=this.flattenObject(data);var val=this.formattedString;for(field in data){if(data[field]==null){val=val.replace("["+field+"]","")}else{var fVal=data[field];try{fVal=round(parseFloat(fVal),this.dp).toFixed(2)}catch(e){}val=val.replace("["+field+"]",fVal)}}return"Â£"+val};return CurrencyColumn});define("appogee/view/CustomColumn",["hbs/handlebars","appogee/view/AbstractColumn"],function(Handlebars,AbstractColumn){function CustomColumn(label,renderFunc,className,sortField){AbstractColumn.apply(this,[label,sortField]);this.renderFunc=renderFunc;this.className=className}CustomColumn.prototype=new AbstractColumn;CustomColumn.prototype.render=function(data){return new Handlebars.SafeString(this.renderFunc(data))};return CustomColumn});define("templates/helpers/s",["hbs/handlebars","appogee/i18n"],function(Handlebars,i18n){"use strict";function s(){var args=Array.prototype.slice.call(arguments);var word=args[0];var stringArgs=null;if(args.length==2){var lastArg=args[args.length-1];stringArgs=lastArg.hash}else{stringArgs=args.slice(1,args.length-1)}word=word.split("\n").map(function(w){return w.trim()}).join("\n");var translatedWord=i18n.getString(word);if(translatedWord){word=translatedWord}word=String.prototype.format.call(word,stringArgs);return new Handlebars.SafeString(word)}Handlebars.registerHelper("s",s);return s});define("hbs!appogee/view/_search",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var helper;return'\t<div class="input-group view_search">\n\t\t<input type="text" class="form-control input-sm" placeholder="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Search",{name:"s",hash:{},data:data}))+'" value="'+this.escapeExpression((helper=(helper=helpers.search||(depth0!=null?depth0.search:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"search",hash:{},data:data}):helper))+'" />\n\t\t<span class="input-group-btn">\n\t\t\t<button class="btn btn-sm btn-primary disabled jsearch" type="button">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Search",{name:"s",hash:{},data:data}))+'</button>\n\t\t\t<button class="btn btn-sm btn-inverse btn-default jclear" style="display: none;" type="button">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Clear",{name:"s",hash:{},data:data}))+"</button>\n\t\t</span>\n\t</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.showSearch:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:""},useData:true});Handlebars.registerPartial("appogee/view/_search",t);Handlebars.registerPartial("appogee/view/_search",t);return t});define("templates/helpers/ifequal",["hbs/handlebars"],function(Handlebars){function ifequal(v1,v2,options){if(v1==v2)return options.fn(this);return options.inverse(this)}Handlebars.registerHelper("ifequal",ifequal);return ifequal});define("templates/helpers/if_gt",["hbs/handlebars"],function(Handlebars){Handlebars.registerHelper("if_gt",function(context,options){if(context>options.hash.compare)return options.fn(this);return options.inverse(this)})});define("hbs!appogee/view/_pagination",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/if_gt"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<ul class="pagination pagination-sm">\n\t\t<li class="'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.start:depth0,1,{name:"ifequal",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'"><a href="javascript: void(0);" class="previous">&laquo;</a></li>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.pagination:depth0,{name:"each",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<li class="'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.end:depth0,depth0!=null?depth0.total:depth0,{name:"ifequal",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'"><a href="javascript: void(0);" class="next">&raquo;</a></li>\n\t</ul>\n'},2:function(depth0,helpers,partials,data){return" disabled"},4:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t<li class="'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.start:depth0,depths[1]!=null?depths[1].start:depths[1],{name:"ifequal",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.start:depth0,{name:"if_gt",hash:{compare:depths[1]!=null?depths[1].total:depths[1]},fn:this.program(2,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'"><a href="javascript: void(0);" class="goto" data-start="'+this.escapeExpression(this.lambda(depth0!=null?depth0.start:depth0,depth0))+'">'+this.escapeExpression(this.lambda(depth0!=null?depth0.label:depth0,depth0))+"</a></li>\n"},5:function(depth0,helpers,partials,data){return" active"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.showPagination:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},useData:true,useDepths:true});Handlebars.registerPartial("appogee/view/_pagination",t);Handlebars.registerPartial("appogee/view/_pagination",t);return t});define("templates/helpers/ifany",["hbs/handlebars"],function(Handlebars){function ifany(){var options=arguments[arguments.length-1];for(var i=0;i<arguments.length-1;i++)if(arguments[i])return options.fn(this);return options.inverse(this)}Handlebars.registerHelper("ifany",ifany);return ifany});define("templates/helpers/renderViewData",["hbs/handlebars"],function(Handlebars){"use strict";function renderViewData(column,data){if(column=="ignore"){return}return column.render(data)}Handlebars.registerHelper("renderViewData",renderViewData);return renderViewData});define("hbs!appogee/view/_table",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/ifany","templates/helpers/renderViewData","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"table-condensed"},3:function(depth0,helpers,partials,data){var helper;return this.escapeExpression((helper=(helper=helpers.cssClass||(depth0!=null?depth0.cssClass:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"cssClass",hash:{},data:data}):helper))},5:function(depth0,helpers,partials,data){return'\t\t\t<th class="col_check" style="text-align: center;">\n\t\t\t\t<input type="checkbox" class="selectall" />\n\t\t\t</th>\n\t\t'},7:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.selectionType:depth0,"radio",{name:"ifequal",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:""},8:function(depth0,helpers,partials,data){return'\n\t\t\t<th class="col_check">&nbsp;</th>\n\t\t'},10:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.visible:depth0,{name:"if",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:""},11:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<th \n\t\t\t\tclass="'+((stack1=(helpers.ifany||depth0&&depth0.ifany||helpers.helperMissing).call(depth0,depth0!=null?depth0.filterField:depth0,depth0!=null?depth0.sortField:depth0,{name:"ifany",hash:{},fn:this.program(12,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.labelTooltip:depth0,{name:"if",hash:{},fn:this.program(14,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'"\n\t\t\t\t'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.width:depth0,{name:"if",hash:{},fn:this.program(16,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n\t\t\t\t"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.labelTooltip:depth0,{name:"if",hash:{},fn:this.program(18,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n\t\t\t>"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.labelTooltip:depth0,{name:"if",hash:{},fn:this.program(20,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" "+this.escapeExpression(this.lambda(depth0!=null?depth0.label:depth0,depth0))+"</th>\n"},12:function(depth0,helpers,partials,data){return"options"},14:function(depth0,helpers,partials,data){return"help"},16:function(depth0,helpers,partials,data){return'style="width: '+this.escapeExpression(this.lambda(depth0!=null?depth0.width:depth0,depth0))+'px;"'},18:function(depth0,helpers,partials,data){var helper;return'title="'+this.escapeExpression((helper=(helper=helpers.labelTooltip||(depth0!=null?depth0.labelTooltip:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"labelTooltip",hash:{},data:data}):helper))+'"'},20:function(depth0,helpers,partials,data){var helper;return'<i class="glyphicon glyphicon-question-sign" title="'+this.escapeExpression((helper=(helper=helpers.labelTooltip||(depth0!=null?depth0.labelTooltip:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"labelTooltip",hash:{},data:data}):helper))+'"></i>'},22:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.loading:depth0,{name:"if",hash:{},fn:this.program(23,data,0),inverse:this.program(25,data,0),data:data}))!=null?stack1:""},23:function(depth0,helpers,partials,data){var helper;return'\t\t\t\t<tr><td colspan="'+this.escapeExpression((helper=(helper=helpers.noOfCols||(depth0!=null?depth0.noOfCols:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"noOfCols",hash:{},data:data}):helper))+'" class="loading">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</td></tr>\n"},25:function(depth0,helpers,partials,data){var helper;return'\t\t\t\t<tr><td colspan="'+this.escapeExpression((helper=(helper=helpers.noOfCols||(depth0!=null?depth0.noOfCols:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"noOfCols",hash:{},data:data}):helper))+'" class="no_results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No Results Found",{name:"s",hash:{},data:data}))+"</td></tr>\n"},27:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.data:depth0,{name:"each",hash:{},fn:this.program(28,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},28:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t<tr data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[1]!=null?depths[1].selectionType:depths[1],"check",{name:"ifequal",hash:{},fn:this.program(29,data,0,blockParams,depths),inverse:this.program(31,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\n\t\t\t\t\n"+((stack1=helpers.each.call(depth0,depths[1]!=null?depths[1].columns:depths[1],{name:"each",hash:{},fn:this.program(34,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</tr>\n"},29:function(depth0,helpers,partials,data){return'\t\t\t\t\t<td align="center"><input type="checkbox" class="selectone" /></td>\n\t\t\t\t'},31:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[2]!=null?depths[2].selectionType:depths[2],"radio",{name:"ifequal",hash:{},fn:this.program(32,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},32:function(depth0,helpers,partials,data){return'\n\t\t\t\t\t<td><input type="radio" class="rad-select" /></td>\n\t\t\t\t'},34:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.visible:depth0,{name:"if",hash:{},fn:this.program(35,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},35:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"\t\t\t\t\t<td "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.className:depth0,{name:"if",hash:{},fn:this.program(36,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.renderViewData||depth0&&depth0.renderViewData||helpers.helperMissing).call(depth0,depths[1],depths[2],{name:"renderViewData",hash:{},data:data}))+"</td>\n"},36:function(depth0,helpers,partials,data){return'class="'+this.escapeExpression(this.lambda(depth0!=null?depth0.className:depth0,depth0))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<table class="table table-bordered table-shaded table-view '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.condensed:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.cssClass:depth0,{name:"if",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t<thead>\n\t\t<tr>\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.selectionType:depth0,"check",{name:"ifequal",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.program(7,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\n\t\t\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.columns:depth0,{name:"each",hash:{},fn:this.program(10,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tr>\n\t</thead>\n\t<tbody>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.total:depth0,0,{name:"ifequal",hash:{},fn:this.program(22,data,0,blockParams,depths),inverse:this.program(27,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t</tbody>\n</table>"},useData:true,useDepths:true});Handlebars.registerPartial("appogee/view/_table",t);Handlebars.registerPartial("appogee/view/_table",t);return t});define("hbs!appogee/view/template",["hbs/handlebars","hbs!appogee/view/_search","hbs!appogee/view/_pagination","hbs!appogee/view/_table","templates/helpers/renderViewData","templates/helpers/ifequal","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'style="padding: 0px;"'},3:function(depth0,helpers,partials,data){var helper;return"\t<h3>"+this.escapeExpression((helper=(helper=helpers.title||(depth0!=null?depth0.title:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"title",hash:{},data:data}):helper))+"</h3>\n"},5:function(depth0,helpers,partials,data){return'\t\t\t\t<p class="form-control-static result_summary">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</p>\n"},7:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.total:depth0,0,{name:"ifequal",hash:{},fn:this.program(8,data,0),inverse:this.program(10,data,0),data:data}))!=null?stack1:""},8:function(depth0,helpers,partials,data){return'\t\t\t\t\t<p class="form-control-static result_summary">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Displaying 0 - 0 of 0",{name:"s",hash:{},data:data}))+"</p>\n"},10:function(depth0,helpers,partials,data){return'\t\t\t\t\t<p class="form-control-static result_summary">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Displaying {start} - {end} of {total}",{name:"s",hash:{total:depth0!=null?depth0.total:depth0,end:depth0!=null?depth0.end:depth0,start:depth0!=null?depth0.start:depth0},data:data}))+"</p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return this.escapeExpression((helpers.renderViewData||depth0&&depth0.renderViewData||helpers.helperMissing).call(depth0,"ignore","ignore",{name:"renderViewData",hash:{},data:data}))+'\n\n<div class="form-horizontal view_header" '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.padHeader:depth0,{name:"unless",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.title:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n\t<div class="row view_controls">\n\t\t<div class="col-sm-6 col-md-5 col-lg-4">\n'+((stack1=this.invokePartial(partials["appogee/view/_search"],depth0,{name:"appogee/view/_search",data:data,indent:"\t\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loading:depth0,{name:"if",hash:{},fn:this.program(5,data,0),inverse:this.program(7,data,0),data:data}))!=null?stack1:"")+'\t\t</div>\n\t\t<div class="col-sm-6 col-md-7 col-lg-8 text-right">\n'+((stack1=this.invokePartial(partials["appogee/view/_pagination"],depth0,{name:"appogee/view/_pagination",data:data,indent:"\t\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+"\t\t</div>\n\t</div>\n\t\n</div>\n\n"+((stack1=this.invokePartial(partials["appogee/view/_table"],depth0,{name:"appogee/view/_table",data:data,helpers:helpers,partials:partials}))!=null?stack1:"")},usePartial:true,useData:true});Handlebars.registerPartial("appogee/view/template",t);return t});define("jquery.appogee.tooltip",["jquery"],function($){var $tooltip=null;$.fn.appogeeTooltip=function(){if(!$tooltip){$tooltip=$("<div />").addClass("appogee-tooltip-container");$tooltip.appendTo("body")}return this.hover(function(){var tooltip=$(this).data("tooltip");var tooltipPosition=$(this).data("tooltip-position");var tooltipStyle=$(this).data("tooltip-style");if(tooltip){$tooltip.html(tooltip).removeClass("warning danger").show();if(tooltipStyle){$tooltip.addClass(tooltipStyle)}if(tooltipPosition==="left"){$tooltip.position({my:"right-5",at:"left",of:this})}else{$tooltip.position({my:"left+10",at:"right",of:this})}}},function(){$tooltip.hide()}).click(function(){$tooltip.hide()})};$(function(){$(".appogee-tooltip").appogeeTooltip()})})
;define("appogee/view/View",["jquery","appogee/util","appogee/localConfig","appogee/view/TextColumn","appogee/view/LinkColumn","appogee/view/JSColumn","appogee/view/ImageColumn","appogee/view/AvatarColumn","appogee/view/FloatColumn","appogee/view/CurrencyColumn","appogee/view/CustomColumn","hbs!appogee/view/template","jquery.appogee.tooltip"],function($,util,localConfig,TextColumn,LinkColumn,JSColumn,ImageColumn,AvatarColumn,FloatColumn,CurrencyColumn,CustomColumn,tmpl){var KEY_ESC=27;var KEY_BACKSPACE=8;var KEY_RETURN=13;var KEY_SPACE=32;var KEY_SHIFT=16;var KEY_CTRL=17;var KEY_UP=38;var KEY_DOWN=40;var ViewSelectionType={Check:"check",Radio:"radio",None:""};var View=function($container,id,options){options=$.extend({title:null,showSearch:true,padHeader:true,tmpl:tmpl},options||{});var defaultSort=null;this.$container=$container;this.id=id;this.title=options.title;this.showSearch=options.showSearch;this.padHeader=options.padHeader;this.tmpl=options.tmpl;this.cssClass=options.cssClass;this.renderArgs={};this.fetchCount=0;this.baseUrl="/views";this.defaultFilters={};this.filters={};this.defaultSort=defaultSort;this.sorts=[];this.sortDirections=[];this.maxSorts=2;this.selectionType=ViewSelectionType.None;this._selectAllOb=null;this.limit=100;this.start=1;this.end=100;this.total=0;this.data=[];this.searchQuery="";this.projection=options.projection;this.columns=[];this.columnConfig=null;this.formatters={};this.dateFormatString=null;this.dateFormatString=null;onAddFilterHandlers=[];onRemoveFilterHandlers=[];onAddSortHandlers=[];onRemoveSortHandlers=[];this.onFetchHandlers=[];this.onRenderHandlers=[]};View.prototype.onRender=function(handler){this.onRenderHandlers.push(handler)};View.prototype.addDefaultFilter=function(field,val){this.defaultFilters[field]=val};View.prototype.addDefaultKeyFilter=function(field,val){this.defaultFilters["__key__"+field]=val};View.prototype.addFilter=function(field,val,preventFetch){this.filters[field]=val;if(!preventFetch)this.fetch()};View.prototype.removeFilter=function(field,preventFetch){if(field in this.filters){delete this.filters[field];if(!preventFetch)this.fetch()}};View.prototype.addKeyFilter=function(field,val,preventFetch){field="__key__"+field;this.addFilter(field,val,preventFetch)};View.prototype.removeKeyFilter=function(field,preventFetch){field="__key__"+field;this.removeFilter(field,preventFetch)};View.prototype.addFormatter=function(field,formatter,formatString){if(formatter=="date"){if(formatString)this.setDateFormatString(formatString)}else if(formatter=="datetime"){if(formatString)this.setDateTimeFormatString(formatString)}else{throw new Error("formatter not supported")}this.formatters[field]=formatter};View.prototype.addDateFormatter=function(field){this.addFormatter(field,"date")};View.prototype.addDateTimeFormatter=function(field){this.addFormatter(field,"datetime")};View.prototype.search=function(query){this.searchQuery=query;this.fetch()};View.prototype.clearSearch=function(){this.searchQuery="";this.fetch()};View.prototype.addSort=function(field,descending){if(this.sorts.length==this.maxSorts){this.sorts.splice(0,1);this.sortDirections.splice(0,1)}this.sorts.push(field);this.sortDirections.push(descending?"DESC":"ASC");this.fetch()};View.prototype.addColumn=function(options){var column=null;if(options.type=="text"){column=new TextColumn(options.label,options.field)}else if(options.type=="float"){column=new FloatColumn(options.label,options.field);if(options.dp)column.dp=options.dp}else if(options.type=="currency"){column=new CurrencyColumn(options.label,options.field);if(options.dp)column.dp=options.dp}else if(options.type=="link"){column=new LinkColumn(options.label,options.field,options.link)}else if(options.type=="js"){column=new JSColumn(options.label,options.field,options.cssClass,options.onClick,null,options.render)}else if(options.type=="image"){column=new ImageColumn(options.label,options.field,options.mappings,options.urlFormatter)}else if(options.type=="avatar"){column=new AvatarColumn(options.label,options.field,options.mappings,options.urlFormatter)}else if(options.type=="custom"){column=new CustomColumn(options.label,options.render,options.className,options.cssClass)}else{throw new Error("not implemented")}if(options.id)column.id=options.id;if(options.width)column.width=options.width;if(options.sortField)column.sortField=options.sortField;if(options.formatAs)column.formatAs=options.formatAs;return this._addColumn(column)};View.prototype.clearColumns=function(){this.columns=[]};View.prototype._addColumn=function(column){this.columns.push(column);column._setView(this);return column};View.prototype.getColumn=function(id){for(var i=0;i<this.columns.length;i++)if(this.columns[i].id==id)return this.columns[i]};View.prototype.setWidths=function(widths){if(widths.length!=this.columns.length)throw new Error("Invalid number of widths");for(var i=0;i<this.columns.length;i++)if(widths[i])this.columns[i].width=widths[i]};View.prototype.getQueryString=function(){var c={start:this.start,limit:this.limit,search:this.searchQuery,defaultFilters:JSON.stringify(this.defaultFilters),filters:JSON.stringify(this.filters),sorts:JSON.stringify(this.sorts),sortDirections:JSON.stringify(this.sortDirections)};if(this.projection){c.projection=this.projection}return c};View.prototype.addFetchCallback=function(handler){this.onFetchHandlers.push(handler)};View.prototype.fetch=function(){var me=this;this.loading=true;this.render();var fetchCount=++this.fetchCount;$.ajax({url:this.baseUrl+"/"+this.id,data:this.getQueryString(),success:function(response){if(fetchCount!=me.fetchCount){return}me.loading=false;me.total=response.total;me.data=me._formatData(response.data);me.end=me.start+me.limit-1;me.end=Math.min(me.end,response.total);me.render(response);if(me.onFetchHandlers){$.each(me.onFetchHandlers,function(){this()})}},dataType:"json"})};View.prototype._formatData=function(data){if(!this.formatters)return data;var me=this;$.each(data,function(i,row){for(field in row){if(field in me.formatters){var val=row[field];if(val){if(me.formatters[field]=="date"){row[field]=util.date.toString(val,me.getDateFormatString())}else if(me.formatters[field]=="datetime"){row[field]=util.datetime.toString(val,me.getDateTimeFormatString())}}}}});return data};View.prototype.setDateFormatString=function(formatString){this.dateFormatString=formatString};View.prototype.setDateTimeFormatString=function(formatString){this.dateTimeFormatString=formatString};View.prototype.getDateFormatString=function(){return this.dateFormatString};View.prototype.getDateTimeFormatString=function(){return this.dateTimeFormatString};View.prototype.render=function(response){var _this2=this;var me=this;var pagination=[];var currentPage=(this.start-1)/this.limit+1;var showPagination=false;if(this.start>1||this.end<this.total){showPagination=true;var lastPage=Math.ceil(this.total/this.limit);if(lastPage<=5||currentPage<=3){for(var page=1;page<=lastPage;page++){pagination.push({label:page,start:(page-1)*this.limit+1});if(pagination.length==5)break}}else if(lastPage-currentPage<=2){for(var page=lastPage-4;page<=lastPage;page++){pagination.push({label:page,start:(page-1)*this.limit+1})}}else{for(var page=currentPage-2;page<=lastPage;page++){if(page>0){pagination.push({label:page,start:(page-1)*this.limit+1})}if(pagination.length==5)break}}}var noOfCols=this.columns.length;if(this.selectionType!=ViewSelectionType.None){noOfCols++}var columns=this.columns;if(this.columnConfig!==null){columns=_.filter(columns,function(col){if(!col.hasOwnProperty("id")){return true}if(_this2.columnConfig.hasOwnProperty(col.id)){return _this2.columnConfig[col.id]}})}var data={title:this.title,pagination:pagination,showPagination:showPagination,currentPage:currentPage,start:this.start,end:this.end,total:this.total,limit:this.limit,columns:columns,data:this.data,selectionType:this.selectionType,showSearch:this.showSearch,padHeader:this.padHeader,search:this.searchQuery,loading:this.loading,cssClass:this.cssClass,noOfCols:noOfCols,filters:this.filters};data=$.extend(data,this.renderArgs);var html=this.tmpl(data);this.$container.html(html);this.$container.find(".appogee-tooltip").appogeeTooltip();this.$container.find("select.limit").change(function(){me.setLimit($(this).val())});this.$container.find(".pagination a.previous").click(function(){if(!$(this).parent().hasClass("disabled"))me.previous()});this.$container.find(".pagination a.next").click(function(){if(!$(this).parent().hasClass("disabled"))me.next()});this.$container.find(".pagination a.goto").click(function(){if(!$(this).parent().hasClass("disabled")){me.start=parseInt($(this).data("start"));me.fetch()}});this.$container.find("input.selectall").click(function(){if(this.checked)me.selectAll();else me.selectNone()});this.$container.find("input.selectone").click(function(){if(this.checked)$(this).parent().addClass("selected");else $(this).parent().removeClass("selected");me._checkSelectAll()});$.each(this.columns,function(i,col){if(col instanceof JSColumn){me.$container.find("."+col.cssClass).click(function(){var key=$(this).data("key");for(var i=0;i<me.data.length;i++){if(me.data[i].key==key){col.onClick(me.data[i],this);break}}})}});var $txtSearch=this.$container.find('.view_search input[type="text"]');var $btnSearch=this.$container.find(".view_search button.jsearch");var $btnClearSearch=this.$container.find(".view_search button.jclear");$txtSearch.keyup(function(event){if($(this).val()){if(event.keyCode==KEY_RETURN){$btnSearch.click()}else if(event.keyCode==KEY_ESC){$btnClearSearch.click()}else{$btnSearch.show();$btnClearSearch.hide();$btnSearch.removeClass("disabled")}}else{$btnSearch.addClass("disabled")}}).focus();$btnSearch.toggle(this.searchQuery=="");$btnClearSearch.toggle(this.searchQuery!="");$btnClearSearch.click(function(){$txtSearch.val("");$btnSearch.show();$btnClearSearch.hide();me.search("")});$btnSearch.click(function(){var query=$txtSearch.val();if(query){me.search(query);$(this).hide();$btnClearSearch.show()}});if(this.onRenderHandlers){this.onRenderHandlers.forEach(function(handler){handler()})}};View.prototype.setLimit=function(limit){this.start=1;this.limit=parseInt(limit);this.fetch()};View.prototype.next=function(){this.start+=this.limit;this.fetch()};View.prototype.previous=function(){this.start-=Math.max(0,this.limit);this.fetch()};View.prototype.selectAll=function(){this.$container.find("input.selectone").attr("checked",false).click()};View.prototype.selectNone=function(){this.$container.find("input.selectone").attr("checked",true).click()};View.prototype._checkSelectAll=function(){var checked=this.$container.find("input.selectone:checked").length;var count=this.$container.find("input.selectone").length;this.$container.find("input.selectall").prop("checked",checked==count)};View.prototype.getSelected=function(){var me=this;if(this.selectionType==ViewSelectionType.Check){var obs=[];this.$container.find("input.selectone:checked").each(function(){var key=$(this).closest("tr").data("key");var ob=_.findWhere(me.data,{key:key});if(ob){obs.push(ob)}});return obs}else if(this.selectionType==ViewSelectionType.Radio){var user=null;this.$container.find('input[type="radio"].rad-select:checked').each(function(){var key=$(this).closest("tr").data("key");user=_.first(_.where(me.data,{key:key}))});return user}else{return null}};View.prototype.getSelectedKeys=function(){var keys=[];this.$container.find("input.selectone:checked").each(function(){keys.push($(this).closest("tr").data("key"))});return keys};View.prototype.initColumnConfig=function(storageKey,columns,defaults,$ddlContainer){var _this3=this;this.columnConfig=this.loadColumnConfig(storageKey,columns,defaults);$ddlContainer.click(function(e){e.stopPropagation()});columns.forEach(function(col){var $chk=$ddlContainer.find('input[type="checkbox"][data-col="'+col+'"]');$chk.prop("checked",_this3.columnConfig[col]).change(function(e){_this3.columnConfig[col]=e.currentTarget.checked;_this3.persistColumnConfig(storageKey,columns);_this3.render()})})};View.prototype.loadColumnConfig=function(storageKey,columns,defaults){var columnConfigRaw=localConfig.get(storageKey,defaults);var columnConfig={};columns.forEach(function(col,i){columnConfig[col]=columnConfigRaw[i]==1});return columnConfig};View.prototype.persistColumnConfig=function(storageKey,columns){var _this4=this;var columnConfig=[];columns.forEach(function(col){columnConfig.push(+_this4.columnConfig[col])});localConfig.set(storageKey,columnConfig)};return View});define("appogee/Dialog",["jquery","jqueryui","enums/CommonStrings"],function($,ui,CommonStrings){"use strict";var Dialog=function($ob,options){this.$ob=$ob;var me=this;options=$.extend({title:"No Title Defined",height:"auto",maxHeight:550,showEffect:"blind",hideEffect:"puff",firstButtonLeft:false,okText:CommonStrings.ok,okClass:"btn-primary",cancelText:CommonStrings.cancel,okCallback:null,cancelCallback:function(){me.hide()},dialogClass:"",closeText:"",resizable:false,onBeforeClose:null,onClose:null},options||{});this.height=options.height;this.maxHeight=options.maxHeight;this.title=options.title;this.showEfect=options.showEffect;this.hideEffect=options.hideEffect;this.onCloseHandler=options.onClose;this.onBeforeCloseHandler=options.onBeforeClose;this.buttons={cancel:{text:options.cancelText,class:"btn btn-sm btn-default",id:"btnDialogCancel",click:options.cancelCallback},ok:{text:options.okText,class:"btn btn-sm "+options.okClass,id:"btnDialogOk",click:options.okCallback}};this.$ob.dialog({modal:true,stack:true,autoOpen:false,height:this.height,maxHeight:this.maxHeight,dialogClass:options.dialogClass,closeText:options.closeText,resizable:options.resizable,position:{my:"center",at:"center",of:window},overlay:{opacity:.5,background:"white"},open:function(){$(".ui-widget-overlay").css("position","fixed");$(this).parent().promise().done(function(){me.center()})},close:function(){$(".ui-widget-overlay").css("position","absolute");if(me.onCloseHandler){me.onCloseHandler()}},beforeClose:function(){if(me.onBeforeCloseHandler){me.onBeforeCloseHandler()}}})};Dialog.prototype.onClose=function(handler){this.onCloseHandler=handler};Dialog.prototype.onBeforeClose=function(handler){this.onBeforeCloseHandler=handler};Dialog.prototype.cancelCallback=function(){this.hide()};Dialog.prototype.close=function(func){this.$ob.dialog("option","close",func)};Dialog.prototype.refresh=function(){this.$ob.dialog("option","title",this.title);this.$ob.dialog("option","height",this.height);this.$ob.dialog("option","maxHeight",this.maxHeight);this.$ob.dialog("option","buttons",this.buttons)};Dialog.prototype.show=function(effect){this.refresh();var options={effect:effect||this.showEffect};this.$ob.dialog("option","show",options);this.$ob.dialog("open")};Dialog.prototype.hide=function(effect){if(effect=="none"){this.$ob.dialog("option","hide",false);this.$ob.dialog("close")}else{var options={effect:effect||this.hideEffect};this.$ob.dialog("option","hide",options);this.$ob.dialog("close")}};Dialog.prototype.center=function(){this.$ob.dialog({position:{my:"center",at:"center",of:window}})};Dialog.prototype.isActive=function(){return this.$ob.dialog("isOpen")};Dialog.prototype.clearButtons=function(){this.buttons={};this.$ob.dialog("option","buttons",this.buttons)};Dialog.prototype.addButton=function(label,callback,btn){if(typeof options=="boolean"){alert("addButton method deprecated - update your code");return}btn=btn||{};btn.text=label;btn.click=callback;if(!btn["class"]){btn["class"]="btn btn-default"}btn["class"]+=" btn-sm";this.buttons[label]=btn};Dialog.prototype.addCancelButton=function(label,callback,btn){var me=this;this.addButton(label,function(){if(!callback||callback()){me.hide()}},btn)};Dialog.prototype.addPrimaryButton=function(label,callback,btn){btn=btn||{};btn["class"]="btn btn-primary";this.addButton(label,callback,btn)};Dialog.prototype.addDangerButton=function(label,callback,btn){btn=btn||{};btn["class"]="btn btn-danger";this.addButton(label,callback,btn)};Dialog.prototype.addButtonOLD=function(label,callback,isCancel,options){options=options||{};isCancel=isCancel||false;var me=this;var cb=callback;if(isCancel){cb=function(){if(!callback||callback()){me.hide()}}}this.buttons[label]={text:label,class:"btn btn-default",click:cb};$.extend(this.buttons[label],options)};Dialog.prototype.disableButons=function(){this.$ob.parent().find("button").attr("disabled",true)};Dialog.prototype.enableButons=function(){this.$ob.parent().find("button").attr("disabled",false)};return Dialog});define("templates/helpers/unless_equal",["hbs/handlebars"],function(Handlebars){Handlebars.registerHelper("unless_equal",function ifequal(v1,v2,options){if(v1==v2)return options.inverse(this);return options.fn(this)})});define("templates/helpers/trans",["hbs/handlebars"],function(Handlebars){"use strict";function trans(){var args=Array.prototype.slice.call(arguments);var word=args[0];var stringArgs=null;if(args.length==2){var lastArg=args[args.length-1];stringArgs=lastArg.hash}else{stringArgs=args.slice(1,args.length-1)}word=String.prototype.format.call(word,stringArgs);return new Handlebars.SafeString(word)}Handlebars.registerHelper("trans",trans);return trans});define("hbs!appogee/audit/template",["hbs/handlebars","templates/helpers/renderViewData","templates/helpers/ifequal","templates/helpers/unless_equal","templates/helpers/if_gt","templates/helpers/trans"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'style="padding: 0px;"'},3:function(depth0,helpers,partials,data){return'\t\t<p class="result_summary">Loading ...</p>\n'},5:function(depth0,helpers,partials,data){var helper;return'\t\t<p class="result_summary">Displaying '+this.escapeExpression((helper=(helper=helpers.start||(depth0!=null?depth0.start:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"start",hash:{},data:data}):helper))+" - "+this.escapeExpression((helper=(helper=helpers.end||(depth0!=null?depth0.end:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"end",hash:{},data:data}):helper))+"</p>\n"},7:function(depth0,helpers,partials,data){return'\t\t<div class="loader"></div>\n'},9:function(depth0,helpers,partials,data){var stack1;return'\t\t<a href="javascript: void(0);" class="btn previous" '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.hasLessPages:depth0,{name:"unless",hash:{},fn:this.program(10,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'>&lt; Previous</a></li>\n\t\t<a href="javascript: void(0);" class="btn next" '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.hasMorePages:depth0,{name:"unless",hash:{},fn:this.program(10,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">Next &gt;</a></li>\n"},10:function(depth0,helpers,partials,data){return'disabled="disabled"'},12:function(depth0,helpers,partials,data){return'\t\t\t<th class="w400">Comments</th>\n'},14:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.loading:depth0,{name:"if",hash:{},fn:this.program(15,data,0),inverse:this.program(17,data,0),data:data}))!=null?stack1:""},15:function(depth0,helpers,partials,data){return'\t\t\t\t<tr><td colspan="10" class="loading">Loading ..</td></tr>\n'},17:function(depth0,helpers,partials,data){return'\t\t\t\t<tr><td colspan="10" class="no_results">No Results Found</td></tr>\n'},19:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.audits:depth0,{name:"each",hash:{},fn:this.program(20,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},20:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.unless_equal||depth0&&depth0.unless_equal||helpers.helperMissing).call(depth0,depth0!=null?depth0.type:depth0,2,{name:"unless_equal",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},21:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t<tr data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">\n\t\t\t\t\t<td>'+this.escapeExpression((helper=(helper=helpers.formattedCreate||(depth0!=null?depth0.formattedCreate:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"formattedCreate",hash:{},data:data}):helper))+"</td>\n\t\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.user||(depth0!=null?depth0.user:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"user",hash:{},data:data}):helper))+'</td>\n\t\t\t\t\t<td class="panel">\n'+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.type:depth0,{name:"if_gt",hash:{compare:0},fn:this.program(22,data,0,blockParams,depths),inverse:this.program(31,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t\t\t</td>\n"+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].displayComments:depths[1],{name:"if",hash:{},fn:this.program(33,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t</tr>\n"},22:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.expanded:depth0,{name:"if",hash:{},fn:this.program(23,data,0),inverse:this.program(29,data,0),data:data}))!=null?stack1:""},23:function(depth0,helpers,partials,data){var stack1,helper;return'\t\t\t\t\t\t\t\t<a href="javascript: void(0);" class="twistie collapse" title="'+this.escapeExpression((helpers.trans||depth0&&depth0.trans||helpers.helperMissing).call(depth0,"Click to collapse",{name:"trans",hash:{},data:data}))+'">'+this.escapeExpression((helper=(helper=helpers.activity||(depth0!=null?depth0.activity:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"activity",hash:{},data:data}):helper))+'</a>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<table class="table table-responsive table-bordered table-shaded table-condensed inner">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th class="col-sm-2">Field</th>\n\t\t\t\t\t\t\t\t\t<th class="col-sm-5">Changed From</th>\n\t\t\t\t\t\t\t\t\t<th class="col-sm-5">Changed To</th>\n\t\t\t\t\t\t\t\t</tr>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.detail:depth0,{name:"each",hash:{},fn:this.program(24,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t\t\t\t</table>\n"},24:function(depth0,helpers,partials,data){var stack1,helper;return'\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td class="col-sm-2">'+this.escapeExpression((helper=(helper=helpers.field||(depth0!=null?depth0.field:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"field",hash:{},data:data}):helper))+'</td>\n\t\t\t\t\t\t\t\t\t<td class="col-sm-5">'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.changedFrom:depth0,{name:"if",hash:{},fn:this.program(25,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'</td>\n\t\t\t\t\t\t\t\t\t<td class="col-sm-5">'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.changedTo:depth0,{name:"if",hash:{},fn:this.program(27,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"</td>\n\t\t\t\t\t\t\t\t</tr>\n"},25:function(depth0,helpers,partials,data){var stack1,helper;return(stack1=(helper=(helper=helpers.changedFrom||(depth0!=null?depth0.changedFrom:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"changedFrom",hash:{},data:data}):helper))!=null?stack1:""},27:function(depth0,helpers,partials,data){var stack1,helper;return(stack1=(helper=(helper=helpers.changedTo||(depth0!=null?depth0.changedTo:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"changedTo",hash:{},data:data}):helper))!=null?stack1:""},29:function(depth0,helpers,partials,data){var helper;return'\t\t\t\t\t\t\t\t<a href="javascript: void(0);" class="twistie expand">'+this.escapeExpression((helper=(helper=helpers.activity||(depth0!=null?depth0.activity:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"activity",hash:{},data:data}):helper))+"</a>\n"},31:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t\t\t\t<div>"+this.escapeExpression((helper=(helper=helpers.activity||(depth0!=null?depth0.activity:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"activity",hash:{},data:data}):helper))+"</div>\n"},33:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.comments||(depth0!=null?depth0.comments:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"comments",hash:{},data:data}):helper))+"</td>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return this.escapeExpression((helpers.renderViewData||depth0&&depth0.renderViewData||helpers.helperMissing).call(depth0,"ignore","ignore",{name:"renderViewData",hash:{},data:data}))+'\n<div class="view_header" '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.padHeader:depth0,{name:"unless",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'>\n\t<div class="floatleft">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loading:depth0,{name:"if",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.program(5,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t</div>\n\t\n\t<div class="floatright">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loading:depth0,{name:"if",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.displayPagination:depth0,{name:"if",hash:{},fn:this.program(9,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<div class="clear"></div>\n\t</div>\n\t<div class="clear"></div>\n</div>\n\n<table class="audit view table table-bordered table-shaded table-rigid table-responsive ">\n\t<thead>\n\t\t<tr>\n\t\t\t<th class="w200">Date</th>\n\t\t\t<th class="w200">User</th>\n\t\t\t<th style="padding-left: 27px;">Activity</th>\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.displayComments:depth0,{name:"if",hash:{},fn:this.program(12,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tr>\n\t</thead>\n\t<tbody>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.total:depth0,0,{name:"ifequal",hash:{},fn:this.program(14,data,0,blockParams,depths),inverse:this.program(19,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t</tbody>\n</table>"},useData:true,useDepths:true});Handlebars.registerPartial("appogee/audit/template",t);return t});define("appogee/audit/AuditView",["jquery","appogee/xhr","appogee/util","hbs!appogee/audit/template"],function($,xhr,util,tmpl){var PAGESIZE=100;var AuditView=function($container,targetKey){this.$container=$container;this.targetKey=targetKey;this.displayComments=true;this.page=1;this.url="/api/{0}/audits".format(xhr.API_VERSION);this.audits=[]};AuditView.prototype.fetch=function(targetKey){var me=this;if(targetKey)this.targetKey=targetKey;$.ajax({type:"GET",url:this.url+"?target="+this.targetKey,success:function(data,textStatus,jqXHR){me.audits=data.items;me.render()},contentType:"application/json",dataType:"json"})};AuditView.prototype.getStart=function(){if(this.audits.length==0)return 0;return(this.page-1)*PAGESIZE+1};AuditView.prototype.getEnd=function(){if(this.audits.length==0)return 0;return this.getStart()+this.audits.length-1};AuditView.prototype.hasMorePages=function(){return this.audits.length>PAGESIZE};AuditView.prototype.hasLessPages=function(){return this.page>1};AuditView.prototype.render=function(){for(var i=0;i<this.audits.length;i++){this.audits[i].formattedCreate=util.datetime.toString(this.audits[i].created)}var data={start:this.getStart(),end:this.getEnd(),audits:this.audits,hasMorePages:this.hasMorePages(),hasLessPages:this.hasLessPages(),displayPagination:this.hasMorePages()||this.hasLessPages(),displayComments:this.displayComments};this.$container.html(tmpl(data));var me=this;this.$container.find("a.expand").click(function(){var key=$(this).closest("tr").data("key");var audit=me.byKey(key);if(audit.detail){audit.expanded=true;me.render()}else{$.ajax({type:"GET",url:me.url+"/"+key+"/detail",success:function(data,textStatus,jqXHR){audit.expanded=true;audit.detail=data.items;me.render()},contentType:"application/json",dataType:"json"})}});this.$container.find("a.collapse").click(function(){var key=$(this).closest("tr").data("key");var audit=me.byKey(key);audit.expanded=false;me.render()});this.$container.find("a.previous").click(function(){me.previous()});this.$container.find("a.next").click(function(){me.next()})};AuditView.prototype.byKey=function(key){for(var i=0;i<this.audits.length;i++)if(this.audits[i].key==key)return this.audits[i]};AuditView.prototype.next=function(){if(this.hasMorePages()){this.page++;this.fetch()}};AuditView.prototype.previous=function(){if(this.hasLessPages()){this.page=Math.max(1,this.page-1);this.fetch()}};return AuditView});define("hbs!appogee/templates/PromptDialog",["hbs/handlebars","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<input type="text" class="form-control input-sm"\n\t\t\t\t'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.placeholderText:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n\t\t\t\t"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.defaultText:depth0,{name:"if",hash:{},fn:this.program(4,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n"},2:function(depth0,helpers,partials,data){var helper;return'placeholder="'+this.escapeExpression((helper=(helper=helpers.placeholderText||(depth0!=null?depth0.placeholderText:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"placeholderText",hash:{},data:data}):helper))+'"'},4:function(depth0,helpers,partials,data){var helper;return'value="'+this.escapeExpression((helper=(helper=helpers.defaultText||(depth0!=null?depth0.defaultText:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"defaultText",hash:{},data:data}):helper))+'"'},6:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.inputType:depth0,"textarea",{name:"ifequal",hash:{},fn:this.program(7,data,0),inverse:this.noop,data:data}))!=null?stack1:""},7:function(depth0,helpers,partials,data){var stack1;return'  \t\t\t<textarea class="form-control input-sm" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.placeholderText:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.defaultText:depth0,{name:"if",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"</textarea>\n  \t\t"},8:function(depth0,helpers,partials,data){var helper;return this.escapeExpression((helper=(helper=helpers.defaultText||(depth0!=null?depth0.defaultText:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"defaultText",hash:{},data:data}):helper))},compiler:[6,">= 2.0.0-beta.1"],
main:function(depth0,helpers,partials,data){var stack1,helper;return'<div class="'+this.escapeExpression((helper=(helper=helpers.alertClass||(depth0!=null?depth0.alertClass:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"alertClass",hash:{},data:data}):helper))+'">\n\t<h4>'+this.escapeExpression((helper=(helper=helpers.title||(depth0!=null?depth0.title:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"title",hash:{},data:data}):helper))+'</h4>\n\t<div class="form-group">\n\t\t<label>'+this.escapeExpression((helper=(helper=helpers.msg||(depth0!=null?depth0.msg:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"msg",hash:{},data:data}):helper))+"</label>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.inputType:depth0,"text",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.program(6,data,0),data:data}))!=null?stack1:"")+"\t</div>\n</div>"},useData:true});Handlebars.registerPartial("appogee/templates/PromptDialog",t);return t});define("appogee/ui",["jquery","underscore","appogee/i18n","appogee/cookies","appogee/view/View","appogee/Dialog","appogee/audit/AuditView","enums/CommonStrings","hbs!appogee/templates/PromptDialog"],function($,_,i18n,cookies,View,Dialog,AuditView,CommonStrings,tmplPrompt){"use strict";var $dlgAlert=null;var dlgAlert=null;var $dlgConfirm=null;var dlgConfirm=null;var $dlgYesNo=null;var dlgYesNo=null;var $dlgPrompt=null;var dlgPrompt=null;function alert(title,msg,alertClass,callback){if(dlgAlert===null){$dlgAlert=$("<div />").addClass("dialog-alert");dlgAlert=new Dialog($dlgAlert,{title:"Appogee HR"})}if(_.isArray(title)){callback=alertClass;alertClass=msg;msg=title[1];title=title[0]}if(_.isFunction(alertClass)){callback=alertClass;alertClass=null}dlgAlert.clearButtons();dlgAlert.addPrimaryButton(CommonStrings.ok,function(){if(callback){if(callback()){dlgAlert.hide()}}else{dlgAlert.hide()}});if(alertClass){alertClass="alert alert-"+alertClass}else{alertClass="alert"}var $alert=$("<div />").addClass(alertClass);if(title){$alert.append($("<h4 />").html(title))}$alert.append($("<p />").html(msg));$dlgAlert.html("").append($alert);dlgAlert.show()}function valert(title,msg,alertClass,callback){if(_.isArray(title)){callback=alertClass;alertClass=msg;msg=title[1];title=title[0]}else if(arguments.length==1){msg=title;title=CommonStrings.formInvalid}if(dlgAlert===null){$dlgAlert=$("<div />").addClass("dialog-alert");dlgAlert=new Dialog($dlgAlert,{title:"Appogee HR",dialogClass:"dlg-validation"})}if(_.isFunction(alertClass)){callback=alertClass;alertClass=null}dlgAlert.clearButtons();dlgAlert.addPrimaryButton(CommonStrings.ok,function(){if(callback){if(callback()){dlgAlert.hide()}}else{dlgAlert.hide()}});if(alertClass){alertClass="alert alert-"+alertClass}else{alertClass="alert"}var $alert=$("<div />").addClass(alertClass);if(title){var $h4=$("<h4 />").addClass("text-danger");$h4.append('<i class="glyphicon glyphicon-exclamation-sign" />');$h4.append($("<span />").html(title));$alert.append($h4)}$alert.append($("<p />").html(msg));$dlgAlert.html("").append($alert);dlgAlert.show()}var confirm=function(title,msg,alertClass,okCallback){if(dlgConfirm===null){$dlgConfirm=$("<div />").addClass("dialog-alert");dlgConfirm=new Dialog($dlgConfirm,{title:"Appogee HR"})}if(_.isArray(title)){okCallback=alertClass;alertClass=msg;msg=title[1];title=title[0]}if(_.isFunction(alertClass)){okCallback=alertClass;alertClass=null}dlgConfirm.clearButtons();dlgConfirm.addCancelButton(CommonStrings.cancel);dlgConfirm.addPrimaryButton(CommonStrings.ok,function(){okCallback();dlgConfirm.hide()});if(alertClass){alertClass="alert alert-"+alertClass}else{alertClass="alert"}var $alert=$("<div />").addClass(alertClass);if(title){$alert.append($("<h4 />").html(title))}$alert.append($("<p />").html(msg));$dlgConfirm.html("").append($alert);dlgConfirm.show()};var yesNo=function(title,msg,alertClass,callback){if(dlgYesNo===null){$dlgYesNo=$("<div />").addClass("dialog-alert");dlgYesNo=new Dialog($dlgYesNo,{title:"Appogee HR"})}if(_.isArray(title)){callback=alertClass;alertClass=msg;msg=title[1];title=title[0]}if(_.isFunction(alertClass)){callback=alertClass;alertClass=null}dlgYesNo.clearButtons();dlgYesNo.addButton(CommonStrings.no,function(){callback("no");dlgYesNo.hide()});dlgYesNo.addPrimaryButton(CommonStrings.yes,function(){callback("yes");dlgYesNo.hide()});if(alertClass){alertClass="alert alert-"+alertClass}else{alertClass="alert"}var $alert=$("<div />").addClass(alertClass);if(title){$alert.append($("<h4 />").html(title))}$alert.append($("<p />").html(msg));$dlgYesNo.html("").append($alert);dlgYesNo.show()};function yesNoContinue(sTitle,sMsg,alertClass,okCallback){sMsg="<p>"+sMsg+"</p><p>"+CommonStrings.doYouWishToContinue+"</p>";yesNo(sTitle,sMsg,alertClass,okCallback)}var prompt=function(title,msg,callback,options){if(_.isArray(title)){options=callback;callback=msg;msg=title[1];title=title[0]}options=$.extend({alertClass:"alert",mandatory:false,placeholderText:"",defaultText:"",okText:CommonStrings.ok,cancelText:CommonStrings.cancel,inputType:"textarea"},options||{});if(["info","warning","danger","success"].indexOf(options.alertClass)>-1){options.alertClass="alert alert-"+options.alertClass}if(dlgPrompt===null){$dlgPrompt=$("<div />").addClass("dialog-alert");dlgPrompt=new Dialog($dlgPrompt,{title:"Appogee HR"})}$dlgPrompt.html(tmplPrompt({title:title,msg:msg,alertClass:options.alertClass,placeholderText:options.placeholderText,defaultText:options.defaultText,inputType:options.inputType}));dlgPrompt.clearButtons();dlgPrompt.addCancelButton(options.cancelText);dlgPrompt.addPrimaryButton(options.okText,function(){var $el=null;if(options.inputType=="text"){$el=$dlgPrompt.find('input[type="text"]')}else if(options.inputType=="textarea"){$el=$dlgPrompt.find("textarea")}var promptText=$el.val();if(options.mandatory&&!promptText){$el.addClass("error")}else{callback(promptText);dlgPrompt.hide()}});dlgPrompt.show()};function _getNestedProperty(ob,propName){var props=propName.split(".");props.forEach(function(prop){if(ob&&ob.hasOwnProperty(prop)){ob=ob[prop]}});return ob}function populateDropdown($ddl,data,options){options=$.extend({keyName:"key",valueName:"value",valueFormatter:null,defaultKey:"",defaultValue:CommonStrings.select,groupBy:null,groupBySingle:false,groupByFormatter:null,cookieKey:null},options||{});if(options.cookieKey){var key=cookies.get(options.cookieKey);if(key!==null){options["default"]=key}}if(!("default"in options)){options["default"]=options.defaultKey}var html=null;var groups={};$.each(data,function(i,keyword){var key=keyword[options.keyName];var value=keyword[options.valueName];if(options.valueFormatter){value=options.valueFormatter(keyword)}var selected="";if(key==options["default"]){selected='selected="selected"'}html='<option value="{0}"{1}>{2}</option>'.format(key,selected,value);var groupKey=null;if(options.groupBy){groupKey=_getNestedProperty(keyword,options.groupBy)}if(!groupKey){groupKey="~"}if(!groups.hasOwnProperty(groupKey)){groups[groupKey]=""}groups[groupKey]+=html});html="";if(options.defaultValue){html='<option value="{0}">{1}</option>'.format(options.defaultKey,options.defaultValue)}if(options.groupBy){var groupNames=_.keys(groups).sort();if(!options.groupBySingle&&groupNames.length==1){html+=groups[groupNames[0]]}else{groupNames.forEach(function(groupName){if(groupName=="~"){html+=groups["~"]}else{var groupNameString=groupName;if(options.groupByFormatter){groupNameString=options.groupByFormatter(groupNameString)}html+='<optgroup label="'+groupNameString+'">'+groups[groupName]+"</optgroup>"}})}}else{html+=groups["~"]}$ddl.html(html);if(options.cookieKey){$ddl.off("change.appogee.populateDropdown").on("change.appogee.populateDropdown",function(){cookies.set(options.cookieKey,this.value)})}}function populateCheckboxList($ddl,data){var html="";$.each(data,function(i,keyword){html+='<label class="checkbox-inline">'+'<input type="checkbox" name="'+keyword.type+'" value="'+keyword.key+'" />'+keyword.value+"</label>"});$ddl.html(html)}return{Dialog:Dialog,View:View,AuditView:AuditView,alert:alert,confirm:confirm,yesNo:yesNo,yesNoContinue:yesNoContinue,prompt:prompt,valert:valert,populateDropdown:populateDropdown,populateCheckboxList:populateCheckboxList}});define("appogee/validation",[],function(){"use strict";var RE_ADU=/^[A-Za-z]+([A-Za-z0-9-\.]+)?[A-Za-z0-9]$/;var RE_ADU_ROOT=RE_ADU;var RE_ADU_NAME=RE_ADU;var RE_TEAM_NAME=/^[A-Za-z]{1}[A-Za-z0-9 -_*]+$/;var RE_EMP_NAME=/[A-Za-z0-9 ]{2}/;var RE_PASSWORD=/^.*(?=.{8,20})(?=.*\d)(?=.*[a-zA-Z]).*$/;var RE_AUS_POSTCODE=/^[\d]{4}$/g;var RE_USA_ZIP=/^[\d]{5}$/g;var RE_EMAIL=/^[a-zA-Z0-9_.'\+-]+@[a-zA-Z0-9_.-]+\.[a-zA-Z]+[a-zA-Z]+/;var RE_DOMAIN=/^([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/;var RE_PHONE_NO=/[0-9]/;var RE_IP=/\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/;var RE_URL=/https?:\/\/[A-Za-z0-9\.-]{3,}\.[A-Za-z]{2,4}/;var RE_DATE=/^(0[1-9]|[12][0-9]|3[01])[\/](0[1-9]|1[012])[\/](19|20)\d\d$/;var RE_ISO_DATE=/^(19|20)\d\d\-(0[1-9]|1[012])\-(0[1-9]|[12][0-9]|3[01])$/;var RE_HEX_COLOR=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;var RE_IMG_FILENAME=/^.*(\.(jpg|png|gif|jpeg))$/;var RE_CSV_FILENAME=/^.*(\.(csv))$/;function validateADU(adu){return RE_ADU_NAME.test(adu)}function validateRootADU(adu){return RE_ADU_ROOT.test(adu)}function validateTeamName(teamName){teamName=teamName.trim();return RE_TEAM_NAME.test(teamName)}function validateFullName(fullName){return fullName.split(" ").length>1&&fullName.split(" ")[1]!=""}function validateEmpName(empName){return RE_EMP_NAME.test(empName)}function validatePassword(password){return RE_PASSWORD.test(password)}function validateDomain(domain){return RE_DOMAIN.test(domain)}function validateEmail(email){return RE_EMAIL.test(email)}function validatePhoneNumber(phoneNumber){return RE_PHONE_NO.test(phoneNumber)}function validateIP(ip){return RE_IP.test(ip)}function validateURL(url){return RE_URL.test(url)}function validateDate(d){return RE_DATE.test(d)}function validateIsoDate(d){return RE_ISO_DATE.test(d)}function validateInt(num){if(!num){return false}var ok="0123456789";for(var i=0;i<num.length;i++){var ch=num.charAt(i);if(ok.indexOf(ch)==-1){return false}}return true}function validateFloat(num){var ok="0123456789.";for(var i=0;i<num.length;i++){var ch=num.charAt(i);if(ok.indexOf(ch)==-1){return false}}return true}function validateHexColor(s){return RE_HEX_COLOR.test(s)}function validateImageFilename(filename){return RE_IMG_FILENAME.test(filename)}function validateCSVFilename(filename){return RE_CSV_FILENAME.test(filename)}function validateAustralianPostcode(postcode){return RE_AUS_POSTCODE.test(postcode)}function validateAmericanZip(zip){return RE_USA_ZIP.test(zip)}return{validateADU:validateADU,validateRootADU:validateRootADU,validateTeamName:validateTeamName,validateFullName:validateFullName,validateEmpName:validateEmpName,validatePassword:validatePassword,validateDomain:validateDomain,validateEmail:validateEmail,validatePhoneNumber:validatePhoneNumber,validateIP:validateIP,validateURL:validateURL,validateDate:validateDate,validateIsoDate:validateIsoDate,validateInt:validateInt,validateFloat:validateFloat,validateHexColor:validateHexColor,validateImageFilename:validateImageFilename,validateAustralianPostcode:validateAustralianPostcode,validateAmericanZip:validateAmericanZip,validateCSVFilename:validateCSVFilename}});define("appogee/globals",["appogee/i18n"],function(i18n){"use strict";function getMonths(style){style=style||"full";var strings=i18n.getStrings();if(style.toLowerCase()=="mini"){return[strings.get("Jan"),strings.get("Feb"),strings.get("Mar"),strings.get("Apr"),strings.get("May"),strings.get("Jun"),strings.get("Jul"),strings.get("Aug"),strings.get("Sep"),strings.get("Oct"),strings.get("Nov"),strings.get("Dec")]}else{return[strings.get("January"),strings.get("February"),strings.get("March"),strings.get("April"),strings.get("May"),strings.get("June"),strings.get("July"),strings.get("August"),strings.get("September"),strings.get("October"),strings.get("November"),strings.get("December")]}}function getWeekdays(style){style=style||"full";var strings=i18n.getStrings();if(style.toLowerCase()=="mini"){return[strings.get("Mon"),strings.get("Tue"),strings.get("Wed"),strings.get("Thu"),strings.get("Fri"),strings.get("Sat"),strings.get("Sun")]}else if(style.toLowerCase()=="tiny"){return[strings.get("Mo"),strings.get("Tu"),strings.get("We"),strings.get("Th"),strings.get("Fr"),strings.get("Sa"),strings.get("Su")]}else{return[strings.get("Monday"),strings.get("Tuesday"),strings.get("Wednesday"),strings.get("Thursday"),strings.get("Friday"),strings.get("Saturday"),strings.get("Sunday")]}}var NOW=new Date;var TODAY=new Date;TODAY.setHours(0);TODAY.setMinutes(0);TODAY.setSeconds(0);TODAY.setMilliseconds(0);return{TODAY:TODAY,NOW:NOW,KEY_ESC:27,KEY_BACKSPACE:8,KEY_RETURN:13,KEY_SPACE:32,KEY_SHIFT:16,KEY_CTRL:17,KEY_UP:38,KEY_DOWN:40,getMonths:getMonths,getWeekdays:getWeekdays,XS_SCREEN_WIDTH:768,SM_SCREEN_WIDTH:992,MD_SCREEN_WIDTH:1200}});define("appogee/FileUploadManager",["jquery","appogee"],function($,appogee){var UPLOAD_STATUS_NOT_STARTED=0;var UPLOAD_STATUS_IN_PROGRESS=1;var UPLOAD_STATUS_COMPLETE=2;var UPLOAD_STATUS_ERROR=3;var STATUS_STOPPED=0;var STATUS_RUNNING=1;var STATUS_STOPPING=2;function __cancelDrag(e){e.preventDefault();e.dataTransfer.dropEffect="copy"}var UploadFile=function(id,file,path){path=path||"";this.id=id;this.file=file;this.path=path+file.name;this.ext=getFileExtension(file.name);this.uploadStatus=UPLOAD_STATUS_NOT_STARTED;this.bytesUploaded=0;this.params={}};UploadFile.prototype.addParam=function(key,value){this.params[key]=value};UploadFile.prototype.setComplete=function(){this.uploadStatus=UPLOAD_STATUS_COMPLETE;this.bytesUploaded=this.file.size};UploadFile.prototype.setError=function(errorMsg){this.uploadStatus=UPLOAD_STATUS_ERROR;this.bytesUploaded=0;this.error=errorMsg};var FileUploadManager=function(){this.ignoreFiles=[/^\.DS_Store$/,/Thumbs\.db/];this.droppableElements=[];this.files=[];this.totalBytes=0;this._working=false;this._monitor=null;this._monitorCount=null;this.status=STATUS_STOPPED;this.currentUploads=[];this.concurrentUploads=5;this.filesUploaded=0;this.bytesUploaded=0;this.globalParams={};this.bytesPerSecondData=[];this.bytesPerSecond=0;this.onLoadCompleteHandler=null;this.fileUploadCompleteHandler=null;this.fileUploadErrorHandler=null;this.fileUploadProgressHandler=null;this.uploadProgressHandler=null;this.uploadCompleteHandler=null;this.uploadStoppedHandler=null;this.preDropHandler=null;this.postDropHandler=null;this.dragEnterHandler=null};FileUploadManager.prototype.getUploadUrl=function(file,callback){callback("/upload")};FileUploadManager.prototype.onPreDrop=function(handler){this.preDropHandler=handler};FileUploadManager.prototype.onPostDrop=function(handler){this.postDropHandler=handler};FileUploadManager.prototype.onDragEnter=function(handler){this.dragEnterHandler=handler};FileUploadManager.prototype.bindDroppable=function(el){var me=this;el.addEventListener("dragover",__cancelDrag);el.addEventListener("dragenter",__cancelDrag);el.addEventListener("dragenter",function(e){if(!el.classList.contains("disabled")){el.classList.add("drag-over")}var numFileDragged=e.dataTransfer.items?e.dataTransfer.items.length:e.dataTransfer.mozItemCount;$(el).find(".file-count").html(numFileDragged);if(me.dragEnterHandler){me.dragEnterHandler(this)}});el.addEventListener("dragleave",function(){el.classList.remove("drag-over")});$(el).bind("drop",function(e){e.preventDefault();if(me.preDropHandler){if(!me.preDropHandler(e)){return}}if("items"in e.originalEvent.dataTransfer){var items=e.originalEvent.dataTransfer.items;me.loadItems(items,el)}else{for(var i=0;i<e.originalEvent.dataTransfer.files.length;i++){var file=e.originalEvent.dataTransfer.files[i];if(file.size==0){appogee.alert("Browser not supported","Your browser does not support uploading directories. Please try again, but instead of dragging the root directory, drag each file. You will need to drag the CRI file, and all assiciated video files from the <em>Video</em> and <em>Replays</em> directories.")}else{me.addFile(file)}}me.onLoadCompleteHandler(me.files,me.totalBytes,el)}});this.droppableElements.push(el);if(me.postDropHandler){if(!me.postDropHandler()){return}}};FileUploadManager.prototype.addGlobalParam=function(key,value){this.globalParams[key]=value};FileUploadManager.prototype.addFileParam=function(fileID,key,value){fileID=parseInt(fileID);for(var i=0;i<this.files.length;i++)if(this.files[i].id==fileID)this.files[i].addParam(key,value)};FileUploadManager.prototype.reset=function(items){if(this._monitor){clearInterval(this._monitor)}this.files=[];this.totalBytes=0;this._working=false;this._monitor=null;this._monitorCount=null};FileUploadManager.prototype.loadItems=function(items,el){this._working=true;var me=this;for(var i=0;i<items.length;i++){var item=items[i].webkitGetAsEntry();this.traverseFileTree(item)}this._monitor=setInterval(function(){console.log("MONITOR: "+me.files.length+" files");if(me.files.length==me._monitorCount){me._working=false;clearInterval(me._monitor);me.onLoadCompleteHandler(me.files,me.totalBytes,el)}else{me._monitorCount=me.files.length}},200)};FileUploadManager.prototype.checkFilename=function(filename){for(var i=0;i<this.ignoreFiles.length;i++){if(filename.match(this.ignoreFiles[i])){return false}}return true};FileUploadManager.prototype.traverseFileTree=function(item,path){var me=this;path=path||"";if(item.isFile){item.file(function(file){me.addFile(file,path)})}else if(item.isDirectory){var dirReader=item.createReader();var readEntries=function(){dirReader.readEntries(function(entries){if(entries.length){for(var i=0;i<entries.length;i++){me.traverseFileTree(entries[i],path+item.name+"/")}readEntries()}})};readEntries()}};FileUploadManager.prototype.addFile=function(file,path){path=path||"";if(this.checkFilename(file.name)){console.log("File:",path+file.name);var f=new UploadFile(this.files.length,file,path);this.files.push(f);this.totalBytes+=file.size;return f}else{console.log("Ignoring:",path+file.name)}};FileUploadManager.prototype.getFilesByType=function(type){type=type.toUpperCase();var files=[];for(var i=0;i<this.files.length;i++){var filename=this.files[i].path;var ext=getFileExtension(filename);if(ext&&ext.toUpperCase()==type)files.push(this.files[i])}return files};FileUploadManager.prototype.getFilesByRegex=function(regex){var files=[];for(var i=0;i<this.files.length;i++)if(this.files[i].file.name.match(regex))files.push(this.files[i]);return files};function getFileExtension(filename){var x=filename.lastIndexOf(".");if(x>-1)return filename.substring(x+1,filename.length);return""}FileUploadManager.prototype.onLoadComplete=function(handler){this.onLoadCompleteHandler=handler};FileUploadManager.prototype.onFileUploadProgress=function(handler){this.fileUploadProgressHandler=handler};FileUploadManager.prototype.onFileUploadComplete=function(handler){this.fileUploadCompleteHandler=handler};FileUploadManager.prototype.onFileUploadError=function(handler){this.fileUploadErrorHandler=handler};FileUploadManager.prototype.onUploadProgress=function(handler){this.uploadProgressHandler=handler};FileUploadManager.prototype.onUploadComplete=function(handler){this.uploadCompleteHandler=handler};FileUploadManager.prototype.onUploadStopped=function(handler){this.uploadStoppedHandler=handler};FileUploadManager.prototype.isRunning=function(){return this.status==STATUS_RUNNING};FileUploadManager.prototype.isStopping=function(){return this.status==STATUS_STOPPING};FileUploadManager.prototype.startUpload=function(){if(this.isRunning())return;this.status=STATUS_RUNNING;var me=this;this.uploadTimer=setInterval(function(){me.checkUploadPool();if(me.uploadProgressHandler){me.uploadProgressHandler(me.bytesUploaded,me.totalBytes)}},100)};FileUploadManager.prototype.stopUpload=function(){this.status=STATUS_STOPPING};FileUploadManager.prototype.resumeUpload=function(){this.startUpload()};FileUploadManager.prototype.retryErrors=function(){for(var i=0;i<this.files.length;i++){if(this.files[i].uploadStatus==UPLOAD_STATUS_ERROR){this.files[i].uploadStatus=UPLOAD_STATUS_NOT_STARTED}}this.startUpload()};FileUploadManager.prototype.setConcurrentUploads=function(x){this.concurrentUploads=x};FileUploadManager.prototype.checkUploadPool=function(){var bytesUploaded=0;var filesUploaded=0;var errors=0;var currentUploads=[];for(var i=0;i<this.files.length;i++){bytesUploaded+=this.files[i].bytesUploaded;if(this.files[i].uploadStatus==UPLOAD_STATUS_IN_PROGRESS)currentUploads.push(this.files[i]);else if(this.files[i].uploadStatus==UPLOAD_STATUS_COMPLETE)filesUploaded++;else if(this.files[i].uploadStatus==UPLOAD_STATUS_ERROR)errors++;if(this.isRunning()&&this.currentUploads.length<this.concurrentUploads&&this.files[i].uploadStatus==UPLOAD_STATUS_NOT_STARTED){currentUploads.push(this.files[i]);this.uploadFile(this.files[i])}}this.bytesUploaded=bytesUploaded;this.filesUploaded=filesUploaded;this.currentUploads=currentUploads;this.errors=errors;if(this.bytesPerSecondData.length==100)this.bytesPerSecondData.shift();this.bytesPerSecondData.push(bytesUploaded);if(filesUploaded+errors==this.files.length){this.status=STATUS_STOPPED;clearTimeout(this.uploadTimer);if(this.uploadCompleteHandler)this.uploadCompleteHandler()}if(this.isStopping()&&this.currentUploads.length==0){this.status=STATUS_STOPPED;clearTimeout(this.uploadTimer);if(this.uploadStoppedHandler)this.uploadStoppedHandler()}};FileUploadManager.prototype.getUploadRate=function(){var x=this.bytesPerSecondData;return Math.floor((x[x.length-1]-x[0])/x.length*10)};FileUploadManager.prototype.uploadFile=function(file,progressHandler,completeHandler,errorHandler){progressHandler=progressHandler||this.fileUploadProgressHandler;completeHandler=completeHandler||this.fileUploadCompleteHandler;errorHandler=errorHandler||this.fileUploadErrorHandler;var me=this;file.uploadStatus=UPLOAD_STATUS_IN_PROGRESS;this.currentUploads++;this.getUploadUrl(file,function(url,params){if(!url){file.setError("Connection Error");return}params=params||{};var fd=new FormData;fd.append("file",file.file);fd.append("filepath",file.path);fd.append("filename",file.file.name);for(key in me.globalParams)fd.append(key,me.globalParams[key]);for(key in file.params)fd.append(key,file.params[key]);for(key in params)fd.append(key,params[key]);var xhr=new XMLHttpRequest;xhr.upload.addEventListener("progress",function(e){file.bytesUploaded=e.loaded;if(progressHandler)progressHandler(file,e.loaded,e.total)});xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status==200){file.bytesUploaded=file.file.size;file.uploadStatus=UPLOAD_STATUS_COMPLETE;me.currentUploads--;if(completeHandler){completeHandler(file,JSON.parse(xhr.responseText))}}else{file.setError("Connection Error");if(errorHandler){me.errors++;errorHandler(file,xhr.StatusText)}}}};xhr.open("POST",url);xhr.send(fd)})};FileUploadManager.prototype.countUploadsRemaining=function(){var count=0;for(var i=0;i<this.files.length;i++){if(this.files[i].uploadStatus<UPLOAD_STATUS_COMPLETE)count++}return count};return FileUploadManager});define("appogee/UserPicker",["jquery","appogee/xhr","appogee/globals"],function($,xhr,globals){"use strict";var URL_PARAM_TYPE_URL="url";var URL_PARAM_TYPE_PARAM="param";var lastUserLookup=null;$(document).mouseup(function(e){var $picker=$("#userPicker");if(!$picker.is(e.target)&&$picker.has(e.target).length===0){$picker.hide()}});var UserPicker=function($textbox,callback,params){this.selectedIndex=-1;this.active=false;this.joining=false;this.cancelled=false;this.$textbox=$textbox;this.callback=callback;this.queryCallback=null;this.users=null;this.params=params||{};this.url="/api/{0}/employees/lookup/".format(xhr.API_VERSION);this.urlParamType=URL_PARAM_TYPE_URL;this.$picker=$("#userPicker");var me=this;this.$textbox.keyup(function(e){me.onKeyDown(e)});this.$textbox.attr("autocomplete","off")};UserPicker.prototype.onKeyDown=function(e){var keycode=null;if(window.event){keycode=event.keyCode}else{keycode=e.keyCode}if(keycode<48||keycode>57&&keycode<65||keycode>90){if(keycode!=globals.KEY_SPACE&&keycode!=globals.KEY_BACKSPACE&&keycode!=globals.KEY_RETURN&&keycode!=globals.KEY_ESC&&keycode!=globals.KEY_UP&&keycode!=globals.KEY_DOWN){return}}if(keycode==globals.KEY_UP){if(this.active){this.selectedIndex--;this.setSelected()}}else if(keycode==globals.KEY_DOWN){if(this.active){this.selectedIndex++;this.setSelected()}}else if(keycode==globals.KEY_RETURN){if(this.active){this.select()}}else if(keycode==globals.KEY_ESC){this.hide()}else{this.$textbox.addClass("loading");this.cancelled=false;var t=String((new Date).getTime());lastUserLookup=t;var me=this;setTimeout(function(){me.lookupUser(t)},400)}};UserPicker.prototype.lookupUser=function(queryTime){if(queryTime!=lastUserLookup){return}var query=this.$textbox.val();if(query===""){this.$textbox.data("userPickerKey",null).data("userPickerUserKey",null).data("userPickerFirstName",null).data("userPickerLastName",null).data("userPickerEmail",null);this.hide();this.$textbox.removeClass("loading");return}var me=this;var $textbox=this.$textbox;$textbox.addClass("loading");var url=this.url;var body={t:lastUserLookup,params:JSON.stringify(me.params)};if(this.urlParamType==URL_PARAM_TYPE_URL){url+=query}else if(this.urlParamType==URL_PARAM_TYPE_PARAM){body.query=query}else{throw"invalid"}$.getJSON(url,body,function(response){if(response.t==lastUserLookup){$textbox.removeClass("loading");me.users=response.employees;if(me.queryCallback){me.queryCallback(me.users)}me.populate()}})};UserPicker.prototype.setSelected=function(){this.$picker.children().removeClass("selected").eq(this.selectedIndex).addClass("selected")};UserPicker.prototype.cancel=function(){this.hide();this.cancelled=true};UserPicker.prototype.populate=function(){var me=this;if(this.cancelled||this.users.length===0){this.hide();return}this.$picker.html("");$.each(this.users,function(i,user){var userName='"'+user.firstName+" "+user.lastName+'" &lt;'+user.email+"&gt;";var div=$("<div />").html(userName).toggleClass("selected",i==me.selectedIndex).click(function(){me.selectedIndex=i;me.select()}).hover(function(){$(this).parent().children().removeClass("selected");$(this).addClass("selected");me.selectedIndex=$(this).index()},function(){});me.$picker.append(div)});this.show()};UserPicker.prototype.select=function(){if(this.selectedIndex>-1&&this.selectedIndex<this.users.length){var user=this.users[this.selectedIndex];this.$textbox.val(user.email).data("userPickerKey",user.key).data("userPickerUserKey",user.userKey).data("userPickerFirstName",user.firstName).data("userPickerLastName",user.lastName).data("userPickerEmail",user.email);if(this.callback){this.callback(user,this.$textbox)}}this.hide()};UserPicker.prototype.show=function(){var $textbox=this.$textbox;$("#userPicker").show().position({my:"left top",at:"left bottom",of:$textbox});this.active=true};UserPicker.prototype.hide=function(){this.$picker.hide();this.active=false};return UserPicker});define("appogee",["jquery","underscore","appogee/i18n","appogee/util","appogee/xhr","appogee/ui","appogee/validation","appogee/globals","appogee/cookies","appogee/notifier","appogee/localConfig","appogee/FileUploadManager","appogee/UserPicker"],function($,_,i18n,util,xhr,ui,validation,globals,cookies,Notifier,localConfig,FileUploadManager,UserPicker){"use strict";var ACCESS_LEVEL={NONE:0,MASKED:1,MASKED_READ:2,READ:3,MASKED_EDIT:4,EDIT:5};var LogType={ViewMaskedField:1005};var AppAlias={Hr:"hr",Leave:"leave"};if(!String.prototype.format){String.prototype.format=function(){var args=[this];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}return util.formatString.apply(this,args)}}if(typeof String.prototype.startsWith!="function"){String.prototype.startsWith=function(str){return this.slice(0,str.length)==str}}if(typeof String.prototype.endsWith!="function"){String.prototype.endsWith=function(str){return this.slice(-str.length)==str}}function trans(){var args=Array.prototype.slice.call(arguments);var word=args[0];var stringArgs=null;if(args.length==2){stringArgs=args[args.length-1]}else{stringArgs=args.slice(1,args.length-1)}word=String.prototype.format.call(word,stringArgs);return word;return word.format(a,b,c,d,e,f)}var SETTINGS=null;function getSettings(){return SETTINGS}function setSettings(settings){SETTINGS=settings}function getHostname(module){var i=["app","asc","sysadmin","api","developers"].indexOf(module);return SETTINGS.p.hn[i]}function getNs(){return SETTINGS.c.ns}function getAppAlias(){return SETTINGS.p.a.a}function getAppName(){return SETTINGS.p.a.n}function isHr(){return getAppAlias()==AppAlias.Hr}function isLeave(){return getAppAlias()==AppAlias.Leave}function getToilTerm(){return SETTINGS.c.toil}function getInstallDate(){return SETTINGS.c.installDate}function isAdusEnabled(){return SETTINGS.c.adusEnabled}function canCustomerAccessHr(){return SETTINGS.c.hr}function isCustomerP1(){return SETTINGS.c.p1}function getLeaveStartMonth(){return SETTINGS.c.lsm}function getGappsStatus(){return SETTINGS.c.gs}function getO365Status(){return SETTINGS.c.os}function getCsrfToken(){return SETTINGS.p.t}function getHideHours(){return SETTINGS.c.hideHours}function getSupportedLocales(){return["en_US","fr_FR","es_ES"]}var CURRENT_USER=null;function getCurrentUser(){return CURRENT_USER}function setCurrentUser(user){CURRENT_USER=user}var ADUS=null;function getAdus(options){if(!options){return ADUS}if(options.root){if(options.root=="self"){if(CURRENT_USER.isAduManager()){return ADUS}var adus=_.filter(ADUS,function(adu){return adu.isDescendent(CURRENT_USER.adu,true)});return adus}}}function getRootAdu(){var adus=getAdus();for(var i=0;i<adus.length;i++){if(adus[i].level==1){return adus[i]}}}function setAdus(adus){ADUS=adus}var notifier=new Notifier;function notify(message,messageType,autoHide){if(message){return notifier.notify(message,messageType,{autoHide:autoHide,artificiallyDelay:false})}else{return notifier.hide()}}function log(eventType,detail,targetKey,callback){var body={type:eventType,targetKey:targetKey};if(detail){body.detail=detail}var options={error:function(){}};this._HANDLE_ERROR=false;xhr.api.post("/log",body,function(response){if(callback){callback(response)}},options)}function dismissFlashMessage(msgId,callback){xhr.ajax.post("/user/dismiss-flash",{msgId:msgId},callback)}function monitorJob(key,callback){var timer=setInterval(function(){var params={key:key};$.getJSON("/jobs/monitor",params,function(response){if(response.complete){clearInterval(timer);callback()}})},2e3)}function today(){var now=new Date;now.setHours(0,0,0,0);return now}function isXsScreen(){return window.innerWidth<globals.XS_SCREEN_WIDTH}function isSmScreen(inclusive){if(inclusive){return window.innerWidth<globals.SM_SCREEN_WIDTH}return window.innerWidth>=globals.XS_SCREEN_WIDTH&&window.innerWidth<globals.SM_SCREEN_WIDTH}function isMdScreen(inclusive){if(inclusive){return window.innerWidth>=globals.SM_SCREEN_WIDTH&&window.innerWidth<globals.MD_SCREEN_WIDTH}return window.innerWidth<globals.MD_SCREEN_WIDTH}function isLgScreen(){return window.innerWidth>=globals.MD_SCREEN_WIDTH}function getBootstrapBreakpoint(){if(window.innerWidth<globals.XS_SCREEN_WIDTH){return"xs"}else if(window.innerWidth<globals.SM_SCREEN_WIDTH){return"sm"}else if(window.innerWidth<globals.MD_SCREEN_WIDTH){return"md"}else{return"lg"}}return{ACCESS_LEVEL:ACCESS_LEVEL,getSettings:getSettings,setSettings:setSettings,getHostname:getHostname,getToilTerm:getToilTerm,getHideHours:getHideHours,getInstallDate:getInstallDate,isAdusEnabled:isAdusEnabled,getNs:getNs,getAppAlias:getAppAlias,getAppName:getAppName,
isHr:isHr,isLeave:isLeave,canCustomerAccessHr:canCustomerAccessHr,isCustomerP1:isCustomerP1,getLeaveStartMonth:getLeaveStartMonth,getGappsStatus:getGappsStatus,getO365Status:getO365Status,getCsrfToken:getCsrfToken,getSupportedLocales:getSupportedLocales,getCurrentUser:getCurrentUser,setCurrentUser:setCurrentUser,getAdus:getAdus,getRootAdu:getRootAdu,setAdus:setAdus,isXsScreen:isXsScreen,isSmScreen:isSmScreen,isMdScreen:isMdScreen,isLgScreen:isLgScreen,getBootstrapBreakpoint:getBootstrapBreakpoint,getStrings:i18n.getStrings,getString:i18n.getString,API_VERSION:xhr.API_VERSION,ajax:xhr.ajax,xhr:xhr.ajax,api:xhr.api,load:xhr.load,pageLoad:xhr.pageLoad,trans:trans,today:today,log:log,LogType:LogType,cookies:cookies,ui:ui,util:util,localConfig:localConfig,globals:globals,validation:validation,FileUploadManager:FileUploadManager,UserPicker:UserPicker,notifier:notifier,notify:notify,dismissFlashMessage:dismissFlashMessage,monitorJob:monitorJob,Dialog:ui.Dialog,View:ui.View,AuditView:ui.AuditView,alert:ui.alert,valert:ui.valert,salert:ui.salert,confirm:ui.confirm,confirmContinue:ui.confirmContinue,sconfirm:ui.sconfirm,yesNo:ui.yesNo,yesNoContinue:ui.yesNoContinue,prompt:ui.prompt}});define("ADU",["jquery","underscore"],function($,_){"use strict";var ADU=function(adu){$.extend(true,this,adu)};ADU.prototype.isParent=function(adu,inclusive){inclusive=inclusive?inclusive:false;var aduPath=adu;if(_.isObject(adu)){aduPath=adu.path}if(this.path==aduPath){return inclusive}return aduPath.substring(0,this.path.length)==this.path};ADU.prototype.isDescendent=function(adu,inclusive){inclusive=inclusive?inclusive:false;var aduPath=adu;if(_.isObject(adu)){aduPath=adu.path}if(this.path==aduPath){return inclusive}return this.path.substring(0,aduPath.length)==aduPath};return ADU});define("User",["jquery","underscore","appogee","ADU"],function($,_,appogee,ADU){"use strict";var ROLE_MANAGER="manager";var ROLE_HR="hr";var ROLE_ADU="adu";var ROLE_ADMIN="admin";var ROLE_SYSADMIN="sysadmin";var ROLE_ASC_READER="asc_reader";var ROLE_ASC_EDITOR="asc_editor";var ROLE_ASC_ORDERS="asc_orders";var TEAM_ROLE_READER="reader";var TEAM_ROLE_EDITOR="editor";var TEAM_ROLE_PRIMARY="primary";var FIELD_ACCESS_LEVEL_NONE=0;var FIELD_ACCESS_LEVEL_MASKED=1;var FIELD_ACCESS_LEVEL_MASKED_READ=2;var FIELD_ACCESS_LEVEL_READ=3;var FIELD_ACCESS_LEVEL_MASKED_EDIT=4;var FIELD_ACCESS_LEVEL_EDIT=5;var RECORD_ACCESS_LEVEL_NONE=0;var RECORD_ACCESS_LEVEL_TITLE_ONLY=1;var RECORD_ACCESS_LEVEL_READ=3;var RECORD_ACCESS_LEVEL_EDIT=5;var RECORD_ACCESS_LEVEL_DELETE=6;var FlashMessages={GappsReviewMsg:3,P2Migration:4};var JQUERY_DATE_FORMAT_STRING_MAP={"%d/%m/%Y":"dd/mm/yy","%d/%m/%y":"dd/mm/y","%m/%d/%Y":"mm/dd/yy","%m/%d/%y":"mm/dd/y","%m-%d-%Y":"mm-dd-yy","%m-%d-%y":"mm-dd-y","%Y-%m-%d":"yy-mm-dd","%d-%b-%Y":"dd-M-yy"};var User=function(user){$.extend(true,this,user);this.adu=new ADU(this.adu);if(this.dateFormatString){this.jqueryDateFormatString=JQUERY_DATE_FORMAT_STRING_MAP[this.dateFormatString];if(this.timeFormatString){this.dateTimeFormatString=this.dateFormatString+" "+this.timeFormatString}}};User.prototype.getDomain=function(email){if(!email){email=this.email}return email.split("@")[1]};User.prototype.getActiveAdu=function(){var adus=appogee.getAdus();if(!adus){return this.adu}var key=appogee.cookies.get("aduKey");if(!key){key=this.adu.key}var adu=_.findWhere(adus,{key:key});if(!adu){adu=adus[0]}if(!this.isAduManager()&&adu.isParent(this.adu)){adu=this.adu}return adu};User.prototype.getActiveAduKey=function(){var adu=this.getActiveAdu();if(adu){return adu.key}};User.prototype.canAccess=function(app){return this.logins&&this.logins.indexOf(app)>-1};User.prototype.canAccessHr=function(){return this.canAccess("hr")};User.prototype.canAccessLeave=function(){return this.canAccess("leave")};User.prototype.isLeaveStandalone=function(){return this.canAccessLeave()&&!this.canAccessHr()};User.prototype.isHrStandalone=function(){return this.canAccessHr()&&!this.canAccessLeave()};User.prototype.hasRole=function(role){return this.roles&&this.roles.indexOf(role)>-1};User.prototype.isAdmin=function(){return this.hasRole(ROLE_ADMIN)};User.prototype.isSysAdmin=function(){return this.hasRole(ROLE_SYSADMIN)};User.prototype.isAscReader=function(){return this.hasRole(ROLE_ASC_READER)};User.prototype.isAscEditor=function(){return this.hasRole(ROLE_ASC_EDITOR)};User.prototype.isAscOrders=function(){return this.hasRole(ROLE_ASC_ORDERS)};User.prototype.isHrAdmin=function(){return this.hasRole(ROLE_HR)};User.prototype.isHrManager=function(){return this.hasRole(ROLE_HR)};User.prototype.isHrManagerFor=function(employee){if(this.hasRole(ROLE_HR)){return this.adu.isParent(employee.adu,true)}return false};User.prototype.isAduManager=function(){return this.hasRole(ROLE_ADU)};User.prototype.isManager=function(){return this.hasRole(ROLE_MANAGER)};User.prototype.isManagerEditor=function(){if(!this.managedTeams){return false}for(var i=0;i<this.managedTeams.length;i++){if(this.managedTeams[i].role==TEAM_ROLE_EDITOR){return true}}return false};User.prototype.isOnlyAdmin=function(){return this.roles.length==1&&this.isAdmin()};User.prototype.isOnlyHrAdmin=function(){return this.roles.length==1&&this.isHrAdmin()};User.prototype.isOnlyManager=function(){return this.roles.length===1&&this.isManager()};User.prototype.isOnlyEmployee=function(){return this.roles.length===0};User.prototype.getManagedTeamKeys=function(role){if(!role){role=TEAM_ROLE_READER}var keys=[];for(var i=0;i<this.managedTeams.length;i++){var team=this.managedTeams[i];if(role==TEAM_ROLE_READER){keys.push(team.key)}else if(role==TEAM_ROLE_EDITOR&&team.role==TEAM_ROLE_EDITOR){keys.push(team.key)}else if(role==TEAM_ROLE_PRIMARY&&team.primary){keys.push(team.key)}}return keys};User.prototype.isSomeKindOfManagerFor=function(employee,editor){if(this.isAduManager()){return true}if(this.isHrManagerFor(employee)){return true}if(this.isManagerFor(employee,editor)){return true}return false};User.prototype.isManagerFor=function(employee,editor){var role=TEAM_ROLE_READER;if(editor){role=TEAM_ROLE_EDITOR}if(!this.isManager()){return false}var managedTeamKeys=this.getManagedTeamKeys(role);if(employee.team&&managedTeamKeys.indexOf(employee.team.key)>-1){return true}if(employee.vteam&&managedTeamKeys.indexOf(employee.vteam.key)>-1){return true}return false};User.prototype.isManagerForTeam=function(team,editor){var role=TEAM_ROLE_READER;if(editor){role=TEAM_ROLE_EDITOR}if(!this.isManager()){return false}var managedTeamKeys=this.getManagedTeamKeys(role);return managedTeamKeys.indexOf(team.key)>-1};User.prototype.isManagerForDocument=function(document,editor){var role=TEAM_ROLE_READER;if(editor){role=TEAM_ROLE_EDITOR}if(!this.isManager()){return false}var i=0;var managedTeamKeys=this.getManagedTeamKeys(role);if(document.access.teams){for(i=0;i<document.access.teams.length;i++){if(managedTeamKeys.indexOf(document.access.teams[i].key)>-1){return true}}}else if(document.access.teamKeys){for(i=0;i<document.access.teamKeys.length;i++){if(managedTeamKeys.indexOf(document.access.teamKeys[i])>-1){return true}}}return false};User.prototype.canOpenProfile=function(employee){if(this.isHrManager()){return true}if(this.isManagerFor(employee)){return true}if(this.key==employee.key){return true}return false};User.prototype.canCreateCompanyDocuments=function(categories){if(this.isHrAdmin()){return true}if(!this.isManagerEditor()){return false}for(var i=0;i<categories.length;i++){if(categories[i].access.managerCreate){return true}}return false};User.prototype.canCreateCompanyDocument=function(category){if(this.isHrAdmin()){return true}if(!this.isManager()){return false}return category.access.managerCreate};User.prototype.canDeleteRecord=function(record){if(record.category.type=="record"){return this.canDeleteEmployeeRecord(record)}else{return this.canDeleteCompanyDocument(record)}};User.prototype.canDeleteCompanyDocument=function(document){if(this.isHrAdmin()){return true}if(this.isManager()&&document.access.manager>=RECORD_ACCESS_LEVEL_DELETE&&document.access.teamKeys&&document.access.teamKeys.length){for(var i=0;i<this.managedTeams.length;i++){var team=this.managedTeams[i];if(document.access.teamKeys.indexOf(team.key)>-1){return true}}}return false};User.prototype.canDeleteEmployeeRecord=function(document){if(this.isHrAdmin()){return true}};User.prototype.canOpenRecord=function(record){if(record.category.type=="record"){return this.canOpenEmployeeRecord(record)}else{return this.canOpenCompanyDocument(record)}};User.prototype.canOpenCompanyDocument=function(document){if(this.isHrAdmin()){return true}var isMember=false;if(!this.isManager()){if(document.access.teamKeys&&document.access.teamKeys.length){isMember=document.access.teamKeys.indexOf(this.team.key)>-1;if(!isMember){return false}}return document.access.user>=RECORD_ACCESS_LEVEL_READ}if(document.access.teamKeys&&document.access.teamKeys.length){isMember=document.access.teamKeys.indexOf(this.team.key)>-1;var isManager=false;for(var i=0;i<this.managedTeams.length;i++){var team=this.managedTeams[i];if(document.access.teamKeys.indexOf(team.key)>-1){isManager=true;break}}if(!isMember&&!isManager){return false}}return document.access.manager>=RECORD_ACCESS_LEVEL_READ};User.prototype.canOpenEmployeeRecord=function(record){if(this.isHrManager()){return true}if(this.isManager()){if(record.employee&&record.employee.team){if(this.isManagerFor(record.employee,false)&&record.access.manager>=RECORD_ACCESS_LEVEL_READ){return true}}else{}}if(record.employee){if(this.key==record.employee.key&&record.access.user>=RECORD_ACCESS_LEVEL_READ){return true}}else{}if(record.owner&&this.key==record.owner.key){return true}return false};User.prototype.canEditRecord=function(record){if(record.category.type=="record"){return this.canEditEmployeeRecord(record)}else{return this.canEditCompanyDocument(record)}};User.prototype.canEditCompanyDocument=function(document){if(this.adu.isDescendent(document.adu)){return false}if(this.isHrAdmin()){return true}var isMember=false;if(!this.isManager()){if(document.access.teamKeys&&document.access.teamKeys.length){isMember=document.access.teamKeys.indexOf(this.team.key)>-1;if(!isMember){return false}}return document.access.user>=RECORD_ACCESS_LEVEL_EDIT}if(document.access.teamKeys&&document.access.teamKeys.length){isMember=document.access.teamKeys.indexOf(this.team.key)>-1;var isManager=false;for(var i=0;i<this.managedTeams.length;i++){var team=this.managedTeams[i];if(team.role==TEAM_ROLE_READER){isManager=false;break}if(document.access.teamKeys.indexOf(team.key)>-1){isManager=true;break}}if(!isManager){return false}}else{return false}return document.access.manager>=RECORD_ACCESS_LEVEL_EDIT};User.prototype.canEditEmployeeRecord=function(record){if(this.isHrManager()){return true}if(this.isManager()){if(record.employee&&record.employee.team){for(var i=0;i<this.managedTeams.length;i++){var team=this.managedTeams[i];if(team.key!=record.employee.team.key){continue}if(team.role==TEAM_ROLE_READER){return false}if(record.access.manager>=RECORD_ACCESS_LEVEL_EDIT){return true}}}else{}}if(record.employee){if(this.key==record.employee.key&&record.access.user>=RECORD_ACCESS_LEVEL_EDIT){return true}}else{}if(record.owner&&this.key==record.owner.key){return true}return false};User.prototype.canCreateEmployeeRecords=function(categories,employee){if(this.isHrAdmin()){return true}var i=0;if(employee&&this.key==employee.key){for(i=0;i<categories.length;i++){if(categories[i].access.userCreate){return true}}}if(this.isManager()){if(employee){if(!this.isManagerFor(employee,true)){return false}}for(i=0;i<categories.length;i++){if(categories[i].access.managerCreate){return true}}return false}return false};User.prototype.canCreateEmployeeRecord=function(employee,category){if(this.isHrAdmin()){return true}if(this.isManagerFor(employee,true)){if(category.access.managerCreate){return true}}return this.key==employee.key&&category.access.userCreate};User.prototype.canReadChecklist=function(checklist){if(this.isHrAdmin()){return true}var canRead=false;if(this.isManager()){canRead=this.isManagerFor(checklist.assignedTo)}if(!canRead){canRead=checklist.assignedTo.key==this.key}return canRead};User.prototype.canEditChecklist=function(checklist){if(this.isHrAdmin()){return true}var canEdit=false;if(this.isManager()){canEdit=this.isManagerFor(checklist.assignedTo,true)}return canEdit};User.prototype.canCompleteChecklist=function(checklist){if(this.isHrAdmin()){return true}var canEdit=false;if(this.isManager()){canEdit=this.isManagerFor(checklist.assignedTo,true)}if(!canEdit){canEdit=checklist.assignedTo.key==this.key}return canEdit};User.prototype.canAssignChecklists=function(templates){throw"Not Implemented"};User.prototype.formatDate=function(d){if(!d){return""}return appogee.util.date.toString(d,this.dateFormatString)};User.prototype.getFlashMsg=function(msgId){var msg=_.find(this.flashMsgs,function(flashMsg){return flashMsg.split("~")[0]==msgId});return msg};User.prototype.canShowFlashMsg=function(msgId){var msg=this.getFlashMsg(msgId);if(!msg){return false}var bits=msg.split("~");if(bits.length>0){return bits[1]=="u"}};return User});define("hbs!templates/popups/RoleSwitcherPopup",["hbs/handlebars","templates/helpers/s","templates/helpers/ifany"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var helper;return'\t<a href="'+this.escapeExpression((helper=(helper=helpers.appHostname||(depth0!=null?depth0.appHostname:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"appHostname",hash:{},data:data}):helper))+'/my" class="role">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"My HR",{name:"s",hash:{},data:data}))+"\n\t</a>\n"},3:function(depth0,helpers,partials,data){var helper;return'\t<a href="'+this.escapeExpression((helper=(helper=helpers.appHostname||(depth0!=null?depth0.appHostname:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"appHostname",hash:{},data:data}):helper))+'/my/leave" class="role">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"My Leave",{name:"s",hash:{},data:data}))+"\n\t</a>\n"},5:function(depth0,helpers,partials,data){var stack1,helper;return'\t<a href="'+this.escapeExpression((helper=(helper=helpers.appHostname||(depth0!=null?depth0.appHostname:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"appHostname",hash:{},data:data}):helper))+'/mgmt" class="role sep">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Management",{name:"s",hash:{},data:data}))+"\n\t</a>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showReporting:depth0,{name:"if",hash:{},fn:this.program(6,data,0),inverse:this.noop,data:data}))!=null?stack1:"")},6:function(depth0,helpers,partials,data){var helper;return'\t<a href="'+this.escapeExpression((helper=(helper=helpers.appHostname||(depth0!=null?depth0.appHostname:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"appHostname",hash:{},data:data}):helper))+'/reporting" class="role">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reporting",{name:"s",hash:{},data:data}))+"\n\t</a>\n"},8:function(depth0,helpers,partials,data){var helper;return'\t\t<a href="'+this.escapeExpression((helper=(helper=helpers.appHostname||(depth0!=null?depth0.appHostname:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"appHostname",hash:{},data:data}):helper))+'/admin" class="role sep">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Org Admin",{name:"s",hash:{},data:data}))+'\n\t\t</a>\n\t\t<a href="'+this.escapeExpression((helper=(helper=helpers.appHostname||(depth0!=null?depth0.appHostname:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"appHostname",hash:{},data:data}):helper))+'/config" class="role">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Configuration",{name:"s",hash:{},data:data}))+"\n\t\t</a>\n"},10:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isHr:depth0,{name:"if",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:""},11:function(depth0,helpers,partials,data){var helper;return'\t\t<a href="'+this.escapeExpression((helper=(helper=helpers.appHostname||(depth0!=null?depth0.appHostname:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"appHostname",hash:{},data:data}):helper))+'/admin" class="role sep">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Org Admin",{name:"s",hash:{},data:data}))+"\n\t\t</a>\n\t"},13:function(depth0,helpers,partials,data){var helper;return'\t<a href="'+this.escapeExpression((helper=(helper=helpers.ascHostname||(depth0!=null?depth0.ascHostname:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"ascHostname",hash:{},data:data}):helper))+'" class="role sep">\n\t\tASC\n\t</a>\n'},15:function(depth0,helpers,partials,data){var stack1,helper;return'\t<a href="'+this.escapeExpression((helper=(helper=helpers.sysAdminHostname||(depth0!=null?depth0.sysAdminHostname:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"sysAdminHostname",hash:{},data:data}):helper))+'" class="role '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.isAscReader:depth0,{name:"unless",hash:{},fn:this.program(16,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\tSysAdmin\n\t</a>\n'},16:function(depth0,helpers,partials,data){return"sep"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="role-switcher-popup">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canAccessHr:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canAccessLeave:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifany||depth0&&depth0.ifany||helpers.helperMissing).call(depth0,depth0!=null?depth0.isManager:depth0,depth0!=null?depth0.isHr:depth0,{name:"ifany",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isAdmin:depth0,{name:"if",hash:{},fn:this.program(8,data,0),inverse:this.program(10,data,0),data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isAscReader:depth0,{name:"if",hash:{},fn:this.program(13,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSysAdmin:depth0,{name:"if",hash:{},fn:this.program(15,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"</div>"},useData:true});Handlebars.registerPartial("templates/popups/RoleSwitcherPopup",t);return t});define("views/popups/RoleSwitcherPopup",["jquery","underscore","appogee","hbs!templates/popups/RoleSwitcherPopup"],function($,_,appogee,tmpl){"use strict";var KEY_ESC=27;var Dialog=function($el){var _this5=this;this.$el=$el;this.isHovering=false;this.lastShow=null;this.$popup=$("<div />").addClass("popup");this.$popup.appendTo("body");this.$popup.hover(function(){_this5.isHovering=true},function(){_this5.isHovering=false});$("body").click(function(){_this5.hide()});$(window).keydown(function(e){if(e.keyCode==KEY_ESC){_this5.hide()}});this.currentUser=appogee.getCurrentUser()};Dialog.prototype.render=function(){var showReporting=true;if(this.currentUser.canAccessHr()&&!this.currentUser.canAccessLeave()&&this.currentUser.isManager()&&!this.currentUser.isHrManager()){showReporting=false}var appHostname=appogee.getHostname("app");var ascHostname=appogee.getHostname("asc");var sysAdminHostname=appogee.getHostname("sysadmin");var data={user:this.currentUser,isManager:this.currentUser.isManager(),isHr:this.currentUser.isHrManager(),isAdmin:this.currentUser.isAdmin(),isSysAdmin:this.currentUser.isSysAdmin(),isAscReader:this.currentUser.isAscReader(),canAccessHr:this.currentUser.canAccessHr(),canAccessLeave:this.currentUser.canAccessLeave(),showReporting:showReporting,appHostname:appHostname,ascHostname:ascHostname,sysAdminHostname:sysAdminHostname};this.$popup.html(tmpl(data))};Dialog.prototype.show=function(){this.render();this.lastShow=(new Date).getTime();this.$popup.position({my:"left top",at:"left bottom",of:this.$el}).css("visibility","visible")};Dialog.prototype.hide=function(){if(!this.lastShow){return}if(this.isHovering){return false}var now=(new Date).getTime();if(now-this.lastShow<10){return}var me=this;if(this.$popup.css("visibility")=="visible"){this.$popup.fadeOut("fast",function(){me.$popup.show();me.$popup.css("visibility","hidden")})}};return Dialog});define("hbs!templates/popups/AlertsPopup",["hbs/handlebars"],function(Handlebars){var t=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){return'<div class="alerts-popup">\n\t<header>\n\t\t<a href="javascript: void(0);" class="selected">\n\t\t\tActions (4)\n\t\t</a>\n\t\t<a href="javascript: void(0);">\n\t\t\tNotifications (1)\n\t\t</a>\n\t</header>\n\t<nav>\n\t\t<a href="javascript: void(0);" title="Checklist Actions">\n\t\t\t<i class="material-icons md-24">check_circle</i>\n\t\t</a>\n\t\t<a href="javascript: void(0);" title="Document Actions" class="selected">\n\t\t\t<i class="material-icons md-24">import_contacts</i>\n\t\t</a>\n\t\t<a href="javascript: void(0);" title="Record Actions">\n\t\t\t<i class="material-icons md-24">library_books</i>\n\t\t</a>\n\t\t<a href="javascript: void(0);" title="Leave Actions">\n\t\t\t<i class="material-icons md-24">airplanemode_active</i>\n\t\t</a>\n\t</nav>\n\t<ul>\n\t\t<li>\n\t\t\t<a href="javascript: void(0);">Action 1</a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a href="javascript: void(0);">Action 2</a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a href="javascript: void(0);">Action 3</a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a href="javascript: void(0);">Action 4</a>\n\t\t</li>\n\t</ul>\n\t<footer>\n\t\t<button class="btn btn-sm btn-default">\n\t\t\t<i class="glyphicon glyphicon-refresh"></i>\n\t\t\tRefresh\n\t\t</button>\n\t\t<button class="btn btn-sm btn-default">\n\t\t\tView All\n\t\t</button>\n\t\t<button class="btn btn-sm btn-default">\n\t\t\t<i class="material-icons md-24">clear_all</i>\n\t\t\t\n\t\t\t<i class="mdi mdi-notification-clear-all"></i>\n\t\t\t\n\t\t\tDismiss All\n\t\t</button>\n\t</foooter>\n</div>'},useData:true});Handlebars.registerPartial("templates/popups/AlertsPopup",t);return t});define("views/popups/AlertsPopup",["jquery","underscore","appogee","hbs!templates/popups/AlertsPopup"],function($,_,appogee,tmpl){"use strict";var KEY_ESC=27;var Dialog=function($el){var _this6=this;this.$el=$el;this.isHovering=false;this.lastShow=null;this.$popup=$("<div />").addClass("popup");this.$popup.appendTo("body");this.$popup.hover(function(){_this6.isHovering=true},function(){_this6.isHovering=false});$("body").click(function(){_this6.hide()});$(window).keydown(function(e){if(e.keyCode==KEY_ESC){_this6.hide()}})};Dialog.prototype.render=function(){var me=this;var data={};this.$popup.html(tmpl(data))};Dialog.prototype.show=function(){this.render();this.lastShow=(new Date).getTime();this.$popup.position({my:"right top",at:"right bottom",of:this.$el}).css("visibility","visible")};Dialog.prototype.hide=function(){if(!this.lastShow){return}if(this.isHovering){return false}var now=(new Date).getTime();if(now-this.lastShow<10){return}var me=this;if(this.$popup.css("visibility")=="visible"){this.$popup.fadeOut("fast",function(){me.$popup.show();me.$popup.css("visibility","hidden")})}};return Dialog});define("hbs!templates/popups/AccountPopup",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var helper;return'\t<div class="customer" data-id="'+this.escapeExpression((helper=(helper=helpers.ns||(depth0!=null?depth0.ns:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"ns",hash:{},data:data}):helper))+'">\n\t\t<div class="pull-right">\n\t\t\t<div class="customer-logo"><img src="'+this.escapeExpression((helper=(helper=helpers.companyLogo||(depth0!=null?depth0.companyLogo:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"companyLogo",hash:{},data:data}):helper))+'" height="35px"/></div>\n\t\t</div>\n\t\t<div class="pull-left">\n\t\t\t<div class="customer-name">'+this.escapeExpression((helper=(helper=helpers.companyName||(depth0!=null?depth0.companyName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"companyName",hash:{},data:data}):helper))+'</div>\n\t\t\t<div class="customer-details">'+this.escapeExpression((helper=(helper=helpers.jobTitle||(depth0!=null?depth0.jobTitle:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"jobTitle",hash:{},data:data}):helper))+'</div>\n\t\t</div>\n\t\t<div class="clearfix"></div>\n\t</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="account-popup">\n\t<div class="content">\n\t\t<div class="image">\n\t\t\t<img src="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.currentUser:depth0)!=null?stack1.imageUrl:stack1,depth0))+'" />\n\t\t</div>\n\t\t<div class="account-details">\n\t\t\t<div class="account-name">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.currentUser:depth0)!=null?stack1.firstName:stack1,depth0))+" "+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.currentUser:depth0)!=null?stack1.lastName:stack1,depth0))+'</div>\n\t\t\t<div class="account-email">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.currentUser:depth0)!=null?stack1.email:stack1,depth0))+'</div>\n\t\t</div>\n\t\t<div class="clearfix"></div>\n\t</div>\n\t\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.accounts:depth0,{name:"each",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\n\t<footer class="popup-footer">\n\t\t<a href="/account/preferences" class="btn btn-default btn-sm">\n\t\t\t<i class="glyphicon glyphicon-cog"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Preferences",{name:"s",hash:{},data:data}))+'\n\t\t</a>\n\t\t<a href="/account/password" class="btn btn-default btn-sm">\n\t\t\t<i class="glyphicon glyphicon-lock"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Password",{name:"s",hash:{},data:data}))+'\n\t\t</a>\n\t\t<a href="/logout" class="btn btn-default btn-sm">\n\t\t\t<i class="glyphicon glyphicon-log-out"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Logout",{name:"s",hash:{},data:data}))+"\n\t\t</a>\n\t</footer>\n</div>"},useData:true});Handlebars.registerPartial("templates/popups/AccountPopup",t);return t});define("views/popups/AccountPopup",["jquery","underscore","appogee","hbs!templates/popups/AccountPopup"],function($,_,appogee,tmpl){"use strict";var KEY_ESC=27;var Dialog=function($el){var _this7=this;this.$el=$el;this.isHovering=false;this.loadingAccounts=false;this.lastShow=null;this.$popup=$("<div />").addClass("popup");this.$popup.appendTo("body");this.$popup.hover(function(){_this7.isHovering=true},function(){_this7.isHovering=false});this.accounts=null;this.currentUser=appogee.getCurrentUser();$("body").click(function(){_this7.hide()});$(window).keydown(function(e){if(e.keyCode==KEY_ESC){_this7.hide()}})};Dialog.prototype.render=function(){var _this8=this;if(this.accounts===null){this.loadAccounts()}var data={currentUser:this.currentUser,accounts:this.accounts,loadingAccounts:this.loadingAccounts};this.$popup.html(tmpl(data));$(".customer").click(function(e){var ns=$(e.currentTarget).data("id");_this8.switchAccount(ns)})};Dialog.prototype.loadAccounts=function(){var _this9=this;if(this.currentUser&&this.currentUser.nsc>1&&!this.loadingAccounts){this.loadingAccounts=true;this.render();var url="/user/accounts";appogee.xhr.get(url,function(accounts){_this9.accounts=accounts;_this9.loadingAccounts=false;_this9.render()})}};Dialog.prototype.switchAccount=function(namespace){var url="/user/switch-account";var body={ns:namespace};appogee.xhr.post(url,body,function(){window.location.reload()})};Dialog.prototype.show=function(){this.render();this.lastShow=(new Date).getTime();this.$popup.position({my:"right top",at:"right bottom",of:this.$el}).css("visibility","visible")};Dialog.prototype.hide=function(){if(!this.lastShow){return}if(this.isHovering){return false}var now=(new Date).getTime();if(now-this.lastShow<10){return}var me=this;if(this.$popup.css("visibility")=="visible"){this.$popup.fadeOut("fast",function(){me.$popup.show();me.$popup.css("visibility","hidden")})}};return Dialog});define("hbs!templates/popups/SupportPopup",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal","templates/helpers/ifany"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"#googtrans(en|fr)"},3:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.user:depth0)!=null?stack1.locale:stack1,"es_ES",{name:"ifequal",hash:{},fn:this.program(4,data,0),inverse:this.noop,data:data}))!=null?stack1:""},4:function(depth0,helpers,partials,data){return"#googtrans(en|es)"},6:function(depth0,helpers,partials,data){return'\t<a href="/admin/overview" class="static">\n\t\t<i class="fa fa-book"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{app_name} Overview",{name:"s",hash:{app_name:depth0!=null?depth0.appName:depth0},data:data}))+"\n\t</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="support-popup">\n\t<header>\n\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Help",{name:"s",hash:{},data:data}))+'</h4>\n\t\t<div class="input-group">\n\t\t\t<input type="text" class="form-control input-sm" placeholder="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"What do you need help with?",{name:"s",hash:{},data:data}))+'" />\n\t\t\t<span class="input-group-btn">\n\t\t\t\t<button type="button" class="btn btn-sm">\n\t\t\t\t\t<i class="glyphicon glyphicon-search"></i>\n\t\t\t\t</button>\n\t\t\t</span>\n\t\t</div>\n\t</header>\n\t<div class="search_results"></div>\n\t<a href="https://help.appogeehr.com/support/home'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.user:depth0)!=null?stack1.locale:stack1,"fr_FR",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.program(3,data,0),data:data}))!=null?stack1:"")+'" target="_FRESHDESK" class="static">\n\t\t<i class="fa fa-ticket"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Knowledge Base",{name:"s",hash:{},data:data}))+'\n\t</a>\n\t<a href="javascript: void(0);" class="static question">\n\t\t<i class="fa fa-question"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Submit Support Ticket",{name:"s",hash:{},data:data
}))+"\n\t</a>\n\n"+((stack1=(helpers.ifany||depth0&&depth0.ifany||helpers.helperMissing).call(depth0,depth0!=null?depth0.isHr:depth0,depth0!=null?depth0.isAdmin:depth0,{name:"ifany",hash:{},fn:this.program(6,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"</div>"},useData:true});Handlebars.registerPartial("templates/popups/SupportPopup",t);return t});define("hbs!templates/popups/SupportPopupFreshdeskResults",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<div class="loading">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</div>\n"},3:function(depth0,helpers,partials,data){var stack1;return'\t<div class="search-results">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.results:depth0,{name:"each",hash:{},fn:this.program(4,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</div>\n"},4:function(depth0,helpers,partials,data){var helper;return'\t\t<a href="https://help.appogeehr.com'+this.escapeExpression((helper=(helper=helpers.url||(depth0!=null?depth0.url:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"url",hash:{},data:data}):helper))+'" target="_FRESHDESK" class="static">'+this.escapeExpression((helper=(helper=helpers.title||(depth0!=null?depth0.title:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"title",hash:{},data:data}):helper))+"</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.loading:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.program(3,data,0),data:data}))!=null?stack1:""},useData:true});Handlebars.registerPartial("templates/popups/SupportPopupFreshdeskResults",t);return t});define("views/popups/SupportPopup",["jquery","underscore","appogee","hbs!templates/popups/SupportPopup","hbs!templates/popups/SupportPopupFreshdeskResults"],function($,_,appogee,tmpl,tmplResults){"use strict";var KEY_ESC=27;var KEY_RETURN=13;var Dialog=function($el){var _this10=this;this.$el=$el;this.isHovering=false;this.lastShow=null;this.$popup=$("<div />").addClass("popup");this.$popup.appendTo("body");this.$popup.hover(function(){_this10.isHovering=true},function(){_this10.isHovering=false});$("body").click(function(){_this10.hide()});$(window).keydown(function(e){if(e.keyCode==KEY_ESC){_this10.hide()}else if(e.keyCode==KEY_RETURN){_this10.search()}});this.currentUser=appogee.getCurrentUser()};Dialog.prototype.render=function(){var _this11=this;var data={user:this.currentUser,isManager:this.currentUser.isManager(),isHr:this.currentUser.isHrManager(),isAdmin:this.currentUser.isAdmin(),isSysAdmin:this.currentUser.isSysAdmin(),canAccessHr:this.currentUser.canAccessHr(),canAccessLeave:this.currentUser.canAccessLeave(),appName:appogee.getAppName(),isCustomerP1:appogee.isCustomerP1()};this.$popup.html(tmpl(data));this.$popup.find(".question").click(function(){if(window.hasOwnProperty("FreshWidget")){var FreshWidget=window.FreshWidget;FreshWidget.show();_this11._hide()}});this.$popup.find("button").click(function(){_this11.search()})};Dialog.prototype.search=function(){this.searchFreshdesk()};Dialog.prototype.searchFreshdesk=function(){var _this12=this;this.freshdeskLoading=true;this.freshdeskResults=null;this.renderFreshdeskResults();var query=this.$popup.find('input[type="text"]').val();if(!query){this.$popup.find('input[type="text"]').addClass("invalid");return}this.freshdeskLoading=true;this.freshdeskResults=null;this.renderFreshdeskResults();this.getFromFreshdesk(query,function(response){_this12.freshdeskLoading=false;_this12.freshdeskResults=response.item;_this12.renderFreshdeskResults()})};Dialog.prototype.getFromFreshdesk=function(query,callback){var url="https://help.appogeehr.com/support/search/solutions.json?max_matches=5&term={0}&need_count=true".format(query);var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(xhr.readyState==XMLHttpRequest.DONE){callback(JSON.parse(xhr.responseText))}};xhr.open("GET",url,true);xhr.send(null)};Dialog.prototype.renderFreshdeskResults=function(){for(var key in this.freshdeskResults){if(!this.freshdeskResults.hasOwnProperty(key))continue;var result=this.freshdeskResults[key];var title="<p>"+result.title+"</p>";var formattedTitle=$(title).text();this.freshdeskResults[key].title=formattedTitle}var data={loading:this.freshdeskLoading,results:this.freshdeskResults};this.$popup.find(".search_results").html(tmplResults(data))};Dialog.prototype.searchZendesk=function(){var _this13=this;this.zendeskLoading=true;this.zendeskResults=null;this.renderZendeskResults();var query=this.$popup.find('input[type="text"]').val();if(!query){this.$popup.find('input[type="text"]').addClass("invalid");return}this.zendeskLoading=true;this.zendeskResults=null;this.renderZendeskResults();this.getFromZendesk(query,function(response){_this13.zendeskLoading=false;_this13.zendeskResults=response.results;_this13.renderZendeskResults()})};Dialog.prototype.getFromZendesk=function(query,callback){var url="https://appogeehr.zendesk.com/api/v2/help_center/search.json?locale=en-GB&per_page=3&query="+query;var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(xhr.readyState==XMLHttpRequest.DONE){callback(JSON.parse(xhr.responseText))}};xhr.open("GET",url,true);xhr.send(null)};Dialog.prototype.renderZendeskResults=function(){var data={loading:this.zendeskLoading,results:this.zendeskResults};this.$popup.find(".search_results").html(tmplResults(data))};Dialog.prototype.show=function(){this.render();this.lastShow=(new Date).getTime();this.$popup.position({my:"right top",at:"right bottom",of:this.$el}).css("visibility","visible")};Dialog.prototype.hide=function(){if(!this.lastShow){return}if(this.isHovering){return false}var now=(new Date).getTime();if(now-this.lastShow<10){return}this._hide()};Dialog.prototype._hide=function(){var _this14=this;if(this.$popup.css("visibility")=="visible"){this.$popup.fadeOut("fast",function(){_this14.$popup.show();_this14.$popup.css("visibility","hidden")})}};return Dialog});define("hbs!templates/popups/SubMenu",["hbs/handlebars","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t\t<div class="pull-right">\n\t\t\t<a href="/my/leave/dash#!/request/new" class="btn btn-primary btn-sm btn-create">\n\t\t\t\t<i class="glyphicon glyphicon-plus"></i>\n\t\t\t</a>\n\t\t</div>\n'},3:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.groups:depth0,{name:"each",hash:{},fn:this.program(4,data,0),inverse:this.noop,data:data}))!=null?stack1:""},4:function(depth0,helpers,partials,data){var stack1,helper;return"\t\t\t<h3>"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</h3>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.items:depth0,{name:"each",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")},5:function(depth0,helpers,partials,data){var helper;return'\t\t\t\t<a href="'+this.escapeExpression((helper=(helper=helpers.url||(depth0!=null?depth0.url:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"url",hash:{},data:data}):helper))+'" class="item">'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</a>\n"},7:function(depth0,helpers,partials,data){var stack1;return"\t\t<h3>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.item:depth0)!=null?stack1.name:stack1,depth0))+"</h3>\n"+((stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.item:depth0)!=null?stack1.items:stack1,{name:"each",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")},8:function(depth0,helpers,partials,data){var helper;return'\t\t\t<a href="'+this.escapeExpression((helper=(helper=helpers.url||(depth0!=null?depth0.url:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"url",hash:{},data:data}):helper))+'" class="item">'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div>\n\t<div>\n\t\t<div class="pull-left">\n\t\t\t<button class="btn btn-link btn-close">\n\t\t\t\t<i class="glyphicon glyphicon-chevron-left"></i>\n\t\t\t</button>\n\t\t</div>\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.item:depth0)!=null?stack1.alias:stack1,"leave X",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<div class="clearfix"></div>\n\t</div>\n\n'+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.groups:depth0)!=null?stack1.length:stack1,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.program(7,data,0),data:data}))!=null?stack1:"")+"</div>"},useData:true});Handlebars.registerPartial("templates/popups/SubMenu",t);return t});define("jquery.appogee.tabs",["jquery"],function($){$.fn.appogeeTabs=function(opts){return this.each(function(){$(this).find(".tab-header a,.subtab-header a").click(function(){var newTab=$(this);var oldTab=newTab.parent().children("a.selected");if(opts&&opts.hasOwnProperty("beforeChange")&&typeof opts.beforeChange==="function"){var allowChange=opts.beforeChange(oldTab,newTab);if(!allowChange){return false}}var tabRef=newTab.attr("href");if(tabRef.length>4&&tabRef.substring(0,4)=="http"){return true}else if(tabRef.length>0&&tabRef.substring(0,1)=="#"){tabRef=tabRef.substring(1,tabRef.length)}var p=newTab.parent().parent();var oldPanel=p.children("div.tab-panel.selected");var newPanel=p.children('div[data-tab="'+tabRef+'"]');if(!oldTab.is(newTab)){oldTab.removeClass("selected");newTab.addClass("selected");oldPanel.fadeOut("fast",function(){newPanel.fadeIn("fast").addClass("selected")}).removeClass("selected")}if(opts&&opts.hasOwnProperty("afterChange")&&typeof opts.afterChange==="function"){opts.afterChange(oldTab,newTab,oldPanel,newPanel)}return false})})};$(function(){$(".appogee-tabs").appogeeTabs()})});define("views/popups/SubMenu",["jquery","underscore","appogee","hbs!templates/popups/SubMenu","jquery.appogee.tabs"],function($,_,appogee,tmpl){"use strict";var KEY_ESC=27;var Menu=function($container,menu){var _this15=this;this.$container=$container;this.menu=menu;this.lastShow=null;this.$container.hover(function(){},function(e){var left=_this15.$container.position().left+_this15.$container.width();var top=_this15.$container.position().top;if(e.clientX>=left||e.clientY<=top){_this15.hide()}});$("body").click(function(){_this15.hide()});window.addEventListener("blur",function(){_this15.hide(true)},false);$(window).keydown(function(e){if(e.keyCode==KEY_ESC){_this15.hide()}});this.currentUser=appogee.getCurrentUser()};Menu.prototype.render=function(item){var _this16=this;var groups=[];for(var i=0;i<item.items.length;i++){var groupName=item.items[i].group;if(groupName){var group=_.findWhere(groups,{name:groupName});if(!group){group={name:groupName,items:[]};groups.push(group)}group.items.push(item.items[i])}else{groups=[];break}}var data={groups:groups,item:item};this.$container.html(tmpl(data));this.$container.find(".btn-close").click(function(){_this16.hide(true)})};Menu.prototype.toggle=function(alias){var item=_.findWhere(this.menu.items,{alias:alias});if(!item||!item.items||item.items.length===0){this.hide(true,true)}else{this.render(item);this.show()}};Menu.prototype.show=function(){this.lastShow=(new Date).getTime();this.$container.show()};Menu.prototype.hide=function(force,hard){if(!force){if(!this.lastShow){return}var now=(new Date).getTime();if(now-this.lastShow<10){return}}if(hard){this.$container.hide()}else{this.$container.fadeOut()}};return Menu});define("hbs!templates/PicturePicker",["hbs/handlebars","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var helper;return"background-image: url("+this.escapeExpression((helper=(helper=helpers.imageUrl||(depth0!=null?depth0.imageUrl:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"imageUrl",hash:{},data:data}):helper))+");"},3:function(depth0,helpers,partials,data){return"border-radius: 2px;"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper;return'<div class="pp-look pp-box '+this.escapeExpression((helper=(helper=helpers.shape||(depth0!=null?depth0.shape:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"shape",hash:{},data:data}):helper))+'" style="width: '+this.escapeExpression((helper=(helper=helpers.width||(depth0!=null?depth0.width:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"width",hash:{},data:data}):helper))+"px; height: "+this.escapeExpression((helper=(helper=helpers.height||(depth0!=null?depth0.height:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"height",hash:{},data:data}):helper))+"px; "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.imageUrl:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" "+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.shape:depth0,"rectangle",{name:"ifequal",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t<div class="pp-look pp-overlay '+this.escapeExpression((helper=(helper=helpers.shape||(depth0!=null?depth0.shape:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"shape",hash:{},data:data}):helper))+'" title="Click here to upload a new image" style="width: '+this.escapeExpression((helper=(helper=helpers.width||(depth0!=null?depth0.width:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"width",hash:{},data:data}):helper))+"px; height: "+this.escapeExpression((helper=(helper=helpers.height||(depth0!=null?depth0.height:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"height",hash:{},data:data}):helper))+'px;">\n\t\t<div class="pp-look pp-icon '+this.escapeExpression((helper=(helper=helpers.shape||(depth0!=null?depth0.shape:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"shape",hash:{},data:data}):helper))+'" style="width: '+this.escapeExpression((helper=(helper=helpers.width||(depth0!=null?depth0.width:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"width",hash:{},data:data}):helper))+"px; height: "+this.escapeExpression((helper=(helper=helpers.height||(depth0!=null?depth0.height:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"height",hash:{},data:data}):helper))+'px;"></div>\n\t</div>\n</div>'},useData:true});Handlebars.registerPartial("templates/PicturePicker",t);return t});define("hbs!templates/PicturePickerDialog",["hbs/handlebars"],function(Handlebars){var t=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){return'<h4>Upload Profile Image</h4>\n\n<div class="form-group">\n\t<label>Select a file to upload from below:</label>\n\t<div class="input-group">\n\t\t<span class="btn btn-default btn-file input-group-addon">\n\t\t    Browse&hellip; <input type="file" name="file" >\n\t\t</span>\n\t\t<input type="text" class="form-control input-sm" readonly="readonly" />\n\t</div>\n</div>'},useData:true});Handlebars.registerPartial("templates/PicturePickerDialog",t);return t});define("views/PicturePicker",["jquery","appogee","hbs!templates/PicturePicker","hbs!templates/PicturePickerDialog"],function($,appogee,tmpl,tmplDlg){"use strict";var S,R={noFile:"Please select an image to upload",invalidFile:"Invalid File - please select an image file."};var PicturePicker=function($container,imageUrl,employeeKey,options){var _this17=this;S=appogee.getStrings("PicturePicker",R);this.$container=$container;this.employeeKey=employeeKey;this.options=$.extend({},options||{});this._setImageUrl(imageUrl);this.$divDiv=$("<div />").html(tmplDlg()).addClass("dialog");this.dlg=new appogee.Dialog(this.$divDiv,{title:"Upload Employee Image",okCallback:function(){_this17.uploadEmployeeImage()}});this.initEmployeeImage()};PicturePicker.prototype.setEmployee=function(employee){this.employeeKey=employee.key;this._setImageUrl(employee.imageUrl);this.render()};PicturePicker.prototype._setImageUrl=function(imageUrl){this.imageUrl=null;if(imageUrl){if(this.options.width){this.imageUrl="{0}=w{1}".format(imageUrl,this.options.width)}else if(this.options.height){this.imageUrl="{0}=h{1}".format(imageUrl,this.options.height)}}};PicturePicker.prototype.render=function(){var _this18=this;var data={imageUrl:this.imageUrl,shape:this.options.shape||null,width:this.options.width||null,height:this.options.height||null};this.$container.html(tmpl(data));this.$container.click(function(){_this18.$divDiv.find('.btn-file :file,input[type="text"]').val("");_this18.dlg.show()})};PicturePicker.prototype.initEmployeeImage=function(){$(document).on("change",".btn-file :file",function(){var numFiles=$(this).get(0).files?$(this).get(0).files.length:1;var label=$(this).val().replace(/\\/g,"/").replace(/.*\//,"");$(this).trigger("fileselect",[numFiles,label])});$(function(){$(".btn-file :file").on("fileselect",function(event,numFiles,label){var input=$(this).parents(".input-group").find(":text");var log=numFiles>1?numFiles+" files selected":label;if(input.length){input.val(log)}})})};PicturePicker.prototype.uploadEmployeeImage=function(){var file=null;var fileInput=this.$divDiv.find('input[type="file"]').get()[0];if(fileInput.files&&fileInput.files.length==1){file=fileInput.files[0]}else{appogee.valert(S.noFile);return}if(!appogee.validation.validateImageFilename(file.name)){appogee.valert(S.invalidFile);return}var fd=new FormData;fd.append("file",file);fd.append("_csrf_token",appogee.getCsrfToken());var xhr=new XMLHttpRequest;var url="/api/{0}/employees/{1}/image".format(appogee.API_VERSION,this.employeeKey);var me=this;xhr.onload=function(){var response=JSON.parse(this.responseText);me.imageUrl=response.imageUrl;if(me.options.width){me.imageUrl+="=w"+me.options.width}else if(this.options.height){me.imageUrl+="=h"+me.options.height}me.render();me.dlg.hide()};xhr.open("POST",url);xhr.send(fd)};return PicturePicker});define("hbs!templates/popups/EmployeesPopup",["hbs/handlebars","hbs!templates/_avatar","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<div class="employees-popup-search-header">\n\t\t<div class="pull-left">\n\t\t\tSearch Results\n\t\t</div>\n\t\t<div class="pull-right">\n\t\t\t<button class="clear-search">\n\t\t\t\t<i class="glyphicon glyphicon-remove"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="clearfix"></div>\n\t</div>\n'},3:function(depth0,helpers,partials,data){var stack1,helper;return'\t\t<a href="javascript: void(0);" data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">\n'+((stack1=this.invokePartial(partials["templates/_avatar"],depth0,{name:"templates/_avatar",hash:{employee:depth0},data:data,indent:"\t\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+"\t\t\t"+this.escapeExpression((helper=(helper=helpers.firstName||(depth0!=null?depth0.firstName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"firstName",hash:{},data:data}):helper))+" "+this.escapeExpression((helper=(helper=helpers.lastName||(depth0!=null?depth0.lastName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"lastName",hash:{},data:data}):helper))+"\n\t\t</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="employees-popup">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.mode:depth0,"search",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers.each.call(depth0,depth0!=null?depth0.employees:depth0,{name:"each",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"</div>"},usePartial:true,useData:true});Handlebars.registerPartial("templates/popups/EmployeesPopup",t);return t});define("views/popups/EmployeesPopup",["jquery","underscore","appogee","hbs!templates/popups/EmployeesPopup"],function($,_,appogee,tmpl){"use strict";var KEY_ESC=27;var Dialog=function($el,employees){var _this19=this;this.$el=$el;this.employees=employees;this.isHovering=false;this.lastShow=null;this.$popup=$("<div />").addClass("popup");this.$popup.appendTo("body");this.$popup.hover(function(){_this19.isHovering=true},function(){_this19.isHovering=false});this.currentUser=appogee.getCurrentUser();this.changeHandlers=[];this.clearSearchHandlers=[];$("body").click(function(){_this19.hide()});$(window).keydown(function(e){if(e.keyCode==KEY_ESC){_this19.hide()}})};Dialog.prototype.onChange=function(handler){this.changeHandlers.push(handler)};Dialog.prototype.onClearSearch=function(handler){this.clearSearchHandlers.push(handler)};Dialog.prototype.setEmployees=function(mode,employees){this.mode=mode;this.employees=employees;this.render()};Dialog.prototype.render=function(){var _this20=this;var data={currentUser:this.currentUser,mode:this.mode,employees:this.employees};this.$popup.html(tmpl(data));this.$popup.find("a").click(function(e){var key=$(e.currentTarget).data("key");var employee=_.findWhere(_this20.employees,{key:key});_this20.hide(true);_this20.changeHandlers.forEach(function(h){return h(employee)})});this.$popup.find(".clear-search").click(function(){_this20.clearSearchHandlers.forEach(function(h){return h()})})};Dialog.prototype.show=function($el){if($el){this.$el=$el}this.render();this.lastShow=(new Date).getTime();this.$popup.position({my:"right top",at:"right bottom",of:this.$el}).css("visibility","visible")};Dialog.prototype.hide=function(force){var _this21=this;if(!this.lastShow){return}if(!force&&this.isHovering){return false}var now=(new Date).getTime();if(now-this.lastShow<10){return}if(this.$popup.css("visibility")=="visible"){this.$popup.fadeOut("fast",function(){_this21.$popup.show();_this21.$popup.css("visibility","hidden")})}};return Dialog});define("hbs!templates/EmployeeSelector",["hbs/handlebars","templates/helpers/if_gt","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<div class="adu-team-container">\n\t\t<div class="team-container pull-left">\n\t\t\t<select id="ddlAdu" class="form-control"></select>\n\t\t</div>\n\t\t<div class="team-container pull-right">\n\t\t\t<select id="ddlTeam" class="form-control"></select>\n\t\t</div>\n\t\t<div class="clearfix"></div>\n\t</div>\n'},3:function(depth0,helpers,partials,data){return'\t<div class="team-container">\n\t\t<select id="ddlTeam" class="form-control"></select>\n\t</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.adus:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:1},fn:this.program(1,data,0),inverse:this.program(3,data,0),data:data}))!=null?stack1:"")+'<div class="search-container">\n\t<div class="form-group has-feedback">\n\t\t<span class="glyphicon glyphicon-search form-control-feedback"></span>\n\t    <input type="text" class="form-control search txtSearch" placeholder="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Employee or Team",{name:"s",hash:{},data:data}))+' ..." />\n\t</div>\n</div>'},useData:true});Handlebars.registerPartial("templates/EmployeeSelector",t);return t});define("views/EmployeeSelector",["jquery","underscore","appogee","views/popups/EmployeesPopup","hbs!templates/EmployeeSelector"],function($,_,appogee,EmployeesPopup,tmpl){"use strict";var MODE_TEAM="team";var MODE_SEARCH="search";var View=function($container,adus,teams,employees){this.$container=$container;this.adus=adus;this.teams=teams;this.employees=employees;this.employeeChangeHandlers=[];this.employeesPopup=null;var aduKey=appogee.cookies.getConfig("adu");var teamKey=appogee.cookies.getConfig("team");var employeeKey=appogee.cookies.getConfig("employee");this.adu=_.findWhere(this.adus,{key:aduKey});this.team=_.findWhere(this.teams,{key:teamKey});this.employee=_.findWhere(this.employees,{key:employeeKey});this.mode=MODE_TEAM;this.lastSearchTime=null};View.prototype.onEmployeeChange=function(handler){if(handler){this.employeeChangeHandlers.push(handler)}};View.prototype.render=function(){var _this22=this;var data={adus:this.adus,teams:this.teams,employees:this.employees};this.$container.html(tmpl(data));var $ddlAdu=this.$container.find("#ddlAdu");appogee.ui.populateDropdown($ddlAdu,this.adus,{defaultValue:null,keyName:"key",valueName:"path",default:this.adu.key});$ddlAdu.change(function(e){var aduKey=$(e.currentTarget).val();var url="/teams?aduKey={0}&withMembers=true".format(aduKey);_this22.$container.find("#ddlTeam").html("<option>Loading ...</option>");appogee.api.get(url,function(response){_this22.teams=response.items;_this22.adu=_.findWhere(_this22.adus,{key:aduKey});_this22.team=_this22.teams[0];_this22.render();_this22.$container.find("#ddlTeam").change()})});var $ddlTeam=this.$container.find("#ddlTeam");appogee.ui.populateDropdown($ddlTeam,this.teams,{defaultValue:null,keyName:"key",valueName:"name",default:this.team.key});$ddlTeam.change(function(e){_this22.$container.find(".txtSearch").val("");var teamKey=$(e.currentTarget).val();var url="/employees?teamKey={0}&projection=ribbon".format(teamKey);appogee.api.get(url,function(response){_this22.employees=response.items;_this22.showEmployeesPopup(MODE_TEAM)})});this.$container.find(".txtSearch").on("click",function(){_this22.showEmployeesPopup()});this.$container.find(".txtSearch").on("keyup",function(e){_this22.onKeyUp(e)})};View.prototype.onKeyUp=function(e){var _this23=this;var keycode=null;if(window.event){keycode=event.keyCode}else{keycode=e.keyCode}if(keycode<48||keycode>57&&keycode<65||keycode>90){if(keycode!=appogee.globals.KEY_SPACE&&keycode!=appogee.globals.KEY_BACKSPACE&&keycode!=appogee.globals.KEY_RETURN&&keycode!=appogee.globals.KEY_ESC&&keycode!=appogee.globals.KEY_UP&&keycode!=appogee.globals.KEY_DOWN){return}}if(keycode==appogee.globals.KEY_UP){if(this.active){this.selectedIndex--;this.setSelected()}}else if(keycode==appogee.globals.KEY_DOWN){if(this.active){this.selectedIndex++;this.setSelected()}}else if(keycode==appogee.globals.KEY_RETURN){if(this.active){this.select()}}else if(keycode==appogee.globals.KEY_ESC){this.employeesPopup.hide()}else{var $textbox=this.$container.find(".txtSearch");$textbox.addClass("loading");this.cancelled=false;var t=String((new Date).getTime());this.lastSearchTime=t;setTimeout(function(){_this23.search(t)},400)}};View.prototype.search=function(queryTime){var _this24=this;if(queryTime!=this.lastSearchTime){return}var $textbox=this.$container.find(".txtSearch");var query=$textbox.val();if(query===""){$textbox.removeClass("loading");return}var params={};$textbox.addClass("loading");var body={t:queryTime,params:JSON.stringify(params)};var url="/employees/lookup/{0}".format(query);var urlParams=$.param(body);url+="?"+urlParams;appogee.api.get(url,function(response){if(response.t==_this24.lastSearchTime){$textbox.removeClass("loading");_this24.searchEmployees=response.employees;_this24.showEmployeesPopup(MODE_SEARCH)}})};View.prototype.showEmployeesPopup=function(mode){var _this25=this;if(!mode){mode=this.mode}this.mode=mode;var $textbox=this.$container.find(".txtSearch");var employees=this.employees;if(mode==MODE_SEARCH){employees=this.searchEmployees}if(this.employeesPopup===null){this.employeesPopup=new EmployeesPopup($textbox,employees);this.employeesPopup.onChange(function(employee){_this25.team=_.findWhere(_this25.teams,{key:employee.team.key});_this25.employee=employee;_this25.render();appogee.cookies.setConfig("employee",employee.key);appogee.cookies.setConfig("team",employee.team.key);if(_this25.employeeChangeHandlers){_this25.employeeChangeHandlers.forEach(function(h){return h(employee)})}});this.employeesPopup.onClearSearch(function(){_this25.mode=MODE_TEAM;_this25.employeesPopup.hide(true)})}this.employeesPopup.setEmployees(this.mode,employees);this.employeesPopup.show($textbox)};return View});define("views/EmployeeRibbon",["jquery","underscore","appogee","views/PicturePicker","views/EmployeeSelector"],function($,_,appogee,PicturePicker,EmployeeSelector){"use strict";var S,R={noJobTitle:"No Job Title",noTeam:"No Team",noHrManager:"No HR Manager"};var View=function($container,adus,teams,employees,selfRibbon){S=appogee.getStrings("EmployeeRibbon",R);this.$container=$container;this.selfRibbon=selfRibbon;if(this.selfRibbon){this.employee=appogee.getCurrentUser()}else{var employeeKey=appogee.cookies.getConfig("employee");this.employee=_.findWhere(employees,{key:employeeKey})}this.employeeSelector=null;this.employeeChangeHandlers=[];var pictureOptions={width:"90",height:"90",shape:"circle"};this.profilePicture=new PicturePicker(this.$container.find("#profileImg"),this.employee.imageUrl,this.employee.key,pictureOptions);this.profilePicture.render();this.initEmployeeSelector(adus,teams,employees)};View.prototype.initEmployeeSelector=function(adus,teams,employees){var _this26=this;if(teams.length===0||teams.length==1&&employees.length<=1){return}var $container=this.$container.find(".employee-selector");this.employeeSelector=new EmployeeSelector($container,adus,teams,employees);this.employeeSelector.render();this.employeeSelector.onEmployeeChange(function(employee){if(!_this26.selfRibbon){_this26.employee=employee;_this26.populate(employee)}_this26.employeeChangeHandlers.forEach(function(h){h(employee)})})};View.prototype.populate=function(){this.profilePicture.setEmployee(this.employee);var fullName="{0} {1}".format(this.employee.firstName,this.employee.lastName);var jobTitle="[{0}]".format(S.noJobTitle);var tel="";var team="[{0}]".format(S.noTeam);var manager="";var hrManager="[{0}]".format(S.noHrManager);if(this.employee.jobTitle){jobTitle=this.employee.jobTitle}if(this.employee.workTel){tel=this.employee.workTel}else if(this.employee.workMobile){tel=this.employee.workMobile}if(this.employee.team){team=this.employee.team.name}if(this.employee.team){team=this.employee.team.name}if(this.employee.manager){manager=this.employee.manager.name}if(this.employee.hrManager){hrManager=this.employee.hrManager.name}this.$container.find(".employee-name").html(fullName);this.$container.find(".employee-role").html(jobTitle);this.$container.find(".employee-email").html(this.employee.email);this.$container.find(".team-name").html(team);this.$container.find(".team-manager").html(manager)
;this.$container.find(".hr-manager").html(hrManager);if(appogee.canCustomerAccessHr()){this.$container.find(".employee-tel").html(tel)}};View.prototype.onEmployeeChange=function(handler){if(handler){this.employeeChangeHandlers.push(handler)}};return View});define("hbs!appogee/templates/ContextHelp",["hbs/handlebars"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1,helper;return"\t"+((stack1=(helper=(helper=helpers.msg||(depth0!=null?depth0.msg:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"msg",hash:{},data:data}):helper))!=null?stack1:"")+"\n"},3:function(depth0,helpers,partials,data){var stack1,helper;return"\t<p>"+this.escapeExpression((helper=(helper=helpers.msg||(depth0!=null?depth0.msg:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"msg",hash:{},data:data}):helper))+"</p>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.link:depth0,{name:"if",hash:{},fn:this.program(4,data,0),inverse:this.noop,data:data}))!=null?stack1:"")},4:function(depth0,helpers,partials,data){var stack1;return'\t<p><a href="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.link:depth0)!=null?stack1.url:stack1,depth0))+'">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.link:depth0)!=null?stack1.text:stack1,depth0))+"</a></p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper;return"<h4>"+this.escapeExpression((helper=(helper=helpers.title||(depth0!=null?depth0.title:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"title",hash:{},data:data}):helper))+"</h4>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.html:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.program(3,data,0),data:data}))!=null?stack1:"")},useData:true});Handlebars.registerPartial("appogee/templates/ContextHelp",t);return t});define("jquery.appogee.contextHelp",["jquery","appogee","hbs!appogee/templates/ContextHelp"],function($,appogee,tmpl){var data=null;var $div=null;var RE_TOIL=new RegExp("{toil_term}","g");var RE_APP_NAME=new RegExp("{app_name}","g");$.fn.contextHelp=function(params){params=params||{};if(!$div){$div=$("#contextHelp");$div=$("<div />").addClass("context-help");$div.appendTo("body");$div.hover(function(){$(this).stop().fadeIn()},function(){$(this).fadeOut("fast")})}if(data===null&&params.pageId){var user=appogee.getCurrentUser();var locale=user.locale;if(params.hasOwnProperty("locale")){locale=params.locale}$.get("/json/chlp/{0}/{1}.json".format(locale,params.pageId),function(response){data=response})}return this.hover(function(){if(!data){return}var helpId=$(this).data("context-help");if(!data.hasOwnProperty(helpId)){console.log('context help not found for "{0}"'.format(helpId));return}var help=data[helpId];if(help.hasOwnProperty("msgs")){help.msg=appogee.util.joinWithPs.apply(this,help.msgs);help.html=true}var html=tmpl(help);html=html.replace(RE_TOIL,appogee.getToilTerm());html=html.replace(RE_APP_NAME,appogee.getAppName());$div.html(html).fadeIn("fast");$div.position({my:"left+10 top",at:"right top",of:this})},function(){$div.fadeOut("fast")}).click(function(){$div.fadeOut("fast")})}});define("app",["module","jquery","jqueryui","backbone","underscore","appogee","ADU","User","enums/CommonStrings","views/popups/RoleSwitcherPopup","views/popups/AlertsPopup","views/popups/AccountPopup","views/popups/SupportPopup","views/popups/SubMenu","views/EmployeeRibbon","jquery.appogee.tooltip","jquery.appogee.contextHelp"],function(m,$,ui,Backbone,_,appogee,ADU,User,CommonStrings,RoleSwitcherPopup,AlertsPopup,AccountPopup,SupportPopup,SubMenu,EmployeeRibbon){"use strict";var FlashMessages={GappsReviewMsg:3,HrUpgradeMsg:5,TermsUpdatedOct17:6,V11Welcome:7};var App=function(pageId,module){this.pageId=pageId;this.module=module;this.routes=null;this._adus=null;this._currentUser=null;this._settings=null;this.bootstrapBreakpoint=appogee.getBootstrapBreakpoint();this.popups={role:null,alerts:null,account:null,support:null};this.submenu=null};App.prototype.initialize=function(args){CommonStrings.init();this.initJquery();this.attachEvents();var module=this.module;module.S=appogee.getStrings();module.pageId=this.pageId;module.adus=this.getAdus();module.currentUser=this.getCurrentUser();module.settings=this.getSettings();module.appName=appogee.getAppName();module.appAlias=appogee.getAppAlias();if(module.initRoutes){module.initRoutes(this)}var routes={"!":function(){}};if(this.routes!==null){$.extend(routes,this.routes)}if(module.routes){for(var routeUrl in module.routes){if(module.routes.hasOwnProperty(routeUrl)){routes[routeUrl]=module.routes[routeUrl].bind(module)}}}if(routes){module.router=new Backbone.Router({routes:routes})}if(module.defaultStrings){module.S.setDefaultStrings(null,module.defaultStrings)}else{}if(module.floatingHeader){this.initFloatingHeader()}args=$.extend({pageId:this.pageId},args||{});var me=this;$(function(){me.setMenuScroll();$(window).on("resize",function(){var bp=appogee.getBootstrapBreakpoint();if(me.bootstrapBreakpoint!=bp){$(".main-menu").toggle(bp=="md"||bp=="lg");if(module.onBootstrapBreakpointChange){module.onBootstrapBreakpointChange(me.bootstrapBreakpoint,bp)}me.bootstrapBreakpoint=bp}});if(module.contextHelp){$("i.context-help").contextHelp({pageId:module.pageId})}if(module.initialize){module.initialize(args)}if(module.currentUser.canShowFlashMsg(FlashMessages.V11Welcome)){me.showV11WelcomeMessage(module)}else if(module.currentUser.canShowFlashMsg(FlashMessages.TermsUpdatedOct17)){me.showRevisedTermsMessage()}var loadUrls=module.loadUrls;if(_.isFunction(module.getLoadUrls)){loadUrls=module.getLoadUrls()}if(!module.skipPageInit){if(!loadUrls){loadUrls={app:[]}}else if(!loadUrls.hasOwnProperty("app")){loadUrls.app=[]}loadUrls.app.splice(0,0,"/pageinit")}if(_.isObject(loadUrls)&&_.keys(loadUrls).length>0){var loadOptions={};if(module.hasOwnProperty("cachePolicies")){loadOptions.cachePolicies=module.cachePolicies}if(module.preventNotifier){loadOptions.preventNotifier=true}var allLoadUrls=[];if(loadUrls.app){allLoadUrls.push.apply(allLoadUrls,loadUrls.app)}if(loadUrls.api){allLoadUrls.push.apply(allLoadUrls,loadUrls.api.map(function(url){return"/api/{0}{1}".format(appogee.API_VERSION,url)}))}appogee.pageLoad(allLoadUrls,function(response){if(!module.skipPageInit){var pageInit=response.shift();if(module.onPageInit){module.onPageInit(pageInit.teams,pageInit.employees)}me.initMenu(pageInit.menu);me.initRibbon(pageInit.adus,pageInit.teams,pageInit.employees);var canShowThingsToTry=appogee.util.getUrlParam("t2t")=="1";if(canShowThingsToTry){me.showThingToTry()}}if(response.length>0){module.onLoad.apply(module,response)}if(module.router){Backbone.history.start()}},loadOptions)}else{$(".load_hide").fadeIn();$(".form-loader,.load_show").hide();if(module.router){Backbone.history.start()}}})};App.prototype.showV11WelcomeMessage=function(module){return;if(this.pageId=="password"){return}var title=null;var msgs=["To read about the latest changes please refer to the following update guides:"];var b=false;if(module.currentUser.canAccessHr()){title="Welcome to Appogee HR Version 11";if(module.currentUser.isManager()){msgs.push('<a href="https://help.appogeehr.com/solution/articles/22000220315-appogee-hr-version-11-team-manager-update-guide" target="_BLANK">Team Manager Update Guide</a>');b=true}if(module.currentUser.isHrManager()){msgs.push('<a href="https://help.appogeehr.com/solution/articles/22000220318-appogee-hr-version-11-hr-manager-update-guide" target="_BLANK">HR Manager Update Guide</a>');b=true}if(module.currentUser.isAdmin()){msgs.push('<a href="https://help.appogeehr.com/solution/articles/22000220322-appogee-hr-version-11-administrator-update-guide" target="_BLANK">Administrator Update Guide</a>');b=true}if(!b){msgs.push('<a href="https://help.appogeehr.com/solution/articles/22000220306-appogee-hr-version-11-employee-update-guide" target="_BLANK">Appogee HR Update Guide</a>')}}else{title="Welcome to Appogee Leave Version 11";if(module.currentUser.isManager()){msgs.push('<a href="https://help.appogeehr.com/solution/articles/22000219277-appogee-leave-version-11-team-manager-update-guide" target="_BLANK">Team Manager Update Guide</a>');b=true}if(module.currentUser.isHrManager()){msgs.push('<a href="https://help.appogeehr.com/solution/articles/22000219328-appogee-leave-version-11-hr-manager-update-guide" target="_BLANK">HR Manager Update Guide</a>');b=true}if(module.currentUser.isAdmin()){msgs.push('<a href="https://help.appogeehr.com/solution/articles/22000219332-appogee-leave-version-11-administrator-update-guide" target="_BLANK">Administrator Update Guide</a>');b=true}if(!b){msgs.push('<a href="https://help.appogeehr.com/solution/articles/22000217995-appogee-leave-version-11-employee-update-guide" target="_BLANK">Appogee Leave Update Guide</a>')}}msgs.push('These guides are available at any time from the <i class="glyphicon glyphicon-question-sign"></i> icon at the top of the screen.');var msg="<p>"+msgs.join("</p><p>")+"</p>";if(module.currentUser.locale=="fr_FR"){msg=msg.replace("22000220322","22000220322#googtrans(en|fr)");msg=msg.replace("22000220318","22000220318#googtrans(en|fr)");msg=msg.replace("22000220315","22000220315#googtrans(en|fr)");msg=msg.replace("22000220306","22000220306#googtrans(en|fr)");msg=msg.replace("22000219277","22000219277#googtrans(en|fr)");msg=msg.replace("22000219328","22000219328#googtrans(en|fr)");msg=msg.replace("22000219332","22000219332#googtrans(en|fr)");msg=msg.replace("22000217995","22000217995#googtrans(en|fr)")}else if(module.currentUser.locale=="es_ES"){msg=msg.replace("22000220322","22000220322#googtrans(en|es)");msg=msg.replace("22000220318","22000220318#googtrans(en|es)");msg=msg.replace("22000220315","22000220315#googtrans(en|es)");msg=msg.replace("22000220306","22000220306#googtrans(en|es)");msg=msg.replace("22000219277","22000219277#googtrans(en|es)");msg=msg.replace("22000219328","22000219328#googtrans(en|es)");msg=msg.replace("22000219332","22000219332#googtrans(en|es)");msg=msg.replace("22000217995","22000217995#googtrans(en|es)")}appogee.alert(title,msg,function(){appogee.dismissFlashMessage(FlashMessages.V11Welcome);return true})};App.prototype.showRevisedTermsMessage=function(){if(this.pageId=="password"){return}var title="We have updated the Terms of Service for Appogee HR and Appogee Leave";var msg=appogee.util.joinWithPs('On 10th October 2017 we updated our <a href="https://www.appogeehr.com/terms-of-service/" target="_BLANK">Terms of Service</a> for Appogee HR and Appogee Leave. ',"The new terms provide minor additional clarifications regarding our data security, processing of your data, notifications of data incidents and identification of sub-processors. This update to our terms of service is one of a number of enhancements being introduced to support the new GDPR regulation coming in to force for EU customers or those with EU employees in May 2018.",'This is your notification, as per clause 7.2 of our agreement, of the modifications to our terms  which come into effect immediately. We hope you find value in the updates weâve made, however if you object to these changes you must notify us by email to <a href="mailto:support@appogeehr.com">support@appogeehr.com</a> no later than 9th November 2017. In this case you will remain subject to the <a href="https://www.appogeehr.com/former/terms-of-service-2-0/" target="_BLANK">former terms of service</a> until the expiry of your current Subscription Period. If you renew your subscription and continue to use our services, this will be subject to the latest terms of service at that time.','Thank you for your use of our services. You can read more about <a href="https://www.appogeehr.com/trust/gdpr/">our commitment to GDPR compliance</a> on the Appogee HR website.');appogee.alert(title,msg,"flashmsg",function(){appogee.dismissFlashMessage(FlashMessages.TermsUpdatedOct17);return true})};App.prototype.getSettings=function(){if(this._settings===null){this._settings=appogee.util.parseJsonFromHtml("jSettings");appogee.setSettings(this._settings)}return this._settings};App.prototype.getCurrentUser=function(){if(this._currentUser===null){var data=appogee.util.parseJsonFromHtml("jUser");this._currentUser=new User(data);appogee.setCurrentUser(this._currentUser)}return this._currentUser};App.prototype.getAdus=function(){if(this._adus===null){var adus=appogee.util.parseJsonFromHtml("jAdus");if(adus){this._adus=adus.map(function(adu){return new ADU(adu)});appogee.setAdus(this._adus)}}return this._adus};App.prototype.initMenu=function(menu){var _this27=this;$("#btnToggleMenu").click(function(){$("#pageContainer").toggleClass("collapsed");var collapsed=$("#pageContainer").hasClass("collapsed");appogee.cookies.setConfig("menu_collapsed",collapsed)});this.submenu=new SubMenu($("#submenu"),menu);$(".main-menu a").hover(function(e){e.stopPropagation();var alias=$(e.currentTarget).data("alias");_this27.submenu.toggle(alias)})};App.prototype.initRibbon=function(adus,teams,employees){var _this28=this;var hasRibbon=$("#employeeRibbon").length>0;if(!hasRibbon){return}var selfRibbon=this.module.selfRibbon===true;this.ribbon=new EmployeeRibbon($("#employeeRibbon"),adus,teams,employees,selfRibbon);this.ribbon.onEmployeeChange(function(employee){if(_this28.module.onEmployeeChange){_this28.module.onEmployeeChange(employee)}else{location.href="/profile?key="+employee.key}})};App.prototype.attachEvents=function(){var _this29=this;var me=this;$(".header .toolbar a.account").click(function(e){e.stopPropagation();me.showAccountPopup($(e.currentTarget))});$(".header .toolbar a.support").click(function(e){e.stopPropagation();me.showSupportPopup($(e.currentTarget))});$(".header .toolbar a.alerts").click(function(e){e.stopPropagation();me.showAlertsPopup($(e.currentTarget))});$("#btnBurger").click(function(){$(".main-menu").fadeToggle();$("#pageContainer").removeClass("collapsed")});$("#btnHideMobileMenu").click(function(){$(".mobile-menu").fadeOut("fast")});$("#btnThingsToTry").click(function(){_this29.showThingToTry()});$(".gapps-review-container .btnDismiss").click(function(){appogee.dismissFlashMessage(FlashMessages.GappsReviewMsg);$(".gapps-review-container").slideUp()});$(".hr_upgrade-banner-container .btnDismiss").click(function(){appogee.dismissFlashMessage(FlashMessages.HrUpgradeMsg);$(".hr_upgrade-banner-container").hide();$(".page-app").removeClass("banner")});$("#btnLicenseExceeded").click(function(){var msg="<p>"+CommonStrings.licenseExceededMsg1+"</p>";msg+="<p>"+CommonStrings.licenseExceededMsg2+"</p>";msg+="<ul><li>"+CommonStrings.licenseExceededMsg3+"</li><li>"+CommonStrings.licenseExceededMsg4+"</li></ul>";appogee.valert(CommonStrings.licenseExceededTitle,msg)});$("#btnMobHr").click(function(){$("#btnMobHr").removeClass("selected").addClass("selected");$("#btnMobLeave").removeClass("selected");$("#btnMobMgmt").removeClass("selected");$("#panMobHr").removeClass("selected").addClass("selected");$("#panMobLeave").removeClass("selected");$("#panMobMgmt").removeClass("selected")});$("#btnMobLeave").click(function(){$("#btnMobHr").removeClass("selected");$("#btnMobLeave").removeClass("selected").addClass("selected");$("#btnMobMgmt").removeClass("selected");$("#panMobHr").removeClass("selected");$("#panMobLeave").removeClass("selected").addClass("selected");$("#panMobMgmt").removeClass("selected")});$("#btnMobMgmt").click(function(){$("#btnMobHr").removeClass("selected");$("#btnMobLeave").removeClass("selected");$("#btnMobMgmt").removeClass("selected").addClass("selected");$("#panMobHr").removeClass("selected");$("#panMobLeave").removeClass("selected");$("#panMobMgmt").removeClass("selected").addClass("selected")})};App.prototype.hidePopups=function(){if(this.popups.role){this.popups.role.hide()}if(this.popups.alerts){this.popups.alerts.hide()}if(this.popups.account){this.popups.account.hide()}if(this.popups.support){this.popups.support.hide()}};App.prototype.showRoleSwitcherPopup=function($el){if(this.popups.role===null){this.popups.role=new RoleSwitcherPopup($el)}this.hidePopups();this.popups.role.show()};App.prototype.showAlertsPopup=function($el){if(this.popups.alerts===null){this.popups.alerts=new AlertsPopup($el)}this.hidePopups();this.popups.alerts.show()};App.prototype.showAccountPopup=function($el){if(this.popups.account===null){this.popups.account=new AccountPopup($el)}this.hidePopups();this.popups.account.show()};App.prototype.showSupportPopup=function($el){if(this.popups.support===null){this.popups.support=new SupportPopup($el)}this.hidePopups();this.popups.support.show()};App.prototype.initJquery=function(){$(function(){$.ajaxSetup({beforeSend:function(xhr){var csrf=appogee.getCsrfToken();xhr.setRequestHeader("X-CSRF",csrf)}});appogee._HANDLE_ERROR=true;$(document).ajaxError(function(e,response,settings){if(settings.url&&settings.url.length>5&&settings.url.substring(0,5)=="/json"){return}if(appogee._HANDLE_ERROR){var msg="";if(response.status===0){msg=CommonStrings.offline;return}else if(response.status==401){msg=CommonStrings.sessionExpired}else if(response.status==403){msg=CommonStrings.noAccess}else{msg=CommonStrings.genericError}if(response.status==400){msg=JSON.parse(response.responseText);appogee.alert(CommonStrings.invalidInput,msg.error.message)}else if(response.status==500){appogee.alert(CommonStrings.crikeyTitle,CommonStrings.crikeyMsg)}else if(response.status==410){appogee.alert(CommonStrings.alreadyDeletedTitle,CommonStrings.alreadyDeletedMsg)}else if(response.status!=200){appogee.alert(response.status+": "+response.statusText,msg)}appogee.notifier.hide();if(console){console.log(response)}}appogee._HANDLE_ERROR=true})})};App.prototype.initFloatingHeader=function(){var start=90;var maxHeight=50;var end=start+maxHeight;$(window).scroll(function(){var scrollTop=$(window).scrollTop();if(scrollTop<start){$("#floatingheader").hide()}else if(scrollTop<end){var height=scrollTop-start;var opacity=Math.min(1,.2+height*.02);$("#floatingheader").show().css("height",height).css("opacity",opacity)}else{$("#floatingheader").show().css("height",maxHeight).css("opacity",1);$("#floatingheader .notifier").centerX()}$("#floatingheader > div").toggle(scrollTop>=end)})};App.prototype.addRoute=function(path,func){if(this.routes===null){this.routes={}}this.routes[path]=func};App.prototype.setMenuScroll=function(){$(".main-menu a").each(function(i,a){if(a.classList.contains("selected")&&i>10){$(".main-menu").scrollTop(45*i)}})};App.prototype.showThingToTry=function(){if(this.thingsToTryWindow){if(this.thingsToTryWindow.closed){this.thingsToTryWindow=null}}if(this.thingsToTryWindow){this.thingsToTryWindow.focus();return}var windowName="trialistChecklist";var windowWidth=370;var windowHeight=570;var viewportwidth=document.documentElement.clientWidth;var leftMargin=viewportwidth-windowWidth;window.resizeBy(-windowWidth,0);window.moveTo(0,0);var windowSettings="toolbar=no, location=no, status=no, menubar=no, scrollbars=yes, resizable=yes,";windowSettings+="width="+windowWidth+",";windowSettings+="height="+windowHeight+",";windowSettings+="left="+leftMargin+",";windowSettings+="top=0";var url="/things-to-try";this.thingsToTryWindow=window.open(url,windowName,windowSettings)};return App});define("templates/helpers/if_lt",["hbs/handlebars"],function(Handlebars){Handlebars.registerHelper("if_lt",function(context,options){if(context<options.hash.compare)return options.fn(this);return options.inverse(this)})});define("hbs!admin/org/dlg/CreateAduDialog",["hbs/handlebars","templates/helpers/s","templates/helpers/if_lt","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'value="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.adu:depth0)!=null?stack1.name:stack1,depth0))+'"'},3:function(depth0,helpers,partials,data){var stack1;return this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.adu:depth0)!=null?stack1.description:stack1,depth0))},5:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<div class="form-group'+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.adu:depth0,{name:"unless",hash:{},fn:this.program(6,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Parent Division",{name:"s",hash:{},data:data}))+"</label>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adu:depth0,{name:"if",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.program(10,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"</div>\n"},6:function(depth0,helpers,partials,data){return" mandatory"},8:function(depth0,helpers,partials,data){var helper;return'\t\t<p class="form-control-static">'+this.escapeExpression((helper=(helper=helpers.parentPath||(depth0!=null?depth0.parentPath:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"parentPath",hash:{},data:data}):helper))+"</p>\n"},10:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t<select class="form-control input-sm ddlParent">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.adus:depth0,{name:"each",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</select>\n"},11:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.if_lt||depth0&&depth0.if_lt||helpers.helperMissing).call(depth0,depth0!=null?depth0.level:depth0,{name:"if_lt",hash:{compare:depths[2]!=null?depths[2].maxLevels:depths[2]},fn:this.program(12,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},12:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[2]!=null?depths[2].parentAdu:depths[2])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(13,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},13:function(depth0,helpers,partials,data){return'selected="selected"'},15:function(depth0,helpers,partials,data){return'checked="checked"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Division",{name:"s",hash:{},data:data}))+'</h4>\n\n<div class="alert alert-info alert-flat pan-info">\n\t<p>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Divisions allow Appogee HR to be split into discrete hierarchical units, delegating HR related administrative tasks to specific users.",{name:"s",hash:{},data:data}))+'\n\t\t<a href="https://help.appogeehr.com/support/solutions/articles/22000173992">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Learn More",{name:"s",hash:{},data:data}))+'</a>\n\t</p>\n</div>\n\n<div class="alert alert-info alert-flat pan-working">\n\t<p class="working">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Creating division, please wait ...",{name:"s",hash:{},data:data}))+'\n\t</p>\n</div>\n\n<div class="alert alert-success alert-flat pan-success">\n\t<p>\n\t\t<i class="glyphicon glyphicon-ok"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The division has been created",{name:"s",hash:{},data:data}))+'\n\t</p>\n</div>\n\n<div class="form-group mandatory">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division Name",{name:"s",hash:{},data:data}))+'</label>\n\t<div class="help-block text-danger txtNameError"></div>\n\t<input type="text" class="form-control input-sm txtName" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adu:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+' autocomplete="off" />\n</div>\n\n<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Comments",{name:"s",hash:{},data:data}))+'</label>\n\t<textarea class="form-control input-sm txtDescription">'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adu:depth0,{name:"if",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"</textarea>\n</div>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showParent:depth0,{name:"if",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="buttons">\n\t<div class="pull-left">\n\t\t<button class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t</div>\n\t<div class="pull-right">\n\t\t<label class="checkbox-inline">\n\t\t\t<input type="checkbox" class="chkCreateAnother" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.createAnother:depth0,{name:"if",hash:{},fn:this.program(15,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Another",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t\t<button class="btn btn-sm btn-primary w-min-100 btnCreate">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Division",{name:"s",hash:{},data:data}))+'\n\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t</button>\n\t</div>\n\t<div class="clearfix"></div>\n</div>'},useData:true,useDepths:true});Handlebars.registerPartial("admin/org/dlg/CreateAduDialog",t);return t});define("admin/org/dlg/CreateAduDialog",["jquery","underscore","appogee","ADU","hbs!admin/org/dlg/CreateAduDialog"],function($,_,appogee,ADU,tmpl){"use strict";var $dlg=null;var S,R={invalidDivisionTitle:"Invalid Division Name",invalidDivisionMsg:"Division Names must begin with a letter, and may contain letters, numbers, periods (.) or hyphens (-). Division names must end with a letter or number.",duplicateDivisionMsg:"An Division with name {division} already exists. Please use a unique name."};var Dialog=function(parentAdu){S=appogee.getStrings("CreateAduDialog",R);if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.config={ml:3};var ns=appogee.getNs();if(ns=="GD1TPO"){this.config.ml=4}this.createAnother=false;this.adus=appogee.getAdus();this.parentAdu=parentAdu;this.onCloseHandlers=[];this.onCreateHandlers=[]};Dialog.prototype.onClose=function(handler){this.onCloseHandlers.push(handler)};Dialog.prototype.onCreate=function(handler){this.onCreateHandlers.push(handler)};Dialog.prototype.render=function(){var _this30=this;var parentPath=null;if(this.adu&&this.adu.level>1){parentPath=this.adu.path.substring(0,this.adu.path.lastIndexOf("/"))}var showParent=true;if(this.config.ml==2){showParent=false}var data={adus:this.adus,parentAdu:this.parentAdu,parentPath:parentPath,showParent:showParent,maxLevels:this.config.ml,createAnother:this.createAnother};if($dlg===null){$dlg=$("<div />").addClass("dialog")}$dlg.removeClass("step1 step2 step3").addClass("step1").html(tmpl(data));$dlg.find(".txtName").focus();$dlg.find(".txtNameError").hide();$dlg.find(".btnCreate").click(function(){_this30.create()});$dlg.find(".btnClose").click(function(){_this30.close()})};Dialog.prototype.show=function(){var _this31=this;this.dlg=new appogee.Dialog($dlg,{dialogClass:"dlg-create dlg-create-adu",onBeforeClose:function(){_this31.onCloseHandlers.forEach(function(handler){return handler()})}});this.dlg.clearButtons();this.render();this.dlg.show()};Dialog.prototype.create=function(){var _this32=this;var $txtName=$dlg.find(".txtName");var $txtNameError=$dlg.find(".txtNameError");var $txtDescription=$dlg.find(".txtDescription");var $ddlParent=$dlg.find(".ddlParent");$txtNameError.hide();$txtName.removeClass("error");var name=$txtName.val();var description=$txtDescription.val();var parentKey=$ddlParent.val();var existingNames=_.filter(this.adus,function(adu){return!_this32.adu||_this32.adu.key!=adu.key}).map(function(adu){return adu.name});if(!name){$txtName.addClass("error");$txtNameError.html(S.invalidDivisionMsg).show();return}else if(!appogee.validation.validateADU(name)){appogee.valert(S.invalidDivisionTitle,S.invalidDivisionMsg);$txtNameError.html(S.invalidDivisionMsg).show();return}else if(existingNames.indexOf(name)>-1){var duplicateDivisionMsg=S.duplicateDivisionMsg.replace("{division}","<strong>{division}</strong>").format({division:name});appogee.valert(S.invalidDivisionTitle,duplicateDivisionMsg);return}var parentAdu=null;if(this.config.ml==2){parentAdu=_.findWhere(this.adus,{level:1})}else{parentAdu=_.findWhere(this.adus,{key:parentKey})}var path=parentAdu.path+"/"+name;var body={name:name,description:description,path:path};this.parentAdu=parentAdu;this.createAnother=$dlg.find(".chkCreateAnother").prop("checked");$dlg.find("input,select,button,textarea").attr("disabled",true);$dlg.removeClass("step1 step2 step3").addClass("step2");appogee.api.post("/adus",body,function(adu){_this32.adus.push(new ADU(adu));$dlg.removeClass("step1 step2 step3").addClass("step3");setTimeout(function(){if(_this32.createAnother){_this32.render()}else{_this32.close()}},1e3);if(_this32.onCreateHandlers){_this32.onCreateHandlers.forEach(function(h){return h(adu)})}},{artificialDelay:true})};Dialog.prototype.close=function(){this.dlg.hide()};return Dialog});define("templates/helpers/ifnotequal",["hbs/handlebars"],function(Handlebars){function ifnotequal(v1,v2,options){if(v1!=v2)return options.fn(this);return options.inverse(this)}Handlebars.registerHelper("ifnotequal",ifnotequal);return ifnotequal});define("hbs!admin/org/dlg/EditAduDialogTemplate",["hbs/handlebars","templates/helpers/s","templates/helpers/ifnotequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'value="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.adu:depth0)!=null?stack1.name:stack1,depth0))+'"'},3:function(depth0,helpers,partials,data){return'\t\t<button class="btn btn-sm btn-default btn-delete btnDelete">\n\t\t\t<i class="glyphicon glyphicon-trash"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+"\n\t\t</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Edit Division",{name:"s",hash:{},data:data}))+'</h4>\n\n<div class="form-group mandatory">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division Name",{name:"s",hash:{},data:data
}))+'</label>\n\t<div class="help-block text-danger txtNameError"></div>\n\t\n\t<div class="input-group">\n\t\t<div class="input-group-addon input-sm">'+this.escapeExpression((helper=(helper=helpers.parentPath||(depth0!=null?depth0.parentPath:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"parentPath",hash:{},data:data}):helper))+'/</div>\n\t\t<input type="text" class="form-control input-sm txtName" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adu:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+' autocomplete="off" />\n    </div>\n</div>\n\n<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Comments",{name:"s",hash:{},data:data}))+'</label>\n\t<textarea class="form-control input-sm txtDescription">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.adu:depth0)!=null?stack1.description:stack1,depth0))+'</textarea>\n</div>\n\n<div class="buttons">\n\t<div class="pull-left">\n\t\t<button class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t</div>\n\t<div class="pull-right">\n'+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.adu:depth0)!=null?stack1.level:stack1,1,{name:"ifnotequal",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<button class="btn btn-sm btn-primary w-min-100 btnSave">\n\t\t\t<i class="glyphicon glyphicon-ok"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Save Changes",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t</div>\n\t<div class="clearfix"></div>\n</div>'},useData:true});Handlebars.registerPartial("admin/org/dlg/EditAduDialogTemplate",t);return t});define("admin/org/dlg/EditAduDialog",["jquery","underscore","appogee","hbs!admin/org/dlg/EditAduDialogTemplate"],function($,_,appogee,tmpl){"use strict";var S,R={invalidDivisionTitle:"Invalid Division Name",invalidDivisionMsg:"Division Names must be lower case and only contain a-z letters or hyphens.",duplicateDivisionMsg:"An Division with name {division} already exists. Please use a unique name.",deleteAduTitle:"Confirm Delete",deleteAduMsg:"This will delete the {adu} ADU",confirmContinue:"Do you wish to continue?",aduDeletedTitle:"ADU Deleted",aduDeletedMsg:"The ADU has been deleted",aduDeleteFailedTitle:"Unable to Delete ADU",aduDeleteFailedTeamsExistMsg1:"Unable to delete the selected ADU as the following teams exist under it: {teams}",aduDeleteFailedTeamsExistMsg2:"Please move the Teams to a different ADU, then try again.",aduDeleteFailedAdusExistMsg1:"Unable to delete the selected ADU as ADUs exists below it.",aduDeleteFailedAdusExistMsg2:"Please delete the descendant ADUs, then try again.",aduDeleteFailedDocsExistMsg1:"Unable to delete the selected ADU as Company Documents exist in the ADU",aduDeleteFailedDocsExistMsg2:"Please move the Company Documents to another ADU and try again."};var $dlg=null;var Dialog=function(adu){S=appogee.getStrings("EditAduDialog",R);if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.config={ml:3};this.adus=appogee.getAdus();this.adu=adu;this.onCloseHandlers=[];this.onUpdateHandlers=[];this.onDeleteHandlers=[]};Dialog.prototype.onClose=function(handler){this.onCloseHandlers.push(handler)};Dialog.prototype.onUpdate=function(handler){this.onUpdateHandlers.push(handler)};Dialog.prototype.onDelete=function(handler){this.onDeleteHandlers.push(handler)};Dialog.prototype.render=function(){var _this33=this;var parentPath=null;if(this.adu&&this.adu.level>1){parentPath=this.adu.path.substring(0,this.adu.path.lastIndexOf("/"))}var data={adu:this.adu,parentPath:parentPath};if($dlg===null){$dlg=$("<div />").addClass("dialog")}$dlg.html(tmpl(data));$dlg.find(".btnSave").click(function(){_this33.save()});$dlg.find(".btnDelete").click(function(){_this33.doDelete()});$dlg.find(".btnClose").click(function(){_this33.close()})};Dialog.prototype.show=function(){var _this34=this;this.dlg=new appogee.Dialog($dlg,{onBeforeClose:function(){_this34.onCloseHandlers.forEach(function(handler){return handler()})}});this.dlg.clearButtons();this.render();this.dlg.show()};Dialog.prototype.save=function(){var _this35=this;var $txtName=$dlg.find(".txtName");var $txtNameError=$dlg.find(".txtNameError");var $txtDescription=$dlg.find(".txtDescription");$txtNameError.hide();$txtName.removeClass("error");var name=$txtName.val();var description=$txtDescription.val();var existingNames=_.filter(this.adus,function(adu){return!_this35.adu||_this35.adu.key!=adu.key}).map(function(adu){return adu.name});if(!name){$txtName.addClass("error");$txtNameError.html(S.invalidDivisionMsg).show();return}else if(!appogee.validation.validateADU(name)){appogee.valert(S.invalidDivisionTitle,S.invalidDivisionMsg);$txtNameError.html(S.invalidDivisionMsg).show();return}else if(existingNames.indexOf(name)>-1){var duplicateDivisionMsg=S.duplicateDivisionMsg.replace("{division}","<strong>{division}</strong>").format({division:name});appogee.valert(S.invalidDivisionTitle,duplicateDivisionMsg);return}var body={name:name,description:description};var url="/adus/{0}".format(this.adu.key);appogee.api.put(url,body,function(adu){_this35.adu.description=description;if(_this35.onUpdateHandlers){_this35.onUpdateHandlers.forEach(function(h){return h(adu)})}_this35.close()})};Dialog.prototype.doDelete=function(){var _this36=this;var deleteAduMsg=S.deleteAduMsg.replace("{adu}","<strong>{adu}</strong>").format({adu:this.adu.path});var msg=appogee.util.joinWithPs(deleteAduMsg,S.confirmContinue);appogee.confirm(S.deleteAduTitle,msg,function(){var data={key:_this36.adu.key};appogee.xhr.post("/admin/org/adus/delete",data,function(response){var msg=null;if(response.success){_this36.onDeleteHandlers.forEach(function(h){return h(_this36.adu)});appogee.alert(S.aduDeletedTitle,S.aduDeletedMsg,function(){_this36.close();return true})}else{if(response.reason=="Teams Exist"){var teamNames=response.teamNames.join(", ");msg=appogee.util.joinWithPs(S.aduDeleteFailedTeamsExistMsg1.formnat({teams:teamNames}),S.aduDeleteFailedTeamsExistMsg2)}else if(response.reason=="Descendants Found"){msg=appogee.util.joinWithPs(S.aduDeleteFailedAdusExistMsg1,S.aduDeleteFailedAdusExistMsg2)}else if(response.reason=="Documents Exist"){msg=appogee.util.joinWithPs(S.aduDeleteFailedDocsExistMsg1,S.aduDeleteFailedDocsExistMsg2)}else{msg=response.reason}appogee.valert(S.aduDeleteFailedTitle,msg)}},{artificialDelay:true})})};Dialog.prototype.close=function(){this.dlg.hide()};return Dialog});define("hbs!admin/org/dlg/CreateTeamDialog",["hbs/handlebars","templates/helpers/s","templates/helpers/if_gt","templates/helpers/ifequal","templates/helpers/trans"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t<div class="form-group mandatory">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<select class="form-control input-sm ddlAdu">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.adus:depth0,{name:"each",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t</select>\n\t\t\t</div>\n"},2:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,depths[1]!=null?depths[1].defaultAduKey:depths[1],{name:"ifequal",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},3:function(depth0,helpers,partials,data){return'selected="selected"'},5:function(depth0,helpers,partials,data){return'checked="checked"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Team",{name:"s",hash:{},data:data}))+'</h4>\n\n<div class="alert alert-info alert-flat pan-info">\n\t<p>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Teams are groups of Employees that share the same Manager.",{name:"s",hash:{},data:data}))+"\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Teams also provide configuration settings for the team members.",{name:"s",hash:{},data:data}))+'\n\t</p>\n</div>\n<div class="alert alert-info alert-flat pan-working">\n\t<p class="working">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Creating team, please wait ...",{name:"s",hash:{},data:data}))+'\n\t</p>\n</div>\n<div class="alert alert-success alert-flat pan-success">\n\t<p>\n\t\t<i class="glyphicon glyphicon-ok"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The team has been created",{name:"s",hash:{},data:data}))+'\n\t</p>\n</div>\n<div class="appogee-tabs">\n\t<div class="tab-header">\n\t\t<a href="#tab_details" class="subtab selected">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Main Details",{name:"s",hash:{},data:data}))+'</a>\n\t\t<a href="#tab_optional" class="subtab">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Optional",{name:"s",hash:{},data:data}))+'</a>\n\t</div>\n\t<div class="tab-panel selected" data-tab="tab_details">\n'+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.adus:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:1},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\n\t\t<div class="form-group mandatory">\n\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team Name",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t<div class="help-block text-danger txtNameError"></div>\n\t\t\t<input type="text" class="form-control input-sm txtName" autocomplete="off" />\n\t\t</div>\n\n\t\t<div class="form-group">\n\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Primary Manager",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t<input type="text" class="form-control input-sm txtManager" placeholder="'+this.escapeExpression((helpers.trans||depth0&&depth0.trans||helpers.helperMissing).call(depth0,"Start typing to search ...",{name:"trans",hash:{},data:data}))+'" />\n\t\t</div>\n\t</div>\n\t<div class="tab-panel" data-tab="tab_optional">\n\t\t<div class="form-group">\n\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enable Sickness",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="chkSicknessEnabled" value="1" checked="checked">\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allow users of this team to submit Sickness Reports?",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enable {toil_term}",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+'</label>\n\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="chkToilEnabled" value="1">\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allow users of this team to submit {toil_term} Requests?",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="buttons">\n\t<div class="pull-left">\n\t\t<button class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t</div>\n\t<div class="pull-right">\n\t\t<label class="checkbox-inline">\n\t\t\t<input type="checkbox" class="chkCreateAnother" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.createAnother:depth0,{name:"if",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Another",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t\t<button class="btn btn-sm btn-primary w-min-100 btnCreate">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Team",{name:"s",hash:{},data:data}))+'\n\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t</button>\n\t</div>\n\t<div class="clearfix"></div>\n</div>'},useData:true,useDepths:true});Handlebars.registerPartial("admin/org/dlg/CreateTeamDialog",t);return t});define("admin/org/dlg/CreateTeamDialog",["jquery","underscore","appogee","hbs!admin/org/dlg/CreateTeamDialog","jquery.appogee.tabs"],function($,_,appogee,tmpl){"use strict";var $dlg=null;var S,R={msgNoTeamName:"Please enter a team name",msgInvalidTeamName:"Invalid team name. Please try again.",msgTeamNameUnavailable:"Team name is not available, please enter a unique name."};var Dialog=function(){S=appogee.getStrings("CreateTeamDialog",R);if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.adus=appogee.getAdus({root:"self"});this.toilTerm=appogee.getToilTerm();this.createAnother=false;this.defaultAduKey=null;this.onCloseHandlers=[];this.onCreateHandlers=[]};Dialog.prototype.onClose=function(handler){this.onCloseHandlers.push(handler)};Dialog.prototype.onCreate=function(handler){this.onCreateHandlers.push(handler)};Dialog.prototype.setDefaultAduKey=function(aduKey){if(aduKey){this.defaultAduKey=aduKey}};Dialog.prototype.render=function(){var _this37=this;var data={createAnother:this.createAnother,adus:this.adus,defaultAduKey:this.defaultAduKey,toilTerm:this.toilTerm};$dlg.removeClass("step1 step2 step3").addClass("step1").html(tmpl(data));if(this.error){$dlg.find(".txtName").addClass("error");$dlg.find(".txtNameError").html(S.msgVTeamNameUnavailable)}var me=this;this.managerPicker=new appogee.UserPicker($dlg.find(".txtManager"),null,{active:true,aduKey:me.defaultAduKey,aduTraverse:"up"});$dlg.find(".ddlAdu").change(function(){var selectedAduKey=$dlg.find(".ddlAdu").val();me.setDefaultAduKey(selectedAduKey);me.managerPicker.params.aduKey=me.defaultAduKey});$dlg.find(".appogee-tabs").appogeeTabs();$dlg.find(".txtName").focus();$dlg.find(".btnCreate").click(function(){_this37.create()});$dlg.find(".btnClose").click(function(){_this37.close()})};Dialog.prototype.show=function(){var _this38=this;this.dlg=new appogee.Dialog($dlg,{dialogClass:"dlg-create dlg-create-team",onBeforeClose:function(){_this38.onCloseHandlers.forEach(function(handler){return handler()})}});this.dlg.clearButtons();this.render();this.dlg.show()};Dialog.prototype.create=function(){var _this39=this;var me=this;me.error=false;var aduKey=$dlg.find(".ddlAdu").val();var name=$dlg.find(".txtName").val().trim();var enableSickness=$dlg.find("#chkSicknessEnabled").is(":checked");var enableToil=$dlg.find("#chkToilEnabled").is(":checked");var primaryManagerKey=this.managerPicker.$textbox.data("userPickerKey");var primaryManagerEmail=this.managerPicker.$textbox.data("userPickerEmail");if(!name){$dlg.find(".txtName").addClass("error");$dlg.find(".txtNameError").html(S.msgNoTeamName);return}this.createAnother=$dlg.find(".chkCreateAnother").prop("checked");$dlg.find("input,select,button,textarea").attr("disabled",true);$dlg.removeClass("step1 step2 step3").addClass("step2");var body={adu:{key:aduKey},name:name,enableSickness:enableSickness,enableToil:enableToil};if(primaryManagerKey&&primaryManagerEmail){var primaryManager={key:primaryManagerKey,email:primaryManagerEmail,role:"primary"};body.manager=primaryManager;body.readers=[primaryManager];body.editors=[primaryManager]}appogee.xhr.post("/admin/org/teams/check_name",body,function(response){if(response.exists){me.error=true;me.render();$dlg.find(".txtNameError").html(S.msgTeamNameUnavailable);return}$dlg.find(".txtName").removeClass("error");$dlg.find(".txtNameError").hide();appogee.api.post("/teams",body,function(response){$dlg.removeClass("step1 step2 step3").addClass("step3");setTimeout(function(){if(_this39.createAnother){_this39.render()}else{_this39.close()}},1e3);if(_this39.onCreateHandlers){_this39.onCreateHandlers.forEach(function(h){return h(response)})}})},{artificialDelay:true})};Dialog.prototype.close=function(){this.dlg.hide()};return Dialog});define("hbs!admin/org/dlg/EditTeamDialogTemplate",["hbs/handlebars"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var helper;return"\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</td>\n\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</td>\n\t\t</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return"<h4>Team: "+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.team:depth0)!=null?stack1.name:stack1,depth0))+'</h4>\n\n<div class="subtab_container">\n\t<div class="subtab_header">\n\t\t<a href="#tab_members" class="subtab selected">Members</a>\n\t\t<a href="#tab_managers" class="subtab">Managers</a>\n\t\t<a href="#tab_leave" class="subtab">Leave Settings</a>\n\t</div>\n\n\t<div class="tab_panel selected" data-tab="tab_members">\n\t\t<table class="table table-condensed">\n\t\t<thead>\n\t\t<tr>\n\t\t\t<th>Name</th>\n\t\t\t<th>Email</th>\n\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n'+((stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.team:depth0)!=null?stack1.members:stack1,{name:"each",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t</tbody>\n\t\t</table>\n\t</div>\t\n\t<div class="tab_panel" data-tab="tab_managers">\n\t\tManagers\n\t</div>\n\t<div class="tab_panel" data-tab="tab_details">\n\t\t<div class="form-group">\n\t\t\t<label>Full Name *</label>\n\t\t\t<input type="text" class="form-control input-sm txtName" />\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<label class="pull-left">Email Address *</label>\n\t\t\t<label class="pull-right checking-email-availability" id="checkEmailContainer"></label>\n\t\t\t<input type="text" class="form-control input-sm txtEmail" />\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class="buttons">\n\t<div class="pull-left">\n\t\t<button class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\tClose\n\t\t</button>\n\t</div>\n\t<div class="pull-right">\n\t\t<a href="/admin/organisation/team?key='+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.team:depth0)!=null?stack1.key:stack1,depth0))+'" class="btn btn-sm btn-primary w-min-100 btnSave">\n\t\t\t<i class="glyphicon glyphicon-pencil"></i>\n\t\t\tEdit Team\n\t\t</a>\n\t</div>\n\t<div class="clearfix"></div>\n</div>\n\n\x3c!-- \n<h4>Edit Team</h4>\n\n<div class="form-group mandatory">\n\t<label>Team Name</label>\n\t<div class="help-block text-danger txtNameError"></div>\n\t\n\t<input type="text" class="form-control input-sm txtName" value="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.team:depth0)!=null?stack1.name:stack1,depth0))+'" autocomplete="off" />\n</div>\n\n<div class="form-group">\n\t<label>Comments</label>\n\t<textarea class="form-control input-sm txtDescription">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.team:depth0)!=null?stack1.description:stack1,depth0))+'</textarea>\n</div>\n\n<div class="buttons">\n\t<div class="pull-left">\n\t\t<button class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\tCancel\n\t\t</button>\n\t</div>\n\t<div class="pull-right">\n\t\t<button class="btn btn-sm btn-default btn-delete btnDelete">\n\t\t\t<i class="glyphicon glyphicon-trash"></i>\n\t\t\tDelete\n\t\t</button>\n\t\t<button class="btn btn-sm btn-primary w-min-100 btnSave">\n\t\t\t<i class="glyphicon glyphicon-ok"></i>\n\t\t\tSave Changes\n\t\t</button>\n\t</div>\n\t<div class="clearfix"></div>\n</div>\n --\x3e'},useData:true});Handlebars.registerPartial("admin/org/dlg/EditTeamDialogTemplate",t);return t});define("admin/org/dlg/EditTeamDialog",["jquery","underscore","appogee","hbs!admin/org/dlg/EditTeamDialogTemplate","jquery.appogee.tabs"],function($,_,appogee,tmpl){"use strict";var $dlg=null;var Dialog=function(team){if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.team=team;this.onCloseHandlers=[];this.onUpdateHandlers=[];this.onDeleteHandlers=[]};Dialog.prototype.onClose=function(handler){this.onCloseHandlers.push(handler)};Dialog.prototype.onUpdate=function(handler){this.onUpdateHandlers.push(handler)};Dialog.prototype.onDelete=function(handler){this.onDeleteHandlers.push(handler)};Dialog.prototype.render=function(){var _this40=this;var data={team:this.team};if($dlg===null){$dlg=$("<div />").addClass("dialog")}$dlg.html(tmpl(data));$dlg.find(".subtab_container").appogeeTabs();$dlg.find(".btnSave").click(function(){_this40.save()});$dlg.find(".btnDelete").click(function(){_this40.doDelete()});$dlg.find(".btnClose").click(function(){_this40.close()})};Dialog.prototype.show=function(){var _this41=this;this.dlg=new appogee.Dialog($dlg,{onBeforeClose:function(){_this41.onCloseHandlers.forEach(function(handler){return handler()})}});this.dlg.clearButtons();this.render();this.dlg.show()};Dialog.prototype.save=function(){var _this42=this;return;$dlg.find(".txtName").removeClass("error");var name=$dlg.find(".txtName").val().trim();var description=$dlg.find(".txtDescription").val().trim();if(!name){$dlg.find(".txtName").addClass("error");$dlg.find(".txtNameError").html(S.msgNoTeamName);return}var body={key:this.team.key,name:name,description:description};appogee.xhr.post("/admin/org/teams/check_name",body,function(response){if(response.exists){$dlg.find(".txtName").addClass("error");$dlg.find(".txtNameError").html(S.msgTeamNameUnavailable);return}var url="/teams/{0}".format(_this42.team.key);appogee.api.put(url,body,function(response){if(_this42.onUpdateHandlers){_this42.onUpdateHandlers.forEach(function(h){return h(response)})}_this42.close()})},{artificialDelay:true})};Dialog.prototype.saveX=function(){var _this43=this;var $txtName=$dlg.find(".txtName");var $txtNameError=$dlg.find(".txtNameError");var $txtDescription=$dlg.find(".txtDescription");$txtNameError.hide();$txtName.removeClass("error");var name=$txtName.val();var description=$txtDescription.val();if(!name){$txtName.addClass("error");$txtNameError.html(S.invalidTeamMsg).show();return}else if(!appogee.validation.validateADU(name)){appogee.valert(S.invalidDivisionTitle,S.invalidDivisionMsg);$txtNameError.html(S.invalidDivisionMsg).show();return}else if(existingNames.indexOf(name)>-1){var duplicateDivisionMsg=S.duplicateDivisionMsg.replace("{division}","<strong>{division}</strong>").format({division:name});appogee.valert(S.invalidDivisionTitle,duplicateDivisionMsg);return}var body={name:name,description:description};var url="/adus/{0}".format(this.adu.key);appogee.api.put(url,body,function(adu){_this43.adu.description=description;if(_this43.onUpdateHandlers){_this43.onUpdateHandlers.forEach(function(h){return h(adu)})}_this43.close()})};Dialog.prototype.doDelete=function(){var _this44=this;var deleteAduMsg=S.deleteAduMsg.replace("{adu}","<strong>{adu}</strong>").format({adu:this.adu.path});var msg=appogee.util.joinWithPs(deleteAduMsg,S.confirmContinue);appogee.confirm(S.deleteAduTitle,msg,function(){var data={key:_this44.adu.key};appogee.xhr.post("/admin/org/adus/delete",data,function(response){var msg=null;if(response.success){_this44.onDeleteHandlers.forEach(function(h){return h(_this44.adu)});appogee.alert(S.aduDeletedTitle,S.aduDeletedMsg)}else{if(response.reason=="Teams Exist"){var teamNames=response.teamNames.join(", ");msg=appogee.util.joinWithPs(S.aduDeleteFailedTeamsExistMsg1.formnat({teams:teamNames}),S.aduDeleteFailedTeamsExistMsg2)}else if(response.reason=="Descendants Found"){msg=appogee.util.joinWithPs(S.aduDeleteFailedAdusExistMsg1,S.aduDeleteFailedAdusExistMsg2)}else if(response.reason=="Documents Exist"){msg=appogee.util.joinWithPs(S.aduDeleteFailedDocsExistMsg1,S.aduDeleteFailedDocsExistMsg2)}else{msg=response.reason}appogee.valert(S.aduDeleteFailedTitle,msg)}},{artificialDelay:true})})};Dialog.prototype.close=function(){this.dlg.hide()};return Dialog});define("admin/reg/util",["jquery","underscore","appogee","enums/CommonStrings"],function($,_,appogee,CommonStrings){"use strict";return{teams:{},leaveProfiles:{},populateTeams:function($ddlTeam,aduKey,defaultTeamKey){var _this45=this;if(!aduKey){$ddlTeam.html('<option value="">'+CommonStrings.selectDivision+" ...</option>");return}if(this.teams.hasOwnProperty(aduKey)){appogee.ui.populateDropdown($ddlTeam,this.teams[aduKey],{valueName:"name",defaultValue:"- "+CommonStrings.selectTeam+" -",default:defaultTeamKey})}else{$ddlTeam.html('<option value="">'+CommonStrings.loading+" ...</option>");var url="/teams?aduKey={0}".format(aduKey);appogee.api.get(url,function(response){_this45.teams[aduKey]=response.items;_this45.populateTeams($ddlTeam,aduKey,defaultTeamKey)},{artificialDelay:false})}},populateLeaveProfiles:function($ddlLeaveProfile,aduKey,defaultLeaveProfileKey){var _this46=this;if(!aduKey){$ddlLeaveProfile.html('<option value="">'+CommonStrings.selectDivision+" ...</option>");return}if(this.leaveProfiles.hasOwnProperty(aduKey)){appogee.ui.populateDropdown($ddlLeaveProfile,this.leaveProfiles[aduKey],{valueName:"name",groupBy:"aduPath",defaultValue:"- "+CommonStrings.selectLeaveProfile+" -",default:defaultLeaveProfileKey})}else{$ddlLeaveProfile.html('<option value="">'+CommonStrings.loading+" ...</option>");var url="/leave-profiles?aduKey={0}&aduTraverse=up&projection=full".format(aduKey);appogee.api.get(url,function(response){_this46.leaveProfiles[aduKey]=response.items;_this46.leaveProfiles[aduKey].forEach(function(p){return p.aduPath=p.adu.path});_this46.populateLeaveProfiles($ddlLeaveProfile,aduKey,defaultLeaveProfileKey)},{artificialDelay:false})}},getTeamByKey:function(teamKey){if(!teamKey){return null}for(var key in this.teams){if(this.teams.hasOwnProperty(key)){var t=_.findWhere(this.teams[key],{key:teamKey});if(t){return t}}}return null},getLeaveProfileByKey:function(leaveProfileKey){if(!leaveProfileKey){return null}for(var key in this.leaveProfiles){if(this.leaveProfiles.hasOwnProperty(key)){var t=_.findWhere(this.leaveProfiles[key],{key:leaveProfileKey});if(t){return t}}}return null}}});define("hbs!admin/reg/templates/EmailChecker",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<div class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Checking Email",{name:"s",hash:{},data:data}))+"</div>\n"},3:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.available:depth0,{name:"if",hash:{},fn:this.program(4,data,0),inverse:this.program(6,data,0),data:data}))!=null?stack1:""},4:function(depth0,helpers,partials,data){return'\t<div class="text-success">\n\t\t<i class="glyphicon glyphicon-ok"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email Available",{name:"s",hash:{},data:data}))+"\n\t</div>\n"},6:function(depth0,helpers,partials,data){var stack1;return'\t<div class="text-danger">\n\t\t<i class="glyphicon glyphicon-remove"></i>\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.reason:depth0,"Invalid Email",{name:"ifequal",hash:{},fn:this.program(7,data,0),inverse:this.program(9,data,0),data:data}))!=null?stack1:"")+"\t</div>\n"},7:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email Invalid",{name:"s",hash:{},data:data}))+"\n"},9:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.reason:depth0,"Not Verified",{name:"ifequal",hash:{},fn:this.program(10,data,0),inverse:this.program(13,data,0),data:data}))!=null?stack1:""},10:function(depth0,helpers,partials,data){var stack1;return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Domain Not Verified",{name:"s",hash:{},data:data}))+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isCurrentUserAdmin:depth0,{name:"if",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:"")},11:function(depth0,helpers,partials,data){return'\t\t\t\t<a href="/config/domains">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Verify Now",{name:"s",hash:{},data:data}))+"</a>\n"},13:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email Not Available",{name:"s",hash:{},data:data}))+"\n\t\t"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.working:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.program(3,data,0),data:data}))!=null?stack1:""},useData:true});Handlebars.registerPartial("admin/reg/templates/EmailChecker",t);return t});define("enums/MonthEnum",["appogee"],function(appogee){"use strict";var S,R={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"};var Month={init:function(){if(!S){S=appogee.getStrings("MonthEnum",R);this.months=[S.january,S.february,S.march,S.april,S.may,S.june,S.july,S.august,S.september,S.october,S.november,S.december]}},toString:function(i){this.init();if(i<1||i>12){console.error("month index out of range: "+i);return}return this.months[i-1]},asArrayList:function(){this.init();return this.months},asList:function(){this.init();return[{key:"1",value:S.january},{key:"2",value:S.february},{key:"3",value:S.march},{key:"4",value:S.april},{key:"5",value:S.may},{key:"6",value:S.june},{key:"7",value:S.july},{key:"8",value:S.august},{key:"9",value:S.september},{key:"10",value:S.october},{key:"11",value:S.november},{key:"12",value:S.december}]}};return Month});define("enums/MonthAbbr",["appogee"],function(appogee){"use strict";var S,R={january:"Jan",february:"Feb",march:"Mar",april:"Apr",may:"May",june:"Jun",july:"Jul",
august:"Aug",september:"Sep",october:"Oct",november:"Nov",december:"Dec"};var Month={init:function(){if(!S){S=appogee.getStrings("MonthAbbr",R);this.months=[S.january,S.february,S.march,S.april,S.may,S.june,S.july,S.august,S.september,S.october,S.november,S.december]}},toString:function(i){this.init();if(i<1||i>12){console.error("month index out of range: "+i);return}return this.months[i-1]},asArrayList:function(){this.init();return this.months},asList:function(){this.init();return[{key:"1",value:S.january},{key:"2",value:S.february},{key:"3",value:S.march},{key:"4",value:S.april},{key:"5",value:S.may},{key:"6",value:S.june},{key:"7",value:S.july},{key:"8",value:S.august},{key:"9",value:S.september},{key:"10",value:S.october},{key:"11",value:S.november},{key:"12",value:S.december}]}};return Month});define("enums/Weekday",["appogee"],function(appogee){"use strict";var S,R={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"};var Weekday={init:function(){if(!S){S=appogee.getStrings("Weekday",R);this.weekdays=[S.monday,S.tuesday,S.wednesday,S.thursday,S.friday,S.saturday,S.sunday];this.jsweekdays=[S.sunday,S.monday,S.tuesday,S.wednesday,S.thursday,S.friday,S.saturday]}},toString:function(i){this.init();if(i<0||i>6){console.error("weekday index out of range: "+i);return}return this.weekdays[i]},toJsString:function(i){this.init();if(i<0||i>6){console.error("weekday index out of range: "+i);return}return this.jsweekdays[i]},asArrayList:function(){this.init();return this.weekdays},asArrayListJs:function(){this.init();var clone=this.weekdays.slice(0);clone.splice(0,0,clone.pop());return clone},asList:function(){this.init();return[{key:"0",value:S.monday},{key:"1",value:S.tuesday},{key:"2",value:S.wednesday},{key:"3",value:S.thursday},{key:"4",value:S.friday},{key:"5",value:S.saturday},{key:"6",value:S.sunday}]}};return Weekday});define("enums/WeekdayAbbr",["appogee"],function(appogee){"use strict";var S,R={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};var Weekday={init:function(){if(!S){S=appogee.getStrings("WeekdayAbbr",R);this.weekdays=[S.monday,S.tuesday,S.wednesday,S.thursday,S.friday,S.saturday,S.sunday];this.jsweekdays=[S.sunday,S.monday,S.tuesday,S.wednesday,S.thursday,S.friday,S.saturday]}},toString:function(i){this.init();if(i<0||i>6){console.error("weekday index out of range: "+i);return}return this.weekdays[i]},toJsString:function(i){this.init();if(i<0||i>6){console.error("weekday index out of range: "+i);return}return this.jsweekdays[i]},asArrayList:function(){this.init();return this.weekdays},asArrayListJs:function(){this.init();var clone=this.weekdays.slice(0);clone.splice(0,0,clone.pop());return clone},asList:function(){this.init();return[{key:"0",value:S.monday},{key:"1",value:S.tuesday},{key:"2",value:S.wednesday},{key:"3",value:S.thursday},{key:"4",value:S.friday},{key:"5",value:S.saturday},{key:"6",value:S.sunday}]}};return Weekday});define("enums/WeekdayMin",["appogee"],function(appogee){"use strict";var S,R={monday:"Mo",tuesday:"Tu",wednesday:"We",thursday:"Th",friday:"Fr",saturday:"Sa",sunday:"Su"};var Weekday={init:function(){if(!S){S=appogee.getStrings("WeekdayAbbr",R);this.weekdays=[S.monday,S.tuesday,S.wednesday,S.thursday,S.friday,S.saturday,S.sunday];this.jsweekdays=[S.sunday,S.monday,S.tuesday,S.wednesday,S.thursday,S.friday,S.saturday]}},toString:function(i){this.init();if(i<0||i>6){console.error("weekday index out of range: "+i);return}return this.weekdays[i]},toJsString:function(i){this.init();if(i<0||i>6){console.error("weekday index out of range: "+i);return}return this.jsweekdays[i]},asArrayList:function(){this.init();return this.weekdays},asArrayListJs:function(){this.init();var clone=this.weekdays.slice(0);clone.splice(0,0,clone.pop());return clone},asList:function(){this.init();return[{key:"0",value:S.monday},{key:"1",value:S.tuesday},{key:"2",value:S.wednesday},{key:"3",value:S.thursday},{key:"4",value:S.friday},{key:"5",value:S.saturday},{key:"6",value:S.sunday}]}};return Weekday});define("jquery.appogee.datePicker",["jquery","appogee","enums/CommonStrings","enums/MonthEnum","enums/MonthAbbr","enums/Weekday","enums/WeekdayAbbr","enums/WeekdayMin"],function($,appogee,CommonStrings,Month,MonthAbbr,Weekday,WeekdayAbbr,WeekdayMin){$.fn.appogeeDatePicker=function(options){var currentUser=appogee.getCurrentUser();if(!currentUser){if(console.warn){console.warn("attempt to initialze a datepicker, but current user has not been loaded. unable to set date format string")}else if(console.log){console.log("attempt to initialze a datepicker, but current user has not been loaded. unable to set date format string")}}var range=null;if(options){if(options.yearRange){var year=(new Date).getFullYear();range="{0}:{1}".format(year+options.yearRange[0],year+options.yearRange[1]);delete options["yearRange"]}}options=$.extend({monthNames:Month.asArrayList(),monthNamesShort:MonthAbbr.asArrayList(),dayNames:Weekday.asArrayListJs(),dayNamesShort:WeekdayAbbr.asArrayListJs(),dayNamesMin:WeekdayMin.asArrayListJs(),prevText:CommonStrings.prev,nextText:CommonStrings.next,beforeShow:function(){$("#ui-datepicker-div").addClass("hide_prev_next")},onClose:function(){$("#ui-datepicker-div").removeClass("hide_prev_next")},changeMonth:true,changeYear:true},options||{});if(range){options.yearRange=range}if(!options.dateFormat&&currentUser){options.dateFormat=currentUser.jqueryDateFormatString}return this.each(function(){if(!$(this).hasClass("icon-calendar-lookup")){$(this).addClass("icon-calendar-lookup")}$(this).datepicker(options)})}});define("admin/reg/views/ManualView",["jquery","underscore","appogee","admin/reg/util","hbs!admin/reg/templates/EmailChecker","jquery.appogee.datePicker"],function($,_,appogee,util,tmplEmailChecker){"use strict";var S,R={noNameMsg:"Please enter the employees Name",nameInvalidMsg:"Please enter the employees Full Name",noEmailMsg:"Please enter the employees Email Address",emailInvalidMsg:"Please enter a valid Email Address",emailUnavailableMsg:"The Email Address you entered is not available.",noTeamMsg:"Please select the Team for this Employee",noEmpMsg:"Please select the Leave Profile for this Employee",startDateInPastMsg:"If Status is Active, the Employment Start Date must be in the past",startDateInFutureMsg:"If Status is New Joining, the Employment Start Date must be in the future",endDateBeforeStartDate:"",startDateInPast:"",endDateInPast:"",tabLogin:"Login (Enabled)",tabLoginHr:"Login (HR Enabled)",tabLoginLeave:"Login (Leave Enabled)",tabLoginDisabled:"Login (Disabled)"};var RegistrationView=function($container,tmpl,businessCardView,license){S=appogee.getStrings("ManualView",R);this.$container=$container;this.tmpl=tmpl;this.businessCardView=businessCardView;this.license=license;this.isDialog=false;this.currentUser=appogee.getCurrentUser();this.adus=appogee.getAdus({root:"self"});this.defaultAduKey=null;this.emailAvailable=false;this.loadingLicense=false;this.preSaveHandler=null;this.postSaveHandler=null};RegistrationView.prototype.onRender=function(handler){this.onRenderHandler=handler};RegistrationView.prototype.loadLicense=function(callback){var _this47=this;this.loadingLicense=true;appogee.api.get("/license",function(license){_this47.license=license;_this47.loadingLicense=false;if(callback){callback(license)}})};RegistrationView.prototype.onPreSave=function(handler){this.preSaveHandler=handler};RegistrationView.prototype.onPostSave=function(handler){this.postSaveHandler=handler};RegistrationView.prototype.render=function(data){var _this48=this;if(!this.license){this.loadLicense(function(){_this48.render(data)});return}var adu=null;if(this.defaultAduKey){adu=_.findWhere(this.adus,{key:this.defaultAduKey})}if(!adu){adu=this.currentUser.getActiveAdu()}var remainingLicenses=this.license.licenses-this.license.activeEmployees;var insufficentLicenses=this.license.licenseType=="licensed"&&remainingLicenses<=0;var hasHr=this.license&&this.license.hrLicenseStatus=="valid";if(!this.isDialog&&insufficentLicenses){location.reload();return}data=$.extend({step:0,adus:this.adus,adu:adu,defaultTeamKey:null,license:this.license,remainingLicenses:remainingLicenses,insufficentLicenses:insufficentLicenses,hasHr:hasHr},data||{});this.$container.html(this.tmpl(data));setTimeout(function(){_this48.$container.find(".txtName").focus()},500);this.$container.find(".txtName,.txtEmail,.txtJobTitle").keyup(function(){_this48.renderBusinessCard()});this.$container.find(".ddlTeam").change(function(){_this48.renderBusinessCard()});this.$container.find(".datepicker").appogeeDatePicker({yearRange:[-50,50]});this.$container.find(".appogee-tabs").appogeeTabs();var $ddlTeam=this.$container.find(".ddlTeam");var $ddlEmp=this.$container.find(".ddlEmp");util.populateTeams($ddlTeam,adu.key,data.defaultTeamKey);util.populateLeaveProfiles($ddlEmp,adu.key);this.$container.find(".ddlAdu").change(function(){util.populateTeams($ddlTeam,this.value);util.populateLeaveProfiles($ddlEmp,this.value)});this.$container.find(".btnCreate").click(function(){_this48.create()});this.$container.find(".btnCreateClose").click(function(){_this48.create(true)});this.$container.find(".txtEmail").blur(function(){_this48.checkEmail()});this.$container.find(".panel-login input").click(function(){_this48.toggleLogin()});this.$container.find('input[type="radio"][name="radStatus"]').click(function(){_this48.toggleStatus()});this.toggleLogin();this.toggleStatus();if(this.onRenderHandler){this.onRenderHandler()}};RegistrationView.prototype.toggleLogin=function(){var hrLogin=this.$container.find('input[type="radio"][name="radHrLogin"]:checked').val()=="1";var leaveLogin=this.$container.find('input[type="radio"][name="radLeaveLogin"]:checked').val()=="1";var sendWelcome=this.$container.find('input[type="radio"][name="radSendWelcome"]:checked').val()=="1";this.$container.find(".show-login-enabled").toggle(hrLogin);this.$container.find(".show-login-disabled").toggle(!hrLogin);this.$container.find(".show-leave-login-enabled").toggle(leaveLogin);this.$container.find(".show-leave-login-disabled").toggle(!leaveLogin);this.$container.find(".send-welcome-container").toggle(hrLogin||leaveLogin);this.$container.find(".show-welcome-yes").toggle(sendWelcome);this.$container.find(".show-welcome-no").toggle(!sendWelcome);var tabLoginText=null;if(hrLogin&&leaveLogin){tabLoginText=S.tabLogin}else if(hrLogin){tabLoginText=S.tabLoginHr}else if(leaveLogin){var hasHr=this.license&&this.license.hrLicenseStatus=="valid";if(hasHr){tabLoginText=S.tabLoginLeave}else{tabLoginText=S.tabLogin}}else{tabLoginText=S.tabLoginDisabled}this.$container.find(".tab-login").html(tabLoginText)};RegistrationView.prototype.toggleStatus=function(){var status=this.$container.find('input[type="radio"][name="radStatus"]:checked').val();this.$container.find(".show-joining,.show-active,.show-former").hide();if(status=="joining"){this.$container.find(".show-joining").show();this.$container.find(".txtStartDate").datepicker("option","minDate",new Date);this.$container.find(".txtStartDate").datepicker("option","maxDate",null)}else if(status=="active"){this.$container.find(".show-active").show();this.$container.find(".txtStartDate").datepicker("option","minDate",null);this.$container.find(".txtStartDate").datepicker("option","maxDate",new Date)}else if(status=="former"){this.$container.find(".show-former").show();this.$container.find(".txtStartDate").datepicker("option","minDate",null);this.$container.find(".txtStartDate").datepicker("option","maxDate",new Date)}};RegistrationView.prototype.create=function(){var _this49=this;var name=this.$container.find(".txtName").val();var email=this.$container.find(".txtEmail").val();var aduKey=this.$container.find(".ddlAdu").val();var teamKey=this.$container.find(".ddlTeam").val();var empKey=this.$container.find(".ddlEmp").val();var hrLogin=this.$container.find('input[type="radio"][name="radHrLogin"]:checked').val()=="1";var leaveLogin=this.$container.find('input[type="radio"][name="radLeaveLogin"]:checked').val()=="1";var sendWelcome=this.$container.find('input[type="radio"][name="radSendWelcome"]:checked').val()=="1";var jobTitle=this.$container.find(".txtJobTitle").val();var status=this.$container.find('input[type="radio"][name="radStatus"]:checked').val();var startDate=this.$container.find(".txtStartDate").datepicker("getDate");var endDate=null;if(this.$container.find(".txtEndDate").length>0){endDate=this.$container.find(".txtEndDate").datepicker("getDate")}var now=new Date;if(!name){appogee.valert(S.noNameMsg);return false}else if(!appogee.validation.validateFullName(name)){appogee.valert(S.nameInvalidMsg);return false}if(!email){appogee.valert(S.noEmailMsg);return false}else if(!appogee.validation.validateEmail(email)){appogee.valert(S.emailInvalidMsg);return false}else if(!this.emailAvailable){appogee.valert(S.emailUnavailableMsg);return false}if(!teamKey){appogee.valert(S.noTeamMsg);return false}if(!empKey){appogee.valert(S.noEmpMsg);return false}if(status=="joining"){if(startDate&&startDate<=now){appogee.valert(S.startDateInPastMsg);return false}}else if(status=="active"){if(startDate&&startDate>now){appogee.valert(S.startDateInFutureMsg);return false}}else if(status=="former"){if(endDate&&endDate<startDate){appogee.valert(S.endDateBeforeStartDate);return false}if(startDate&&startDate>=now){appogee.valert(S.startDateInPast);return false}else if(endDate&&endDate>=now){appogee.valert(S.endDateInPast);return false}}if(startDate){startDate=appogee.util.date.toISOString(startDate)}else{startDate=null}if(endDate){endDate=appogee.util.date.toISOString(endDate)}else{endDate=null}var logins=[];if(hrLogin){logins.push("hr")}if(leaveLogin){logins.push("leave")}var employee={name:name,email:email,adu:{key:aduKey},team:{key:teamKey},leaveProfile:{key:empKey},jobTitle:jobTitle,status:status,startDate:startDate,endDate:endDate,logins:logins};if(this.preSaveHandler){this.preSaveHandler()}var url="/employees";if(sendWelcome){url+="?sendWelcome=true"}else{url+="?sendWelcome=false"}appogee.api.post(url,employee,function(employee){_this49.license=null;if(_this49.postSaveHandler){_this49.postSaveHandler(employee)}},{artificialDelay:true})};RegistrationView.prototype.checkEmail=function(){var _this50=this;this.emailAvailable=false;var $checkEmailContainer=this.$container.find("#checkEmailContainer");var email=this.$container.find(".txtEmail").val();if(!appogee.validation.validateEmail(email)){$checkEmailContainer.hide();return}var hrLogin=this.$container.find('input[type="radio"][name="radHrLogin"]:checked').val()=="1";var leaveLogin=this.$container.find('input[type="radio"][name="radLeaveLogin"]:checked').val()=="1";var allowLogin=hrLogin||leaveLogin?"1":"0";var data={working:true};$checkEmailContainer.show().html(tmplEmailChecker(data));var url="/admin/reg/check_email?email={0}&login={1}".format(email,allowLogin);appogee.xhr.get(url,function(response){_this50.emailAvailable=response.available;data={available:response.available,reason:response.reason,isCurrentUserAdmin:_this50.currentUser.isAdmin()};$checkEmailContainer.show().html(tmplEmailChecker(data))},{artificialDelay:true})};RegistrationView.prototype.renderBusinessCard=function(){if(!this.businessCardView){return}var detail=[];var name=this.$container.find(".txtName").val();var email=this.$container.find(".txtEmail").val();var jobTitle=this.$container.find(".txtJobTitle").val();var teamKey=this.$container.find(".ddlTeam").val();var team=null;if(teamKey){team=this.$container.find(".ddlTeam option:selected").text()}if(email){detail.push(email)}if(team){detail.push(team)}if(jobTitle){detail.push(jobTitle)}this.businessCardView.render(name,detail)};RegistrationView.prototype.setDefaultAduKey=function(aduKey){this.defaultAduKey=aduKey};return RegistrationView});define("hbs!admin/org/dlg/CreateEmployeeDialog",["hbs/handlebars","templates/helpers/s","templates/helpers/if_gt","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Insufficient Licenses",{name:"s",hash:{},data:data}))+"</h4>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Unfortunately you do not have sufficient licenses to add any more Employees.",{name:"s",hash:{},data:data}))+"</p>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please visit the <a href='/config/licensing'>Licensing Page</a> to update your license.",{name:"s",hash:{},data:data}))+'</p>\n\n\t<div class="text-center">\n\t\t<button class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Close",{name:"s",hash:{},data:data}))+"\n\t\t</button>\n\t</div>\n"},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add Employee",{name:"s",hash:{},data:data}))+'</h4>\n\t\n\t<div class="alert alert-info alert-flat pan-info">\n\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Quickly add an employee to Appogee HR by completing the form below.",{name:"s",hash:{},data:data}))+"</p>\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,'For more advanced options, please use the main <a href="/admin/registration">Registration Page</a>.',{name:"s",hash:{},data:data}))+'</p>\n\t</div>\n\t\n\t<div class="alert alert-info alert-flat pan-working">\n\t\t<p class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Registering Employee, please wait ...",{name:"s",hash:{},data:data}))+'</p>\n\t</div>\n\t\n\t<div class="alert alert-success alert-flat pan-success">\n\t\t<p>\n\t\t\t<i class="glyphicon glyphicon-ok"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee was successfully registered.",{name:"s",hash:{},data:data}))+'\n\t\t</p>\n\t</div>\n\t\n\t<div class="appogee-tabs">\n\t\t<div class="tab-header">\n\t\t\t<a href="#tab_details" class="subtab selected">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Main Details",{name:"s",hash:{},data:data}))+'</a>\n\t\t\t<a href="#tab_optional" class="subtab">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Optional",{name:"s",hash:{},data:data}))+'</a>\n\t\t\t<a href="#tab_login" class="subtab tab-login">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Login (Disabled)",{name:"s",hash:{},data:data}))+'</a>\n\t\t</div>\n\t\t\n\t\t<div class="tab-panel selected" data-tab="tab_details">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-sm-6">\n\t\t\t\t\t<div class="form-group mandatory">\n\t\t\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Full Name",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t\t\t<input type="text" class="form-control input-sm txtName" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-sm-6">\n\t\t\t\t\t<div class="form-group mandatory">\n\t\t\t\t\t\t<label class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email Address",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t\t\t<label class="pull-right checking-email-availability" id="checkEmailContainer"></label>\n\t\t\t\t\t\t<input type="text" class="form-control input-sm txtEmail" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n'+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.adus:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:1},fn:this.program(4,data,0,blockParams,depths),inverse:this.program(8,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\n\t\t\t<div class="form-group mandatory">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<select class="form-control input-sm ddlEmp">\n\t\t\t\t\t<option>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="tab-panel" data-tab="tab_optional">\n\t\t\t<div class="form-group">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Job Title",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<input type="text" class="form-control input-sm txtJobTitle" />\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee Status",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div>\n\t\t\t\t\t<div class="radio-inline">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="radio" name="radStatus" value="joining" />\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Joining",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="radio-inline">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="radio" name="radStatus" value="active" checked="checked" />\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Active",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="help-block show-joining">\n\t\t\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"An employee who is due to start at the company.",{name:"s",hash:{},data:data}))+'</em>\n\t\t\t\t</div>\n\t\t\t\t<div class="help-block show-active">\n\t\t\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"A active employee who is already employed at the company.",{name:"s",hash:{},data:data}))+'</em>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employment Start Date",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div class="help-block show-joining">\n\t\t\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enter the employee start date. Their status will change to Active on this date.",{name:"s",hash:{},data:data}))+'</em>\n\t\t\t\t</div>\n\t\t\t\t<div class="help-block show-active">\n\t\t\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enter the date the employee started at the company.",{name:"s",hash:{},data:data}))+'</em>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<input type="text" class="form-control input-sm datepicker txtStartDate" />\n\t\t\t\t\t\n\t\t\t\t\t\x3c!-- \n\t\t\t\t\t<div class="form-inline">\n\t\t\t\t\t\t<select class="form-control input-sm w75">\n\t\t\t\t\t\t\t<option value="">21</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<select class="form-control input-sm w100">\n\t\t\t\t\t\t\t<option value="">September</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<select class="form-control input-sm w100">\n\t\t\t\t\t\t\t<option value="">2016</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t\t--\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="tab-panel panel-login" data-tab="tab_login">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hasHr:depth0,{name:"if",hash:{},fn:this.program(10,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Activate Appogee Leave?",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div>\n\t\t\t\t\t<div class="radio-inline">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="radio" name="radLeaveLogin" value="1" checked="checked" />\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enabled",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="radio-inline">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="radio" name="radLeaveLogin" value="0" />\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disabled",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="help-block show-leave-login-enabled">\n\t\t\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee will be able to log in to Appogee Leave and submit Leave Requests to their team manager.",{name:"s",hash:{},data:data}))+'</em>\n\t\t\t\t</div>\n\t\t\t\t<div class="help-block show-leave-login-disabled">\n\t\t\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee will not be able to log in to Appogee Leave. This can be enabled later.",{name:"s",hash:{},data:data}))+'</em>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group send-welcome-container">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Send Welcome Email?",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div>\n\t\t\t\t\t<div class="radio-inline">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="radio" name="radSendWelcome" value="1" checked="checked" />\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Yes",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="radio-inline">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="radio" name="radSendWelcome" value="0" />\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="help-block show-welcome-yes">\n\t\t\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"A Welcome Email will be sent to the Employee after registration, which includes a brief overview of Appogee HR and a link to log in.",{name:"s",hash:{},data:data}))+'</em>\n\t\t\t\t</div>\n\t\t\t\t<div class="help-block show-welcome-no">\n\t\t\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"NOTE: Without the Welcome Email, the employee may not be able to log in. For security reasons, the employee may still be sent a Verification Email.",{name:"s",hash:{},data:data}))+'</em>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="buttons">\n\t\t<div class="pull-left">\n\t\t\t<button class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="pull-right">\n\t\t\t<label class="checkbox-inline">\n\t\t\t\t<input type="checkbox" class="chkCreateAnother" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.createAnother:depth0,{name:"if",hash:{},fn:this.program(12,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Another",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<button class="btn btn-sm btn-primary w-min-100 btnCreate">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Register Employee",{name:"s",hash:{},data:data}))+'\n\t\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="clearfix"></div>\n\t</div>\n'},4:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t\t<div class="form-group mandatory">\n\t\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t\t<select class="form-control input-sm ddlAdu">\n\t\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.adus:depth0,{name:"each",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="form-group mandatory">\n\t\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t\t<select class="form-control input-sm ddlTeam">\n\t\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select ADU ...",{name:"s",hash:{},data:data}))+"</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n"},5:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].adu:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(6,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},6:function(depth0,helpers,partials,data){return'selected="selected"'},8:function(depth0,helpers,partials,data){return'\t\t\t\t<div class="form-group mandatory">\n\t\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t\t<select class="form-control input-sm ddlTeam">\n\t\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n"},10:function(depth0,helpers,partials,data){return'\t\t\t<div class="form-group">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Appogee HR Self Service",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div>\n\t\t\t\t\t<div class="radio-inline">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="radio" name="radHrLogin" value="1" checked="checked" />\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enabled",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="radio-inline">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="radio" name="radHrLogin" value="0" />\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disabled",{name:"s",hash:{},data:data
}))+'\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="help-block show-login-enabled">\n\t\t\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee will be able to log in to Appogee HR and access Self Service functionality.",{name:"s",hash:{},data:data}))+'</em>\n\t\t\t\t</div>\n\t\t\t\t<div class="help-block show-login-disabled">\n\t\t\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee will not be able to log in, or have access to Appogee HR Self Service functionality.",{name:"s",hash:{},data:data}))+"</em>\n\t\t\t\t</div>\n\t\t\t</div>\n"},12:function(depth0,helpers,partials,data){return'checked="checked"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.insufficentLicenses:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.program(3,data,0,blockParams,depths),data:data}))!=null?stack1:""},useData:true,useDepths:true});Handlebars.registerPartial("admin/org/dlg/CreateEmployeeDialog",t);return t});define("admin/org/dlg/CreateEmployeeDialog",["jquery","appogee","admin/reg/util","admin/reg/views/ManualView","hbs!admin/org/dlg/CreateEmployeeDialog","jquery.appogee.tabs","jquery.appogee.datePicker"],function($,appogee,util,ManualView,tmpl){"use strict";var $dlg=null;var Dialog=function(){var _this51=this;if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.createAnother=false;this.defaultTeamKey=null;this.view=new ManualView($dlg,tmpl);this.view.isDialog=true;this.view.onPreSave(function(){_this51.createAnother=$dlg.find(".chkCreateAnother").prop("checked");$dlg.find("input,select,button,textarea").attr("disabled",true);$dlg.removeClass("step1 step2 step3").addClass("step2")});this.view.onPostSave(function(employee){$dlg.removeClass("step1 step2 step3").addClass("step3");if(_this51.onCreateHandlers){_this51.onCreateHandlers.forEach(function(h){return h(employee)})}setTimeout(function(){if(_this51.createAnother){_this51.render()}else{_this51.close()}},1e3)});this.view.onRender(function(){$dlg.find(".btnClose").click(function(){_this51.close()})});this.onCloseHandlers=[];this.onCreateHandlers=[];this.onUpdateHandlers=[]};Dialog.prototype.onClose=function(handler){this.onCloseHandlers.push(handler)};Dialog.prototype.onCreate=function(handler){this.onCreateHandlers.push(handler)};Dialog.prototype.onUpdate=function(handler){this.onUpdateHandlers.push(handler)};Dialog.prototype.setDefaultAduKey=function(aduKey){if(aduKey){this.view.setDefaultAduKey(aduKey)}};Dialog.prototype.setDefaultTeamKey=function(teamKey){if(teamKey){this.defaultTeamKey=teamKey}};Dialog.prototype.render=function(){this.view.render({createAnother:this.createAnother,defaultTeamKey:this.defaultTeamKey});$dlg.removeClass("step1 step2 step3").addClass("step1")};Dialog.prototype.show=function(){var _this52=this;this.dlg=new appogee.Dialog($dlg,{dialogClass:"dlg-create dlg-create-employee",width:600,onBeforeClose:function(){_this52.onCloseHandlers.forEach(function(handler){return handler()})}});this.dlg.clearButtons();this.render();this.dlg.show()};Dialog.prototype.close=function(){this.dlg.hide()};return Dialog});define("admin/app_util",["jquery","appogee","admin/org/dlg/CreateAduDialog","admin/org/dlg/EditAduDialog","admin/org/dlg/CreateTeamDialog","admin/org/dlg/EditTeamDialog","admin/org/dlg/CreateEmployeeDialog"],function($,appogee,CreateAduDialog,EditAduDialog,CreateTeamDialog,EditTeamDialog,CreateEmployeeDialog,EditEmployeeDialog){"use strict";return{initApp:function(app){var module=app.module;var currentUser=app.getCurrentUser();var isAduManager=currentUser&&currentUser.isAduManager();module.createAdu=function(setRoute){var _this53=this;if(!isAduManager){return}if(setRoute!==false){setRoute=true}var url;if(setRoute){url="!/division";module.router.navigate(url,{trigger:true});return}var dlg=new CreateAduDialog;dlg.onClose(function(){module.router.navigate("")});dlg.onCreate(function(adu){if(_this53.onAduCreated){_this53.onAduCreated(adu)}});dlg.show()};module.editAdu=function(key,setRoute){var _this54=this;if(!isAduManager){return}if(setRoute!==false){setRoute=true}var url;if(setRoute){url="!/division/{0}".format(key);module.router.navigate(url,{trigger:true});return}url="/adus/{0}".format(key);appogee.api.get(url,function(adu){var dlg=new EditAduDialog(adu);dlg.onClose(function(){module.router.navigate("")});dlg.onUpdate(function(adu){if(_this54.onAduUpdated){_this54.onAduUpdated(adu)}});dlg.onDelete(function(adu){if(_this54.onAduDeleted){_this54.onAduDeleted(adu)}});dlg.show()},{artificialDelay:false})};module.createTeam=function(setRoute,options){var _this55=this;options=$.extend({aduKey:null},options||{});if(setRoute!==false){setRoute=true}var url;if(setRoute){url="!/team";if(options.aduKey){url+="/adu{0}".format(options.aduKey)}module.router.navigate(url,{trigger:true});return}var dlg=new CreateTeamDialog;if(options.aduKey){dlg.setDefaultAduKey(options.aduKey)}dlg.onClose(function(){module.router.navigate("")});dlg.onCreate(function(team){if(_this55.onTeamCreated){_this55.onTeamCreated(team)}});dlg.show()};module.editTeam=function(key,setRoute){var _this56=this;if(setRoute!==false){setRoute=true}var url;if(setRoute){url="!/team/{0}".format(key);module.router.navigate(url,{trigger:true});return}url="/teams/{0}".format(key);appogee.api.get(url,function(team){var dlg=new EditTeamDialog(team);dlg.onClose(function(){module.router.navigate("")});dlg.onUpdate(function(team){if(_this56.onTeamUpdated){_this56.onTeamUpdated(team)}});dlg.onDelete(function(team){if(_this56.onTeamDeleted){_this56.onTeamDeleted(team)}});dlg.show()},{artificialDelay:false})};module.createEmployee=function(setRoute,options){var _this57=this;options=$.extend({aduKey:null,teamKey:null},options||{});if(setRoute!==false){setRoute=true}var url;if(setRoute){url="!/employee";if(options.teamKey){url+="/team/{0}".format(options.teamKey)}module.router.navigate(url,{trigger:true});return}var dlg=new CreateEmployeeDialog;if(options.aduKey){dlg.setDefaultAduKey(options.aduKey)}if(options.teamKey){dlg.setDefaultTeamKey(options.teamKey)}dlg.onClose(function(){module.router.navigate("")});dlg.onCreate(function(employee){if(_this57.onEmployeeCreated){_this57.onEmployeeCreated(employee)}});dlg.show()};module.editEmployee=function(key,setRoute){var _this58=this;if(setRoute!==false){setRoute=true}var url;if(setRoute){url="!/employees/{0}".format(key);module.router.navigate(url,{trigger:true});return}url="/employees/{0}".format(key);appogee.api.get(url,function(employee){var dlg=new EditEmployeeDialog(employee);dlg.onClose(function(){module.router.navigate("")});dlg.onUpdate(function(employee){if(_this58.onEmployeeUpdated){_this58.onEmployeeUpdated(employee)}});dlg.onDelete(function(employee){if(_this58.onEmployeeDeleted){_this58.onEmployeeDeleted(employee)}});dlg.show()},{artificialDelay:false})};if(isAduManager){app.addRoute("!(/division)",function(){module.createAdu(false)});app.addRoute("!(/division/:key)",function(key){module.editAdu(key,false)})}app.addRoute("!(/team)",function(){module.createTeam(false)});app.addRoute("!(/divisions/:aduKey/team)",function(aduKey){module.createTeam(false,{aduKey:aduKey})});app.addRoute("!(/employee)",function(){module.createEmployee(false)});app.addRoute("!(/teams/:teamKey/employee)",function(teamKey){module.createEmployee(false,{teamKey:teamKey})});app.addRoute("!(/divisions/:aduKey/teams/:teamKey/employee)",function(aduKey,teamKey){module.createEmployee(false,{aduKey:aduKey,teamKey:teamKey})})}}});define("enums/RequestStatus",["appogee"],function(appogee){"use strict";var S,R={open:"Open",pending:"Pending",approved:"Approved",rejected:"Rejected",cancellationPending:"Cancellation Pending",cancelled:"Cancelled"};var RequestStatus={Open:"open",Pending:"pending",Approved:"approved",Rejected:"rejected",CancellationPending:"cancellation_pending",Cancelled:"cancelled",init:function(){if(!S){S=appogee.getStrings("RequestStatus",R)}},toString:function(s){this.init();if(s=="open"){return S.open}else if(s=="pending"){return S.pending}else if(s=="approved"){return S.approved}else if(s=="rejected"){return S.rejected}else if(s=="cancellation_pending"){return S.cancellationPending}else if(s=="cancelled"){return S.cancelled}}};return RequestStatus});define("enums/RequestType",[],function(){"use strict";var RequestType={Leave:"leave",Sick:"sick",Toil:"toil",Custom1:"custom1",Custom2:"custom2"};return RequestType});define("enums/RequestDayType",["appogee"],function(appogee){"use strict";var S,R={morning:"Morning",afternoon:"Afternoon",fullDay:"Full Day",nonWorkingDay:"Non Working Day",publicHoliday:"Public Holiday",publicHolidayMorning:"Public Holiday (Morning)",publicHolidayAfternoon:"Public Holiday (Afternoon)"};var RequestDayType={Morning:"morning",Afternoon:"afternoon",FullDay:"full_day",NonWorkingDay:"non_working_day",PublicHoliday:"public_holiday",PublicHolidayMorning:"public_holiday_morning",PublicHolidayAfternoon:"public_holiday_afternoon",init:function(){if(!S){S=appogee.getStrings("RequestDayType",R)}},toString:function(s){this.init();if(s=="morning"){return S.morning}else if(s=="afternoon"){return S.afternoon}else if(s=="full_day"){return S.fullDay}else if(s=="non_working_day"){return S.nonWorkingDay}else if(s=="public_holiday"){return S.publicHoliday}else if(s=="public_holiday_morning"){return S.publicHolidayMorning}else if(s=="public_holiday_afternoon"){return S.publicHolidayAfternoon}}};return RequestDayType});define("leave/models/Employee",["jquery","appogee","enums/Weekday"],function($,appogee,Weekday){"use strict";var Employee=function(employee){$.extend(true,this,employee);this.raw=employee};Employee.prototype.isValidLeaveYear=function(year){return this.activeLeaveYears.indexOf(year)>-1};Employee.prototype.getWorkingDays=function(){var workingDays=[];if(this.autoCalculate){for(var i=0;i<this.workingHours.length;i++){var day=this.workingHours[i];if(day.ah>0||day.mh>0){if(i==6){workingDays.push(0)}else{workingDays.push(i+1)}}}}else{workingDays=[0,1,2,3,4,5,6]}return workingDays};Employee.prototype.getNextWorkingDay=function(date){var d=new Date(date.getTime());if(this.autoCalculate){for(var i=0;i<10;i++){d.setDate(d.getDate()+1);if(this.getFullDayWorkingHours(d)>0){return d}}}d=new Date(date.getTime());d.setDate(d.getDate()+1);return d};Employee.prototype.getMorningWorkingHours=function(d){var hours=0;if(this.autoCalculate){var pythonWeekday=appogee.util.getPythonWeekday(d);hours=this.workingHours[pythonWeekday].mh}else{hours=this.hoursInDay/2}return hours};Employee.prototype.getAfternoonWorkingHours=function(d){var hours=0;if(this.autoCalculate){var pythonWeekday=appogee.util.getPythonWeekday(d);hours=this.workingHours[pythonWeekday].ah}else{hours=this.hoursInDay/2}return hours};Employee.prototype.isWorkingDay=function(d){var hours=this.getFullDayWorkingHours(d);return hours>0};Employee.prototype.getFullDayWorkingHours=function(d){var hours=0;if(this.autoCalculate){var pythonWeekday=appogee.util.getPythonWeekday(d);hours=this.workingHours[pythonWeekday].mh+this.workingHours[pythonWeekday].ah}else{hours=this.hoursInDay}return hours};Employee.prototype.getWeekdayArray=function(){var weekdays=[];for(var i=0;i<7;i++){var weekday=this.startWeekday+i;weekday=weekday>6?weekday-7:weekday;weekdays.push(Weekday.toJsString(weekday))}return weekdays};Employee.prototype.hasApprovers=function(requestType){var validApprovalFlow=true;if(requestType=="leave"){validApprovalFlow=this.team.validLeaveApprovalFlow}else if(requestType=="sick"){validApprovalFlow=this.team.validSickApprovalFlow}else if(requestType=="toil"){validApprovalFlow=this.team.validToilApprovalFlow}return validApprovalFlow};return Employee});define("leave/models/Allowance",["jquery","appogee","enums/MonthAbbr"],function($,appogee,MonthAbbr){"use strict";var Allowance=function(allowance){this.raw=allowance;this.reset()};Allowance.prototype.reset=function(){$.extend(true,this,this.raw);this._startDate=this.startDate;this._endDate=this.endDate;this.startDate=appogee.util.date.fromISOString(this._startDate);this.endDate=appogee.util.date.fromISOString(this._endDate);this._setDays();this.name=this._computeName()};Allowance.prototype._setDays=function(type){if(type===undefined){this._setDays("leave");this._setDays("sick");this._setDays("custom1");this._setDays("custom2");return}this[type].annualDays=appogee.util.h2d(this[type].annualHours,this.hoursInDay);this[type].accruedDays=appogee.util.h2d(this[type].accruedHours,this.hoursInDay);this[type].adjustDays=appogee.util.h2d(this[type].adjust,this.hoursInDay);this[type].approvedDays=appogee.util.h2d(this[type].approved,this.hoursInDay);this[type].pendingDays=appogee.util.h2d(this[type].pending,this.hoursInDay);this[type].carryOverDays=appogee.util.h2d(this[type].carryOver,this.hoursInDay);this[type].remainingDays=appogee.util.h2d(this[type].remaining,this.hoursInDay);this[type].remainingExPendingDays=appogee.util.h2d(this[type].remainingExPending,this.hoursInDay);this[type].toilDays=appogee.util.h2d(this[type].toil,this.hoursInDay);this[type].toilAdjustDays=appogee.util.h2d(this[type].toilAdjust,this.hoursInDay);this[type].toilTotalDays=appogee.util.h2d(this[type].toilTotal,this.hoursInDay);this[type].totalDays=appogee.util.h2d(this[type].total,this.hoursInDay)};Allowance.prototype._computeName=function(){var name="{0} {1} - {2} {3}".format(MonthAbbr.toString(this.startDate.getMonth()+1),this.startDate.getFullYear(),MonthAbbr.toString(this.endDate.getMonth()+1),this.endDate.getFullYear());return name};Allowance.fromList=function(allowances){return allowances.map(function(a){return new Allowance(a)})};Allowance.prototype.setAdjust=function(type,hours){this[type].adjust=hours;this._recalculate(type)};Allowance.prototype.setCarryOver=function(type,hours){this[type].carryOver=hours;this._recalculate(type)};Allowance.prototype.setToilAdjust=function(type,hours){this[type].toilAdjust=hours;this._recalculate(type)};Allowance.prototype._recalculate=function(type){if(type===undefined){this._recalculate("leave");this._recalculate("sick");this._recalculate("custom1");this._recalculate("custom2");return}var toilAdjust=this[type].toilAdjust||0;var toilTotal=this[type].toil+toilAdjust;this[type].toilTotal=toilTotal;var total=appogee.util.round(this[type].annualHours+this[type].accruedHours+this[type].adjust+this[type].carryOver+toilTotal,2);this[type].total=total;this[type].remainingExPending=appogee.util.round(total-this[type].approved);this[type].remaining=appogee.util.round(this[type].remainingExPending-this[type].pending);this._setDays(type)};Allowance.prototype.toJSON=function(){return{key:this.key,leave:{toilAdjust:this.leave.toilAdjust,adjust:this.leave.adjust,carryOver:this.leave.carryOver},sick:{adjust:this.sick.adjust,carryOver:this.sick.carryOver},custom1:{adjust:this.custom1.adjust,carryOver:this.custom1.carryOver},custom2:{adjust:this.custom2.adjust,carryOver:this.custom2.carryOver}}};return Allowance});define("leave/models/PublicHoliday",["jquery","appogee"],function($,appogee){"use strict";var PublicHoliday=function(publicHoliday){$.extend(true,this,publicHoliday);this.raw=publicHoliday;this._date=this.date;this.date=null;if(this._date){this.date=appogee.util.date.fromISOString(this._date)}this.morningOnly=this.morning&&!this.afternoon;this.afternoonOnly=this.afternoon&&!this.morning;this.fullDay=this.morning&&this.afternoon};return PublicHoliday});define("leave/service",["jquery","appogee","leave/models/Employee","leave/models/Allowance","leave/models/Request","leave/models/PublicHoliday"],function($,appogee,Employee,Allowance,Request,PublicHoliday){"use strict";var CACHE={};var PENDING_CALLBACKS={};var BATCHES=[];var BATCH_STATUS_NEW=0;var BATCH_STATUS_PENDING=1;var BATCH_STATUS_COMPLETE=2;var Batch=function(options){this.options=options||{};this.callback=null;this.requests=[];this.status=BATCH_STATUS_NEW};Batch.prototype.check=function(url,response){if(url){this.requests.forEach(function(r){if(r.url===url&&r.response===null){r.response=response}})}if(this.status==BATCH_STATUS_PENDING){var responses=[];this.requests.forEach(function(r){if(r.response===null){return}else{responses.push(r.response)}});if(this.requests.length===responses.length){this.status=BATCH_STATUS_COMPLETE;this.callback.apply(this,responses)}}};Batch.prototype.wait=function(callback){this.callback=callback;this.status=BATCH_STATUS_PENDING;this.check()};Batch.prototype.listLeaveTypes=function(options){options=$.extend({},this.options,options||{});options.batch=this;listLeaveTypes(null,options)};Batch.prototype.listSickTypes=function(options){options=$.extend({},this.options,options||{});options.batch=this;listSickTypes(null,options)};Batch.prototype.listPublicHolidays=function(profile,startDate,endDate){listPublicHolidays(profile,startDate,endDate,null,{batch:this})};Batch.prototype.getEmployeeLeaveProfile=function(employeeKey,options){options=$.extend({},this.options,options||{});options.batch=this;getEmployeeLeaveProfile(employeeKey,null,options)};Batch.prototype.listEmployeeAllowances=function(employeeKey,options){options=$.extend({},this.options,options||{});options.batch=this;listEmployeeAllowances(employeeKey,null,options)};Batch.prototype.listEmployeeRequests=function(employeeKey,startDate,endDate,params,options){options=$.extend({},this.options,options||{});options.batch=this;listEmployeeRequests(employeeKey,startDate,endDate,params,null,options)};Batch.prototype.listTeamRequests=function(teamKey,startDate,endDate,params,options){options=$.extend({},this.options,options||{});options.batch=this;listTeamRequests(teamKey,startDate,endDate,params,null,options)};Batch.prototype.listTeamCalRequests=function(teamKey,startDate,endDate,params,options){options=$.extend({},this.options,options||{});options.batch=this;listTeamCalRequests(teamKey,startDate,endDate,params,null,options)};function _fromCache(key){if(CACHE.hasOwnProperty(key)){return CACHE[key]}}function addToCache(key,value){_toCache(key,value)}function _toCache(key,value){CACHE[key]=value}function listLeaveTypes(callback,options){var url="/leave-types";_get(url,callback,options)}function listSickTypes(callback,options){var url="/sick-types";_get(url,callback,options)}function listPublicHolidays(profile,startDate,endDate,callback,options){var url="/public-holidays/{0}".format(profile);var args=[];if(startDate){if(typeof startDate=="object"){startDate=appogee.util.date.toISOString(startDate)}args.push("startDate={0}".format(startDate))}if(endDate){if(typeof endDate=="object"){endDate=appogee.util.date.toISOString(endDate)}args.push("endDate={0}".format(endDate))}if(args.length>0){url+="?"+args.join("&")}var internalOptions={instantiateClass:PublicHoliday};_get(url,callback,options,internalOptions)}function getEmployeeLeaveProfile(employeeKey,callback,options){var url="/employees/{0}?projection=leave-profile".format(employeeKey);var internalOptions={instantiateClass:Employee};_get(url,callback,options,internalOptions)}function listEmployeeAllowances(employeeKey,callback,options){var url="/employees/{0}/allowances".format(employeeKey);var internalOptions={instantiateClass:Allowance};_get(url,callback,options,internalOptions)}function listEmployeeRequests(employeeKey,startDate,endDate,params,callback,options){if(typeof startDate=="object"){startDate=appogee.util.date.toISOString(startDate)}if(typeof endDate=="object"){endDate=appogee.util.date.toISOString(endDate)}if(!Request){Request=require("leave/models/Request")}var internalOptions={instantiateClass:Request};if(!params){params={}}params.startDate=startDate;params.endDate=endDate;var url="/employees/{0}/requests".format(employeeKey);var urlParams=$.param(params);url+="?"+urlParams;_get(url,callback,options,internalOptions)}function listTeamRequests(teamKey,startDate,endDate,params,callback,options){if(typeof startDate=="object"){startDate=appogee.util.date.toISOString(startDate)}if(typeof endDate=="object"){endDate=appogee.util.date.toISOString(endDate)}if(!Request){Request=require("leave/models/Request")}var internalOptions={instantiateClass:Request};if(!params){params={}}params.startDate=startDate;params.endDate=endDate;var url="/teams/{0}/requests".format(teamKey);var urlParams=$.param(params);url+="?"+urlParams;_get(url,callback,options,internalOptions)}function listAduRequests(aduKey,startDate,endDate,params,callback,options){if(typeof startDate=="object"){startDate=appogee.util.date.toISOString(startDate)}if(typeof endDate=="object"){endDate=appogee.util.date.toISOString(endDate)}if(!Request){Request=require("leave/models/Request")}var internalOptions={instantiateClass:Request};if(!params){params={}}params.startDate=startDate;params.endDate=endDate;params.aduKey=aduKey;var url="/requests";var urlParams=$.param(params);url+="?"+urlParams;_get(url,callback,options,internalOptions)}function listTeamCalRequests(teamKey,startDate,endDate,params,callback,options){if(typeof startDate=="object"){startDate=appogee.util.date.toISOString(startDate)}if(typeof endDate=="object"){endDate=appogee.util.date.toISOString(endDate)}if(!Request){Request=require("leave/models/Request")}var internalOptions={instantiateClass:Request};if(!params){params={}}params.startDate=startDate;params.endDate=endDate;var url="/team-cals/{0}/requests".format(teamKey);var urlParams=$.param(params);url+="?"+urlParams;_get(url,callback,options,internalOptions)}function _get(url,callback,options,internalOptions){options=$.extend({force:false,cache:true,batch:null,artificialDelay:false},options||{});internalOptions=$.extend({instantiateClass:null},internalOptions||{});if(options.batch){options.batch.requests.push({url:url,response:null})}var cacheKey=url;if(PENDING_CALLBACKS.hasOwnProperty(cacheKey)){if(callback){console.log("deferring call to "+url);PENDING_CALLBACKS[cacheKey].push(callback)}return}if(!options.force){var response=_fromCache(cacheKey);if(response){if(callback){callback(response)}_checkBatches(url,response);return}}var xhrOptions={};if(options.hasOwnProperty("artificialDelay")){xhrOptions.artificialDelay=options.artificialDelay}PENDING_CALLBACKS[cacheKey]=[];appogee.api.get(url,function(response){var objects=response.items;if(response.items===undefined){objects=[response]}if(internalOptions.instantiateClass){objects=objects.map(function(object){return new internalOptions.instantiateClass(object)})}if(response.items===undefined){response=objects[0]}else{response=objects}if(options.cache){_toCache(cacheKey,response)}if(callback){callback(response)}PENDING_CALLBACKS[cacheKey].forEach(function(callback){console.log("popping call to "+cacheKey);callback(response)});delete PENDING_CALLBACKS[cacheKey];_checkBatches(url,response)},xhrOptions)}function startBatch(options){var batch=new Batch(options);BATCHES.push(batch);return batch}function _checkBatches(url,response){BATCHES.forEach(function(b){b.check(url,response)})}return{addToCache:addToCache,getEmployeeLeaveProfile:getEmployeeLeaveProfile,listEmployeeAllowances:listEmployeeAllowances,listEmployeeRequests:listEmployeeRequests,listAduRequests:listAduRequests,listTeamRequests:listTeamRequests,listTeamCalRequests:listTeamCalRequests,listPublicHolidays:listPublicHolidays,listLeaveTypes:listLeaveTypes,listSickTypes:listSickTypes,startBatch:startBatch,createBatch:startBatch}});define("leave/models/Request",["jquery","underscore","appogee","enums/RequestStatus","enums/RequestType","enums/RequestDayType","leave/service"],function($,_,appogee,RequestStatus,RequestType,RequestDayType,service){"use strict";var ONE_YEAR_IN_MS=365*24*60*60*1e3;var Request=function(request){request=$.extend({computedHours:0,hours:0,includeBreak:true,ooo:{enabled:false,subject:"",body:"",contactsOnly:false,domainOnly:false}},request||{});this.raw=request;this.reset();this.recalculating=false;this.onRecalculateCallbacks=[]};Request.prototype.isLeave=function(){return this.type==RequestType.Leave};Request.prototype.isCustom1=function(){return this.type==RequestType.Custom1};Request.prototype.isCustom2=function(){return this.type==RequestType.Custom2};Request.prototype.isSick=function(){return this.type==RequestType.Sick};Request.prototype.isToil=function(){return this.type==RequestType.Toil};Request.prototype.isOpen=function(){return this.status==RequestStatus.Open};Request.prototype.isPending=function(){return this.status==RequestStatus.Pending};Request.prototype.isApproved=function(){return this.status==RequestStatus.Approved};Request.prototype.isRejected=function(){return this.status==RequestStatus.Rejected};Request.prototype.isCancelled=function(){return this.status==RequestStatus.Cancelled};Request.prototype.isCancellationPending=function(){return this.status==RequestStatus.CancellationPending};Request.prototype.isActive=function(){return this.isOpen()||this.isPending()||this.isApproved()||this.isCancellationPending()};Request.prototype.reset=function(){$.extend(true,this,this.raw);this._startDate=this.startDate;this._endDate=this.endDate;this.startDate=null;this.endDate=null;if(this._startDate){this.startDate=appogee.util.date.fromISOString(this._startDate)}if(this._endDate){this.endDate=appogee.util.date.fromISOString(this._endDate)}this.setBreakdown(this.breakdown);this.overrideComputedHours=this.hours!=this.computedHours};Request.prototype.onRecalculate=function(callback){this.onRecalculateCallbacks.push(callback)};Request.prototype.cancelOverrideHours=function(){this.overrideComputedHours=false;this.hours=this.computedHours};Request.prototype.calculateHours=function(){if(!this.employee.autoCalculate){return this.employee.hoursInDay}var startTime=this.startTime;var endTime=this.endTime;var dtStart=new Date("01/01/1970 "+startTime);var dtEnd=new Date("01/01/1970 "+endTime);var diffInMs=Math.abs(dtEnd-dtStart);if(this.includeBreak){var breakInMs=this.breakTime*6e4;var diffInclBreak=diffInMs-breakInMs;var diffInHours=diffInclBreak/36e5;return diffInHours}else{var diffInHours=diffInMs/36e5;return diffInHours}};Request.prototype.getHours=function(){if(this.overrideComputedHours){return this.hours}else{return this.computedHours}};Request.prototype.getDays=function(){var hours=this.getHours();var days=hours/this.employee.hoursInDay;return days};Request.prototype.setDays=function(days){var hours=days*this.employee.hoursInDay;this.overrideComputedHours=true;this.hours=hours};Request.prototype.setHours=function(hours){this.overrideComputedHours=true;this.hours=hours};Request.prototype.setBreakdown=function(breakdown){var _this59=this;var breakdownByDate={};if(this.startDate&&this.endDate&&breakdown){var i=0;this.iterateDates(function(d){var strDate=appogee.util.date.toISOString(d);breakdownByDate[strDate]=_this59.breakdown[i++]});this._breakdown=breakdown;this.breakdown=breakdownByDate}this._breakdown=breakdown;this.breakdown=breakdownByDate};Request.prototype.getBreakdown=function(){var _this60=this;if(this.startDate&&this.endDate){var breakdown=[];this.iterateDates(function(d){var detail=_this60.getDetailByDate(d);breakdown.push(detail)});return breakdown}};Request.prototype.iterateDates=function(callback){var d=new Date(this.startDate.getTime());while(d<=this.endDate){callback(d);d.setDate(d.getDate()+1)}};Request.prototype.iterate=function(callback){var _this61=this;this.iterateDates(function(date){var detail=_this61.getDetailByDate(date);callback(date,detail)})};Request.prototype.sayHi=function(){console.log("hey dude")};Request.prototype.setStartDate=function(startDate){if(!startDate){return}this.startDate=startDate;if(!this.endDate||this.endDate<startDate){this.endDate=new Date(startDate.getTime())}else if(this.endDate&&this.endDate.getTime()-this.startDate.getTime()>ONE_YEAR_IN_MS){this.endDate=new Date(this.startDate.getTime())}if(!this.isToil()){this.cancelOverrideHours()}};Request.prototype.setEndDate=function(endDate){if(!endDate){return}this.endDate=endDate;if(!this.startDate||this.startDate>endDate){this.startDate=new Date(endDate.getTime())}else if(this.startDate&&this.endDate.getTime()-this.startDate.getTime()>ONE_YEAR_IN_MS){this.startDate=new Date(this.endDate.getTime())}if(!this.isToil()){this.cancelOverrideHours()}};Request.prototype.setDates=function(startDate,endDate){if(!startDate||!endDate){throw new Error("dates cannot be null")}if(startDate>endDate){throw new Error("start date cannot be greater then end date")}this.startDate=startDate;this.endDate=endDate};Request.prototype.fetchEmployee=function(){};Request.prototype.setEmployee=function(employee){this.employee=employee};Request.prototype.setCategory=function(category){if(this.isLeave()||this.isCustom1()||this.isCustom2()){if(category.type!="leave"){throw"Invalid category"}this.deducted=true;if(this.employee.custom1CategoryKey==category.key){this.type=RequestType.Custom1}else if(this.employee.custom2CategoryKey==category.key){this.type=RequestType.Custom2}else{this.deducted=category.deducted;this.type=RequestType.Leave}}else if(this.isSick()){this.deducted=true;if(category.type!="sick"){throw"Invalid category"}}else{throw"TOIL requests do not have a category"}this.category=category};Request.prototype.recalculate=function(reset){var _this62=this;if(!this.startDate||!this.endDate){return}if(reset){this.breakdown={}}this.recalculating=true;var batch=service.startBatch();var s=null;var e=null;batch.listPublicHolidays(this.employee.holProfile,s,e);batch.wait(function(publicHolidays){_this62.publicHolidays=publicHolidays;_this62.iterateDates(function(date){var strDate=appogee.util.date.toISOString(date);var fullDayHours=_this62.employee.getFullDayWorkingHours(date);var morningHours=_this62.employee.getMorningWorkingHours(date);var afternoonHours=_this62.employee.getAfternoonWorkingHours(date);var publicHoliday=_.find(_this62.publicHolidays,function(ph){return ph.date.getTime()==date.getTime()});if(publicHoliday){if(publicHoliday.fullDay){_this62.breakdown[strDate]={type:RequestDayType.PublicHoliday,hours:0,description:publicHoliday.name}}else if(publicHoliday.morningOnly){_this62.breakdown[strDate]={type:RequestDayType.PublicHolidayMorning,hours:afternoonHours,description:publicHoliday.name}}else if(publicHoliday.afternoonOnly){_this62.breakdown[strDate]={type:RequestDayType.PublicHolidayAfternoon,hours:morningHours,description:publicHoliday.name}}}else if(!_this62.breakdown.hasOwnProperty(strDate)){if(morningHours>0&&afternoonHours>0){_this62.breakdown[strDate]={type:RequestDayType.FullDay,hours:fullDayHours}}else if(morningHours>0){_this62.breakdown[strDate]={type:RequestDayType.Morning,hours:morningHours}}else if(afternoonHours>0){_this62.breakdown[strDate]={type:RequestDayType.Afternoon,hours:afternoonHours}}else{_this62.breakdown[strDate]={type:RequestDayType.NonWorkingDay,hours:0}}}});_this62.recalculating=false;_this62.computedHours=_this62.calculateComputedHours();if(_this62.onRecalculateCallbacks){_this62.onRecalculateCallbacks.forEach(function(callback){return callback()})}})};Request.prototype.toggleDate=function(date){var fullDayHours=this.employee.getFullDayWorkingHours(date);var morningHours=this.employee.getMorningWorkingHours(date);var afternoonHours=this.employee.getAfternoonWorkingHours(date);var strDate=appogee.util.date.toISOString(date);if(this.breakdown.hasOwnProperty(strDate)){var detail=this.breakdown[strDate];if(detail.type==RequestDayType.FullDay){detail.type=RequestDayType.Morning;detail.hours=morningHours}else if(detail.type==RequestDayType.Morning){detail.type=RequestDayType.Afternoon;detail.hours=afternoonHours}else if(detail.type==RequestDayType.Afternoon){detail.type=RequestDayType.FullDay;detail.hours=fullDayHours}}};Request.prototype.setDateType=function(date,dayType){var fullDayHours=this.employee.getFullDayWorkingHours(date);var morningHours=this.employee.getMorningWorkingHours(date);var afternoonHours=this.employee.getAfternoonWorkingHours(date)
;var strDate=appogee.util.date.toISOString(date);if(this.breakdown.hasOwnProperty(strDate)){var detail=this.breakdown[strDate];detail.type=dayType;if(detail.type==RequestDayType.FullDay){detail.hours=fullDayHours}else if(detail.type==RequestDayType.Morning){detail.hours=morningHours}else if(detail.type==RequestDayType.Afternoon){detail.hours=afternoonHours}}};Request.prototype.calculateComputedHours=function(){var _this63=this;if(this.recalculating){return 0}if(!this.startDate||!this.endDate){return 0}var hours=0;this.iterateDates(function(date){var strDate=appogee.util.date.toISOString(date);var detail=_this63.breakdown[strDate];hours+=detail.hours});hours=appogee.util.round(hours,2);return hours};Request.prototype.getUnitDays=function(){var _this64=this;if(this.recalculating){return 0}if(!this.startDate||!this.endDate){return 0}var days=0;this.iterateDates(function(d){if(_this64.isFullDay(d)){days+=1}else if(_this64.isMorning(d)){days+=.5}else if(_this64.isAfternoon(d)){days+=.5}else if(_this64.isAfternoonPublicHoliday(d)){days+=.5}else if(_this64.isMorningPublicHoliday(d)){days+=.5}});return days};Request.prototype.isInRange=function(date){if(!this.startDate||!this.endDate){return false}var startDateUTC=Date.UTC(this.startDate.getUTCFullYear(),this.startDate.getUTCMonth(),this.startDate.getUTCDate());var endDateUTC=Date.UTC(this.endDate.getUTCFullYear(),this.endDate.getUTCMonth(),this.endDate.getUTCDate());var dateUTC=Date.UTC(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate());return startDateUTC<=dateUTC&&dateUTC<=endDateUTC};Request.prototype.getDetailByDate=function(date){if(!this.isInRange(date)){throw"ValueError: date out of range"}var strDate=appogee.util.date.toISOString(date);return this.breakdown[strDate]};Request.prototype.isSingleDay=function(){if(this.startDate.getTime()==this.endDate.getTime()){return this.isFullDay(this.startDate)}return false};Request.prototype.isMorningOnly=function(){if(this.startDate.getTime()==this.endDate.getTime()){return this.isMorning(this.startDate)}return false};Request.prototype.isAfternoonOnly=function(){if(this.startDate.getTime()==this.endDate.getTime()){return this.isAfternoon(this.startDate)}return false};Request.prototype.isFirstDayAfternoon=function(){if(this.startDate){return this.isAfternoon(this.startDate)}return false};Request.prototype.isLastDayMorning=function(){if(this.endDate){return this.isMorning(this.endDate)}return false};Request.prototype.isMorning=function(date){var detail=this.getDetailByDate(date);var morning=detail&&(detail.type==RequestDayType.Morning||detail.type==RequestDayType.PublicHolidayAfternoon);return morning};Request.prototype.isAfternoon=function(date){var detail=this.getDetailByDate(date);var afternoon=detail&&(detail.type==RequestDayType.Afternoon||detail.type==RequestDayType.PublicHolidayMorning);return afternoon};Request.prototype.isFullDay=function(date){var detail=this.getDetailByDate(date);return detail&&detail.type==RequestDayType.FullDay};Request.prototype.isPublicHoliday=function(date){var detail=this.getDetailByDate(date);return detail&&detail.type==RequestDayType.PublicHoliday};Request.prototype.isMorningPublicHoliday=function(date){var detail=this.getDetailByDate(date);return detail&&detail.type==RequestDayType.PublicHolidayMorning};Request.prototype.isAfternoonPublicHoliday=function(date){var detail=this.getDetailByDate(date);return detail&&detail.type==RequestDayType.PublicHolidayAfternoon};Request.prototype.isNonWorkingDay=function(date){var detail=this.getDetailByDate(date);return detail&&detail.type==RequestDayType.NonWorkingDay};Request.prototype.getStartTime=function(){if(this.startTime==null){return null}var reqDateTime=this.startDate;var mins=parseInt(this.startTime.slice(-2));var hours=parseInt(this.startTime.slice(0,2));reqDateTime.setHours(hours,mins,0);return reqDateTime.toISOString()};Request.prototype.getEndTime=function(){if(this.endTime==null){return null}var reqDateTime=this.endDate;var mins=parseInt(this.endTime.slice(-2));var hours=parseInt(this.endTime.slice(0,2));reqDateTime.setHours(hours,mins,0);return reqDateTime.toISOString()};Request.prototype.toJSON=function(){var reason=null;if(this.reason){reason=this.reason.trim()}var category=null;if(this.category){category={key:this.category.key}}var startDate=null;if(this.startDate){startDate=appogee.util.date.toISOString(this.startDate)}var endDate=null;if(this.endDate){endDate=appogee.util.date.toISOString(this.endDate)}var startTime=null;var endTime=null;if(this.overrideComputedHours){if(this.startTime!="NaN:aN"&&this.endTime!="NaN:aN"){startTime=this.getStartTime();endTime=this.getEndTime()}}var r={employee:{key:this.employee.key},type:this.type,category:category,hours:this.getHours(),computedHours:this.computedHours,reason:reason,ooo:this.ooo,status:this.status,startDate:startDate,endDate:endDate,startTime:startTime,endTime:endTime,breakdown:this.getBreakdown(),deducted:this.deducted};return r};Request.prototype.approve=function(approvedBy,comments,callback){var body={approvedBy:{key:approvedBy.key},comments:comments};var url="/requests/{0}/approve".format(this.key);appogee.api.post(url,body,function(response){if(callback){callback(response)}})};Request.prototype.reject=function(rejectedBy,comments,callback){var body={rejectedBy:{key:rejectedBy.key},comments:comments};var url="/requests/{0}/reject".format(this.key);appogee.api.post(url,body,function(response){if(callback){callback(response)}})};Request.prototype.cancel=function(cancelledBy,comments,callback){var body={cancelledBy:{key:cancelledBy.key},comments:comments};var url="/requests/{0}/cancel".format(this.key);appogee.api.post(url,body,function(response){if(callback){callback(response)}})};return Request});define("leave/dialogs/RequestDialogBase",["jquery","appogee","enums/MonthEnum","enums/Weekday","enums/WeekdayAbbr","enums/WeekdayMin"],function($,appogee,Month,Weekday,WeekdayAbbr,WeekdayMin){"use strict";var S,R={sickPastNote:"Start Date must be in the past for Sickness Reports marked as not returned to work.",usedDate:"You already have approved leave for this date",annualLeave:"Annual Leave",deductedLeave:"Deducted Leave",nonDeductedLeave:"Non Deducted Leave",oooImportErrorTitle:"Unable to import Out of Office",oooImportErrorMsg:"It is not possible to import your Out of Office settings right now.",prev:"Prev",next:"Next"};var RequestDialogBase=function($dlg){S=appogee.getStrings("RequestDialogBase",R);this.$dlg=$dlg;this.currentUser=appogee.getCurrentUser();this.blockedDates=[];this.returnedToWork=true;this.gmailOooResponse=null};RequestDialogBase.prototype.initDatePickers=function($txtStartDate,$txtEndDate,options){var _this65=this;var today=appogee.today();var startDatePickerOptions=$.extend({monthNames:Month.asArrayList(),dayNames:Weekday.asArrayListJs(),dayNamesShort:WeekdayAbbr.asArrayListJs(),dayNamesMin:WeekdayMin.asArrayListJs(),prevText:S.prev,nextText:S.next,firstDay:this.currentUser.calStartDay,dateFormat:this.currentUser.jqueryDateFormatString,onSelect:function(){var d=$txtStartDate.datepicker("getDate");_this65.request.setStartDate(d);_this65.request.recalculate(true)},beforeShowDay:function(date){if(!_this65.returnedToWork){if(date>today){return[false,"used",S.sickPastNote]}}if(_this65.blockedDates.indexOf(appogee.util.date.toISOString(date))>-1){return[false,"used",S.usedDate]}return[true]}},options||{});var endDatePickerOptions=$.extend({monthNames:Month.asArrayList(),dayNames:Weekday.asArrayListJs(),dayNamesShort:WeekdayAbbr.asArrayListJs(),dayNamesMin:WeekdayMin.asArrayListJs(),prevText:S.prev,nextText:S.next,firstDay:this.currentUser.calStartDay,dateFormat:this.currentUser.jqueryDateFormatString,onSelect:function(){var d=$txtEndDate.datepicker("getDate");_this65.request.setEndDate(d);_this65.request.recalculate(true)},beforeShowDay:function(date){if(_this65.blockedDates.indexOf(appogee.util.date.toISOString(date))>-1){return[false,"used",S.usedDate]}return[true]}},options||{});$txtStartDate.datepicker(startDatePickerOptions).change(function(){var d=$txtStartDate.val();if(d){d=$txtStartDate.datepicker("getDate");_this65.request.setStartDate(d);_this65.request.recalculate(true)}});$txtEndDate.datepicker(endDatePickerOptions).change(function(){var d=$txtEndDate.val();if(d){d=$txtEndDate.datepicker("getDate");_this65.request.setEndDate(d);_this65.request.recalculate(true)}})};RequestDialogBase.prototype.populateLeaveTypes=function(leaveTypes){var annualLeaveType=null;leaveTypes.forEach(function(leaveType){if(leaveType.system){leaveType.optGroup=S.annualLeave;annualLeaveType=leaveType}else if(leaveType.deducted){leaveType.optGroup=S.deductedLeave}else{leaveType.optGroup=S.nonDeductedLeave}});if(!this.request.category){this.request.category=annualLeaveType}appogee.ui.populateDropdown(this.$dlg.find(".ddlCategory"),leaveTypes,{valueName:"name",defaultValue:"",groupBy:"optGroup",default:this.request.category.key})};RequestDialogBase.prototype.populateSickTypes=function(sickTypes){var options={valueName:"name",defaultValue:"- Select -"};if(this.request.category){options.default=this.request.category.key}appogee.ui.populateDropdown(this.$dlg.find(".ddlCategory"),sickTypes,options)};RequestDialogBase.prototype.initOoo=function(){var _this66=this;var $btnImportOooSubject=this.$dlg.find("#btnImportOooSubject");var $btnImportOooBody=this.$dlg.find("#btnImportOooBody");var $txtOooSubject=$("#txtOooSubject");var $txtOooBody=$("#txtOooBody");$btnImportOooSubject.click(function(){var $c=$btnImportOooSubject.closest(".import-from-gmail");$txtOooSubject.attr("disabled",true);$c.find("a").hide();$c.find("img").show();_this66.getOooFromGmail(function(ooo){$c.find("a").show();$c.find("img").hide();$txtOooSubject.attr("disabled",false).val(ooo.responseSubject)})});$btnImportOooBody.click(function(){var $c=$btnImportOooBody.closest(".import-from-gmail");$txtOooBody.attr("disabled",true);$c.find("a").hide();$c.find("img").show();_this66.getOooFromGmail(function(ooo){$txtOooBody.attr("disabled",false);$c.find("a").show();$c.find("img").hide();if(ooo.hasOwnProperty("responseBodyPlainText")){$("#txtOooBody").val(ooo.responseBodyPlainText)}else if(ooo.hasOwnProperty("responseBodyHtml")){var body=appogee.util.removeHtmlTags(ooo.responseBodyHtml);body=appogee.util.decodeHtmlEntity(body);$("#txtOooBody").val(body)}else{appogee.valert(S.oooImportError)}})})};RequestDialogBase.prototype.getOooFromGmail=function(callback){var _this67=this;if(this.gmailOooResponse!==null){callback(this.gmailOooResponse);return}var url="/my/leave/xhr/ooo";appogee.xhr.get(url,function(response){_this67.gmailOooResponse=response.ooo;callback(_this67.gmailOooResponse)})};return RequestDialogBase});define("templates/helpers/formatDate",["hbs/handlebars","underscore","appogee"],function(Handlebars,_,appogee){"use strict";function formatDate(date,dateFormatString){if(!_.isString(dateFormatString)){var currentUser=appogee.getCurrentUser();if(!currentUser){throw"formatDate helper error: Current User has not been loaded"}dateFormatString=currentUser.dateFormatString}if(!date){return""}return appogee.util.date.toString(date,dateFormatString)}Handlebars.registerHelper("formatDate",formatDate);return formatDate});define("templates/helpers/requestStatus",["hbs/handlebars","enums/RequestStatus"],function(Handlebars,RequestStatus){"use strict";Handlebars.registerHelper("requestStatus",function(status){return RequestStatus.toString(status)})});define("hbs!leave/templates/ClashView",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/if_gt","templates/helpers/s","templates/helpers/formatDate","templates/helpers/requestStatus"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<div class="alert alert-warning">\n\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No clashes were found between this request, and requests from the teams that you manage.",{name:"s",hash:{},data:data}))+"</p>\n\t</div>\n"},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<div class="clash-container">\n'+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.totalTeamCount:depth0,{name:"if_gt",hash:{compare:1},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\n\t\t<table class="table table-bordered table-shaded table-condensed table-clashes">\n\t\t<thead>\n\t\t<tr>\n\t\t\t<th>&nbsp;</th>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.header:depth0,{name:"each",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tr>\n\t\t</thead>\n\t\t\n\t\t<tbody>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.clashes:depth0,{name:"each",hash:{},fn:this.program(13,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tbody>\n\t\t</table>\n\t</div>\n"},4:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t<div class="form-group">\n\t\t\t<select class="form-control input-sm">\n\t\t\t\t<option value="">-- '+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Filter Team",{name:"s",hash:{},data:data}))+" --</option>\n\t\t\t\t\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.teams:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.vteams:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(9,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</select>\n\t\t</div>\n"},5:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"\t\t\t\t\t<optgroup label="+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Teams",{name:"s",hash:{},data:data}))+">\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.teams:depth0,{name:"each",hash:{},fn:this.program(6,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t</optgroup>\n"},6:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,depths[1]!=null?depths[1].teamKey:depths[1],{name:"ifequal",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},7:function(depth0,helpers,partials,data){return'selected="selected"'},9:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"\t\t\t\t\t<optgroup label="+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Teams",{name:"s",hash:{},data:data}))+">\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.vteams:depth0,{name:"each",hash:{},fn:this.program(6,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t</optgroup>\n"},11:function(depth0,helpers,partials,data){return"\t\t\t\t<th>"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,depth0,"%d-%b",{name:"formatDate",hash:{},data:data}))+"</th>\n"},13:function(depth0,helpers,partials,data){var stack1;return"\t\t<tr>\n"+((stack1=helpers.each.call(depth0,depth0,{name:"each",hash:{},fn:this.program(14,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tr>\n"},14:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,data&&data.index,0,{name:"ifequal",hash:{},fn:this.program(15,data,0),inverse:this.program(17,data,0),data:data}))!=null?stack1:""},15:function(depth0,helpers,partials,data){return"\t\t\t\t\t<td>"+this.escapeExpression(this.lambda(depth0!=null?depth0.name:depth0,depth0))+"</td>\n"},17:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0,{name:"if",hash:{},fn:this.program(18,data,0),inverse:this.program(20,data,0),data:data}))!=null?stack1:""},18:function(depth0,helpers,partials,data){var helper;return'\t\t\t\t\t<td class="'+this.escapeExpression(this.lambda(depth0!=null?depth0.status:depth0,depth0))+'" title="'+this.escapeExpression((helpers.requestStatus||depth0&&depth0.requestStatus||helpers.helperMissing).call(depth0,depth0!=null?depth0.status:depth0,{name:"requestStatus",hash:{},data:data}))+": "+this.escapeExpression((helper=(helper=helpers.reason||(depth0!=null?depth0.reason:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"reason",hash:{},data:data}):helper))+'">&nbsp;</td>\n'},20:function(depth0,helpers,partials,data){return"\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.clashes:depth0)!=null?stack1.length:stack1,0,{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.program(3,data,0,blockParams,depths),data:data}))!=null?stack1:""},useData:true,useDepths:true});Handlebars.registerPartial("leave/templates/ClashView",t);return t});define("leave/views/ClashView",["jquery","underscore","appogee","leave/models/Request","hbs!leave/templates/ClashView"],function($,_,appogee,Request,tmpl){"use strict";var View=function($container,request){this.$container=$container;this.request=request;this.clashes=null;this.teams=[];this.vteams=[];this.teamKey=null;this.onFetchHandler=null;this.currentUser=appogee.getCurrentUser()};View.prototype.setContainer=function($container){this.$container=$container;this.render()};View.prototype.fetch=function(){var _this68=this;if(this.clashes===null){var url="/requests/{0}/clashes".format(this.request.key);appogee.api.get(url,function(response){_this68.setClashes(response.items);_this68.render();if(_this68.onFetchHandler){_this68.onFetchHandler(_this68.clashes)}})}};View.prototype.onFetch=function(handler){this.onFetchHandler=handler};View.prototype.setClashes=function(clashes){var teams=[];var vteams=[];var teamKeys=[];clashes.forEach(function(clash){if(clash.team&&teamKeys.indexOf(clash.team.key)==-1){teams.push(clash.team);teamKeys.push(clash.team.key)}if(clash.vteam&&teamKeys.indexOf(clash.vteam.key)==-1){vteams.push(clash.vteam);teamKeys.push(clash.vteam.key)}});this.clashes=clashes.map(function(c){return new Request(c)});this.teams=_.sortBy(teams,"name");this.vteams=_.sortBy(vteams,"name")};View.prototype.render=function(){var _this69=this;if(this.clashes===null){return}if(this.clashes.length<=1){this.$container.html(tmpl({clashes:[]}));return}var clashes=this.clashes;if(this.teamKey){clashes=_.filter(this.clashes,function(clash){if(clash.key==_this69.request.key){return true}if(clash.team&&clash.team.key==_this69.teamKey){return true}if(clash.vteam&&clash.vteam.key==_this69.teamKey){return true}return false})}clashes=_.sortBy(clashes,function(clash){if(clash.key==_this69.request.key){return"A"}return clash.employee.name});var startDate=_.min(_.pluck(clashes,"startDate"));var endDate=_.max(_.pluck(clashes,"endDate"));var header=[];var rows=[];var d=new Date(startDate.getTime());while(d<=endDate){header.push(new Date(d.getTime()));d.setDate(d.getDate()+1)}clashes.forEach(function(clash){var d=new Date(startDate.getTime());var row=[clash.employee];while(d<=endDate){if(clash.isInRange(d)){row.push(clash)}else{row.push(null)}d.setDate(d.getDate()+1)}rows.push(row)});var data={teams:this.teams,vteams:this.vteams,teamKey:this.teamKey,totalTeamCount:this.teams.length+this.vteams.length,header:header,clashes:rows};this.$container.html(tmpl(data));this.$container.find("select").change(function(e){_this69.teamKey=e.target.value;_this69.render()})};return View});define("hbs!leave/templates/RequestCalendar",["hbs/handlebars"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"sm"},3:function(depth0,helpers,partials,data){return"lg"},5:function(depth0,helpers,partials,data){return'\t\t\t<div class="day">'+this.escapeExpression(this.lambda(depth0,depth0))+"</div>\n"},7:function(depth0,helpers,partials,data){var stack1,helper;return'\t<div class="day'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.cssClass:depth0,{name:"if",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.tooltip:depth0,{name:"if",hash:{},fn:this.program(10,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+' data-date="'+this.escapeExpression((helper=(helper=helpers.iso||(depth0!=null?depth0.iso:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"iso",hash:{},data:data}):helper))+'">\n\t\t'+this.escapeExpression((helper=(helper=helpers.date||(depth0!=null?depth0.date:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"date",hash:{},data:data}):helper))+"\n\t</div>\n"},8:function(depth0,helpers,partials,data){var helper;return" "+this.escapeExpression((helper=(helper=helpers.cssClass||(depth0!=null?depth0.cssClass:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"cssClass",hash:{},data:data}):helper))},10:function(depth0,helpers,partials,data){var helper;return'title="'+this.escapeExpression((helper=(helper=helpers.tooltip||(depth0!=null?depth0.tooltip:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"tooltip",hash:{},data:data}):helper))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="request-calendar '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.sm:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.lg:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t<header>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.weekdays:depth0,{name:"each",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<div class="clearfix"></div>\n\t</header>\n\t\n\t<div class="days">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.dates:depth0,{name:"each",hash:{},fn:this.program(7,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</div>\n</div>"},useData:true});Handlebars.registerPartial("leave/templates/RequestCalendar",t);return t});define("leave/views/RequestCalendar",["jquery","appogee","enums/RequestDayType","enums/WeekdayAbbr","hbs!leave/templates/RequestCalendar"],function($,appogee,RequestDayType,WeekdayAbbr,tmpl){"use strict";var S,R={tooltipFullDay:"{date}: Full Day ({hours} hours)",tooltipMorning:"{date}: Morning Only ({hours} hours)",tooltipAfternoon:"{date}: Afternoon Only ({hours} hours)",tooltipNonWorkingDay:"{date}: Non Working Day ({hours} hours)"};var View=function($container,request){S=appogee.getStrings("RequestCalendar",R);this.$container=$container;this.request=request;this.sm=false};View.prototype.render=function($container){var _this70=this;if($container){this.$container=$container}this.startWeekday=1;var endWeekday=this.startWeekday===0?6:this.startWeekday-1;var today=new Date;today.setHours(0,0,0,0);var startDate=this.request.startDate||today;var date=new Date(startDate.getTime());while(date.getDay()!=this.startWeekday){date.setDate(date.getDate()-1)}var endDate=this.request.endDate||today;endDate=new Date(endDate.getTime());while(endDate.getDay()!=endWeekday){endDate.setDate(endDate.getDate()+1)}var dates=[];var weekdays=[];var days=0;while(date<=endDate){days++;if(weekdays.length<7){weekdays.push(WeekdayAbbr.toJsString(date.getDay()))}var formattedDate=appogee.util.date.toString(date);var d={iso:appogee.util.date.toISOString(date),date:date.getDate(),tooltip:"",cssClass:"",clickable:false};if(!this.request.recalculating&&this.request.isInRange(date)){var detail=this.request.getDetailByDate(date);d.cssClass=detail.type.replace(/_/g,"-");if(detail.type==RequestDayType.FullDay){d.tooltip=S.tooltipFullDay.format({date:formattedDate,hours:detail.hours})}else if(detail.type==RequestDayType.Morning){d.tooltip=S.tooltipMorning.format({date:formattedDate,hours:detail.hours})}else if(detail.type==RequestDayType.Afternoon){d.tooltip=S.tooltipAfternoon.format({date:formattedDate,hours:detail.hours})}else if(detail.type==RequestDayType.NonWorkingDay){d.tooltip=S.tooltipNonWorkingDay.format({date:formattedDate,hours:detail.hours})}else if(detail.type==RequestDayType.PublicHoliday){d.tooltip="{0}: {1}".format(formattedDate,detail.description)}else if(detail.type==RequestDayType.PublicHolidayMorning){d.tooltip="{0}: {1}".format(formattedDate,detail.description)}else if(detail.type==RequestDayType.PublicHolidayAfternoon){d.tooltip="{0}: {1}".format(formattedDate,detail.description)}}dates.push(d);date.setDate(date.getDate()+1)}var data={weekdays:weekdays,request:this.request,dates:dates,sm:this.sm};if(days>4*7){data.lg=true}this.$container.html(tmpl(data));this.$container.find(".full-day,.morning,.afternoon").click(function(e){var date=$(e.target).data("date");if(date){date=appogee.util.date.fromISOString(date);_this70.request.cancelOverrideHours();_this70.request.toggleDate(date);_this70.request.recalculate()}})};return View});define("templates/helpers/ifpast",["hbs/handlebars","underscore","appogee"],function(Handlebars,_,appogee){"use strict";function ifpast(testDate,options){if(_.isString(testDate)){testDate=appogee.util.date.fromISOString(testDate)}var today=appogee.today();if(testDate<today){return options.fn(this)}return options.inverse(this)}Handlebars.registerHelper("ifpast",ifpast);return ifpast});define("hbs!leave/dialogs/RequestDialog_StatusHeader",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/s","templates/helpers/ifnotequal","templates/helpers/if_lt","templates/helpers/ifpast"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isRequestor:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:""},2:function(depth0,helpers,partials,data){return'\t\t<div class="alert alert-warning">\n\t\t\t<div>\n\t\t\t\t<h5>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Are you still sick?",{name:"s",hash:{},data:data}))+"</h5>\n\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This Sickness Report is open, meaning you are currently marked as being off sick.",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button class="btn btn-sm btn-warning btnReturnToWork">\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Return to work now",{name:"s",hash:{},data:data}))+"\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n"},4:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.status:stack1,"pending",{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.program(21,data,0),data:data}))!=null?stack1:""},5:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.canApprove:depth0,{name:"if",hash:{},fn:this.program(6,data,0),inverse:this.program(19,data,0),data:data}))!=null?stack1:""},6:function(depth0,helpers,partials,data){var stack1,helper;return'\t\t<div class="alert alert-warning">\n\t\t\t<h5>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Pending Approval",{name:"s",hash:{},data:data}))+"</h5>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isPrimaryApprover:depth0,{name:"if",hash:{},fn:this.program(7,data,0),inverse:this.program(9,data,0),data:data}))!=null?stack1:"")+"\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.hasAllowance:stack1,{name:"if",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifpast||depth0&&depth0.ifpast||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"ifpast",hash:{},fn:this.program(14,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.hours:stack1,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.computedHours:stack1,{name:"ifnotequal",hash:{},fn:this.program(16,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n\t\t\t<div class="actions-container buttons">\n\t\t\t\t<button class="btn btn-danger btnReject">\n\t\t\t\t\t<i class="fa fa-thumbs-down"></i>\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reject",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</button>\n\t\t\t\t<button class="btn btn-success btnApprove">\n\t\t\t\t\t<i class="fa fa-thumbs-up"></i>\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Approve",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div class="action-comments-container" id="approveCommentsContainer">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<textarea class="form-control input-sm commentsTextarea" placeholder="'+this.escapeExpression((helper=(helper=helpers.approvePlaceholder||(depth0!=null?depth0.approvePlaceholder:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"approvePlaceholder",hash:{},data:data}):helper))+'"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group-inline buttons">\n\t\t\t\t\t<button type="button" class="btn btn-default btnCancelAction">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'</button>\n\t\t\t\t\t<button class="btn btn-success btnSubmitApproval" >\n\t\t\t\t\t\t<i class="fa fa-thumbs-up"></i>\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Approve",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="action-comments-container" id="rejectCommentsContainer">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<textarea class="form-control input-sm commentsTextarea" placeholder="'+this.escapeExpression((helper=(helper=helpers.rejectPlaceholder||(depth0!=null?depth0.rejectPlaceholder:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"rejectPlaceholder",hash:{},data:data
}):helper))+'"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group-inline buttons">\n\t\t\t\t\t<button type="button" class="btn btn-default btnCancelAction">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'</button>\n\t\t\t\t\t<button class="btn btn-danger btnSubmitRejection">\n\t\t\t\t\t\t<i class="fa fa-thumbs-down"></i>\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reject",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n"},7:function(depth0,helpers,partials,data){return'\t\t\t\t<p class="desktop-only">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You are a <strong>primary</strong> approver for this request.",{name:"s",hash:{},data:data}))+"</p>\n"},9:function(depth0,helpers,partials,data){return'\t\t\t\t<p class="desktop-only">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You are an <strong>alternate</strong> approver for this request. Your approval is optional.",{name:"s",hash:{},data:data}))+"</p>\n"},11:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.if_lt||depth0&&depth0.if_lt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.allowance:stack1)!=null?stack1.remaining_hours:stack1,{name:"if_lt",hash:{compare:(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.hours:stack1},fn:this.program(12,data,0),inverse:this.noop,data:data}))!=null?stack1:""},12:function(depth0,helpers,partials,data){return'\t\t\t\t\t<p class="text-danger">\n\t\t\t\t\t\t<i class="glyphicon glyphicon-exclamation-sign" title="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"If approved, this request will exceed the users remaining allowance",{name:"s",hash:{},data:data}))+'"></i>\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"If approved, this request will exceed the users remaining allowance",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t</p>\n"},14:function(depth0,helpers,partials,data){return'\t\t\t<p class="text-danger">\n\t\t\t\t<i class="glyphicon glyphicon-exclamation-sign" title="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This date is in the past",{name:"s",hash:{},data:data}))+'"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This date is in the past",{name:"s",hash:{},data:data}))+"\n\t\t\t</p>\n"},16:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0!=null?depth0.isToil:depth0,{name:"unless",hash:{},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:""},17:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<p class="text-danger">\n\t\t\t\t<i class="glyphicon glyphicon-exclamation-sign" title="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Computed hours overridden",{name:"s",hash:{},data:data}))+'"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Computed Hours overridden from {computed_hours} to {hours}",{name:"s",hash:{hours:(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.hours:stack1,computed_hours:(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.computedHours:stack1},data:data}))+"\n\t\t\t</p>\n"},19:function(depth0,helpers,partials,data){return'\t\t<div class="alert alert-info">\n\t\t\t<h5>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Pending Approval",{name:"s",hash:{},data:data}))+"</h5>\n\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This request is pending approval.",{name:"s",hash:{},data:data}))+"</p>\n\t\t</div>\n"},21:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.status:stack1,"approved",{name:"ifequal",hash:{},fn:this.program(22,data,0),inverse:this.program(30,data,0),data:data}))!=null?stack1:""},22:function(depth0,helpers,partials,data){var stack1;return'\t<div class="alert alert-success">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hasApproved:depth0,{name:"if",hash:{},fn:this.program(23,data,0),inverse:this.program(25,data,0),data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.hours:stack1,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.computedHours:stack1,{name:"ifnotequal",hash:{},fn:this.program(27,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n\t</div>\n"},23:function(depth0,helpers,partials,data){return"\t\t<h5>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Request Approved",{name:"s",hash:{},data:data}))+"</h5>\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You have already approved this request.",{name:"s",hash:{},data:data}))+"</p>\n"},25:function(depth0,helpers,partials,data){return"\t\t<h5>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Request Approved",{name:"s",hash:{},data:data}))+"</h5>\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This request has been approved.",{name:"s",hash:{},data:data}))+"</p>\n"},27:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0!=null?depth0.isToil:depth0,{name:"unless",hash:{},fn:this.program(28,data,0),inverse:this.noop,data:data}))!=null?stack1:""},28:function(depth0,helpers,partials,data){var stack1;return'\t<p class="text-danger">\n\t\t<i class="glyphicon glyphicon-exclamation-sign" title="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Computed hours overridden",{name:"s",hash:{},data:data}))+'"></i> \n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Computed Hours overridden from {computed_hours} to {hours}",{name:"s",hash:{hours:(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.hours:stack1,computed_hours:(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.computedHours:stack1},data:data}))+"\n\t</p>\n"},30:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.status:stack1,"rejected",{name:"ifequal",hash:{},fn:this.program(31,data,0),inverse:this.program(33,data,0),data:data}))!=null?stack1:""},31:function(depth0,helpers,partials,data){return'\t<div class="alert alert-danger">\n\t\t<h5>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Request Rejected",{name:"s",hash:{},data:data}))+"</h5>\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This request has been rejected.",{name:"s",hash:{},data:data}))+"</p>\n\t</div>\n"},33:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.status:stack1,"cancelled",{name:"ifequal",hash:{},fn:this.program(34,data,0),inverse:this.program(36,data,0),data:data}))!=null?stack1:""},34:function(depth0,helpers,partials,data){return'\t<div class="alert alert-danger">\n\t\t<h5>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Request Cancelled",{name:"s",hash:{},data:data}))+"</h5>\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This request has been cancelled.",{name:"s",hash:{},data:data}))+"</p>\n\t</div>\n"},36:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.status:stack1,"cancellation_pending",{name:"ifequal",hash:{},fn:this.program(37,data,0),inverse:this.noop,data:data}))!=null?stack1:""},37:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.canApprove:depth0,{name:"if",hash:{},fn:this.program(38,data,0),inverse:this.program(40,data,0),data:data}))!=null?stack1:""},38:function(depth0,helpers,partials,data){var helper;return'\t\t<div class="alert alert-warning">\n\t\t\t<div class="desktop-only">\n\t\t\t\t<h5>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancellation Pending",{name:"s",hash:{},data:data}))+"</h5>\n\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This request is pending cancellation.<br />If approved, the employees allowance will be reinstated.",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t</div>\n\t\t\t<h5 class="mobile-only">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This request is pending cancellation",{name:"s",hash:{},data:data}))+'</h5>\n\t\t\t<div class="actions-container buttons">\n\t\t\t\t<button class="btn btn-danger btnReject">\n\t\t\t\t\t<i class="fa fa-thumbs-down"></i>\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reject",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</button>\n\t\t\t\t<button class="btn btn-success btnApprove">\n\t\t\t\t\t<i class="fa fa-thumbs-up"></i>\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Approve",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div class="action-comments-container" id="approveCommentsContainer">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="col-xs-12">\n\t\t\t\t\t\t<textarea class="form-control input-sm commentsTextarea" placeholder="'+this.escapeExpression((helper=(helper=helpers.approvePlaceholder||(depth0!=null?depth0.approvePlaceholder:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"approvePlaceholder",hash:{},data:data}):helper))+'"></textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group buttons">\n\t\t\t\t\t<div class="col-xs-12">\n\t\t\t\t\t\t<button type="button" class="btn btn-default btnCancelAction">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'</button>\n\t\t\t\t\t\t<button class="btn btn-success btnSubmitApproval" >\n\t\t\t\t\t\t\t<i class="fa fa-thumbs-up"></i>\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Approve",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="action-comments-container" id="rejectCommentsContainer">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="col-xs-12">\n\t\t\t\t\t\t<textarea class="form-control input-sm commentsTextarea" placeholder="'+this.escapeExpression((helper=(helper=helpers.rejectPlaceholder||(depth0!=null?depth0.rejectPlaceholder:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"rejectPlaceholder",hash:{},data:data}):helper))+'"></textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group-inline buttons">\n\t\t\t\t\t<div class="col-xs-12">\n\t\t\t\t\t\t<button type="button" class="btn btn-default btnCancelAction">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'</button>\n\t\t\t\t\t\t<button class="btn btn-danger btnSubmitRejection">\n\t\t\t\t\t\t\t<i class="fa fa-thumbs-down"></i>\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reject",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n"},40:function(depth0,helpers,partials,data){return'\t\t<div class="alert alert-info">\n\t\t\t<h5>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancellation Pending",{name:"s",hash:{},data:data}))+"</h5>\n\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This request is pending cancellation.",{name:"s",hash:{},data:data}))+"</p>\n\t\t</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.status:stack1,"open",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.program(4,data,0),data:data}))!=null?stack1:""},useData:true});Handlebars.registerPartial("leave/dialogs/RequestDialog_StatusHeader",t);Handlebars.registerPartial("leave/dialogs/RequestDialog_StatusHeader",t);return t});define("templates/helpers/formatDateTime",["hbs/handlebars","underscore","appogee"],function(Handlebars,_,appogee){"use strict";function formatDateTime(date,dateFormatString){if(!_.isString(dateFormatString)){var currentUser=appogee.getCurrentUser();if(!currentUser){throw"formatDateTime helper error: Current User has not been loaded"}dateFormatString=currentUser.dateTimeFormatString}if(!date){return""}return appogee.util.datetime.toString(date,dateFormatString)}Handlebars.registerHelper("formatDateTime",formatDateTime);return formatDateTime});define("hbs!leave/dialogs/RequestDialog",["hbs/handlebars","hbs!leave/dialogs/RequestDialog_StatusHeader","templates/helpers/s","templates/helpers/formatDateTime","templates/helpers/formatDate","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t\t<a href="#tab_clashes" class="subtab" data-tab="clashes">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Clashes",{name:"s",hash:{},data:data}))+"</a>\n"},3:function(depth0,helpers,partials,data){return'\t\t<a href="#tab_ooo" class="subtab desktop-only">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Out of Office",{name:"s",hash:{},data:data}))+"</a>\n"},5:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<div class="form-group read">\n\t\t\t\t<label class="col-xs-4">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(6,data,0),inverse:this.program(8,data,0),data:data}))!=null?stack1:"")+'\t\t\t\t</label>\n\t\t\t\t<div class="col-xs-8">\n\t\t\t\t\t<div '+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.icon:stack1,{name:"if",hash:{},fn:this.program(10,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t\t\t\t\t"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.name:stack1,depth0))+"\n\n"+((stack1=helpers.unless.call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.deducted:stack1,{name:"unless",hash:{},fn:this.program(12,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n"},6:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sickness Type",{name:"s",hash:{},data:data}))+"\n"},8:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Type",{name:"s",hash:{},data:data}))+"\n"},10:function(depth0,helpers,partials,data){var stack1;return'class="icon '+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.icon:stack1,depth0))+'-16"'},12:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t("+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"non deducted leave",{name:"s",hash:{},data:data}))+")\n"},14:function(depth0,helpers,partials,data){var stack1;return"\n\t\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{date}, {start} - {end}",{name:"s",hash:{date:depth0!=null?depth0.dStartDate:depth0,end:(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.endTime:stack1,start:(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startTime:stack1},data:data}))+"\n"},16:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSingleDay:depth0,{name:"if",hash:{},fn:this.program(17,data,0),inverse:this.program(19,data,0),data:data}))!=null?stack1:""},17:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t\t\t"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data}))+"\n"},19:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isMorningOnly:depth0,{name:"if",hash:{},fn:this.program(20,data,0),inverse:this.program(22,data,0),data:data}))!=null?stack1:""},20:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Morning of {date}",{name:"s",hash:{date:depth0!=null?depth0.dStartDate:depth0},data:data}))+"\n"},22:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isAfternoonOnly:depth0,{name:"if",hash:{},fn:this.program(23,data,0),inverse:this.program(25,data,0),data:data}))!=null?stack1:""},23:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Afternoon of {date}",{name:"s",hash:{date:depth0!=null?depth0.dStartDate:depth0},data:data}))+"\n"},25:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t\t\t"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data}))+" - "+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.endDate:stack1,{name:"formatDate",hash:{},data:data}))+"\n\t\t\t\t\t\t\t"},27:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.days:stack1,1,{name:"ifequal",hash:{},fn:this.program(28,data,0),inverse:this.program(30,data,0),data:data}))!=null?stack1:""},28:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{days} Working Day",{name:"s",hash:{days:depth0!=null?depth0.dDays:depth0},data:data}))+"\n"},30:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{days} Working Days",{name:"s",hash:{days:depth0!=null?depth0.dDays:depth0},data:data}))+"\n"},32:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.days:stack1,1,{name:"ifequal",hash:{},fn:this.program(33,data,0),inverse:this.program(35,data,0),data:data}))!=null?stack1:""},33:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{days} Working Day / {hours} hours",{name:"s",hash:{hours:depth0!=null?depth0.dHours:depth0,days:depth0!=null?depth0.dDays:depth0},data:data}))+"\n"},35:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{days} Working Days / {hours} hours",{name:"s",hash:{hours:depth0!=null?depth0.dHours:depth0,days:depth0!=null?depth0.dDays:depth0},data:data}))+"\n"},37:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason for Sickness",{name:"s",hash:{},data:data}))+"\n"},39:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(40,data,0),inverse:this.program(42,data,0),data:data}))!=null?stack1:""},40:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason for {toil_term}",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"\n"},42:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason for Leave",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t"},44:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.reason:stack1,depth0))+"\n"},46:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"None Given",{name:"s",hash:{},data:data}))+"\n"},48:function(depth0,helpers,partials,data){return'\t\t\t\t<button type="button" class="btn btn-sm btn-default w-min-100 btnEdit">\n\t\t\t\t\t<i class="glyphicon glyphicon-pencil"></i>\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Edit Request",{name:"s",hash:{},data:data}))+"\n\t\t\t\t</button>\n"},50:function(depth0,helpers,partials,data){return'\t\t\t\t<button type="button" class="btn btn-sm btn-default w-min-100 btnCancel">\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Submit Cancellation",{name:"s",hash:{},data:data}))+"\n\t\t\t\t</button>\n"},52:function(depth0,helpers,partials,data){return'\t<div class="tab-panel" data-tab="tab_clashes">\n\t\t<div class="clashContainer">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</div>\n\t</div>\n"},54:function(depth0,helpers,partials,data){return'\t<div class="tab-panel" data-tab="tab_ooo">\n\t\t<div class="oooContainer"></div>\n\t</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper;return'<h4 class="title">'+this.escapeExpression((helper=(helper=helpers.title||(depth0!=null?depth0.title:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"title",hash:{},data:data}):helper))+'</h4>\n\n<div class="appogee-tabs">\n\t<div class="tab-header">\n\t\t<a href="#tab_details" class="subtab selected">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Main Details",{name:"s",hash:{},data:data}))+"</a>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showClashes:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showOoo:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<a href="#tab_approval" class="subtab desktop-only" data-tab="approvalFlow">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Approval Flow",{name:"s",hash:{},data:data}))+'</a>\n\t\t<a href="#tab_history" class="subtab desktop-only" data-tab="history">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"History",{name:"s",hash:{},data:data}))+'</a>\n\t</div>\n\t\n\t<div class="tab-panel selected" data-tab="tab_details">\n\t\n'+((stack1=this.invokePartial(partials["leave/dialogs/RequestDialog_StatusHeader"],depth0,{name:"leave/dialogs/RequestDialog_StatusHeader",data:data,indent:"\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+'\n\t\t<form class="form-horizontal">\n\t\t\t<div class="form-group read">\n\t\t\t\t<label class="col-xs-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Date Submitted",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div class="col-xs-8">\n\t\t\t\t\t'+this.escapeExpression((helpers.formatDateTime||depth0&&depth0.formatDateTime||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.created:stack1,{name:"formatDateTime",hash:{},data:data}))+"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1,{name:"if",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t\n\t\t\t<div class="form-group read">\n\t\t\t\t<label class="col-xs-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Requested Time",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div class="col-xs-8">\n\t\t\t\t\t<p> '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hasSetTimes:depth0,{name:"if",hash:{},fn:this.program(14,data,0),inverse:this.program(16,data,0),data:data}))!=null?stack1:"")+"\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hideHours:depth0,{name:"if",hash:{},fn:this.program(27,data,0),inverse:this.program(32,data,0),data:data}))!=null?stack1:"")+'\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group read">\n\t\t\t\t<label class="col-xs-4">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(37,data,0),inverse:this.program(39,data,0),data:data}))!=null?stack1:"")+'\t\t\t\t</label>\n\t\t\t\t<div class="col-xs-8">\n'+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.reason:stack1,{name:"if",hash:{},fn:this.program(44,data,0),inverse:this.program(46,data,0),data:data}))!=null?stack1:"")+'\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="actions-container">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canEdit:depth0,{name:"if",hash:{},fn:this.program(48,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCancel:depth0,{name:"if",hash:{},fn:this.program(50,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</div>\n\t\t\t<div class="action-comments-container" id="cancellationCommentsContainer">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="col-xs-12">\n\t\t\t\t\t\t<textarea class="form-control input-sm commentsTextarea" placeholder="'+this.escapeExpression((helper=(helper=helpers.cancellationPlaceholder||(depth0!=null?depth0.cancellationPlaceholder:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"cancellationPlaceholder",hash:{},data:data}):helper))+'"></textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group buttons">\n\t\t\t\t\t<div class="col-xs-12">\n\t\t\t\t\t\t<button type="button" class="btn btn-sm btn-default btnCancelAction">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'</button>\n\t\t\t\t\t\t<button class="btn btn-sm btn-danger btnSubmitCancellation">\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Submit Cancellation",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showClashes:depth0,{name:"if",hash:{},fn:this.program(52,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showOoo:depth0,{name:"if",hash:{},fn:this.program(54,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\n\t<div class="tab-panel" data-tab="tab_approval">\n\t\t<div class="approvalFlowContainer">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+'</div>\n\t</div>\n\t\n\t<div class="tab-panel" data-tab="tab_history">\n\t\t<div class="historyContainer">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</div>\n\t</div>\n</div>"},usePartial:true,useData:true});Handlebars.registerPartial("leave/dialogs/RequestDialog",t);return t});define("hbs!leave/dialogs/RequestDialog_OutOfOffice",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'\t<div class="ooo-container">\n\t\t<div class="form-group">\n\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="chkOoo" '+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.enabled:stack1,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enable Gmail out of office?",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\t<div id="oooEditContainer">\n\t\t\t<div class="form-group">\n\t\t\t\t<label class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Subject",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div class="pull-right import-from-gmail">\n\t\t\t\t\t<a href="javascript: void(0);" id="btnImportOooSubject">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import from Gmail",{name:"s",hash:{},data:data}))+'</a>\n\t\t\t\t\t<img src="/img/spinners/working_16.gif" />\n\t\t\t\t</div>\n\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t<input type="text" class="form-control input-sm" id="txtOooSubject" value="'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.subject:stack1,depth0))+'" />\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Message",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div class="pull-right import-from-gmail">\n\t\t\t\t\t<a href="javascript: void(0);" id="btnImportOooBody" class="pull-right">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import from Gmail",{name:"s",hash:{},data:data
}))+'</a>\n\t\t\t\t\t<img src="/img/spinners/working_16.gif" />\n\t\t\t\t</div>\n\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t<textarea class="form-control input-sm" id="txtOooBody">'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.body:stack1,depth0))+'</textarea>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="chkOooContactsOnly" '+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.contactsOnly:stack1,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Only send a response to people in my Contacts",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="chkOooDomainOnly" '+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.domainOnly:stack1,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Only send a response to people in your G Suite domain",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="buttons">\n\t\t<div class="pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Close",{name:"s",hash:{},data:data}))+'\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="pull-right">\n\t\t\t<button type="button" class="btn btn-sm btn-default w-min-100 btnCancelOoo">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel Changes",{name:"s",hash:{},data:data}))+'\n\t\t\t</button>\n\t\t\t<button type="button" class="btn btn-sm btn-primary w-min-100 btnSaveOoo">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Save Changes",{name:"s",hash:{},data:data}))+'\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="clearfix"></div>\n\t</div>\n'},2:function(depth0,helpers,partials,data){return'checked="checked"'},4:function(depth0,helpers,partials,data){var stack1;return'\t<div class="ooo-container">\n'+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.enabled:stack1,{name:"if",hash:{},fn:this.program(5,data,0),inverse:this.program(7,data,0),data:data}))!=null?stack1:"")+'\t</div>\n\t\n\t<div class="buttons">\n\t\t<div class="pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Close",{name:"s",hash:{},data:data}))+'\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="pull-right">\n\t\t\t<button type="button" class="btn btn-sm btn-default w-min-100 btnEditOoo">\n\t\t\t\t<i class="glyphicon glyphicon-pencil"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Edit Out of Office Settings",{name:"s",hash:{},data:data}))+'\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="clearfix"></div>\n\t</div>\n'},5:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<div class="alert alert-success">\n\t\t\t\t<p>\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Out of Office has been enabled for this request.\n\t\t\t\t\tYour GMail Out of Office AutoReply will be set to the following for the duration of this request.",{name:"s",hash:{},data:data}))+' \n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group read">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Subject",{name:"s",hash:{},data:data}))+"</label>\n\t\t\t\t<div>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.subject:stack1,depth0))+'</div>\n\t\t\t</div>\n\t\n\t\t\t<div class="form-group read">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Body",{name:"s",hash:{},data:data}))+"</label>\n\t\t\t\t<div>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.body:stack1,depth0))+"</div>\n\t\t\t</div>\n\t\t\t\n"},7:function(depth0,helpers,partials,data){return'\t\t\t<div class="alert alert-warning">\n\t\t\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Out of Office has not been enabled for this request.",{name:"s",hash:{},data:data}))+"</p>\n\t\t\t</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.editMode:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.program(4,data,0),data:data}))!=null?stack1:""},useData:true});Handlebars.registerPartial("leave/dialogs/RequestDialog_OutOfOffice",t);return t});define("templates/helpers/math",["hbs/handlebars","appogee"],function(Handlebars,appogee){function doMath(lvalue,operator,rvalue,options){if(arguments.length<4){options=rvalue;rvalue=operator;operator="+"}lvalue=parseFloat(lvalue);rvalue=parseFloat(rvalue);var val={"+":lvalue+rvalue,"-":lvalue-rvalue,"*":lvalue*rvalue,"/":lvalue/rvalue,"%":lvalue%rvalue}[operator];if(options&&options.hash){if(options.hash.round)val=appogee.util.round(val,options.hash.round);if(options.hash.fixed)val=val.toFixed(options.hash.fixed)}return val}Handlebars.registerHelper("math",doMath);return doMath});define("templates/helpers/pluralize",["hbs/handlebars","appogee"],function(Handlebars,appogee){function pluralize(num,word){return appogee.util.pluralize(num,word)}Handlebars.registerHelper("pluralize",pluralize);return pluralize});define("templates/helpers/capitalize",["hbs/handlebars","appogee"],function(Handlebars,appogee){function capitalize(word){return appogee.util.properCase(word)}Handlebars.registerHelper("capitalize",capitalize);return capitalize});define("templates/helpers/ifin",["hbs/handlebars"],function(Handlebars){"use strict";function ifin(val,arr,options){if(arr&&arr.indexOf(val)>-1){return options.fn(this)}else{return options.inverse(this)}}Handlebars.registerHelper("ifin",ifin);return ifin});define("hbs!leave/dialogs/RequestDialog_ApprovalFlow",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/s","templates/helpers/math","templates/helpers/pluralize","templates/helpers/capitalize","templates/helpers/ifin"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.levels:depth0,{name:"each",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},2:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.approvers:depth0)!=null?stack1.length:stack1,1,{name:"ifequal",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.program(6,data,0,blockParams,depths),data:data}))!=null?stack1:""},3:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.approvers:depth0,{name:"each",hash:{},fn:this.program(4,data,0),inverse:this.noop,data:data}))!=null?stack1:""},4:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The approver for this request is",{name:"s",hash:{},data:data}))+" <strong>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</strong></p>\n"},6:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return"\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This request requires",{name:"s",hash:{},data:data}))+" "+this.escapeExpression((helper=(helper=helpers.required||(depth0!=null?depth0.required:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"required",hash:{},data:data}):helper))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"of the following approvals:",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t<table class="table table-bordered table-shaded">\n\t\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Approver",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t\t<th class="w150">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Role",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t\t<th class="w150">&nbsp;</th>\n\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.approvers:depth0,{name:"each",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</tbody>\n\t\t\t</table>\n"},7:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return"\t\t\t<tr>\n\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</td>\n\t\t\t\t<td>"+this.escapeExpression((helpers.capitalize||depth0&&depth0.capitalize||helpers.helperMissing).call(depth0,depth0!=null?depth0.role:depth0,{name:"capitalize",hash:{},data:data}))+'</td>\n\t\t\t\t<td class="text-center">\n'+((stack1=(helpers.ifin||depth0&&depth0.ifin||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[3]!=null?depths[3].request:depths[3])!=null?stack1.approvedByKeys:stack1,{name:"ifin",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t</td>\n\t\t\t</tr>\n"},8:function(depth0,helpers,partials,data){return'\t\t\t\t\t\t<i class="glyphicon glyphicon-ok"></i>\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"APPROVED",{name:"s",hash:{},data:data}))+"\n"},10:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This request has multiple levels of approval. Each level must obtain the required number of approvals before progressing to the next.",{name:"s",hash:{},data:data}))+'</p>\n\t\n\t<table class="table table-bordered table-shaded">\n\t<thead>\n\t<tr>\n\t\t<th>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Approver",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th class="w150">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Role",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th class="w150">&nbsp;</th>\n\t</tr>\n\t</thead>\n\t<tbody>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.levels:depth0,{name:"each",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</tbody>\n\t</table>\n"},11:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t<tr>\n\t\t\t<td colspan="3" style="background-color: #ffe;">\n\t\t\t\t<div class="pull-left">\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Level",{name:"s",hash:{},data:data}))+" "+this.escapeExpression((helpers.math||depth0&&depth0.math||helpers.helperMissing).call(depth0,data&&data.index,1,{name:"math",hash:{},data:data}))+'\n\t\t\t\t</div>\n\t\t\t\t<div class="pull-right">\n\t\t\t\t\t'+this.escapeExpression((helper=(helper=helpers.required||(depth0!=null?depth0.required:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"required",hash:{},data:data}):helper))+" "+this.escapeExpression((helpers.pluralize||depth0&&depth0.pluralize||helpers.helperMissing).call(depth0,depth0!=null?depth0.required:depth0,"approval",{name:"pluralize",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"required",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</div>\n\t\t\t\t<div class="clearfix"></div>\n\t\t\t</td>\n\t\t</tr>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.approvers:depth0,{name:"each",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.levels:depth0)!=null?stack1.length:stack1,1,{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.program(10,data,0,blockParams,depths),data:data}))!=null?stack1:""},useData:true,useDepths:true});Handlebars.registerPartial("leave/dialogs/RequestDialog_ApprovalFlow",t);return t});define("hbs!leave/dialogs/RequestDialog_History",["hbs/handlebars","templates/helpers/s","templates/helpers/formatDateTime"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var helper;return"<tr>\n\t<td>\n\t\t<div><strong>"+this.escapeExpression((helpers.formatDateTime||depth0&&depth0.formatDateTime||helpers.helperMissing).call(depth0,depth0!=null?depth0.timestamp:depth0,{name:"formatDateTime",hash:{},data:data}))+"</strong></div>\n\t\t<div>"+this.escapeExpression((helper=(helper=helpers.operatorName||(depth0!=null?depth0.operatorName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"operatorName",hash:{},data:data}):helper))+"</div>\n\t</td>\n\t<td>\n\t\t<div><strong>"+this.escapeExpression((helper=(helper=helpers.type||(depth0!=null?depth0.type:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"type",hash:{},data:data}):helper))+"</strong></div>\n\t\t<div>"+this.escapeExpression((helper=(helper=helpers.comments||(depth0!=null?depth0.comments:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"comments",hash:{},data:data}):helper))+"</div>\n\t</td>\n</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="history-container">\n<table class="table table-bordered table-shaded table-condensed">\n<thead>\n\t<tr>\n\t\t<th>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Date",{name:"s",hash:{},data:data}))+"</th>\n\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"History / Comments",{name:"s",hash:{},data:data}))+"</th>\n\t</tr>\n</thead>\n<tbody>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.logs:depth0,{name:"each",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"</tbody>\n</table>\n</div>"},useData:true});Handlebars.registerPartial("leave/dialogs/RequestDialog_History",t);return t});define("templates/helpers/ifall",["hbs/handlebars"],function(Handlebars){function ifall(){var options=arguments[arguments.length-1];for(var i=0;i<arguments.length-1;i++)if(!arguments[i])return options.inverse(this);return options.fn(this)}Handlebars.registerHelper("ifall",ifall);return ifall});define("templates/helpers/round",["hbs/handlebars","appogee"],function(Handlebars,appogee){"use strict";function round(num,dp,fixedDp){if(arguments.length==3){fixedDp=null}else if(arguments.length==2){dp=2;fixedDp=null}if(fixedDp===null){return appogee.util.round(num,dp)}else{return appogee.util.round(num,dp).toFixed(fixedDp)}}Handlebars.registerHelper("round",round);return round});define("hbs!leave/dialogs/RequestDialog_Edit",["hbs/handlebars","templates/helpers/s","templates/helpers/ifall","templates/helpers/ifequal","templates/helpers/formatDate","templates/helpers/round"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t\t\t<option value="open" selected="selected">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Open",{name:"s",hash:{},data:data}))+"</option>\n"},3:function(depth0,helpers,partials,data){return'\t\t\t<option value="pending" selected="selected">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Pending",{name:"s",hash:{},data:data}))+"</option>\n"},5:function(depth0,helpers,partials,data){return'selected="selected"'},7:function(depth0,helpers,partials,data){return'\t\t\t<option value="cancellation_pending" selected="selected">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel Request",{name:"s",hash:{},data:data}))+"</option>\n"},9:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.sickTypes:depth0,{name:"if",hash:{},fn:this.program(10,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},10:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t<div class="form-group">\n\t\t\t<label class="col-md-4">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Type of Sickness",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<div class="col-md-8">\n\t\t\t\t<select class="form-control input-sm ddlCategory">\n'+((stack1=helpers.unless.call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.key:stack1,{name:"unless",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers.each.call(depth0,depth0!=null?depth0.sickTypes:depth0,{name:"each",hash:{},fn:this.program(13,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n"},11:function(depth0,helpers,partials,data){return'\t\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"},13:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'"'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=(stack1=depths[1]!=null?depths[1].request:depths[1])!=null?stack1.category:stack1)!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},15:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(16,data,0,blockParams,depths),inverse:this.program(18,data,0,blockParams,depths),data:data}))!=null?stack1:""},16:function(depth0,helpers,partials,data){return""},18:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<div class="form-group">\n\t\t<label class="col-md-4">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Type of Leave",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t\t<div class="col-md-8">\n\t\t\t<select class="form-control input-sm ddlCategory">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.leaveTypes:depth0,{name:"each",hash:{},fn:this.program(19,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</select>\n\t\t</div>\n\t</div>\n"},19:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'"'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=(stack1=depths[1]!=null?depths[1].request:depths[1])!=null?stack1.category:stack1)!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},21:function(depth0,helpers,partials,data){return'<div class="form-group hidden-xs hidden-sm">\n\t<label class="col-md-4">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Specify half / full days by clicking the dates",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="col-md-8">\n\t\t<div class="calendar"></div>\n\t</div>\n</div>\n'},23:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason for Sickness",{name:"s",hash:{},data:data}))+"\n"},25:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(26,data,0),inverse:this.program(28,data,0),data:data}))!=null?stack1:""},26:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason for {toil_term}",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"\n"},28:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason for Leave",{name:"s",hash:{},data:data}))+"\n\t\t"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'<h4 class="title">'+this.escapeExpression((helper=(helper=helpers.title||(depth0!=null?depth0.title:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"title",hash:{},data:data}):helper))+'</h4>\n\n<form class="form-horizontal">\n<div class="form-group">\n\t<label class="col-md-4">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Status",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="col-md-8">\n\t\t<select class="form-control input-sm ddlStatus">\n'+((stack1=(helpers.ifall||depth0&&depth0.ifall||helpers.helperMissing).call(depth0,depth0!=null?depth0.isSick:depth0,depth0!=null?depth0.isOpen:depth0,{name:"ifall",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isPending:depth0,{name:"if",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t\n\t\t\t<option value="approved" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isApproved:depth0,{name:"if",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Approved",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t<option value="rejected" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isRejected:depth0,{name:"if",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Rejected",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t<option value="cancelled" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isCancelled:depth0,{name:"if",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancelled",{name:"s",hash:{},data:data}))+"</option>\n\t\t\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isCancellationPending:depth0,{name:"if",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</select>\n\t</div>\n</div>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(9,data,0,blockParams,depths),inverse:this.program(15,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\n<div class="form-group">\n\t<label class="col-xs-12 col-md-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Requested Dates",{name:"s",hash:{},data:data}))+'</label>\n\n\t<div class="col-xs-6 col-md-4">\n\t\t<input type="text" class="form-control input-sm hd day txtStartDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data}))+'" />\n\t</div>\n\t<div class="col-xs-6 col-md-4">\n\t\t<input type="text" class="form-control input-sm hd hour txtEndDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.endDate:stack1,{name:"formatDate",hash:{},data:data}))+'" />\n\t</div>\n</div>\n\n'+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.isToil:depth0,{name:"unless",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="form-group">\n\t<label class="col-xs-12 col-md-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Requested Time",{name:"s",hash:{},data:data}))+'</label>\n\n\t<div class="col-xs-6 col-md-4 ">\n\t\t<div class="input-group">\n\t\t\t<input type="text" class="form-control input-sm hd day txtDays" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedDays:depth0,{name:"round",hash:{},data:data}))+'" />\n\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'</span>\n\t\t</div>\n\t</div>\n\t<div class="col-xs-6 col-md-4 ">\n\t\t<div class="input-group">\n\t\t\t<input type="text" class="form-control input-sm hd hour txtHours" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedHours:depth0,{name:"round",hash:{},data:data}))+'" />\n\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+'</span>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label class="col-md-4">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(23,data,0,blockParams,depths),inverse:this.program(25,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t</label>\n\t<div class="col-md-8">\n\t\t<textarea class="form-control input-sm txtReason">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.reason:stack1,depth0))+'</textarea>\n\t</div>\n</div>\n\n<div class="buttons">\n\t<button type="button" class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Close",{name:"s",hash:{},data:data}))+'\n\t</button>\n\t<button type="button" class="btn btn-sm btn-default w-min-100 btnCancel">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel Changes",{name:"s",hash:{},data:data}))+'\n\t</button>\n\t<button type="button" class="btn btn-sm btn-primary w-min-100 btnSave">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Save Changes",{name:"s",hash:{},data:data}))+"\n\t</button>\n</div>\n</form>"},useData:true,useDepths:true});Handlebars.registerPartial("leave/dialogs/RequestDialog_Edit",t);return t});define("hbs!leave/dialogs/RequestDialog_ReturnToWork",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal","templates/helpers/formatDate","templates/helpers/round"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<div class="form-group">\n\t\t<label class="col-sm-4">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Type of Sickness",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t\t<div class="col-sm-7">\n\t\t\t<select class="form-control input-sm ddlCategory">\n'+((stack1=helpers.unless.call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.key:stack1,{name:"unless",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers.each.call(depth0,depth0!=null?depth0.sickTypes:depth0,{name:"each",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</select>\n\t\t</div>\n\t</div>\n"},2:function(depth0,helpers,partials,data){return'\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"},4:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'"'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=(stack1=depths[1]!=null?depths[1].request:depths[1])!=null?stack1.category:stack1)!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},5:function(depth0,helpers,partials,data){return'selected="selected"'},7:function(depth0,helpers,partials,data){return'checked="checked"'},9:function(depth0,helpers,partials,data){
return'<div class="form-group">\n\t<label class="col-sm-4">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Specify half / full days by clicking the dates",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="col-sm-7">\n\t\t<div class="calendar"></div>\n\t</div>\n</div>\n'},11:function(depth0,helpers,partials,data){return'disabled="disabled"'},13:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason for Sickness",{name:"s",hash:{},data:data}))+"\n"},15:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(16,data,0),inverse:this.program(18,data,0),data:data}))!=null?stack1:""},16:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason for {toil_term}",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"\n"},18:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason for Leave",{name:"s",hash:{},data:data}))+"\n\t\t"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<h4 class="title">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Return To Work",{name:"s",hash:{},data:data}))+"</h4>\n\n<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"To return to work, please submit the Sickness Report by completing the form below and clicking the Submit Request button.",{name:"s",hash:{},data:data}))+'</p>\n\n<form class="form-horizontal">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.sickTypes:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="form-group">\n\t<label class="col-sm-4">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Dates of absence",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="col-sm-7 form-inline">\n\t\t<input type="text" class="form-control input-sm txtStartDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data}))+'" style="width: 157px;" /> -\n\t\t<input type="text" class="form-control input-sm txtEndDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.endDate:stack1,{name:"formatDate",hash:{},data:data}))+'" style="width: 157px;" />\n\t\t<div class="help-block">\n\t\t\t<a href="javascript: void(0);" class="btnAdvancedOptions" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showAdvancedOptions:depth0,{name:"if",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Advanced Options",{name:"s",hash:{},data:data}))+"</a>\n\t\t</div>\n\t</div>\n</div>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showAdvancedOptions:depth0,{name:"if",hash:{},fn:this.program(9,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="form-group">\n\t<label class="col-sm-4">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Requested Time",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="col-sm-7 form-inline">\n\t\t<div class="input-group">\n\t\t\t<input type="text" class="form-control input-sm hd day txtDays" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedDays:depth0,{name:"round",hash:{},data:data}))+'" style="width: 108px;" '+((stack1=helpers.unless.call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.allowOverride:stack1,{name:"unless",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+' />\n\t\t\t<span class="input-group-addon input-sm">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="input-group">\n\t\t\t<input type="text" class="form-control input-sm hd hour txtHours" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedHours:depth0,{name:"round",hash:{},data:data}))+'" style="width: 108px;" '+((stack1=helpers.unless.call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.allowOverride:stack1,{name:"unless",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+' />\n\t\t\t<span class="input-group-addon input-sm">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+'\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label class="col-sm-4">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(13,data,0,blockParams,depths),inverse:this.program(15,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t</label>\n\t<div class="col-sm-7">\n\t\t<textarea class="form-control input-sm txtReason">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.reason:stack1,depth0))+'</textarea>\n\t</div>\n</div>\n\n<div class="buttons">\n\t<div class="pull-left">\n\t\t<button type="button" class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Close",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t</div>\n\t<div class="pull-right">\n\t\t<button type="button" class="btn btn-sm btn-default w-min-100 btnCancel">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel Changes",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t\t<button type="button" class="btn btn-sm btn-primary w-min-100 btnSave">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Submit Request",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t</div>\n\t<div class="clearfix"></div>\n</div>\n</form>'},useData:true,useDepths:true});Handlebars.registerPartial("leave/dialogs/RequestDialog_ReturnToWork",t);return t});define("jquery.appogee.hd",["jquery","appogee"],function($,appogee){$.fn.hd=function(){return this.change(function(){var hoursInDay=$(this).data("hoursInDay");if(hoursInDay!==undefined){hoursInDay=parseFloat(hoursInDay);var $txtDays=$(this).closest(".form-group").find(".hd.day");var $txtHours=$(this).closest(".form-group").find(".hd.hour");var days=$txtDays.val();var hours=$txtHours.val();if($(this).hasClass("day")){hours=appogee.util.d2h(days,hoursInDay)}else{days=appogee.util.h2d(hours,hoursInDay)}if(!isNaN(hours)){$txtHours.val(appogee.util.round(hours))}if(!isNaN(days)){$txtDays.val(appogee.util.round(days))}}})};$(function(){$(".hd").hd()})});define("leave/dialogs/RequestDialog",["jquery","underscore","appogee","enums/RequestStatus","enums/RequestType","leave/models/Request","leave/service","leave/dialogs/RequestDialogBase","leave/views/ClashView","leave/views/RequestCalendar","hbs!leave/dialogs/RequestDialog","hbs!leave/dialogs/RequestDialog_OutOfOffice","hbs!leave/dialogs/RequestDialog_ApprovalFlow","hbs!leave/dialogs/RequestDialog_History","hbs!leave/dialogs/RequestDialog_Edit","hbs!leave/dialogs/RequestDialog_ReturnToWork","jquery.appogee.tabs","jquery.appogee.hd"],function($,_,appogee,RequestStatus,RequestType,Request,service,RequestDialogBase,ClashView,RequestCalendar,tmpl,tmplOoo,tmplApprovalFlow,tmplHistory,tmplEdit,tmplReturnToWork){"use strict";var $dlg=null;var S,R={leaveRequest:"Leave Request",sickReport:"Sickness Report",toilRequest:"{toil_term} Request",dialogTitle:"{request_type} for {employee_name}",btnApproveLabel:"Approve",dlgApproveTitle:"Approve Request",dlgApproveMsg:"To approve the request, click Approve. You may optionally add comments in the box below:",dlgApprovePlaceholderText:"Optionally, enter approval comments here",nfyApproving:"Approving Request ...",nfyApproved:"Request Approved",btnRejectLabel:"Reject",dlgRejectTitle:"Reject Request",dlgRejectMsg:"Please provide a reason for rejecting the Request:",dlgRejectPlaceholderText:"Enter rejection comments here",nfyRejecting:"Rejecting Request ...",nfyRejected:"Request Rejected",btnCancelLabel:"Submit Cancellation",dlgCancelTitle:"Cancel Request",dlgCancelMsg:"Please provide a reason for cancelling the Request:",dlgCancelPlaceholderText:"Enter cancellation comments here",nfyCancelling:"Cancelling Request ...",nfyCancelled:"Request Cancelled",nfyCancelPending:"Request Submitted for Cancellation",dlgSaveTitle:"Save Changes",dlgSaveMsg:"Please enter a reason for modifying the request:",btnSaveLabel:"Save Changes",nfySaving:"Saving Changes",nfySaveSuccessful:"Changes Saved Successfully",alertSaveTitle:"Request Saved Successfully",alertSaveMsg:"Your changes have been saved",nfyReturningToWork:"Submitting Return to Work Request",nfyReturnToWorkSubmitted:"Request Submitted Successfully",alertReturnToWorkSubmittedTitle:"Request Submitted",alertReturnToWorkSubmittedMsg:"Your Return to Work request has been submitted.",alertClashTitle:"Clash",alertClashMsg:"The dates you entered are not valid as they clash with another request already approved by this employee.",alertSickTypeTitle:"Form Invalid",alertSickTypeMsg:"Please select a Type of Sickness.",errorOooNoSubject:"Please enter a Subject",errorOooNoMessage:"Please enter a Message",errorOooTitle:"Update Out of Office Failed",errorOooMsg:"Unable to update Out of Office",errorInvalidStartDateTitle:"Invalid Start Date",errorInvalidStartDateMsg:"Please enter a Start Date",errorInvalidEndDateTitle:"Invalid End Date",errorInvalidEndDateMsg:"Please enter a End Date",errorNoLeaveReason:"Please complete the Reason for Leave field.",errorNoSickReason:"Please complete the Reason for Sickness field.",errorNoToilReason:"Please complete the Reason for {toil_term} field.",clashes:"Clashes"};var Dialog=function(request){var _this71=this;S=appogee.getStrings("RequestDialog",R);if($dlg===null){$dlg=$("<div />").addClass("dialog")}RequestDialogBase.call(this,$dlg);this.request=new Request(request);this.request.onRecalculate(function(){if(_this71.editMode=="edit"){_this71.renderEdit()}else if(_this71.editMode=="r2w"){_this71.renderReturnToWork()}});this.hasApproved=this.request.approvedByKeys.indexOf(this.currentUser.key)>-1;this.hasApprovedCancellation=this.request.cancellationActionedByKey==this.currentUser.key;this.isAltApprover=this.request.altApproverKeys.indexOf(this.currentUser.key)>-1;this.isPrimaryApprover=!this.isAltApprover&&this.request.approverKeys.indexOf(this.currentUser.key)>-1;this.canApprove=this.request.approverKeys.indexOf(this.currentUser.key)>-1;var cancelableStatuses=[RequestStatus.Open,RequestStatus.Pending,RequestStatus.Approved];this.isRequestor=this.currentUser.key==this.request.employee.key;this.canCancel=this.isRequestor&&cancelableStatuses.indexOf(this.request.status)>-1;this.canEdit=this.currentUser.isHrManager()||this.currentUser.isManagerFor(this.request.employee,true);this.isManagerReader=this.currentUser.isManagerFor(this.request.employee,false);this.showClashes=this.isManagerReader&&this.request.type!=RequestType.Toil;this.title=this.getTitle();this.views={clashes:null};this.historyLogs=null;this.approvalFlow=null;this.editOoo=false;this.onCloseHandlers=[];this.onUpdateHandlers=[];if(this.showClashes){this.initClashes()}this.showAdvancedOptions=false};Dialog.prototype=new RequestDialogBase;Dialog.prototype.constructor=Dialog;Dialog.prototype.getTitle=function(){var type=S.leaveRequest;if(this.request.type==RequestType.Sick){type=S.sickReport}else if(this.request.type==RequestType.Toil){type=S.toilRequest.format({toil_term:appogee.getToilTerm()})}var title=S.dialogTitle.format({request_type:type,employee_name:this.request.employee.name});return title};Dialog.prototype.onClose=function(handler){this.onCloseHandlers.push(handler)};Dialog.prototype.onUpdate=function(handler){this.onUpdateHandlers.push(handler)};Dialog.prototype.convertDateTime=function(dateTimeStr){var dateInMS=Date.parse(dateTimeStr);var dateTimeObj=new Date;dateTimeObj.setTime(dateInMS);var hours=dateTimeObj.getHours();var mins=("0"+dateTimeObj.getMinutes()).slice(-2);return hours+":"+mins};Dialog.prototype.getTmplData=function(){var isSingleDay=this.request.isSingleDay();var isMorningOnly=this.request.isMorningOnly();var isAfternoonOnly=this.request.isAfternoonOnly();var hasSetTimes=false;if(this.request.startTime&&this.request.endTime){var strStartTime=this.convertDateTime(this.request.startTime);var strEndTime=this.convertDateTime(this.request.endTime);this.request.startTime=strStartTime;this.request.endTime=strEndTime;hasSetTimes=true}var data={request:this.request,title:this.title,hasApproved:this.hasApproved,hasApprovedCancellation:this.hasApprovedCancellation,isAltApprover:this.isAltApprover,isPrimaryApprover:this.isPrimaryApprover,canApprove:this.canApprove,canCancel:this.canCancel,canEdit:this.canEdit,isManagerReader:this.isManagerReader,isRequestor:this.isRequestor,showClashes:this.showClashes,isSingleDay:isSingleDay,isMorningOnly:isMorningOnly,isAfternoonOnly:isAfternoonOnly,hasSetTimes:hasSetTimes,isLeave:this.request.isLeave(),isCustom1:this.request.isCustom1(),isCustom2:this.request.isCustom2(),isSick:this.request.isSick(),isToil:this.request.type==RequestType.Toil,isOpen:this.request.isOpen(),isPending:this.request.isPending(),isApproved:this.request.isApproved(),isRejected:this.request.isRejected(),isCancelled:this.request.isCancelled(),isCancellationPending:this.request.isCancellationPending(),showOoo:this.canShowOoo(),toilTerm:appogee.getToilTerm(),startTime:this.request.startTime,endTime:this.request.endTime,dStartDate:this.currentUser.formatDate(this.request.startDate),dEndDate:this.currentUser.formatDate(this.request.endDate),dDays:appogee.util.round(this.request.days,2),dHours:appogee.util.round(this.request.hours,2),hideHours:appogee.getHideHours(),rejectPlaceholder:S.dlgRejectPlaceholderText,approvePlaceholder:S.dlgApprovePlaceholderText,cancellationPlaceholder:S.dlgCancelPlaceholderText};return data};Dialog.prototype.render=function(){var _this72=this;if(!this.employee){service.getEmployeeLeaveProfile(this.request.employee.key,function(employee){_this72.employee=employee;_this72.render()});return}var data=this.getTmplData();$dlg.html(tmpl(data));this.renderOoo();$dlg.find(".appogee-tabs").appogeeTabs({beforeChange:function($oldTab,$newTab){var tab=$newTab.data("tab");if(tab=="history"){_this72.loadHistory()}else if(tab=="approvalFlow"){_this72.loadApprovalFlow()}return true},afterChange:function(){}});if(this.views.clashes){this.views.clashes.setContainer($dlg.find(".clashContainer"))}$dlg.find(".btnApprove").click(function(){_this72.approve()});$dlg.find(".btnReject").click(function(){_this72.reject()});$dlg.find(".btnCancel").click(function(){_this72.cancel()});$dlg.find(".btnClose").click(function(){_this72.close()});$dlg.find(".btnEdit").click(function(){_this72.edit()});$dlg.find(".btnReturnToWork").click(function(){_this72.returnToWork()});$dlg.find(".btnCancelAction").click(function(){_this72.cancelAction()});$dlg.find(".btnSubmitApproval").click(function(){_this72.submitApproval()});$dlg.find(".btnSubmitRejection").click(function(){_this72.submitRejection()});$dlg.find(".btnSubmitCancellation").click(function(){_this72.submitCancellation()})};Dialog.prototype.canShowOoo=function(){if(!this.isRequestor){return false}if(this.request.type==RequestType.Toil){return false}if(!this.employee.gappsOooSync){return false}var today=appogee.today();if(this.request.endDate<today){return false}return true};Dialog.prototype.cancelAction=function(){$dlg.find(".commentsTextarea").removeClass("error");$dlg.find(".actions-container").show();$dlg.find("#approveCommentsContainer").hide();$dlg.find("#rejectCommentsContainer").hide();$dlg.find("#cancellationCommentsContainer").hide()};Dialog.prototype.approve=function(){$dlg.find(".actions-container").hide();$dlg.find("#approveCommentsContainer").show();$dlg.find("#rejectCommentsContainer").hide();$dlg.find("#cancellationCommentsContainer").hide()};Dialog.prototype.reject=function(){$dlg.find(".actions-container").hide();$dlg.find("#approveCommentsContainer").hide();$dlg.find("#rejectCommentsContainer").show();$dlg.find("#cancellationCommentsContainer").hide()};Dialog.prototype.cancel=function(){$dlg.find(".actions-container").hide();$dlg.find("#approveCommentsContainer").hide();$dlg.find("#rejectCommentsContainer").hide();$dlg.find("#cancellationCommentsContainer").show()};Dialog.prototype.submitApproval=function(){var _this73=this;var comments=$dlg.find("#approveCommentsContainer .commentsTextarea").val().trim();this.close();var notifier=appogee.notify(S.nfyApproving);this.request.approve(this.currentUser,comments,function(request){notifier.success(S.nfyApproved);_this73.onUpdateHandlers.forEach(function(handler){return handler(request)})})};Dialog.prototype.submitRejection=function(){var _this74=this;var comments=$dlg.find("#rejectCommentsContainer .commentsTextarea").val().trim();if(!comments){$dlg.find("#rejectCommentsContainer .commentsTextarea").addClass("error");return}this.close();var notifier=appogee.notify(S.nfyRejecting);this.request.reject(this.currentUser,comments,function(request){notifier.success(S.nfyRejected);_this74.onUpdateHandlers.forEach(function(handler){return handler(request)})})};Dialog.prototype.submitCancellation=function(comments){var _this75=this;var comments=$dlg.find("#cancellationCommentsContainer .commentsTextarea").val().trim();if(!comments){$dlg.find("#cancellationCommentsContainer .commentsTextarea").addClass("error");return}this.close();var notifier=appogee.notify(S.nfyCancelling);this.request.cancel(this.currentUser,comments,function(request){if(request.status==RequestStatus.Cancelled){notifier.success(S.nfyCancelled)}else{notifier.success(S.nfyCancelPending)}_this75.onUpdateHandlers.forEach(function(handler){return handler(request)})})};Dialog.prototype.show=function(){var _this76=this;this.dlg=new appogee.Dialog($dlg,{dialogClass:"dlg-request",width:600,onBeforeClose:function(){_this76.onCloseHandlers.forEach(function(handler){return handler()})}});this.dlg.clearButtons();this.render();this.dlg.show()};Dialog.prototype.close=function(){this.dlg.hide()};Dialog.prototype.initClashes=function(){this.views.clashes=new ClashView($dlg.find(".clashContainer"),this.request);this.views.clashes.fetch();this.views.clashes.onFetch(function(clashes){var $tab=$dlg.find('.subtab[data-tab="clashes"]');var html=S.clashes+" ("+Math.max(0,clashes.length-1)+")";$tab.html(html)})};Dialog.prototype.loadApprovalFlow=function(){var _this77=this;if(this.approvalFlow===null){var url="/requests/{0}/approval-flow".format(this.request.key);appogee.api.get(url,function(response){_this77.approvalFlow=response.items;_this77.renderApprovalFlow()})}};Dialog.prototype.renderApprovalFlow=function(){var data={request:this.request,levels:this.approvalFlow};if(this.approvalFlow.length==1){if(this.approvalFlow[0].approvers.length==1){data.soleApprover=this.approvalFlow[0].approvers[0].email}}$dlg.find(".approvalFlowContainer").html(tmplApprovalFlow(data))};Dialog.prototype.loadHistory=function(){var _this78=this;if(this.historyLogs===null){var url="/logs?targetKey={0}".format(this.request.key);appogee.api.get(url,function(response){_this78.historyLogs=response.items;_this78.renderLogs()})}};Dialog.prototype.renderLogs=function(){var data={logs:this.historyLogs};$dlg.find(".historyContainer").html(tmplHistory(data))};Dialog.prototype.renderOoo=function(){var _this79=this;var data={editMode:this.editOoo,request:this.request};$dlg.find(".oooContainer").html(tmplOoo(data));$dlg.find(".btnClose").click(function(){_this79.close()});$dlg.find(".btnEditOoo").click(function(){_this79.editOoo=true;_this79.renderOoo()});$dlg.find(".btnCancelOoo").click(function(){_this79.editOoo=false;_this79.renderOoo()});if(this.editOoo){$dlg.find("#chkOoo").click(function(e){$("#oooEditContainer").toggle(e.currentTarget.checked)});$("#oooEditContainer").toggle(this.request.ooo.enabled)}this.initOoo();$dlg.find(".btnSaveOoo").click(function(){var url="/my/leave/xhr/update_ooo";var enabled=$("#chkOoo").prop("checked");var subject=$("#txtOooSubject").val();var body=$("#txtOooBody").val();var contactsOnly=$("#chkOooContactsOnly").prop("checked");var domainOnly=$("#chkOooDomainOnly").prop("checked");if(enabled){if(!subject){appogee.valert(S.errorOooNoSubject);return}if(!body){appogee.valert(S.errorOooNoMessage);return}}var payload={requestKey:_this79.request.key,ooo:{enabled:enabled,subject:subject,body:body,contactsOnly:contactsOnly,domainOnly:domainOnly}};appogee.xhr.post(url,payload,function(response){if(response.success){_this79.request.ooo.enabled=enabled;_this79.request.ooo.subject=subject;_this79.request.ooo.body=body;_this79.request.ooo.contactsOnly=contactsOnly;_this79.request.ooo.domainOnly=domainOnly}else if(response.reason){appogee.valert(S.errorOooTitle,response.reason)}else{appogee.valert(S.errorOoo)}_this79.editOoo=false;_this79.renderOoo()})})};Dialog.prototype.edit=function(){var _this80=this;$dlg.find(".btnEdit").attr("disabled",true);var batch=service.createBatch();batch.getEmployeeLeaveProfile(this.request.employee.key);batch.listLeaveTypes();batch.listSickTypes();batch.wait(function(employee,leaveTypes,sickTypes){_this80.employee=employee;_this80.leaveTypes=leaveTypes;_this80.sickTypes=sickTypes;_this80.request.setEmployee(employee);_this80.renderEdit()})};Dialog.prototype.renderEdit=function(){var _this81=this;this.editMode="edit";var data=this.getTmplData();data.employee=this.employee;data.leaveTypes=this.leaveTypes;data.sickTypes=this.sickTypes;data.requestedHours=this.request.getHours();data.requestedDays=this.request.getDays();$dlg.html(tmplEdit(data));if(this.request.isLeave()||this.request.isCustom1()||this.request.isCustom2()){this.populateLeaveTypes(this.leaveTypes)}var $txtStartDate=$dlg.find(".txtStartDate");var $txtEndDate=$dlg.find(".txtEndDate");this.initDatePickers($txtStartDate,$txtEndDate);$dlg.find(".hd").data("hoursInDay",this.request.employee.hoursInDay).hd();$dlg.find(".txtHours,.txtDays").change(function(){var hours=$dlg.find(".txtHours").val();hours=parseFloat(hours);if(!isNaN(hours)){_this81.request.setHours(hours)}_this81.renderEdit()});var $calendar=$dlg.find(".calendar");this.requestCalendar=new RequestCalendar($calendar,this.request);this.requestCalendar.sm=true;this.requestCalendar.render();this.dlg.center();$dlg.find(".btnClose").click(function(){_this81.close()});$dlg.find(".btnSave").click(function(){_this81.save()});$dlg.find(".btnCancel").click(function(){_this81.request.reset();_this81.render()})};Dialog.prototype.save=function(){var _this82=this;this.validateEdit(function(){var options={mandatory:true,okText:S.btnSaveLabel};appogee.prompt(S.dlgSaveTitle,S.dlgSaveMsg,function(comments){_this82.doSave(comments)},options)})};Dialog.prototype.validateEdit=function(callback){var _this83=this;if($dlg.find(".ddlCategory").length>0){var categoryKey=$dlg.find(".ddlCategory").val();if(!categoryKey){appogee.valert(S.alertSickTypeTitle,S.alertSickTypeMsg);return}}if(!this.request.startDate){appogee.valert(S.errorInvalidStartDate);return}if(!this.request.endDate){appogee.valert(S.errorInvalidEndDate);return}var requireReason=false;var reason=$dlg.find(".txtReason").val();if(this.request.isSick()){requireReason=this.request.employee.sick.requireReason;if(requireReason&&!reason){appogee.valert(S.errorNoSickReason);return}}else if(this.request.isToil()){requireReason=this.request.employee.toil.requireReason;if(requireReason&&!reason){appogee.valert(S.errorNoToilReason.format({toil_term:appogee.getToilTerm()}));return}}else{requireReason=this.request.employee.leave.requireReason;if(requireReason&&!reason){appogee.valert(S.errorNoLeaveReason);return}}var url="/employees/{0}/clashes".format(this.request.employee.key);var r=this.request.toJSON();var body={startDate:r.startDate,endDate:r.endDate,breakdown:r.breakdown};$dlg.find(".btnSave").prop("disabled",true);appogee.api.post(url,body,function(response){var clashes=response.items;var clash=_.find(clashes,function(c){return c.key!=_this83.request.key});if(clash){appogee.valert(S.alertClashTitle,S.alertClashMsg);return}else{callback()}},{force:true})};Dialog.prototype.doSave=function(comments){var _this84=this;var status=$dlg.find(".ddlStatus").val();var categoryKey=$dlg.find(".ddlCategory").val();var reason=$dlg.find(".txtReason").val();var hours=parseFloat($dlg.find(".txtHours").val());this.request.status=status;this.request.reason=reason;this.request.category=null;this.request.setHours(hours);if(categoryKey){var category=null;if(this.request.isSick()){category=_.findWhere(this.sickTypes,{key:categoryKey})}else if(this.request.isToil()){}else{category=_.findWhere(this.leaveTypes,{key:categoryKey})}if(category){this.request.category=category;if(this.request.isLeave()||this.request.isCustom1()||this.request.isCustom2()){if(this.request.employee.custom1CategoryKey==category.key){this.request.type=RequestType.Custom1}else if(this.request.employee.custom2CategoryKey==category.key){this.request.type=RequestType.Custom2}else{this.request.type=RequestType.Leave}}}}var request=this.request.toJSON();var body={request:request,comments:comments};this.close();var url="/requests/{0}".format(this.request.key);var notifier=appogee.notify(S.nfySaving);appogee.api.put(url,body,function(request){notifier.success(S.nfySaveSuccessful);_this84.onUpdateHandlers.forEach(function(handler){return handler(request)})},{artificialDelay:true})};Dialog.prototype.returnToWork=function(){var _this85=this;$dlg.find(".btnEdit").attr("disabled",true);var batch=service.createBatch();batch.getEmployeeLeaveProfile(this.request.employee.key);batch.listLeaveTypes();batch.listSickTypes();batch.wait(function(employee,leaveTypes,sickTypes){_this85.employee=employee;_this85.leaveTypes=leaveTypes;_this85.sickTypes=sickTypes;_this85.showAdvancedOptions=false;_this85.request.setEmployee(employee);_this85.renderReturnToWork()})};Dialog.prototype.renderReturnToWork=function(){var _this86=this;this.editMode="r2w";var data=this.getTmplData();data.showAdvancedOptions=this.showAdvancedOptions;data.employee=this.employee;data.leaveTypes=this.leaveTypes;data.sickTypes=this.sickTypes;data.requestedHours=this.request.getHours();data.requestedDays=this.request.getDays();$dlg.html(tmplReturnToWork(data));if(this.request.isLeave()||this.request.isCustom1()||this.request.isCustom2()){this.populateLeaveTypes(this.leaveTypes)}var $txtStartDate=$dlg.find(".txtStartDate");var $txtEndDate=$dlg.find(".txtEndDate");this.initDatePickers($txtStartDate,$txtEndDate);$dlg.find(".hd").data("hoursInDay",this.request.employee.hoursInDay).hd();$dlg.find(".txtHours,.txtDays").change(function(){var hours=$dlg.find(".txtHours").val();hours=parseFloat(hours);if(!isNaN(hours)){_this86.request.setHours(hours)}_this86.renderEdit()});$dlg.find(".btnAdvancedOptions").click(function(){_this86.showAdvancedOptions=!_this86.showAdvancedOptions;_this86.renderReturnToWork()});var $calendar=$dlg.find(".calendar");this.requestCalendar=new RequestCalendar($calendar,this.request);this.requestCalendar.sm=true;this.requestCalendar.render();this.dlg.center();$dlg.find(".btnClose").click(function(){_this86.close()});$dlg.find(".btnSave").click(function(){_this86.submitReturnToWork()});$dlg.find(".btnSubmitCancellation").click(function(){_this86.request.reset();_this86.render()})};Dialog.prototype.submitReturnToWork=function(){var _this87=this;this.validateEdit(function(){var categoryKey=$dlg.find(".ddlCategory").val();var reason=$dlg.find(".txtReason").val();var hours=parseFloat($dlg.find(".txtHours").val());_this87.request.reason=reason;_this87.request.category=null;_this87.request.setHours(hours);if(categoryKey){var category=_.findWhere(_this87.sickTypes,{key:categoryKey});if(category){_this87.request.category=category}}var request=_this87.request.toJSON();_this87.close();var url="/requests/{0}/return".format(_this87.request.key);var notifier=appogee.notify(S.nfyReturningToWork);appogee.api.post(url,request,function(request){notifier.success(S.nfyReturnToWorkSubmitted);appogee.alert(S.alertReturnToWorkSubmittedTitle,S.alertReturnToWorkSubmittedMsg);_this87.onUpdateHandlers.forEach(function(handler){return handler(request)})},{artificialDelay:true})})};return Dialog});define("leave/enums",["appogee"],function(appogee){"use strict";var AccrualFrequency={Weekly:"weekly",Fortnightly:"fortnightly",Monthly:"monthly",Bimonthly:"bimonthly",asList:function(){return[{key:"weekly",value:appogee.trans("Weekly")},{key:"fortnightly",value:appogee.trans("Fortnightly")},{key:"monthly",value:appogee.trans("Monthly")},{key:"bimonthly",value:appogee.trans("Bimonthly")}]}};var AccrualWeekday={Sundays:6,Mondays:0,Tuesdays:1,Wednesdays:2,Thursdays:3,Fridays:4,Saturdays:5,asList:function(){return[{key:0,value:appogee.trans("Mondays")},{key:1,value:appogee.trans("Tuesdays")},{key:2,value:appogee.trans("Wednesdays")},{key:3,value:appogee.trans("Thursdays")},{key:4,value:appogee.trans("Fridays")},{key:5,value:appogee.trans("Saturdays")},{key:6,value:appogee.trans("Sundays")}]}};var AccrualDay={asList:function(){return[{key:1,value:appogee.trans("1st")},{key:2,value:appogee.trans("2nd")},{key:3,value:appogee.trans("3rd")},{key:4,value:appogee.trans("4th")},{key:5,value:appogee.trans("5th")},{key:6,value:appogee.trans("6th")},{key:7,value:appogee.trans("7th")},{key:8,value:appogee.trans("8th")},{key:9,value:appogee.trans("9th")},{key:10,value:appogee.trans("10th")},{key:11,value:appogee.trans("11th")},{key:12,value:appogee.trans("12th")},{key:13,value:appogee.trans("13th")},{key:14,value:appogee.trans("14th")},{key:15,value:appogee.trans("15th")},{key:16,value:appogee.trans("16th")},{key:17,value:appogee.trans("17th")},{key:18,value:appogee.trans("18th")},{key:19,value:appogee.trans("19th")},{key:20,value:appogee.trans("20th")},{key:21,value:appogee.trans("21st")},{key:22,value:appogee.trans("22nd")},{key:23,value:appogee.trans("23rd")},{key:24,value:appogee.trans("24th")},{key:25,value:appogee.trans("25th")},{key:26,value:appogee.trans("26th")},{key:27,value:appogee.trans("27th")},{key:28,value:appogee.trans("28th")}]}};var ProRataFormula={Disabled:"disabled",Months:"months",MonthsInclusive:"months_inclusive",Days:"days"};var RequestCreateScope={Self:"self",Team:"team",ADU:"aou",Manager:"managers"};return{AccrualFrequency:AccrualFrequency,AccrualWeekday:AccrualWeekday,AccrualDay:AccrualDay,ProRataFormula:ProRataFormula,RequestCreateScope:RequestCreateScope}});define("hbs!leave/dialogs/NewRequestDialog_PageButtons",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<button class="btn btn-sm btn-default btnPrevious">\n\t\t<i class="glyphicon glyphicon-chevron-left"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Previous",{name:"s",hash:{},data:data}))+"\n\t</button>\n"},3:function(depth0,helpers,partials,data){
return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Submit Request",{name:"s",hash:{},data:data}))+"\n"},5:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="buttons">\n\t<button class="btn btn-sm btn-default btnClose">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+"\n\t</button>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showBtnPrevious:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t<button class="btn btn-sm btn-primary btnNext">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.nextLabel:depth0,"Submit Request",{name:"ifequal",hash:{},fn:this.program(3,data,0),inverse:this.program(5,data,0),data:data}))!=null?stack1:"")+'\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t</button>\n</div>'},useData:true});Handlebars.registerPartial("leave/dialogs/NewRequestDialog_PageButtons",t);Handlebars.registerPartial("leave/dialogs/NewRequestDialog_PageButtons",t);return t});define("hbs!leave/dialogs/NewRequestDialog_PageHeader",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.program(4,data,0),data:data}))!=null?stack1:""},2:function(depth0,helpers,partials,data){return"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Sickness Report",{name:"s",hash:{},data:data}))+"\n"},4:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(5,data,0),inverse:this.program(7,data,0),data:data}))!=null?stack1:""},5:function(depth0,helpers,partials,data){return"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New {toil_term} Request",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"\n"},7:function(depth0,helpers,partials,data){return"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Leave Request",{name:"s",hash:{},data:data}))+"\n\t"},9:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(10,data,0),inverse:this.program(12,data,0),data:data}))!=null?stack1:""},10:function(depth0,helpers,partials,data){var stack1;return"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Sickness Report for {first_name} {last_name}",{name:"s",hash:{last_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.lastName:stack1,first_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.firstName:stack1},data:data}))+"\n"},12:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(13,data,0),inverse:this.program(15,data,0),data:data}))!=null?stack1:""},13:function(depth0,helpers,partials,data){var stack1;return"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New {toil_term} Request for {first_name} {last_name}",{name:"s",hash:{last_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.lastName:stack1,first_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.firstName:stack1,toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"\n"},15:function(depth0,helpers,partials,data){var stack1;return"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Leave Request for {first_name} {last_name}",{name:"s",hash:{last_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.lastName:stack1,first_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.firstName:stack1},data:data}))+"\n\t"},17:function(depth0,helpers,partials,data){var helper;return"\t: "+this.escapeExpression((helper=(helper=helpers.titleText||(depth0!=null?depth0.titleText:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"titleText",hash:{},data:data}):helper))+"\n"},19:function(depth0,helpers,partials,data){var stack1;return"\t\t"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.name:stack1,depth0))+":\n"},21:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(22,data,0,blockParams,depths),inverse:this.program(27,data,0,blockParams,depths),data:data}))!=null?stack1:""},22:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depths[2]!=null?depths[2].hideHours:depths[2],{name:"if",hash:{},fn:this.program(23,data,0,blockParams,depths),inverse:this.program(25,data,0,blockParams,depths),data:data}))!=null?stack1:""},23:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{days} day on {date}",{name:"s",hash:{date:depth0!=null?depth0.dStartDate:depth0,days:depth0!=null?depth0.dDays:depth0},data:data}))+"\n"},25:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{hours} hours on {date}",{name:"s",hash:{date:depth0!=null?depth0.dStartDate:depth0,hours:depth0!=null?depth0.dHours:depth0},data:data}))+"\n"},27:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{days} day on {date}",{name:"s",hash:{date:depth0!=null?depth0.dStartDate:depth0,days:depth0!=null?depth0.dDays:depth0},data:data}))+"\n"},29:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isMorningOnly:depth0,{name:"if",hash:{},fn:this.program(30,data,0,blockParams,depths),inverse:this.program(32,data,0,blockParams,depths),data:data}))!=null?stack1:""},30:function(depth0,helpers,partials,data){return"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Morning of {date}",{name:"s",hash:{date:depth0!=null?depth0.dStartDate:depth0},data:data}))+"\n"},32:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isAfternoonOnly:depth0,{name:"if",hash:{},fn:this.program(33,data,0,blockParams,depths),inverse:this.program(35,data,0,blockParams,depths),data:data}))!=null?stack1:""},33:function(depth0,helpers,partials,data){return"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Afternoon of {date}",{name:"s",hash:{date:depth0!=null?depth0.dStartDate:depth0},data:data}))+"\n"},35:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(36,data,0,blockParams,depths),inverse:this.program(41,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t"},36:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depths[2]!=null?depths[2].hideHours:depths[2],{name:"if",hash:{},fn:this.program(37,data,0,blockParams,depths),inverse:this.program(39,data,0,blockParams,depths),data:data}))!=null?stack1:""},37:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{days} days between {start_date} and {end_date}",{name:"s",hash:{end_date:depth0!=null?depth0.dEndDate:depth0,start_date:depth0!=null?depth0.dStartDate:depth0,days:depth0!=null?depth0.dDays:depth0},data:data}))+"\n"},39:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{hours} hours between {start_date} and {end_date}",{name:"s",hash:{end_date:depth0!=null?depth0.dEndDate:depth0,start_date:depth0!=null?depth0.dStartDate:depth0,hours:depth0!=null?depth0.dHours:depth0},data:data}))+"\n"},41:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{days} days between {start_date} and {end_date}",{name:"s",hash:{end_date:depth0!=null?depth0.dEndDate:depth0,start_date:depth0!=null?depth0.dStartDate:depth0,days:depth0!=null?depth0.dDays:depth0},data:data}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"<h4>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.selfRequest:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.program(9,data,0,blockParams,depths),data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.titleText:depth0,{name:"if",hash:{},fn:this.program(17,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"</h4>\n\n<h5>\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1,{name:"if",hash:{},fn:this.program(19,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSingleDay:depth0,{name:"if",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.program(29,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"</h5>"},useData:true,useDepths:true});Handlebars.registerPartial("leave/dialogs/NewRequestDialog_PageHeader",t);Handlebars.registerPartial("leave/dialogs/NewRequestDialog_PageHeader",t);return t});define("templates/helpers/abstract",["hbs/handlebars","underscore"],function(Handlebars,_){"use strict";function fnAbstract(str,len){if(!str){return""}if(!_.isNumber(len)){len=100}if(str.length>len){str=str.substring(0,len)+" ..."}return str}Handlebars.registerHelper("abstract",fnAbstract);return fnAbstract});define("hbs!leave/dialogs/NewRequstDialog",["hbs/handlebars","hbs!leave/dialogs/NewRequestDialog_PageButtons","hbs!leave/dialogs/NewRequestDialog_PageHeader","templates/helpers/ifequal","templates/helpers/s","templates/helpers/formatDate","templates/helpers/ifall","templates/helpers/round","templates/helpers/abstract"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'\n<div class="page-1 text-center">\n\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"What type of request would you like to make?",{name:"s",hash:{},data:data}))+'</p>\n\t<div class="tiles">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCreateLeave:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.program(4,data,0),data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.sick:stack1)!=null?stack1.enabled:stack1,{name:"if",hash:{},fn:this.program(6,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.toil:stack1)!=null?stack1.enabled:stack1,{name:"if",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<div class="clearfix"></div>\n\t</div>\n</div>\n\n'},2:function(depth0,helpers,partials,data){return'\t\t\t<a href="javascript: void(0);" class="tile leave" data-type="leave">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave",{name:"s",hash:{},data:data}))+"</a>\n"},4:function(depth0,helpers,partials,data){return'\t\t\t<a href="javascript: void(0);" class="tile leave disabled" title=\''+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You do not have permission to submit Leave Requests for this employee",{name:"s",hash:{},data:data}))+"'>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave",{name:"s",hash:{},data:data}))+"</a>\n"},6:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCreateSick:depth0,{name:"if",hash:{},fn:this.program(7,data,0),inverse:this.program(9,data,0),data:data}))!=null?stack1:""},7:function(depth0,helpers,partials,data){return'\t\t\t\t<a href="javascript: void(0);" class="tile sick" data-type="sick">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sickness",{name:"s",hash:{},data:data}))+"</a>\n"},9:function(depth0,helpers,partials,data){return'\t\t\t\t<a href="javascript: void(0);" class="tile sick disabled" title=\''+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You do not have permission to submit Sick Requests for this employee",{name:"s",hash:{},data:data}))+"'>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sickness",{name:"s",hash:{},data:data}))+"</a>\n"},11:function(depth0,helpers,partials,data){var stack1;return((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCreateToil:depth0,{name:"if",hash:{},fn:this.program(12,data,0),inverse:this.program(14,data,0),data:data}))!=null?stack1:"")+"\n"},12:function(depth0,helpers,partials,data){var helper;return'\t\t\t\t<a href="javascript: void(0);" class="tile toil" data-type="toil">'+this.escapeExpression((helper=(helper=helpers.toilTerm||(depth0!=null?depth0.toilTerm:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"toilTerm",hash:{},data:data}):helper))+"</a>\n"},14:function(depth0,helpers,partials,data){var helper;return'\t\t\t\t<a href="javascript: void(0);" class="tile toil disabled" title=\''+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You do not have permission to submit {toil_term} Requests for this employee",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"'>"+this.escapeExpression((helper=(helper=helpers.toilTerm||(depth0!=null?depth0.toilTerm:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"toilTerm",hash:{},data:data}):helper))+"</a>\n"},16:function(depth0,helpers,partials,data){var stack1;return'<div class="page-employee">\n\t<div class="form-container">\n\t\t<div class="form-group">\n\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Who do you wish to report {type} for?",{name:"s",hash:{type:(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.type:stack1},data:data}))+'</label>\n\t\t\t<div>\n\t\t\t\t<label class="radio-inline">\n\t\t\t\t\t<input type="radio" name="scope" id="radScopeSelf" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.selfRequest:depth0,{name:"if",hash:{},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Myself",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline">\n\t\t\t\t\t<input type="radio" name="scope" '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.selfRequest:depth0,{name:"unless",hash:{},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Another Employee",{name:"s",hash:{},data:data}))+"\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n"+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.selfRequest:depth0,{name:"unless",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</div>\n\n"+((stack1=this.invokePartial(partials["leave/dialogs/NewRequestDialog_PageButtons"],depth0,{name:"leave/dialogs/NewRequestDialog_PageButtons",data:data,indent:"\t",helpers:helpers,partials:partials}))!=null?stack1:"")+"</div>\n"},17:function(depth0,helpers,partials,data){return'checked="checked"'},19:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="form-group">\n\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Which user you are reporting {type} for? (enter email)",{name:"s",hash:{type:(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.type:stack1},data:data}))+'</label>\n\t\t\t<div>\n\t\t\t\t<input type="text" class="form-control input-sm user-picker" id="txtEmployee" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.requestEmployee:depth0,{name:"if",hash:{},fn:this.program(20,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t</div>\n\t\t</div>\n"},20:function(depth0,helpers,partials,data){var stack1;return'value="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.requestEmployee:depth0)!=null?stack1.email:stack1,depth0))+'" data-user-picker-key="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.requestEmployee:depth0)!=null?stack1.key:stack1,depth0))+'"'},22:function(depth0,helpers,partials,data){return'\t<div class="page-working text-center">\n\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Checking Dates, Please Wait ...",{name:"s",hash:{},data:data}))+'</h4>\n\t\t<img src="/img/spinners/working_32.gif" />\n\t</div>\n'},24:function(depth0,helpers,partials,data){var stack1;return'\t<div class="page-clash">\n\t\t<h4 class="text-center text-warning">\n\t\t\t<i class="fa fa-exclamation-triangle"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Oops, we have a clash!",{name:"s",hash:{},data:data}))+'\n\t\t</h4>\n\t\t<p class="text-center">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The dates you entered clash with another request:",{name:"s",hash:{},data:data}))+'</p>\n\t\t\n\t\t<div class="container-flex">\n\t\t\t<div class="col-sm-offset-1 col-sm-5">\n\t\t\t\t<h6>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Dates Requested:",{name:"s",hash:{},data:data}))+"</h6>\n\t\t\t\t<div>"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data}))+" - "+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.endDate:stack1,{name:"formatDate",hash:{},data:data}))+'</div>\n\t\t\t</div>\n\t\t\t<div class="col-sm-5">\n\t\t\t\t<h6>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Clashes With:",{name:"s",hash:{},data:data}))+"</h6>\n\t\t\t\t<div>"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.clash:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data}))+" - "+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.clash:depth0)!=null?stack1.endDate:stack1,{name:"formatDate",hash:{},data:data}))+"</div>\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.clash:depth0)!=null?stack1.reason:stack1,{name:"if",hash:{},fn:this.program(25,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="buttons text-center">\n\t\t\t<button class="btn btn-sm btn-default w125 btnCancel">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t\t\t</button>\t\t\t\n\t\t\t<button class="btn btn-sm btn-default w125 btnPrevious">\n\t\t\t\t<i class="fa fa-edit"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Amend Dates",{name:"s",hash:{},data:data}))+"\n\t\t\t</button>\n\t\t</div>\n\t</div>\n"},25:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t<div>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.clash:depth0)!=null?stack1.reason:stack1,depth0))+"</div>\n"},27:function(depth0,helpers,partials,data){var stack1;return'\t<div class="page-reason">\n'+((stack1=this.invokePartial(partials["leave/dialogs/NewRequestDialog_PageHeader"],depth0,{name:"leave/dialogs/NewRequestDialog_PageHeader",data:data,indent:"\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+'\t\t\n\t\t<div class="form-group '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.requireReason:depth0,{name:"if",hash:{},fn:this.program(28,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(30,data,0),inverse:this.program(32,data,0),data:data}))!=null?stack1:"")+'\t\t\t<textarea class="form-control input-sm" id="txtReason">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.reason:stack1,depth0))+"</textarea>\n"+((stack1=(helpers.ifall||depth0&&depth0.ifall||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.requestDetail:stack1,{name:"ifall",hash:{},fn:this.program(37,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</div>\n\t\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showOoo:depth0,{name:"if",hash:{},fn:this.program(39,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\n"+((stack1=this.invokePartial(partials["leave/dialogs/NewRequestDialog_PageButtons"],depth0,{name:"leave/dialogs/NewRequestDialog_PageButtons",data:data,indent:"\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+"\t</div>\n"},28:function(depth0,helpers,partials,data){return"mandatory"},30:function(depth0,helpers,partials,data){return"\t\t\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please provide any supporting information below:",{name:"s",hash:{},data:data}))+"</label>\n"},32:function(depth0,helpers,partials,data){var stack1,helper,options;stack1=(helper=(helper=helpers.isToil||(depth0!=null?depth0.isToil:depth0))!=null?helper:helpers.helperMissing,options={name:"isToil",hash:{},fn:this.program(33,data,0),inverse:this.program(35,data,0),data:data},typeof helper==="function"?helper.call(depth0,options):helper);if(!helpers.isToil){stack1=helpers.blockHelperMissing.call(depth0,stack1,options)}if(stack1!=null){return stack1}else{return""}},33:function(depth0,helpers,partials,data){return"\t\t\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enter a reason for your {toil_term} request:",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"</label>\n"},35:function(depth0,helpers,partials,data){return"\t\t\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enter a reason for your leave request:",{name:"s",hash:{},data:data}))+"</label>\n\t\t\t"},37:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t<div class="help-block">\n\t\t\t\t\t'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.requestDetail:stack1,depth0))+"\n\t\t\t\t</div>\n"},39:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="checkbox">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" id="chkOoo" '+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.enabled:stack1,{name:"if",hash:{},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Auto set Gmail out of office?",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<div class="help-block" id="chkOooNote" '+((stack1=helpers.unless.call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.enabled:stack1,{name:"unless",hash:{},fn:this.program(40,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Out of office will be configured on the next page",{name:"s",hash:{},data:data}))+"\n\t\t\t</div>\n\t\t</div>\n"},40:function(depth0,helpers,partials,data){return'style="display: none;"'},42:function(depth0,helpers,partials,data){var stack1;return((stack1=this.invokePartial(partials["leave/dialogs/NewRequestDialog_PageHeader"],depth0,{name:"leave/dialogs/NewRequestDialog_PageHeader",data:data,indent:"\t",helpers:helpers,partials:partials}))!=null?stack1:"")+'\t\n\t<div id="oooContainer" class="page-ooo">\n\t\t<div class="form-group">\n\t\t\t<label class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Subject",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t<div class="pull-right import-from-gmail">\n\t\t\t\t<a href="javascript: void(0);" id="btnImportOooSubject">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import from Gmail",{name:"s",hash:{},data:data}))+'</a>\n\t\t\t\t<img src="/img/spinners/working_16.gif" />\n\t\t\t</div>\n\t\t\t<div class="clearfix"></div>\n\t\t\t<input type="text" class="form-control input-sm" id="txtOooSubject" value="'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.subject:stack1,depth0))+'" />\n\t\t</div>\n\t\t\n\t\t<div class="form-group">\n\t\t\t<label class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Message",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t<div class="pull-right import-from-gmail">\n\t\t\t\t<a href="javascript: void(0);" id="btnImportOooBody" class="pull-right">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import from Gmail",{name:"s",hash:{},data:data}))+'</a>\n\t\t\t\t<img src="/img/spinners/working_16.gif" />\n\t\t\t</div>\n\t\t\t<div class="clearfix"></div>\n\t\t\t<textarea class="form-control input-sm" id="txtOooBody">'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.body:stack1,depth0))+'</textarea>\n\t\t</div>\n\t\t\n\t\t<div class="checkbox">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" id="chkOooContactsOnly" '+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.contactsOnly:stack1,{name:"if",hash:{},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Only send a response to people in my Contacts",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t</div>\n\t\t\n\t\t<div class="checkbox">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" id="chkOooDomainOnly" '+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.domainOnly:stack1,{name:"if",hash:{},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Only send a response to people in your G Suite domain",{name:"s",hash:{},data:data}))+"\n\t\t\t</label>\n\t\t</div>\n\t\t\n"+((stack1=this.invokePartial(partials["leave/dialogs/NewRequestDialog_PageButtons"],depth0,{name:"leave/dialogs/NewRequestDialog_PageButtons",data:data,indent:"\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+"\t</div>\n"},44:function(depth0,helpers,partials,data){var stack1;return'\t<div class="page-reason">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(45,data,0),inverse:this.program(47,data,0),data:data}))!=null?stack1:"")+'\t\n\t\t<table class="table table-bordered">\n'+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.selfRequest:depth0,{name:"unless",hash:{},fn:this.program(52,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<tr>\n\t\t\t<th class="col-xs-6 col-md-5">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Request Type",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<td class="col-xs-6 col-md-7">\n\t\t\t\t'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isLeave:depth0,{name:"if",hash:{},fn:this.program(54,data,0),inverse:this.program(56,data,0),data:data}))!=null?stack1:"")+"\t\t\t\t\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1,{name:"if",hash:{},fn:this.program(66,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class="col-xs-6 col-md-5">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Dates Requested",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<td class="col-xs-6 col-md-7">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSingleDay:depth0,{name:"if",hash:{},fn:this.program(68,data,0),inverse:this.program(70,data,0),data:data}))!=null?stack1:"")+'\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class="col-xs-6 col-md-5">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Time Requested",{name:"s",hash:{},data:data}))+"</th>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hideHours:depth0,{name:"if",hash:{},fn:this.program(78,data,0),inverse:this.program(80,data,0),data:data}))!=null?stack1:"")+"\t\t</tr>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showAllowanceSummary:depth0,{name:"if",hash:{},fn:this.program(82,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<tr>\n\t\t\t<th class="col-xs-6 col-md-5">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<td class="col-xs-6 col-md-7">\n'+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.reason:stack1,{name:"if",hash:{},fn:this.program(91,data,0),inverse:this.program(93,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t</tr>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showOoo:depth0,{name:"if",hash:{},fn:this.program(95,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</table>\n\t\n"+((stack1=this.invokePartial(partials["leave/dialogs/NewRequestDialog_PageButtons"],depth0,{name:"leave/dialogs/NewRequestDialog_PageButtons",hash:{nextLabel:"Submit Request"},data:data,indent:"\t\t",helpers:helpers,partials:partials
}))!=null?stack1:"")+"\t</div>\n\t\n"},45:function(depth0,helpers,partials,data){return"\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Confirm Sickness Report",{name:"s",hash:{},data:data}))+"</h4>\n"},47:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(48,data,0),inverse:this.program(50,data,0),data:data}))!=null?stack1:""},48:function(depth0,helpers,partials,data){return"\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Confirm {toil_term} Request",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"</h4>\n"},50:function(depth0,helpers,partials,data){return"\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Confirm Leave Request",{name:"s",hash:{},data:data}))+"</h4>\n\t\t"},52:function(depth0,helpers,partials,data){var stack1;return'\t\t<tr>\n\t\t\t<th class="col-xs-6 col-md-5">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<td class="col-xs-6 col-md-7">'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.firstName:stack1,depth0))+" "+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.lastName:stack1,depth0))+"</td>\n\t\t</tr>\n"},54:function(depth0,helpers,partials,data){return"        "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Request",{name:"s",hash:{},data:data}))+"\n\t\t\t\t"},56:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isCustom1:depth0,{name:"if",hash:{},fn:this.program(57,data,0),inverse:this.program(59,data,0),data:data}))!=null?stack1:""},57:function(depth0,helpers,partials,data){return"  "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Request",{name:"s",hash:{},data:data}))+"\n\t\t\t\t"},59:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isCustom2:depth0,{name:"if",hash:{},fn:this.program(57,data,0),inverse:this.program(60,data,0),data:data}))!=null?stack1:""},60:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(61,data,0),inverse:this.program(63,data,0),data:data}))!=null?stack1:""},61:function(depth0,helpers,partials,data){return"\t   "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sickness Report",{name:"s",hash:{},data:data}))+"\n\t\t\t\t"},63:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(64,data,0),inverse:this.noop,data:data}))!=null?stack1:""},64:function(depth0,helpers,partials,data){return"\t   "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{toil_term} Request",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"\n\t\t\t\t"},66:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t - "+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.name:stack1,depth0))+"\n"},68:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data}))+"\n"},70:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isMorningOnly:depth0,{name:"if",hash:{},fn:this.program(71,data,0),inverse:this.program(73,data,0),data:data}))!=null?stack1:""},71:function(depth0,helpers,partials,data){return"\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Morning of {date}",{name:"s",hash:{date:depth0!=null?depth0.dStartDate:depth0},data:data}))+"\n"},73:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isAfternoonOnly:depth0,{name:"if",hash:{},fn:this.program(74,data,0),inverse:this.program(76,data,0),data:data}))!=null?stack1:""},74:function(depth0,helpers,partials,data){return"\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Afternoon of {date}",{name:"s",hash:{date:depth0!=null?depth0.dStartDate:depth0},data:data}))+"\n"},76:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data}))+" - "+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.endDate:stack1,{name:"formatDate",hash:{},data:data}))+"\n\t\t\t\t"},78:function(depth0,helpers,partials,data){return'\t\t\t\t<td class="col-xs-6 col-md-7">'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.days:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"days",{name:"s",hash:{},data:data}))+"</td>\n"},80:function(depth0,helpers,partials,data){return'\t\t\t\t<td class="col-xs-6 col-md-7">'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.days:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"days",{name:"s",hash:{},data:data}))+" / "+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.hours:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"hours",{name:"s",hash:{},data:data}))+"</td>\n"},82:function(depth0,helpers,partials,data){var stack1;return'\t\t<tr>\n\t\t\t<th class="col-xs-6 col-md-5">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Current Allowance Remaining",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<td class="col-xs-6 col-md-7">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hideHours:depth0,{name:"if",hash:{},fn:this.program(83,data,0),inverse:this.program(85,data,0),data:data}))!=null?stack1:"")+'\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class="col-xs-6 col-md-5">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowance Remaining (if approved)",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<td class="col-xs-6 col-md-7">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hideHours:depth0,{name:"if",hash:{},fn:this.program(87,data,0),inverse:this.program(89,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t</tr>\n"},83:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.remainingDays:stack1,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"days",{name:"s",hash:{},data:data}))+"\n"},85:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.remainingDays:stack1,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"days",{name:"s",hash:{},data:data}))+" / "+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.remaining:stack1,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"hours",{name:"s",hash:{},data:data}))+"\n"},87:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.remainingDays:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"days",{name:"s",hash:{},data:data}))+"\n"},89:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.remainingDays:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"days",{name:"s",hash:{},data:data}))+" / "+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.remainingHours:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"hours",{name:"s",hash:{},data:data}))+"\n"},91:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers["abstract"]||depth0&&depth0["abstract"]||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.reason:stack1,250,{name:"abstract",hash:{},data:data}))+"\n"},93:function(depth0,helpers,partials,data){return"\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"None Given",{name:"s",hash:{},data:data}))+"\n"},95:function(depth0,helpers,partials,data){var stack1;return'\t\t<tr>\n\t\t\t<th class="col-xs-6 col-md-5">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Out of Office",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<td class="col-xs-6 col-md-7">\n'+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.ooo:stack1)!=null?stack1.enabled:stack1,{name:"if",hash:{},fn:this.program(96,data,0),inverse:this.program(98,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t</tr>\n"},96:function(depth0,helpers,partials,data){return"\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enabled",{name:"s",hash:{},data:data}))+"\n"},98:function(depth0,helpers,partials,data){return"\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disabled",{name:"s",hash:{},data:data}))+"\n"},100:function(depth0,helpers,partials,data){return'\t<div class="page-working text-center">\n\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Submitting, Please Wait ...",{name:"s",hash:{},data:data}))+'</h4>\n\t\t<img src="/img/spinners/working_32.gif" />\n\t</div>\n'},102:function(depth0,helpers,partials,data){var stack1;return'\t<div class="page-complete text-center">\n\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Success!",{name:"s",hash:{},data:data}))+"</h4>\n\t\t<p>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(103,data,0),inverse:this.program(108,data,0),data:data}))!=null?stack1:"")+"\t\t</p>\n\t</div>\n"},103:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.selfRequest:depth0,{name:"if",hash:{},fn:this.program(104,data,0),inverse:this.program(106,data,0),data:data}))!=null?stack1:""},104:function(depth0,helpers,partials,data){return"\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Your Sickness Request has been submitted!",{name:"s",hash:{},data:data}))+"\n"},106:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sickness Request for {first_name} {last_name} has been submitted!",{name:"s",hash:{last_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.lastName:stack1,first_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.firstName:stack1},data:data}))+"\n"},108:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(109,data,0),inverse:this.program(111,data,0),data:data}))!=null?stack1:""},109:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Your {toil_term} Request has been submitted!",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"\n"},111:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Your Leave Request has been submitted!",{name:"s",hash:{},data:data}))+"\n\t\t\t"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,"requestType",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,"selectEmployee",{name:"ifequal",hash:{},fn:this.program(16,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,"working",{name:"ifequal",hash:{},fn:this.program(22,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,"clash",{name:"ifequal",hash:{},fn:this.program(24,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,"reason",{name:"ifequal",hash:{},fn:this.program(27,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,"ooo",{name:"ifequal",hash:{},fn:this.program(42,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,"summary",{name:"ifequal",hash:{},fn:this.program(44,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,"submitting",{name:"ifequal",hash:{},fn:this.program(100,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,"complete",{name:"ifequal",hash:{},fn:this.program(102,data,0),inverse:this.noop,data:data}))!=null?stack1:"")},usePartial:true,useData:true});Handlebars.registerPartial("leave/dialogs/NewRequstDialog",t);return t});define("hbs!leave/dialogs/NewRequestDialog_RequestDetails",["hbs/handlebars","hbs!leave/dialogs/NewRequestDialog_PageButtons","templates/helpers/s","templates/helpers/if_gt","templates/helpers/ifequal","templates/helpers/formatDate","templates/helpers/ifany"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'\t\t<h4>\n\t\t\t\x3c!-- <img src="/img/leave/new/sick.png" height="32" align="right" /> --\x3e\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.selfRequest:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.program(4,data,0),data:data}))!=null?stack1:"")+"\t\t</h4> \n"},2:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Sickness Report",{name:"s",hash:{},data:data}))+"\n"},4:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Sickness Report for {first_name} {last_name}",{name:"s",hash:{last_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.lastName:stack1,first_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.firstName:stack1},data:data}))+"\n"},6:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(7,data,0),inverse:this.program(12,data,0),data:data}))!=null?stack1:""},7:function(depth0,helpers,partials,data){var stack1;return'\t\t<h4>\n\t\t\t\x3c!-- <img src="/img/leave/new/toil.png" height="32" /> --\x3e\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.selfRequest:depth0,{name:"if",hash:{},fn:this.program(8,data,0),inverse:this.program(10,data,0),data:data}))!=null?stack1:"")+"\t\t</h4>\n"},8:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New  {toil_term} Request",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"\n"},10:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New  {toil_term} Request for {first_name} {last_name}",{name:"s",hash:{last_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.lastName:stack1,first_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.firstName:stack1,toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"\n"},12:function(depth0,helpers,partials,data){var stack1;return'\t\t<h4>\n\t\t\t\x3c!-- <img src="/img/leave/new/leave.png" height="32" /> --\x3e\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.selfRequest:depth0,{name:"if",hash:{},fn:this.program(13,data,0),inverse:this.program(15,data,0),data:data}))!=null?stack1:"")+"\t\t</h4>\n\t"},13:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Leave Report",{name:"s",hash:{},data:data}))+"\n"},15:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Leave Request for {first_name} {last_name}",{name:"s",hash:{last_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.lastName:stack1,first_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.firstName:stack1},data:data}))+"\n"},17:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.sickTypes:depth0,{name:"if",hash:{},fn:this.program(18,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},18:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t<div class="form-group">\n\t\t\t\t<div class="col-sm-12">\n\t\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Type of Sickness",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t\t<select class="form-control input-sm ddlCategory">\n\t\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.sickTypes:depth0,{name:"each",hash:{},fn:this.program(19,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n"},19:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depths[1]!=null?depths[1].request:depths[1])!=null?stack1.category:stack1)!=null?stack1.key:stack1,depth0!=null?depth0.key:depth0,{name:"ifequal",hash:{},fn:this.program(20,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},20:function(depth0,helpers,partials,data){return'selected="selected"'},22:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(23,data,0),inverse:this.program(25,data,0),data:data}))!=null?stack1:""},23:function(depth0,helpers,partials,data){return"\t\t\n"},25:function(depth0,helpers,partials,data){var stack1;return((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leaveTypes:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:1},fn:this.program(26,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t"},26:function(depth0,helpers,partials,data){return'\t\t<div class="form-group">\n\t\t\t<div class="col-sm-12">\n\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Type of Leave",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<select class="form-control input-sm ddlCategory">\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n'},28:function(depth0,helpers,partials,data){return"sick"},30:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.returnedToWork:depth0,{name:"if",hash:{},fn:this.program(31,data,0),inverse:this.program(33,data,0),data:data}))!=null?stack1:""},31:function(depth0,helpers,partials,data){return"\t\t\t\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please enter the dates of absence",{name:"s",hash:{},data:data}))+"</label>\n"},33:function(depth0,helpers,partials,data){return"\t\t\t\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please enter the first date of absence",{name:"s",hash:{},data:data}))+"</label>\n"},35:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(36,data,0),inverse:this.program(38,data,0),data:data}))!=null?stack1:""},36:function(depth0,helpers,partials,data){return"\t\t\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please enter the dates of {toil_term}",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"</label>\n"},38:function(depth0,helpers,partials,data){return"\t\t\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please enter the dates of leave",{name:"s",hash:{},data:data}))+"</label>\n"},40:function(depth0,helpers,partials,data){var helper;return'\t\t\t<p class="text-warning">\n\t\t\t\t<i class="glyphicon glyphicon-exclamation-sign"></i>\n\t\t\t\t'+this.escapeExpression((helper=(helper=helpers.dateError||(depth0!=null?depth0.dateError:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"dateError",hash:{},data:data}):helper))+"\n\t\t\t</p>\n"},42:function(depth0,helpers,partials,data){return'disabled="disabled"'},44:function(depth0,helpers,partials,data){var stack1;return'\t\t<div id="returnToWorkContainer">\n\t\t\t<div class="pull-left">\n\t\t\t\t<div class="checkbox">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="checkbox" id="chkReturnedToWork" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.returnedToWork:depth0,{name:"if",hash:{},fn:this.program(45,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.selfRequest:depth0,{name:"if",hash:{},fn:this.program(47,data,0),inverse:this.program(49,data,0),data:data}))!=null?stack1:"")+'\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="pull-right">\n\t\t\t\t<button class="btn btn-link" id="chkReturnedToWorkHelp">\n\t\t \t\t\t<i class="glyphicon glyphicon-question-sign"></i>\n\t\t \t\t</button>\n\t\t\t</div>\n\t\t\t<div class="clearfix"></div>\n\t\t</div>\n'},45:function(depth0,helpers,partials,data){return'checked="checked"'},47:function(depth0,helpers,partials,data){return"\t\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Have you returned to work?",{name:"s",hash:{},data:data}))+"\n"},49:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Has {first_name} returned to work?",{name:"s",hash:{first_name:(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.firstName:stack1},data:data}))+"\n"},51:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"if",hash:{},fn:this.program(52,data,0),inverse:this.noop,data:data}))!=null?stack1:""},52:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.returnedToWork:depth0,{name:"if",hash:{},fn:this.program(53,data,0),inverse:this.noop,data:data}))!=null?stack1:""},53:function(depth0,helpers,partials,data){var stack1;return'\t<div id="dayDetailsContainer">\n\t\t<div class="pull-left">\n'+((stack1=(helpers.ifany||depth0&&depth0.ifany||helpers.helperMissing).call(depth0,depth0!=null?depth0.isSingleDay:depth0,depth0!=null?depth0.isMorningOnly:depth0,depth0!=null?depth0.isAfternoonOnly:depth0,{name:"ifany",hash:{},fn:this.program(54,data,0),inverse:this.program(56,data,0),data:data}))!=null?stack1:"")+'\t\t</div>\n\t\t<div class="pull-right desktop-only">\n\t\t\t<button type="button" class="btn btn-link" id="btnAdvancedOptions">\n\t\t\t\t<span>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Advanced Options",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="clearfix"></div>\n\t</div>\n'},54:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" name="radDayOptions" value="full_day" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSingleDay:depth0,{name:"if",hash:{},fn:this.program(45,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Full Day",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" name="radDayOptions" value="morning" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isMorningOnly:depth0,{name:"if",hash:{},fn:this.program(45,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"  />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Morning Only",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" name="radDayOptions" value="afternoon" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isAfternoonOnly:depth0,{name:"if",hash:{},fn:this.program(45,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"  />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Afternoon Only",{name:"s",hash:{},data:data}))+"\n\t\t\t</label>\n"},56:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<label class="checkbox-inline">\n\t\t\t\t<input type="checkbox" id="chkFirstDayAfternoon" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isFirstDayAfternoon:depth0,{name:"if",hash:{},fn:this.program(45,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"First Day Afternoon Only",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<label class="checkbox-inline">\n\t\t\t\t<input type="checkbox" id="chkLastDayMorning" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isLastDayMorning:depth0,{name:"if",hash:{},fn:this.program(45,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Last Day Morning Only",{name:"s",hash:{},data:data}))+"\n\t\t\t</label>\n"},58:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.returnedToWork:depth0,{name:"if",hash:{},fn:this.program(59,data,0),inverse:this.noop,data:data}))!=null?stack1:""},59:function(depth0,helpers,partials,data){return'\t<div class="form-group">\t\n\t\t<div class="col-sm-12">\t\t\n\t\t\t<div class="help-block text-right">\n\t\t\t\t<div id="requestCalendarContainer"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<div class="page-leave-1 form-horizontal">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.program(6,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(17,data,0,blockParams,depths),inverse:this.program(22,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\n\t<div class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(28,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<div class="request-dates-container">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSick:depth0,{name:"if",hash:{},fn:this.program(30,data,0,blockParams,depths),inverse:this.program(35,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.dateError:depth0,{name:"if",hash:{},fn:this.program(40,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\n\t\t\t<div class="form-inline">\n\t\t\t\t<input class="form-control input-sm datepicker txtStartDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data
}))+'"\n\t\t\t\t\t\tplaceholder="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start Date",{name:"s",hash:{},data:data}))+'" />\n\t\t\t\t<input class="form-control input-sm datepicker txtEndDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.endDate:stack1,{name:"formatDate",hash:{},data:data}))+'"\n\t\t\t\t\t   '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.returnedToWork:depth0,{name:"unless",hash:{},fn:this.program(42,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'  placeholder="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"End Date",{name:"s",hash:{},data:data}))+'" />\n\t\t\t</div>\n\t\t</div>\n\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showReturnToWork:depth0,{name:"if",hash:{},fn:this.program(44,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</div>\n\t\n"+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.isToil:depth0,{name:"unless",hash:{},fn:this.program(51,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showRequestCalendar:depth0,{name:"if",hash:{},fn:this.program(58,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\n\t<div class="allowance-details-container"></div>\n\t\n'+((stack1=this.invokePartial(partials["leave/dialogs/NewRequestDialog_PageButtons"],depth0,{name:"leave/dialogs/NewRequestDialog_PageButtons",data:data,indent:"\t",helpers:helpers,partials:partials}))!=null?stack1:"")+"</div>"},usePartial:true,useData:true,useDepths:true});Handlebars.registerPartial("leave/dialogs/NewRequestDialog_RequestDetails",t);return t});define("hbs!leave/dialogs/NewRequestDailog_AllowanceDetails",["hbs/handlebars","templates/helpers/s","templates/helpers/round","templates/helpers/ifall","templates/helpers/if_lt"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'\t<div class="form-group">\n\t\t<label class="hidden-xs hidden-sm col-md-6">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Requested Time",{name:"s",hash:{},data:data}))+"\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.overrideComputedHours:stack1,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.program(5,data,0),data:data}))!=null?stack1:"")+'\t\t</label>\n\t\t<div class="col-xs-6 col-md-6 pull-right">\n'+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.hideTimePickers:depth0,{name:"unless",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</div>\n\t</div>\n"},2:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0!=null?depth0.isToil:depth0,{name:"unless",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:""},3:function(depth0,helpers,partials,data){return'\t\t\t\t\t<a href="javascript: void(0);" id="btnOverride">\n\t\t\t\t\t\t['+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"cancel",{name:"s",hash:{},data:data}))+"]\n\t\t\t\t\t</a>\n"},5:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.allowOverride:stack1,{name:"if",hash:{},fn:this.program(6,data,0),inverse:this.noop,data:data}))!=null?stack1:""},6:function(depth0,helpers,partials,data){return'\t\t\t\t<a href="javascript: void(0);" id="btnOverride">\n\t\t\t\t\t['+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"override",{name:"s",hash:{},data:data}))+"]\n\t\t\t\t</a>\n\t\t\t"},8:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.overrideComputedHours:stack1,{name:"if",hash:{},fn:this.program(9,data,0),inverse:this.program(13,data,0),data:data}))!=null?stack1:""},9:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t\t<div class="text-right">\n\t\t\t\t\t\t<input type="text" class="form-control input-sm time start w75" value="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startTime:stack1,depth0))+'" style="display: inline" />\n\t\t\t\t\t\t - \n\t\t\t\t\t \t<input type="text" class="form-control input-sm time end w75" value="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.endTime:stack1,depth0))+'" style="display: inline" />\n\t\t\t\t\t</div>\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showBreakChkBox:depth0,{name:"if",hash:{},fn:this.program(10,data,0),inverse:this.noop,data:data}))!=null?stack1:"")},10:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t\t<div class="checkbox text-right">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="checkbox" id="chkIncludeBreak" '+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.includeBreak:stack1,{name:"if",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"/>\n\t\t\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Include",{name:"s",hash:{},data:data}))+" "+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.breakTime:stack1,depth0))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"mins break",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n"},11:function(depth0,helpers,partials,data){return"checked"},13:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t\t<p class="text-right">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startTime:stack1,depth0))+" - "+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.endTime:stack1,depth0))+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.breakTime:stack1,{name:"if",hash:{},fn:this.program(14,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"</p>\n"},14:function(depth0,helpers,partials,data){var stack1;return" ("+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.breakTime:stack1,depth0))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"mins break",{name:"s",hash:{},data:data}))+")"},16:function(depth0,helpers,partials,data){var stack1;return'\t\t<label class="section-name">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Requested Time",{name:"s",hash:{},data:data}))+"</label>\n\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.overrideComputedHours:stack1,{name:"if",hash:{},fn:this.program(17,data,0),inverse:this.program(20,data,0),data:data}))!=null?stack1:"")},17:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0!=null?depth0.isToil:depth0,{name:"unless",hash:{},fn:this.program(18,data,0),inverse:this.noop,data:data}))!=null?stack1:""},18:function(depth0,helpers,partials,data){return'\t\t\t\t<span><a href="javascript: void(0);" id="btnOverride">['+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"cancel",{name:"s",hash:{},data:data}))+"]</a></span>\n"},20:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.allowOverride:stack1,{name:"if",hash:{},fn:this.program(21,data,0),inverse:this.noop,data:data}))!=null?stack1:""},21:function(depth0,helpers,partials,data){return'\t\t\t\t<span><a href="javascript: void(0);" id="btnOverride">['+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"override",{name:"s",hash:{},data:data}))+"]</a></span>\n"},23:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.isToil:depth0,{name:"if",hash:{},fn:this.program(24,data,0),inverse:this.program(26,data,0),data:data}))!=null?stack1:""},24:function(depth0,helpers,partials,data){return'\t\t<div class="form-group">\n\t\t\t<label class="hidden-xs hidden-sm col-md-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Working Days",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t<div class="col-xs-6 col-md-4 text-right">\n\t\t\t\t<div class="input-group">\n\t\t\t\t\t<input type="text" class="form-control input-sm w75 text-right hd day" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedDays:depth0,{name:"round",hash:{},data:data}))+'" id="txtDays" />\n\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-xs-6 col-md-4 text-right">\n\t\t\t\t<div class="input-group">\n\t\t\t\t\t<input type="text" class="form-control input-sm w75 text-right hd hour" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedHours:depth0,{name:"round",hash:{},data:data}))+'" id="txtHours" />\n\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n"},26:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.overrideComputedHours:stack1,{name:"if",hash:{},fn:this.program(27,data,0),inverse:this.program(29,data,0),data:data}))!=null?stack1:""},27:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression(helpers.log.call(depth0,depth0,{name:"log",hash:{},data:data}))+'\n\t\t\t\t<div class="form-group">\n\t\t\t\t<label class="hidden-xs hidden-sm col-md-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Working Days",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div class="col-xs-6 col-md-4 text-right">\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<input type="text" class="form-control input-sm w75 text-right hd day" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedDays:depth0,{name:"round",hash:{},data:data}))+'" id="txtDays" />\n\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-6 col-md-4 text-right">\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<input type="text" class="form-control input-sm w75 text-right hd hour" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedHours:depth0,{name:"round",hash:{},data:data}))+'" id="txtHours" />\n\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n"},29:function(depth0,helpers,partials,data){return'\t\t\t<div class="form-group">\n\t\t\t\t<label class="col-xs-2 col-sm-4 col-md-6">\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Working Days",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t\t<div class="col-xs-5 col-sm-4 col-md-3 text-right">\n\t\t\t\t\t'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedDays:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-5 col-sm-4 col-md-3 text-right">\n\t\t\t\t\t'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedHours:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"\n\t\t\t\t</div>\n\t\t\t</div>\n"},31:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.overrideComputedHours:stack1,{name:"if",hash:{},fn:this.program(32,data,0,blockParams,depths),inverse:this.program(38,data,0,blockParams,depths),data:data}))!=null?stack1:""},32:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].isSingleDay:depths[1],{name:"if",hash:{},fn:this.program(33,data,0,blockParams,depths),inverse:this.program(35,data,0,blockParams,depths),data:data}))!=null?stack1:""},33:function(depth0,helpers,partials,data){return'\t\t\t<div class="form-group">\n\t\t\t\t<label class="col-xs-2 col-sm-4 col-md-6">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Working Days",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t\t<div class="col-xs-5 col-sm-4 col-md-3 text-right">\n\t\t\t\t\t'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedDays:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-5 col-sm-4 col-md-3 text-right">\n\t\t\t\t\t'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedHours:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"\n\t\t\t\t</div>\n\t\t\t</div>\n"},35:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<div class="form-group">\n\t\t\t\t<label class="hidden-xs hidden-sm col-md-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Working Days",{name:"s",hash:{},data:data}))+'</label>\n\n\t\t\t\t<div class="col-xs-6 col-md-4 text-right">\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<input type="text" class="form-control input-sm text-right hd day" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedDays:depth0,{name:"round",hash:{},data:data}))+'" id="txtDays" />\n\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n"+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.hideHours:depth0,{name:"unless",hash:{},fn:this.program(36,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</div>\n"},36:function(depth0,helpers,partials,data){return'\t\t\t\t<div class="col-xs-6 col-md-4 text-right">\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<input type="text" class="form-control input-sm text-right hd hour" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedHours:depth0,{name:"round",hash:{},data:data}))+'" id="txtHours" />\n\t\t\t\t\t\t<span class="input-group-addon">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n"},38:function(depth0,helpers,partials,data){return'\t\t<div class="form-group">\n\t\t\t<label class="col-xs-2 col-sm-4 col-md-6">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Working Days",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<div class="col-xs-5 col-sm-4 col-md-3 text-right">\n\t\t\t\t'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedDays:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'\n\t\t\t</div>\n\t\t\t<div class="col-xs-5 col-sm-4 col-md-3 text-right">\n\t\t\t\t'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedHours:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"\n\t\t\t</div>\n\t\t</div>\n\t"},40:function(depth0,helpers,partials,data){var helper;return'<div class="warning-panel">\n\t<div class="alert alert-danger">\n\t\t<i class="glyphicon glyphicon-exclamation-sign"></i>\n\t\t'+this.escapeExpression((helper=(helper=helpers.allowanceError||(depth0!=null?depth0.allowanceError:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"allowanceError",hash:{},data:data}):helper))+"\n\t</div>\n</div>\n"},42:function(depth0,helpers,partials,data){var stack1;return'\t<label class="section-name">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowance",{name:"s",hash:{},data:data}))+" "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.allowanceName:depth0,{name:"if",hash:{},fn:this.program(43,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"</label>\n\t"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1,{name:"if",hash:{},fn:this.program(45,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n\n\t<div class="form-group read">\n\t\t<label class="visible-xs visible-sm col-xs-2 col-sm-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Remaining",{name:"s",hash:{},data:data}))+'</label>\n\t\t<label class="hidden-xs hidden-sm col-md-6">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowance Remaining",{name:"s",hash:{},data:data}))+'</label>\n\n\t\t<div class="col-xs-5 col-sm-4 col-md-3 text-right">\n\t\t\t'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.remainingDays:stack1,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'\n\t\t</div>\n\t\t<div class="col-xs-5 col-sm-4 col-md-3 text-right">\n\t\t\t'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.remaining:stack1,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+'\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group read">\n\t\t<label class="visible-xs visible-sm col-xs-2 col-sm-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"After",{name:"s",hash:{},data:data}))+'</label>\n\t\t<label class="hidden-xs hidden-sm col-md-6">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowance Remaining (if approved)",{name:"s",hash:{},data:data}))+'</label>\n\t\t\n\t\t<div class="col-xs-5 col-sm-4 col-md-3 text-right '+((stack1=(helpers.if_lt||depth0&&depth0.if_lt||helpers.helperMissing).call(depth0,depth0!=null?depth0.remainingHours:depth0,{name:"if_lt",hash:{compare:0},fn:this.program(48,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t\t'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.remainingDays:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'\n\t\t</div>\n\t\t<div class="col-xs-5 col-sm-4 col-md-3 text-right '+((stack1=(helpers.if_lt||depth0&&depth0.if_lt||helpers.helperMissing).call(depth0,depth0!=null?depth0.remainingHours:depth0,{name:"if_lt",hash:{compare:0},fn:this.program(48,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t\t'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.remainingHours:depth0,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"\n\t\t</div>\n\t</div>\n"},43:function(depth0,helpers,partials,data){var helper;return"("+this.escapeExpression((helper=(helper=helpers.allowanceName||(depth0!=null?depth0.allowanceName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"allowanceName",hash:{},data:data}):helper))+")"},45:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.unless.call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.deducted:stack1,{name:"unless",hash:{},fn:this.program(46,data,0),inverse:this.noop,data:data}))!=null?stack1:""},46:function(depth0,helpers,partials,data){return'\n\t<label class="section-details">('+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Non Deducted Leave",{name:"s",hash:{},data:data}))+")</label>\n\t"},48:function(depth0,helpers,partials,data){return"red"},50:function(depth0,helpers,partials,data){var helper;return'\t<div class="warning-panel">\n\t\t<div class="alert alert-danger">\n\t\t\t<i class="glyphicon glyphicon-exclamation-sign"></i> '+this.escapeExpression((helper=(helper=helpers.error||(depth0!=null?depth0.error:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"error",hash:{},data:data}):helper))+"\n\t\t</div>\n\t</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"<section>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSingleDay:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.program(16,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hideTimePickers:depth0,{name:"if",hash:{},fn:this.program(23,data,0,blockParams,depths),inverse:this.program(31,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"</section>\n<section>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.allowanceError:depth0,{name:"if",hash:{},fn:this.program(40,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifall||depth0&&depth0.ifall||helpers.helperMissing).call(depth0,depth0!=null?depth0.hasEntitlement:depth0,depth0!=null?depth0.allowance:depth0,{name:"ifall",hash:{},fn:this.program(42,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.error:depth0,{name:"if",hash:{},fn:this.program(50,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"</section>\n"},useData:true,useDepths:true});Handlebars.registerPartial("leave/dialogs/NewRequestDailog_AllowanceDetails",t);return t});define("jquery.appogee.userPicker",["jquery","appogee"],function($,appogee){var _cache={};$.fn.userPicker=function(options){options=options||{};if(options=="getKey")return $(this).data("userPickerKey");else if(options=="getUserKey")return $(this).data("userPickerUserKey");else if(options=="getEmail")return $(this).data("userPickerEmail");else if(options=="getName")return $(this).data("userPickerName");return this.each(function(){if(!$(this).hasClass("icon-user-lookup")){$(this).addClass("icon-user-lookup")}var picker=$(this).data("userPicker");if(!picker){picker=new appogee.UserPicker($(this),options.callback,options.params);if(options.url){picker.url=options.url;picker.urlParamType="param"}$(this).data("userPicker",picker)}})}});define("jquery.appogee.timePicker",["jquery","appogee"],function($,appogee){var $picker=null;var RE_TIME=/^([01]\d|2[0-3]):?[0-5]\d$/;function _validateTime(val){return RE_TIME.test(val)}$.fn.appogeeTimePicker=function(options){options=$.extend({onChange:null,startTime:null,endTime:null,reset:null},options||{});if(!$picker||options.reset){$picker=$("<div />").addClass("appogee-time-picker");var startTime=options.startTime;var endTime=options.endTime;if(startTime&&endTime){var startHours=parseInt(startTime.slice(0,2));var startMins=parseInt(startTime.slice(-2));var endHours=parseInt(endTime.slice(0,2));var endMins=parseInt(endTime.slice(-2));for(var h=startHours;h<=endHours;h++){var mins=0;var maxMins=60;if(h==endHours){maxMins=endMins}if(h==startHours){mins=startMins}if(maxMins==60){for(var m=mins;m<maxMins;m+=15){var s=(h<10?"0":"")+h+":"+(m<10?"0":"")+m;$("<div />",{text:s}).data("value",s).appendTo($picker)}}else{for(var m=mins;m<=maxMins;m+=15){var s=(h<10?"0":"")+h+":"+(m<10?"0":"")+m;$("<div />",{text:s}).data("value",s).appendTo($picker)}}}}else{for(var h=0;h<24;h++){for(var m=0;m<60;m+=15){var s=(h<10?"0":"")+h+":"+(m<10?"0":"")+m;$("<div />",{text:s}).data("value",s).appendTo($picker)}}}$picker.appendTo("body");$("body").click(function(){$picker.hide()})}return this.each(function(){var blurAttached=false;var $parent=$(this);$parent.click(function(e){e.stopPropagation();var val=$parent.val();var scrollTop=0;if(val){var divs=$picker.find("div");var i=0;for(i=0;i<divs.length;i++){if(divs[i].innerText==val){break}}scrollTop=Math.max(0,(i-3)*20)}$picker.show().position({my:"left top",at:"left bottom",of:this}).scrollTop(scrollTop);$picker.find("div").unbind("click").click(function(ev){var selectedValue=$(this).data("value");$parent.val(selectedValue);$picker.hide();if(options.onChange){options.onChange($parent)}})}).keyup(function(e){e.stopPropagation();if(!blurAttached){$parent.blur(function(){$picker.hide();if(!_validateTime(this.value)){this.value=$(this).data("old-value")}else{if(options.onChange){options.onChange($parent)}}});blurAttached=true}else if(e.keyCode==9){$parent.blur()}}).focus(function(){$(this).data("old-value",this.value)})})}});define("leave/dialogs/NewRequestDialog",["jquery","underscore","appogee","leave/enums","enums/MonthEnum","enums/RequestStatus","enums/RequestType","enums/RequestDayType","leave/models/Request","leave/service","leave/dialogs/RequestDialogBase","leave/views/RequestCalendar","hbs!leave/dialogs/NewRequstDialog","hbs!leave/dialogs/NewRequestDialog_RequestDetails","hbs!leave/dialogs/NewRequestDailog_AllowanceDetails","jquery.appogee.hd","jquery.appogee.userPicker","jquery.appogee.timePicker"],function($,_,appogee,enums,Month,RequestStatus,RequestType,RequestDayType,Request,service,RequestDialogBase,RequestCalendar,tmpl,tmplRequestDetails,tmplAllowanceDetails){"use strict";var S,R={titleOoo:"Configure Out of Office",ooo:"Out of office",oooMsg:"I am currently out of the office and not responding to emails. I will return on {date}.",errorNoEmployeeTitle:"No Employee Selected",errorNoEmployeeMsg:"Please select an Employee to report sickness for.",errorEndAfterStart:"The End date must be after the Start date.",errorPast:"Warning: These dates are in the past!",errorEndTimeAfterStartTitle:"Invalid Start and End Time",errorEndTimeAfterStart:"The End Time must be after the Start Time, please correct this then try again.",confirmReturnToWorkTitle:"Return to Work",confirmReturnToWorkMsg1:"This will set the Start Date to the current Date",confirmReturnToWorkMsg2:"Do you wish to continue?",aboutReturnToWorkTitle:"Return To Work",aboutReturnToWorkMsg:"Sickness can be reported during the period of absence by unchecking the Return to Work checkbox. This will save the Sickness Report as an Open Request, and will not be submitted for approval until the Return to Work form is completed.",errorNoStartDateTitle:"Invalid Start Date",errorNoStartDateMsg:"Please enter a Start Date",errorNoEndDateTitle:"Invalid End Date",errorNoEndDateMsg:"Please enter an End Date",errorInvalidHoursTitle:"Invalid Hours",errorInvalidHoursMsg:"Please enter a positive number for hours",errorNoTimeTitle:"Time Not Specified",errorNoTimeMsg:"Please enter the number of hours you are requesting in the textbox and try again",errorNoHoursTitle:"Time Not Specified",errorNoHoursMsg:"The dates you have specified do not amount to any hours",errorUnpermittedDatesTitle:"Invalid Dates",errorUnpermittedDatesMsg:"You are not permitted to submit requests for the selected dates. Please contact your administrator.",errorSpannedYearsTitle:"Invalid Dates",errorSpannedYearsMsg:"The dates you have specified span 2 Leave Years. Your Leave Year starts on 1st {month}. Please modify your dates and try again.",errorInvalidSickTypeTitle:"Invalid Sick Type",errorInvalidSickTypeMsg:"Please select a Sickness Type.",errorAllowanceExceededTitle:"Allowance Exceeded",errorAllowanceExceededMsg:"You do not have enough allowance for the specified dates. Please modify your dates and try again.",errorDiffStartEnd:"The end date must be in the same leave year as the start date.",errorNoReason:"Please specify a reason for requesting leave.",errorOooSubject:"Please enter your out of office gmail subject",errorOooBody:"Please enter your out of office gmail message",errorInvalidApprovalFlowTitle:"Invalid Approval Flow",errorInvalidApprovalFlowMsg:"Unable to submit {type} request, as no approvers have been defined. Please contact your administrator for assistance.",newRequest:"New Request"};var RequestCreateScope=enums.RequestCreateScope;var $dlg=null;var Page={SelectRequestType:"requestType",SelectEmployee:"selectEmployee",RequestDetails:"requestDetails",Working:"working",Clash:"clash",Reason:"reason",OutOfOffice:"ooo",Summary:"summary",Submitting:"submitting",Complete:"complete"};var Dialog=function(options){var _this88=this;S=appogee.getStrings("NewRequestDialog",R);this.currentUserProfile=null;if($dlg===null){$dlg=$("<div />").addClass("dialog")}options=$.extend({date:null,blockedDates:[]},options||{});RequestDialogBase.call(this,$dlg);this.targetEmployee=options.targetEmployee;if(this.targetEmployee){service.getEmployeeLeaveProfile(this.targetEmployee.key,function(employee){_this88.employee=employee;_this88.currentUserProfile=employee})}else{service.getEmployeeLeaveProfile(this.currentUser.key,function(employee){_this88.employee=employee;_this88.currentUserProfile=employee})}service.listLeaveTypes(function(leaveTypes){_this88.leaveTypes=leaveTypes});service.listSickTypes(function(sickTypes){_this88.sickTypes=sickTypes});this.page=Page.SelectRequestType;this.blockedDates=options.blockedDates;this.request=new Request;this.request.onRecalculate(function(){_this88.render()});this.defaultStartDate=null;if(options.date){this.defaultStartDate=appogee.util.date.fromISOString(options.date)}this.returnedToWork=true;this.selfRequest=true;if(this.targetEmployee){this.selfRequest=false}this.showRequestCalendar=false;this.allowance=null
;this.onCloseHandlers=[];this.onSubmitHandlers=[];this.hideHours=appogee.getHideHours();this.views={requestCalendar:new RequestCalendar(null,this.request)};this.gmailOooResponse=null};Dialog.prototype=new RequestDialogBase;Dialog.prototype.constructor=Dialog;Dialog.prototype.isLeave=function(){return this.request.type==RequestType.Leave};Dialog.prototype.isCustom1=function(){return this.request.type==RequestType.Custom1};Dialog.prototype.isCustom2=function(){return this.request.type==RequestType.Custom2};Dialog.prototype.isSick=function(){return this.request.type==RequestType.Sick};Dialog.prototype.isToil=function(){return this.request.type==RequestType.Toil};Dialog.prototype.onClose=function(handler){this.onCloseHandlers.push(handler)};Dialog.prototype.onSubmit=function(handler){this.onSubmitHandlers.push(handler)};Dialog.prototype.cancel=function(){this.dlg.hide()};Dialog.prototype.render=function(){var _this89=this;var data={page:this.page,request:this.request,employee:this.request.employee,leaveTypes:this.leaveTypes,sickTypes:this.sickTypes,toilTerm:appogee.getToilTerm(),hideHours:this.hideHours,returnedToWork:this.returnedToWork,selfRequest:this.selfRequest,isLeave:this.isLeave(),isCustom1:this.isCustom1(),isCustom2:this.isCustom2(),isSick:this.isSick(),isToil:this.isToil(),showBtnPrevious:true};if(this.request.startDate){var startDay=this.request.startDate.setHours(0,0,0,0);var endDay=this.request.endDate.setHours(0,0,0,0);data.isSingleDay=startDay==endDay;data.isMorningOnly=this.request.isMorningOnly();data.isAfternoonOnly=this.request.isAfternoonOnly();data.isFirstDayAfternoon=this.request.isFirstDayAfternoon();data.isLastDayMorning=this.request.isLastDayMorning();data.hours=this.request.getHours();data.days=this.request.getDays();data.unitDays=this.request.getUnitDays();data.allowance=this.allowance;data.dStartDate=this.currentUser.formatDate(this.request.startDate);data.dEndDate=this.currentUser.formatDate(this.request.endDate);data.dDays=appogee.util.round(data.days,2);data.dHours=appogee.util.round(data.hours,2)}if(this.page==Page.SelectEmployee){if(!this.selfRequest&&this.request.employee.key!=this.currentUser.key){data.requestEmployee=this.request.employee}}else if(this.page==Page.Clash){data.clash=this.clash}else if(this.page==Page.Reason){if(this.isSick()){this.requireReason=this.request.employee.sick.requireReason}else if(this.isToil()){this.requireReason=this.request.employee.toil.requireReason}else{this.requireReason=this.request.employee.leave.requireReason}data.requireReason=this.requireReason;data.showOoo=this.canShowOoo()}else if(this.page==Page.OutOfOffice){data.titleText=S.titleOoo;if(!this.request.ooo.subject){this.request.ooo.subject=S.ooo}if(!this.request.ooo.body){var nextWorkingDay=this.employee.getNextWorkingDay(this.request.endDate);var oooMsg=S.oooMsg.format({date:this.currentUser.formatDate(nextWorkingDay)});this.request.ooo.body=oooMsg}}else if(this.page==Page.Summary){data.showOoo=this.canShowOoo();data.showAllowanceSummary=false;var entitlement=this.getEntitlement();if(entitlement){data.remainingHours=this.allowance.remaining;data.remainingDays=this.allowance.remainingDays;var hours=this.request.getHours();var days=this.request.getDays();if(this.isToil()){data.remainingHours+=hours;data.remainingDays+=days}else if(this.isSick()){data.remainingHours-=hours;data.remainingDays-=days}else if(this.request.category&&this.request.category.deducted){data.remainingHours-=hours;data.remainingDays-=days}data.showAllowanceSummary=true}}data.canCreateSick=true;data.canCreateLeave=true;data.canCreateToil=true;if(this.targetEmployee&&this.currentUserProfile.sick.createScope==RequestCreateScope.Self){data.canCreateSick=false}else if(this.targetEmployee&&this.currentUserProfile.sick.createScope==RequestCreateScope.Manager){if(!this.currentUser.isSomeKindOfManagerFor(this.targetEmployee,true)){data.canCreateSick=false}}else if(this.targetEmployee&&this.currentUserProfile.sick.createScope==RequestCreateScope.Team){if(this.currentUserProfile.team==this.targetEmployee.team){data.canCreateSick=false}}else if(this.targetEmployee&&this.currentUserProfile.sick.createScope==RequestCreateScope.Adu){if(this.currentUserProfile.adu==this.targetEmployee.adu){data.canCreateSick=false}}if(this.targetEmployee&&this.currentUserProfile.leave.createScope==RequestCreateScope.Self){data.canCreateLeave=false}else if(this.targetEmployee&&this.currentUserProfile.leave.createScope==RequestCreateScope.Manager){if(!this.currentUser.isSomeKindOfManagerFor(this.targetEmployee,true)){data.canCreateLeave=false}}if(this.targetEmployee&&this.currentUserProfile.toil.createScope==RequestCreateScope.Self){data.canCreateToil=false}else if(this.targetEmployee&&this.currentUserProfile.toil.createScope==RequestCreateScope.Manager){if(!this.currentUser.isSomeKindOfManagerFor(this.targetEmployee,true)){data.canCreateToil=false}}$dlg.html(tmpl(data));if(this.page==Page.SelectRequestType){this.renderRequestTypePage()}else if(this.page==Page.SelectEmployee){var $txtEmployee=$dlg.find("#txtEmployee");$txtEmployee.userPicker({url:"/my/leave/xhr/list_create_request_employees",params:{type:this.request.type}});$dlg.find('input[type="radio"][name="scope"]').change(function(){_this89.selfRequest=$dlg.find("#radScopeSelf").prop("checked");_this89.render()});$dlg.find(".btnPrevious").click(function(){_this89.page=Page.SelectRequestType;_this89.request.setEmployee(_this89.employee);_this89.selfRequest=true;_this89.render()});$dlg.find(".btnNext").click(function(){if(_this89.selfRequest){_this89.page=Page.RequestDetails;_this89.render()}else{var employeeKey=$txtEmployee.userPicker("getKey");if(!employeeKey){appogee.valert(S.errorNoEmployee);return}if(employeeKey==_this89.currentUserProfile.key){_this89.selfRequest=true;_this89.page=Page.RequestDetails;_this89.render()}$dlg.find(".btnPrevious").attr("disabled",true);$dlg.find(".btnNext").attr("disabled",true);var batch=service.createBatch();batch.getEmployeeLeaveProfile(employeeKey);batch.listEmployeeAllowances(employeeKey);batch.wait(function(employee,allowances){_this89.request.setEmployee(employee);_this89.allowances=allowances;_this89.request.onRecalculate(function(){_this89.page=Page.RequestDetails;_this89.render()});var reset=true;if(!_this89.request.startDate||!_this89.request.endDate){_this89.page=Page.RequestDetails;_this89.render()}else{_this89.request.recalculate(reset)}})}})}else if(this.page==Page.RequestDetails){this.renderRequestDetailsPage(data)}else if(this.page==Page.Clash){$dlg.find(".btnPrevious").click(function(){_this89.page=Page.RequestDetails;_this89.render();if(_this89.request.overrideComputedHours){_this89.onOverride()}})}else if(this.page==Page.Reason){$dlg.find("#txtReason").focus();$dlg.find("#chkOoo").click(function(){_this89.request.ooo.enabled=!_this89.request.ooo.enabled;$dlg.find("#chkOooNote").toggle(_this89.request.ooo.enabled)});$dlg.find(".btnPrevious").click(function(){_this89.scrapeReasonPage();_this89.page=Page.RequestDetails;_this89.render();if(_this89.request.overrideComputedHours){_this89.onOverride()}});$dlg.find(".btnNext").click(function(){if(_this89.scrapeReasonPage(true)){if(_this89.request.ooo.enabled){_this89.page=Page.OutOfOffice}else{_this89.page=Page.Summary}_this89.render()}})}else if(this.page==Page.OutOfOffice){this.initOoo();$dlg.find(".btnPrevious").click(function(){_this89.scrapeOooPage();_this89.page=Page.Reason;_this89.render()});$dlg.find(".btnNext").click(function(){if(_this89.scrapeOooPage(true)){_this89.page=Page.Summary;_this89.render()}})}else if(this.page==Page.Summary){$dlg.find(".btnPrevious").click(function(){if(_this89.request.ooo.enabled){_this89.page=Page.OutOfOffice}else{_this89.page=Page.Reason}_this89.render()});$dlg.find(".btnNext").click(function(){if(_this89.request.employee.hasApprovers(_this89.request.type)){_this89.submit()}else{var msg=S.get("errorInvalidApprovalFlow",{type:_this89.request.type});appogee.valert(msg);_this89.dlg.hide()}})}$dlg.find(".btnClose").click(function(){_this89.cancel()});this.dlg.center()};Dialog.prototype.canShowOoo=function(){if(appogee.getGappsStatus()!=10){return false}if(this.isToil()){return false}if(!this.request.employee.gappsOooSync){return false}if(!this.request.employee.isGapps){return false}if(!this.selfRequest){return false}var today=appogee.today();if(this.request.endDate<today){return false}return true};Dialog.prototype.canShowReturnToWork=function(){if(!this.isSick()){return false}if(!this.request.startDate){return false}var today=appogee.today();if(this.request.startDate>today){return false}return true};Dialog.prototype.renderRequestTypePage=function(){var _this90=this;$dlg.find("a.tile").click(function(e){var requestType=$(e.target).data("type");_this90.request.type=requestType;var renderToilSelectEmployee=!_this90.targetEmployee&&!appogee.util.isMobile()&&_this90.currentUserProfile.toil.createScope!=RequestCreateScope.Self&&(_this90.currentUser.isManager()||_this90.currentUser.isHrManager());var renderLeaveSelectEmployee=!_this90.targetEmployee&&!appogee.util.isMobile()&&_this90.currentUserProfile.leave.createScope!=RequestCreateScope.Self&&(_this90.currentUser.isManager()||_this90.currentUser.isHrManager());var renderSickSelectEmployee=false;if(!_this90.targetEmployee&&!appogee.util.isMobile()){var scope=_this90.currentUserProfile.sick.createScope;if(scope==RequestCreateScope.Self){renderSickSelectEmployee=false}else if(scope==RequestCreateScope.Manager){if(_this90.currentUser.isManager()||_this90.currentUser.isHrManager()){renderSickSelectEmployee=true}}else{renderSickSelectEmployee=true}}if(requestType==RequestType.Leave){if(renderLeaveSelectEmployee){_this90.page=Page.SelectEmployee}else{_this90.page=Page.RequestDetails}_this90.request.cancelOverrideHours()}else if(requestType==RequestType.Sick){if(renderSickSelectEmployee){_this90.page=Page.SelectEmployee}else{_this90.page=Page.RequestDetails}_this90.request.cancelOverrideHours()}else if(requestType==RequestType.Toil){if(renderToilSelectEmployee){_this90.page=Page.SelectEmployee}else{_this90.page=Page.RequestDetails}_this90.request.setHours(0);_this90.request.cancelOverrideHours()}_this90.render()})};Dialog.prototype.renderRequestDetailsPage=function(data){var _this91=this;if(this.isLeave()||this.isCustom1()||this.isCustom2()){if(this.request.category&&this.request.category.type!=RequestType.Leave){this.request.category=null}}else if(this.isSick()){if(this.request.category&&this.request.category.type!=RequestType.Sick){this.request.category=null}}if(!this.isSick()){this.returnedToWork=true}var showRequestCalendar=this.showRequestCalendar;if(this.isToil()){showRequestCalendar=false}if(!this.request.startDate){showRequestCalendar=false}data.showRequestCalendar=showRequestCalendar;var today=appogee.today();if(this.request.startDate){if(this.request.startDate>this.request.endDate){data.dateError=S.errorEndAfterStart}else if(this.request.startDate<today){if(this.isLeave()||this.isCustom1()||this.isCustom2()){data.dateError=S.errorPast}}}data.showBtnPrevious=this.request.employee.sick.enabled||this.request.employee.toil.enabled;data.showReturnToWork=this.canShowReturnToWork();$dlg.html(tmplRequestDetails(data));if(this.showRequestCalendar&&!this.request.recalculating){var $requestCalendarContainer=$dlg.find("#requestCalendarContainer");this.views.requestCalendar.render($requestCalendarContainer)}if(this.isLeave()||this.isCustom1()||this.isCustom2()){service.listLeaveTypes(function(leaveTypes){_this91.populateLeaveTypes(leaveTypes);_this91.renderAllowanceDetails()});$dlg.find(".ddlCategory").change(function(e){var leaveType=_.findWhere(_this91.leaveTypes,{key:e.target.value});_this91.request.setCategory(leaveType);_this91.renderAllowanceDetails()})}else if(this.isSick()){$dlg.find(".ddlCategory").change(function(e){_this91.request.category=null;if(!e.target.value){return}var sickType=_.findWhere(_this91.sickTypes,{key:e.target.value});_this91.request.category=sickType});$dlg.find("#chkReturnedToWork").change(function(e){var today=appogee.today();if(_this91.request.startDate>today){appogee.confirm(S.confirmReturnToWork,function(){_this91.request.setStartDate(today);_this91.request.setEndDate(today);_this91.request.recalculate(true);_this91.returnedToWork=e.target.checked;_this91.render()})}else{_this91.request.setEndDate(today);_this91.request.recalculate(false);_this91.returnedToWork=e.target.checked;_this91.render()}});$dlg.find("#chkReturnedToWorkHelp").click(function(){appogee.alert(S.aboutReturnToWork)})}$dlg.find("#btnAdvancedOptions").click(function(){_this91.showRequestCalendar=!_this91.showRequestCalendar;_this91.render()});var $txtStartDate=$dlg.find(".txtStartDate");var $txtEndDate=$dlg.find(".txtEndDate");this.initDatePickers($txtStartDate,$txtEndDate);this.renderAllowanceDetails();$dlg.find('input[type="radio"][name="radDayOptions"]').change(function(){var dayType=$dlg.find('input[type="radio"][name="radDayOptions"]:checked').val();_this91.request.cancelOverrideHours();_this91.request.setDateType(_this91.request.startDate,dayType);_this91.request.recalculate()});$dlg.find("#chkFirstDayAfternoon").change(function(e){_this91.request.cancelOverrideHours();if($(e.currentTarget).prop("checked")){_this91.request.setDateType(_this91.request.startDate,RequestDayType.Afternoon)}else{_this91.request.setDateType(_this91.request.startDate,RequestDayType.FullDay)}_this91.request.recalculate()});$dlg.find("#chkLastDayMorning").change(function(e){_this91.request.cancelOverrideHours();if($(e.currentTarget).prop("checked")){_this91.request.setDateType(_this91.request.endDate,RequestDayType.Morning)}else{_this91.request.setDateType(_this91.request.endDate,RequestDayType.FullDay)}_this91.request.recalculate()});$dlg.find(".btnNext").click(function(){if(!_this91.request.startDate){appogee.valert(S.errorNoStartDate);return}if(!_this91.request.endDate){appogee.valert(S.errorNoEndDate);return}var hours=_this91.request.getHours();var startAllowance=_this91.getAllowance(_this91.request.startDate);var endAllowance=_this91.getAllowance(_this91.request.endDate);if(isNaN(hours)){appogee.valert(S.errorInvalidHours);return}if(_this91.request.startTime&&_this91.request.endTime){if(_this91.request.endTime<_this91.request.startTime){appogee.valert(S.errorEndTimeAfterStartTitle,S.errorEndTimeAfterStart);return false}}if(_this91.request.overrideComputedHours){if(hours<=0){appogee.valert(S.errorNoTime);return false}}else{if(hours<=0){appogee.valert(S.errorNoHours);return false}}var allowance=null;if(!startAllowance||!_this91.request.employee.isValidLeaveYear(startAllowance.startDate.getFullYear())){appogee.valert(S.errorUnpermittedDates);return}else if(!endAllowance||!_this91.request.employee.isValidLeaveYear(endAllowance.startDate.getFullYear())){appogee.valert(S.errorUnpermittedDates);return}else if(startAllowance.key!=endAllowance.key){var startMonth=Month.toString(_this91.request.employee.startMonth);appogee.valert(S.get("errorSpannedYears",{month:startMonth}));return}else{var entitlement=_this91.getEntitlement();allowance=startAllowance.leave;if(_this91.isCustom1()){allowance=startAllowance.custom1}else if(_this91.isCustom2()){allowance=startAllowance.custom2}else if(_this91.isSick()){if(_this91.sickTypes.length>0&&!_this91.request.category){$dlg.find(".ddlCategory").addClass("error");appogee.valert(S.errorInvalidSickType);return}allowance=startAllowance.sick}if(entitlement&&!_this91.isToil()){var remainingHours=allowance.remaining;if(_this91.isSick()){remainingHours-=hours;if(remainingHours<-entitlement.maxExceed){appogee.valert(S.errorAllowanceExceeded);return}}else if(_this91.request.category&&_this91.request.category.deducted){remainingHours-=hours}if(remainingHours<-entitlement.maxExceed&&_this91.request.category.deducted){appogee.valert(S.errorAllowanceExceeded);return}}}_this91.allowance=allowance;_this91.page=Page.Working;_this91.render();if(_this91.isToil()){_this91.page=Page.Reason;_this91.render()}else{var url="/employees/{0}/clashes".format(_this91.request.employee.key);var r=_this91.request.toJSON();var body={startDate:r.startDate,endDate:r.endDate,breakdown:r.breakdown,startTime:r.startTime,endTime:r.endTime};appogee.api.post(url,body,function(response){_this91.clash=null;var clashes=response.items;if(clashes.length>0){_this91.clash=clashes[0];_this91.page=Page.Clash}else{_this91.page=Page.Reason}_this91.render()},{force:true,artificialDelay:true})}});$dlg.find(".btnPrevious").click(function(){if(!_this91.targetEmployee&&_this91.request.type==RequestType.Sick&&_this91.currentUserProfile.sick.createScope!=RequestCreateScope.Self){_this91.page=Page.SelectEmployee}else{_this91.page=Page.SelectRequestType}_this91.render()})};Dialog.prototype.renderAllowanceDetails=function(){var _this92=this;var $allowanceDetailsContainer=$dlg.find(".allowance-details-container");var requestedHours=this.request.getHours();var requestedDays=this.request.getDays();var isSingleDay=false;var hideTimePickers=this.isToil()||!this.request.employee.autoCalculate;if(this.request.startDate&&this.request.endDate){var startDay=this.request.startDate.setHours(0,0,0,0);var endDay=this.request.endDate.setHours(0,0,0,0);isSingleDay=startDay==endDay}if(isSingleDay&&!this.request.overrideComputedHours){this.setRequestTimes()}if(!this.request.employee.autoCalculate){this.showIncludeBreakCheckBox=false;this.request.includeBreak=false}var data={request:this.request,employee:this.request.employee,isSingleDay:isSingleDay,showBreakChkBox:this.showIncludeBreakCheckBox,requestedHours:requestedHours,requestedDays:requestedDays,selfRequest:this.selfRequest,error:null,allowanceError:null,dateError:null,allowance:null,allowanceName:null,remainingDays:0,remainingHours:0,isToil:this.isToil,hideTimePickers:hideTimePickers,hideHours:this.hideHours};if(!this.request.startDate||!this.request.endDate){$allowanceDetailsContainer.html("");return}var startAllowance=this.getAllowance(this.request.startDate);var endAllowance=this.getAllowance(this.request.endDate);if(!startAllowance||!this.request.employee.isValidLeaveYear(startAllowance.startDate.getFullYear())){if(!data.error){data.allowanceError=S.errorUnpermittedDatesMsg}}else if(!endAllowance||!this.request.employee.isValidLeaveYear(endAllowance.startDate.getFullYear())){if(!data.error){data.allowanceError=S.errorUnpermittedDatesMsg}}else if(startAllowance.key!=endAllowance.key&&!data.error){data.allowanceError=S.errorDiffStartEnd}else{data.hasEntitlement=true;if(this.isLeave()){data.allowance=startAllowance.leave}else if(this.isCustom1()){data.allowance=startAllowance.custom1}else if(this.isCustom2()){data.allowance=startAllowance.custom2}else if(this.isSick()){data.hasEntitlement=this.request.employee.entitlement.hasOwnProperty("sick");data.allowance=startAllowance.sick}else if(this.isToil()){data.allowance=startAllowance.leave}if(data.hasEntitlement){data.allowanceName=startAllowance.name;data.remainingDays=data.allowance.remainingDays;data.remainingHours=data.allowance.remaining;if(this.isLeave()){if(this.request.category&&this.request.category.deducted){data.remainingDays-=requestedDays;data.remainingHours-=requestedHours}}else if(this.isToil()){data.remainingDays+=requestedDays;data.remainingHours+=requestedHours}else{data.remainingDays-=requestedDays;data.remainingHours-=requestedHours}if(data.remainingHours<0){}}}$allowanceDetailsContainer.html(tmplAllowanceDetails(data));$dlg.find("#btnOverride").click(function(){if(_this92.request.overrideComputedHours){_this92.request.cancelOverrideHours();_this92.render()}else{_this92.request.setHours(_this92.request.getHours());_this92.render();if(_this92.request.startDate.getTime()==_this92.request.endDate.getTime()){_this92.onOverride()}}});$dlg.find("#chkIncludeBreak").click(function(){_this92.request.includeBreak=$dlg.find("#chkIncludeBreak").is(":checked");_this92.request.hours=_this92.request.calculateHours();_this92.renderAllowanceDetails();var me=_this92;$dlg.find(".time").unbind("appogeeTimePicker");$dlg.find(".time").appogeeTimePicker({startTime:me.getStart(),endTime:me.getEnd(),reset:true,onChange:function(){me.updateReqStartEnd();me.onOverride()}})});if(appogee.getHideHours()){$dlg.find("#txtDays").change(function(){var days=$dlg.find("#txtDays").val();days=parseFloat(days);if(!isNaN(days)){_this92.request.setDays(days)}_this92.renderAllowanceDetails()})}else{$dlg.find("#txtHours").change(function(){var hours=$dlg.find("#txtHours").val();hours=parseFloat(hours);if(!isNaN(hours)){_this92.request.setHours(hours)}_this92.renderAllowanceDetails()});$dlg.find("#txtDays").change(function(){var days=$dlg.find("#txtDays").val();days=parseFloat(days);if(!isNaN(days)){_this92.request.setDays(days)}_this92.renderAllowanceDetails()})}if(this.request.employee){$dlg.find(".hd").data("hoursInDay",this.request.employee.hoursInDay).hd()}};Dialog.prototype.onOverride=function(){var me=this;this.updateReqStartEnd();$dlg.find(".time").unbind("appogeeTimePicker");$dlg.find(".time").appogeeTimePicker({startTime:me.getStart(),endTime:me.getEnd(),reset:true,onChange:function(){me.updateReqStartEnd();me.onOverride()}})};Dialog.prototype.getTimesFromRota=function(){var day=this.request.startDate.getDay();var listTimes=[];var appogeeDays={0:6,1:0,2:1,3:2,4:3,5:4,6:5};var weekDay=appogeeDays[day];var rota=this.request.employee.workingHours[weekDay];var strMorningStart=rota["ms"].slice(0,-3);var strMorningEnd=rota["me"].slice(0,-3);var strAfternoonStart=rota["as"].slice(0,-3);var strAfternoonEnd=rota["ae"].slice(0,-3);var morningStartHours=parseInt(strMorningStart.slice(0,2));var morningStartMins=parseInt(strMorningStart.slice(-2));var morningEndHours=parseInt(strMorningEnd.slice(0,2));var morningEndMins=parseInt(strMorningEnd.slice(-2));var afternoonStartHours=parseInt(strAfternoonStart.slice(0,2));var afternoonStartMins=parseInt(strAfternoonStart.slice(-2));var afternoonEndHours=parseInt(strAfternoonEnd.slice(0,2));var afternoonEndMins=parseInt(strAfternoonEnd.slice(-2));var morningStart=new Date(this.request.startDate.setHours(morningStartHours,morningStartMins,0));var morningEnd=new Date(this.request.startDate.setHours(morningEndHours,morningEndMins,0));var afternoonStart=new Date(this.request.startDate.setHours(afternoonStartHours,afternoonStartMins,0));var afternoonEnd=new Date(this.request.startDate.setHours(afternoonEndHours,afternoonEndMins,0));listTimes.push(morningStart);listTimes.push(morningEnd);listTimes.push(afternoonStart);listTimes.push(afternoonEnd);return listTimes};Dialog.prototype.getStart=function(){var returnTimes=true;var times=this.setRequestTimes(returnTimes);if(!this.request.employee.autoCalculate){return"00:00"}return times[0]};Dialog.prototype.getEnd=function(){var returnTimes=true;var times=this.setRequestTimes(returnTimes);if(!this.request.employee.autoCalculate){return"24:00"}return times[1]};Dialog.prototype.updateReqStartEnd=function(){var start=$dlg.find(".start").val();var end=$dlg.find(".end").val();this.request.startTime=start;this.request.endTime=end;this.request.overrideComputedHours=true;this.request.hours=this.request.calculateHours();var breakdownDay=Object.keys(this.request.breakdown)[0];var times=this.getTimesFromRota();var morningStart=times[0];var morningEnd=times[1];var afternoonStart=times[2];var afternoonEnd=times[3];var reqStart=new Date(Date.parse(this.request.getStartTime()));var reqEnd=new Date(Date.parse(this.request.getEndTime()));if(morningStart<=reqStart&&reqStart<=morningEnd&&morningStart<=reqEnd&&reqEnd<=morningEnd){this.request.breakdown[breakdownDay].type=RequestDayType.Morning;this.showIncludeBreakCheckBox=false;this.request.includeBreak=false}else if(afternoonStart<=reqStart&&reqStart<=afternoonEnd&&afternoonStart<=reqEnd&&reqEnd<=afternoonEnd){this.request.breakdown[breakdownDay].type=RequestDayType.Afternoon;this.showIncludeBreakCheckBox=false;this.request.includeBreak=false}else if(morningEnd<=reqStart&&reqStart<=afternoonStart&&morningEnd<=reqEnd&&reqEnd<=afternoonStart){this.request.breakdown[breakdownDay].type=RequestDayType.FullDay;this.request.includeBreak=false;this.showIncludeBreakCheckBox=false}else{this.request.breakdown[breakdownDay].type=RequestDayType.FullDay;this.request.includeBreak=true;this.showIncludeBreakCheckBox=true}this.renderAllowanceDetails()};Dialog.prototype.setRequestTimes=function(returnTimes){var day=this.request.startDate.getDay();var appogeeDays={0:6,1:0,2:1,3:2,4:3,5:4,6:5};var weekDay=appogeeDays[day];var rota=this.request.employee.workingHours[weekDay];var morningStart=rota["ms"].slice(0,-3);var morningEnd=rota["me"].slice(0,-3);var afternoonStart=rota["as"].slice(0,-3);var afternoonEnd=rota["ae"].slice(0,-3);var breakInMs=new Date("1970-01-01T"+afternoonStart+"Z")-new Date("1970-01-01T"+morningEnd+"Z");var breakTime=breakInMs/6e4;var dayType=$dlg.find('input[type="radio"][name="radDayOptions"]:checked').val();if(dayType=="full_day"){if(returnTimes){return[morningStart,afternoonEnd]}this.request.startTime=morningStart;this.request.endTime=afternoonEnd;if(!this.request.employee.autoCalculate){this.request.breakTime=0}else{this.request.breakTime=breakTime}}else if(dayType=="afternoon"){if(returnTimes){return[afternoonStart,afternoonEnd]}this.request.startTime=afternoonStart;this.request.endTime=afternoonEnd;this.request.breakTime=0}else if(dayType=="morning"){if(returnTimes){return[morningStart,morningEnd]}this.request.startTime=morningStart;this.request.endTime=morningEnd;this.request.breakTime=0}};Dialog.prototype.scrapeReasonPage=function(validate){var reason=$dlg.find("#txtReason").val();var oooEnabled=$dlg.find("#chkOoo").prop("checked");if(validate){if(!reason&&this.requireReason){appogee.valert(S.errorNoReason);return false}}this.request.reason=reason;this.request.ooo.enabled=oooEnabled;return true};Dialog.prototype.scrapeOooPage=function(validate){var oooSubject=$dlg.find("#txtOooSubject").val();var oooBody=$dlg.find("#txtOooBody").val();var oooContactsOnly=$dlg.find("#chkOooContactsOnly").prop("checked");var oooDomainOnly=$dlg.find("#chkOooDomainOnly").prop("checked");if(validate){if(!oooSubject){appogee.valert(S.errorOooSubject);return false}if(!oooBody){appogee.valert(S.errorOooBody);return false}}this.request.ooo.subject=oooSubject;this.request.ooo.body=oooBody;this.request.ooo.contactsOnly=oooContactsOnly;this.request.ooo.domainOnly=oooDomainOnly;return true};Dialog.prototype.getEntitlement=function(){var entitlement=null;if(this.isLeave()||this.isToil()){entitlement=this.request.employee.entitlement.leave}else if(this.isCustom1()){entitlement=this.request.employee.entitlement.custom1}else if(this.isCustom2()){entitlement=this.request.employee.entitlement.custom2}else if(this.isSick()){entitlement=this.request.employee.entitlement.sick}return entitlement};Dialog.prototype.getAllowance=function(date){var allowance=_.find(this.allowances,function(a){return a.startDate<=date&&date<=a.endDate});return allowance};Dialog.prototype.getLeaveType=function(){var $ddlCategory=$dlg.find(".ddlCategory");var leaveType=_.findWhere(this.leaveTypes,{key:$ddlCategory.val()});return leaveType};Dialog.prototype.dateBlur=function(){};Dialog.prototype.show=function(){var _this93=this;this.dlg=new appogee.Dialog($dlg,{title:S.newRequest,width:600,dialogClass:"dlg-new-request",onBeforeClose:function(){_this93.onCloseHandlers.forEach(function(handler){return handler()})}});this.dlg.clearButtons();var requestEmployeeKey=this.currentUser.key;if(this.targetEmployee){requestEmployeeKey=this.targetEmployee.key}service.getEmployeeLeaveProfile(requestEmployeeKey,function(employee){_this93.request.setEmployee(employee);if(_this93.defaultStartDate){_this93.request.setStartDate(_this93.defaultStartDate);_this93.request.recalculate()}if(_this93.targetEmployee){_this93.selfRequest=false}service.listEmployeeAllowances(requestEmployeeKey,function(allowances){_this93.allowances=allowances});if(employee.sick.enabled||employee.toil.enabled){_this93.page=Page.SelectRequestType}else{_this93.request.type=RequestType.Leave;_this93.page=Page.RequestDetails}_this93.render();_this93.dlg.show()})};Dialog.prototype.submit=function(){var _this94=this;this.page=Page.Submitting;this.render();var url="/requests/submit";var request=this.request.toJSON();if(this.isSick()&&!this.returnedToWork){request.status=RequestStatus.Open;request.endDate=null}appogee.api.post(url,request,function(request){_this94.page=Page.Complete;_this94.render();setTimeout(function(){_this94.dlg.hide();_this94.onSubmitHandlers.forEach(function(handler){return handler(request)})},1e3)},{artificialDelay:true})};return Dialog});define("leave/app_util",["appogee","leave/dialogs/RequestDialog","leave/dialogs/NewRequestDialog"],function(appogee,RequestDialog,NewRequestDialog){"use strict";function _openRequest(module,key,setRoute){if(setRoute!==false){setRoute=true}var url;if(setRoute){url="!/request/{0}".format(key);module.router.navigate(url,{trigger:true});return}url="/requests/{0}?projection=full".format(key);appogee.api.get(url,function(request){var dlg=new RequestDialog(request);dlg.onClose(function(){module.router.navigate("!")});dlg.onUpdate(function(request){if(module.onRequestUpdate){module.onRequestUpdate(request)}});dlg.show()},{artificialDelay:false})}function _newRequest(module,date,setRoute,employee){if(setRoute!==false){setRoute=true}if(setRoute){var url="!/request/new";if(date){url+="/"+date}module.router.navigate(url,{trigger:true});return}var options={};if(date){options.date=date}if(employee){options.targetEmployee=employee}var dlg=new NewRequestDialog(options);dlg.onClose(function(){module.router.navigate("!")});dlg.onSubmit(function(request){if(module.onRequestUpdate){module.onRequestUpdate(request)}});dlg.show()}return{initApp:function(app){var module=app.module;module.openRequest=function(key,setRoute){_openRequest(module,key,setRoute)};module.newRequest=function(date,setRoute,employee){_newRequest(module,date,setRoute,employee)};app.addRoute("!(/request/new)",function(){module.newRequest(null,false)});app.addRoute("!(/request/new/:date)",function(date){module.newRequest(date,false)});app.addRoute("!(/request/:key)",function(key){module.openRequest(key,false)})},initModule:function(module){module.openRequest=function(key,setRoute){_openRequest(module,key,setRoute)};module.newRequest=function(date,setRoute,employee){_newRequest(module,date,setRoute,employee)};var routes={"!(/request/new)":function(){module.newRequest(null,false)},"!(/request/new/:date)":function(date){module.newRequest(date,false)},"!(/request/:key)":function(key){module.openRequest(key,false)}};if(!module.routes){module.routes={}}for(var route in routes){if(routes.hasOwnProperty(route)){module.routes[route]=routes[route]}}}}});define("admin/overview",[],function(){"use strict";return{initialize:function(){}}});define("hbs!admin/dialogs/tmpl/CreateVTeam",["hbs/handlebars","templates/helpers/s","templates/helpers/if_gt","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<div class="form-group">\n\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"ADU",{name:"s",hash:{},data:data}))+' *</label>\n\t\t<select class="form-control input-sm ddlAdu">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.adus:depth0,{name:"each",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</select>\n\t</div>\n"},2:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data
}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,depths[1]!=null?depths[1].defaultAduKey:depths[1],{name:"ifequal",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},3:function(depth0,helpers,partials,data){return'selected="selected"'},5:function(depth0,helpers,partials,data){return'checked="checked"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Virtual Team",{name:"s",hash:{},data:data}))+'</h4>\n\n<div class="alert alert-info alert-flat pan-info">\n\t<p>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Teams provide a means to group users from different Teams.",{name:"s",hash:{},data:data}))+"\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Teams also provide configuration settings for the configured members.",{name:"s",hash:{},data:data}))+'\n\t</p>\n</div>\n<div class="alert alert-info alert-flat pan-working">\n\t<p class="working">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Creating Virtual Team, please wait ...",{name:"s",hash:{},data:data}))+'\n\t</p>\n</div>\n<div class="alert alert-success alert-flat pan-success">\n\t<p>\n\t\t<i class="glyphicon glyphicon-ok"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The Virtual Team has been created",{name:"s",hash:{},data:data}))+"\n\t</p>\n</div>\n\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.adus:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:1},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="form-group mandatory">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Team Name",{name:"s",hash:{},data:data}))+'</label>\n\t<div class="help-block text-danger txtNameError"></div>\n\t<input type="text" class="form-control input-sm txtName" autocomplete="off" />\n</div>\n\n<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Primary Manager",{name:"s",hash:{},data:data}))+'</label>\n\t<input type="text" class="form-control input-sm txtManager" placeholder="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start typing to search ...",{name:"s",hash:{},data:data}))+'" />\n</div>\n\n<div class="buttons">\n\t<div class="pull-left">\n\t\t<button class="btn btn-sm btn-default w-min-100 btnClose">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t</div>\n\t<div class="pull-right">\n\t\t<label class="checkbox-inline">\n\t\t\t<input type="checkbox" class="chkCreateAnother" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.createAnother:depth0,{name:"if",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Another",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t\t<button class="btn btn-sm btn-primary w-min-100 btnCreate">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Virtual Team",{name:"s",hash:{},data:data}))+'\n\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t</button>\n\t</div>\n\t<div class="clearfix"></div>\n</div>'},useData:true,useDepths:true});Handlebars.registerPartial("admin/dialogs/tmpl/CreateVTeam",t);return t});define("admin/dialogs/CreateVTeamDialog",["jquery","underscore","appogee","hbs!admin/dialogs/tmpl/CreateVTeam"],function($,_,appogee,tmpl){"use strict";var $dlg=null;var S,R={msgNoVTeamName:"Please enter a Virtual Team name",msgInvalidVTeamName:"Invalid Virtual Team name. Please try again.",msgVTeamNameUnavailable:"Virtual Team name is not available, please enter a unique name."};var Dialog=function(){S=appogee.getStrings("CreateVTeamDialog",R);if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.adus=appogee.getAdus({root:"self"});this.createAnother=false;this.defaultAduKey=null;this.onCloseHandlers=[];this.onCreateHandlers=[]};Dialog.prototype.onClose=function(handler){this.onCloseHandlers.push(handler)};Dialog.prototype.onCreate=function(handler){this.onCreateHandlers.push(handler)};Dialog.prototype.setDefaultAduKey=function(aduKey){if(aduKey){this.defaultAduKey=aduKey}};Dialog.prototype.render=function(){var _this95=this;var data={createAnother:this.createAnother,adus:this.adus,defaultAduKey:this.defaultAduKey};$dlg.removeClass("step1 step2 step3").addClass("step1").html(tmpl(data));if(this.error){$dlg.find(".txtName").addClass("error");$dlg.find(".txtNameError").html(S.msgVTeamNameUnavailable)}var me=this;this.managerPicker=new appogee.UserPicker($dlg.find(".txtManager"),null,{active:true,aduKey:me.defaultAduKey,aduTraverse:"up"});$dlg.find(".ddlAdu").change(function(){var selectedAduKey=$dlg.find(".ddlAdu").val();me.setDefaultAduKey(selectedAduKey);me.managerPicker.params.aduKey=me.defaultAduKey});$dlg.find(".txtName").focus();$dlg.find(".btnCreate").click(function(){_this95.create()});$dlg.find(".btnClose").click(function(){_this95.close()})};Dialog.prototype.show=function(){var _this96=this;this.dlg=new appogee.Dialog($dlg,{dialogClass:"dlg-create dlg-create-team",onBeforeClose:function(){_this96.onCloseHandlers.forEach(function(handler){return handler()})}});this.dlg.clearButtons();this.render();this.dlg.show()};Dialog.prototype.create=function(){var _this97=this;var me=this;me.error=false;var aduKey=$dlg.find(".ddlAdu").val();var name=$dlg.find(".txtName").val().trim();var primaryManagerKey=this.managerPicker.$textbox.data("userPickerKey");var primaryManagerEmail=this.managerPicker.$textbox.data("userPickerEmail");if(!name){$dlg.find(".txtName").addClass("error");$dlg.find(".txtNameError").html(S.msgNoVTeamName);return}this.createAnother=$dlg.find(".chkCreateAnother").prop("checked");$dlg.find("input,select,button,textarea").attr("disabled",true);$dlg.removeClass("step1 step2 step3").addClass("step2");var body={adu:{key:aduKey},name:name};if(primaryManagerKey&&primaryManagerEmail){var primaryManager={key:primaryManagerKey,email:primaryManagerEmail,role:"primary"};body.readers=[primaryManager]}appogee.xhr.post("/admin/org/vteams/check_name",body,function(response){if(response.exists){me.error=true;me.render();return}$dlg.find(".txtName").removeClass("error");$dlg.find(".txtNameError").hide();appogee.api.post("/vteams",body,function(response){$dlg.removeClass("step1 step2 step3").addClass("step3");setTimeout(function(){if(_this97.createAnother){_this97.render()}else{_this97.close()}},1e3);if(_this97.onCreateHandlers){_this97.onCreateHandlers.forEach(function(h){return h(response)})}})},{artificialDelay:true})};Dialog.prototype.close=function(){this.dlg.hide()};return Dialog});define("templates/helpers/breakSlash",["hbs/handlebars","appogee"],function(Handlebars){"use strict";function breakSlash(s){s=s.replace(/\//g,"&#8203;/");return new Handlebars.SafeString(s)}Handlebars.registerHelper("breakSlash",breakSlash);return breakSlash});define("hbs!admin/org/tmpl/_adu",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/breakSlash"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'<tr class="'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].adu:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'" data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">\n\t<td class="w16">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adus:depth0,{name:"if",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.program(9,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t</td>\n\t<td class="'+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].indent:depths[1],{name:"if",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<a href="javascript: void(0);" class="adu appogee-tooltip"'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.description:depth0,{name:"if",hash:{},fn:this.program(13,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].indent:depths[1],{name:"if",hash:{},fn:this.program(15,data,0,blockParams,depths),inverse:this.program(17,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t</a>\n\t</td>\n"+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].isAduManager:depths[1],{name:"if",hash:{},fn:this.program(19,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"</tr>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.expand:depth0,{name:"if",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")},2:function(depth0,helpers,partials,data){return"selected"},4:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.expand:depth0,{name:"if",hash:{},fn:this.program(5,data,0),inverse:this.program(7,data,0),data:data}))!=null?stack1:""},5:function(depth0,helpers,partials,data){return'\t\t\t\t<a href="javascript: void(0);" class="toggle-expand">\n\t\t\t\t\t<i class="fa fa-caret-down"></i>\n\t\t\t\t</a>\n'},7:function(depth0,helpers,partials,data){return'\t\t\t\t<a href="javascript: void(0);" class="toggle-expand">\n\t\t\t\t\t<i class="fa fa-caret-right"></i>\n\t\t\t\t</a>\n'},9:function(depth0,helpers,partials,data){return"\t\t\t&nbsp;\n"},11:function(depth0,helpers,partials,data){var helper;return"lvl"+this.escapeExpression((helper=(helper=helpers.level||(depth0!=null?depth0.level:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"level",hash:{},data:data}):helper))},13:function(depth0,helpers,partials,data){var helper;return'data-tooltip="'+this.escapeExpression((helper=(helper=helpers.description||(depth0!=null?depth0.description:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"description",hash:{},data:data}):helper))+'"'},15:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t/"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"\n"},17:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.breakSlash||depth0&&depth0.breakSlash||helpers.helperMissing).call(depth0,depth0!=null?depth0.path:depth0,{name:"breakSlash",hash:{},data:data}))+"\n"},19:function(depth0,helpers,partials,data){var helper;return'\t<td class="w16 edit">\n\t\t<a href="#!/division/'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" class="appogee-tooltip" data-tooltip="Edit Division" data-tooltip-position="left">\n\t\t\t<i class="glyphicon glyphicon-pencil"></i>\n\t\t</a>\n\t</td>\n'},21:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=this.invokePartial(partials["admin/org/tmpl/_adu"],depth0,{name:"admin/org/tmpl/_adu",hash:{isAduManager:depths[2]!=null?depths[2].isAduManager:depths[2],indent:depths[2]!=null?depths[2].indent:depths[2],adu:depths[2]!=null?depths[2].adu:depths[2],adus:depth0!=null?depth0.adus:depth0},data:data,indent:"\t",helpers:helpers,partials:partials}))!=null?stack1:""},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.adus:depth0,{name:"each",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},usePartial:true,useData:true,useDepths:true});Handlebars.registerPartial("admin/org/tmpl/_adu",t);Handlebars.registerPartial("admin/org/tmpl/_adu",t);return t});define("hbs!admin/org/tmpl/OrgViewAdus",["hbs/handlebars","hbs!admin/org/tmpl/_adu","templates/helpers/s","templates/helpers/if_gt"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"3"},3:function(depth0,helpers,partials,data){return"2"},5:function(depth0,helpers,partials,data){return this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"List View",{name:"s",hash:{},data:data}))},7:function(depth0,helpers,partials,data){return this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hierarchy View",{name:"s",hash:{},data:data}))},9:function(depth0,helpers,partials,data){return'\t\t\t\t\t<i class="fa fa-list"></i>\n'},11:function(depth0,helpers,partials,data){return'\t\t\t\t\t<i class="fa fa-indent"></i>\n'},13:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<a href="javascript: void(0);" class="appogee-tooltip toggle-collspase-all" data-tooltip="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.collapseAdus:depth0,{name:"if",hash:{},fn:this.program(14,data,0),inverse:this.program(16,data,0),data:data}))!=null?stack1:"")+'" data-tooltip-position="left">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.collapseAdus:depth0,{name:"if",hash:{},fn:this.program(18,data,0),inverse:this.program(20,data,0),data:data}))!=null?stack1:"")+"\t\t\t</a>\n"},14:function(depth0,helpers,partials,data){return this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Expand All",{name:"s",hash:{},data:data}))},16:function(depth0,helpers,partials,data){return this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Collapse All",{name:"s",hash:{},data:data}))},18:function(depth0,helpers,partials,data){return'\t\t\t\t\t<i class="glyphicon glyphicon-expand"></i>\n'},20:function(depth0,helpers,partials,data){return'\t\t\t\t\t<i class="glyphicon glyphicon-collapse-down"></i>\n'},22:function(depth0,helpers,partials,data){return'\t\t\t<a href="/admin/organisation/adu-manager" class="appogee-tooltip" data-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"ADU Management Tool",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left">\n\t\t\t\t<i class="glyphicon glyphicon-cog"></i>\n\t\t\t</a>\n\t\t\t<a href="#!/division" class="appogee-tooltip" data-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create New Division",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left">\n\t\t\t\t<i class="glyphicon glyphicon-plus"></i>\n\t\t\t</a>\n'},24:function(depth0,helpers,partials,data){var stack1;return'\t<tr>\n\t\t<td colspan="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isAduManager:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.program(3,data,0),data:data}))!=null?stack1:"")+'"><div class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</div></td>\n\t</tr>\n"},26:function(depth0,helpers,partials,data){var stack1;return(stack1=this.invokePartial(partials["admin/org/tmpl/_adu"],depth0,{name:"admin/org/tmpl/_adu",hash:{isAduManager:depth0!=null?depth0.isAduManager:depth0,indent:depth0!=null?depth0.indentAdus:depth0,adu:depth0!=null?depth0.adu:depth0,adus:depth0!=null?depth0.adus:depth0},data:data,indent:"\t",helpers:helpers,partials:partials}))!=null?stack1:""},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<table class="table table-condensed">\n<thead>\n<tr>\n\t<th colspan="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isAduManager:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.program(3,data,0),data:data}))!=null?stack1:"")+'">\n\t\t<div class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Divisions",{name:"s",hash:{},data:data}))+'</div>\n\t\t<div class="toolbar">\n\t\t\t<a href="javascript: void(0);" class="appogee-tooltip toggle-indent" data-tooltip="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.indentAdus:depth0,{name:"if",hash:{},fn:this.program(5,data,0),inverse:this.program(7,data,0),data:data}))!=null?stack1:"")+'" data-tooltip-position="left">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.indentAdus:depth0,{name:"if",hash:{},fn:this.program(9,data,0),inverse:this.program(11,data,0),data:data}))!=null?stack1:"")+"\t\t\t</a>\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.maxAduLevel:depth0,{name:"if_gt",hash:{compare:2},fn:this.program(13,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isAduManager:depth0,{name:"if",hash:{},fn:this.program(22,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</div>\n\t</th>\n</tr>\n</thead>\n<tbody>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loadingAdus:depth0,{name:"if",hash:{},fn:this.program(24,data,0),inverse:this.program(26,data,0),data:data}))!=null?stack1:"")+"</tbody>\n</table>"},usePartial:true,useData:true});Handlebars.registerPartial("admin/org/tmpl/OrgViewAdus",t);Handlebars.registerPartial("admin/org/tmpl/OrgViewAdus",t);return t});define("hbs!admin/org/tmpl/OrgViewTeams",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t\t\t<a href="javascript: void(0);" class="btnSwitchTeamMode" style="margin-left: 10px; color: #ccc;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Teams",{name:"s",hash:{},data:data}))+"</a>\n"},3:function(depth0,helpers,partials,data){var stack1;return"/divisions/"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.adu:depth0)!=null?stack1.key:stack1,depth0))},5:function(depth0,helpers,partials,data){return'\t<tr>\n\t\t<td colspan="2"><div class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</div></td>\n\t</tr>\n"},7:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.teams:depth0,{name:"each",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.program(11,data,0,blockParams,depths),data:data}))!=null?stack1:""},8:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return"\t<tr "+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].team:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(9,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+' data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">\n\t\t<td>\n\t\t\t<a href="javascript: void(0);" class="team">'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+'</a>\n\t\t</td>\n\t\t\x3c!-- \n\t\t<td class="w16 edit">\n\t\t\t<a href="#!/team/'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" class="appogee-tooltip" data-tooltip="View Team" data-tooltip-position="left">\n\t\t\t\t<i class="glyphicon glyphicon-eye-open"></i>\n\t\t\t</a>\n\t\t</td>\n\t\t--\x3e\n\t\t<td class="w16 edit">\n\t\t\t<a href="/admin/organisation/team?key='+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" class="appogee-tooltip" data-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Edit Team",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left">\n\t\t\t\t<i class="glyphicon glyphicon-pencil"></i>\n\t\t\t</a>\n\t\t</td>\n\t</tr>\n'},9:function(depth0,helpers,partials,data){return'class="selected"'},11:function(depth0,helpers,partials,data){return'\t<tr>\n\t\t<td colspan="2" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No Teams Found",{name:"s",hash:{},data:data}))+"</td>\n\t</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<table class="table table-condensed">\n<thead>\n<tr>\n\t<th colspan="2">\n\t\t<div class="pull-left">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Teams",{name:"s",hash:{},data:data}))+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.vteams:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t</div>\n\t\t<div class="toolbar">\n\t\t\t\x3c!--\n\t\t\t<a href="#" class="appogee-tooltip" data-tooltip="Expand" data-tooltip-position="left">\n\t\t\t\t<i class="fa fa-object-ungroup"></i>\n\t\t\t</a>\n\t\t\t--\x3e\n\t\t\t<a href="#!'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adu:depth0,{name:"if",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'/team" class="appogee-tooltip" data-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create New Team",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left">\n\t\t\t\t<i class="glyphicon glyphicon-plus"></i>\n\t\t\t</a>\n\t\t</div>\n\t</th>\n</tr>\n</thead>\n<tbody>\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loadingTeams:depth0,{name:"if",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.program(7,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"</tbody>\n</table>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/org/tmpl/OrgViewTeams",t);Handlebars.registerPartial("admin/org/tmpl/OrgViewTeams",t);return t});define("hbs!admin/org/tmpl/OrgViewVTeams",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<tr>\n\t\t<td colspan="2"><div class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</div></td>\n\t</tr>\n"},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.vteams:depth0,{name:"each",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.program(7,data,0,blockParams,depths),data:data}))!=null?stack1:""},4:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return"\t<tr "+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].vteam:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+' data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">\n\t\t<td>\n\t\t\t<a href="javascript: void(0);" class="vteam">'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+'</a>\n\t\t</td>\n\t\t<td class="w16 edit">\n\t\t\t<a href="/admin/organisation/vteam?key='+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" class="appogee-tooltip" data-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Edit Virtual Team",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left">\n\t\t\t\t<i class="glyphicon glyphicon-pencil"></i>\n\t\t\t</a>\n\t\t</td>\n\t</tr>\n'},5:function(depth0,helpers,partials,data){return'class="selected"'},7:function(depth0,helpers,partials,data){return'\t<tr>\n\t\t<td colspan="2" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No Virtual Teams Found",{name:"s",hash:{},data:data}))+"</td>\n\t</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<table class="table table-condensed">\n<thead>\n<tr>\n\t<th colspan="2">\n\t\t<div class="pull-left">\n\t\t\t<a href="javascript: void(0);" class="btnSwitchTeamMode" style="margin-right: 10px; color: #ccc;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Teams",{name:"s",hash:{},data:data}))+"</a>\n\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Teams",{name:"s",hash:{},data:data}))+'\n\t\t</div>\n\t\t<div class="toolbar">\n\t\t\t<a href="javascript:void(0)" id="createVTeam" class="appogee-tooltip" data-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create New Virtual Team",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left">\n\t\t\t\t<i class="glyphicon glyphicon-plus"></i>\n\t\t\t</a>\n\t\t</div>\n\t</th>\n</tr>\n</thead>\n<tbody>\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loadingTeams:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.program(3,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"</tbody>\n</table>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/org/tmpl/OrgViewVTeams",t);Handlebars.registerPartial("admin/org/tmpl/OrgViewVTeams",t);return t});define("hbs!admin/org/tmpl/OrgViewEmployees",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return"/divisions/"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.adu:depth0)!=null?stack1.key:stack1,depth0))},3:function(depth0,helpers,partials,data){var stack1;return"/teams/"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.team:depth0)!=null?stack1.key:stack1,depth0))},5:function(depth0,helpers,partials,data){return'\t<tr>\n\t\t<td colspan="3"><div class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</div></td>\n\t</tr>\n"},7:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.employees:depth0,{name:"each",hash:{},fn:this.program(8,data,0),inverse:this.program(10,data,0),data:data}))!=null?stack1:""},8:function(depth0,helpers,partials,data){var helper;return"\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.firstName||(depth0!=null?depth0.firstName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"firstName",hash:{},data:data}):helper))+" "+this.escapeExpression((helper=(helper=helpers.lastName||(depth0!=null?depth0.lastName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"lastName",hash:{},data:data}):helper))+"</td>\n\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+'</td>\n\t\t\t<td class="w24 edit">\n\t\t\t\t<a href="/admin/organisation/employee?key='+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" class="appogee-tooltip" data-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Edit Employee",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left">\n\t\t\t\t\t<i class="glyphicon glyphicon-pencil"></i>\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t</tr>\n'},10:function(depth0,helpers,partials,data){return'\t\t<tr>\n\t\t\t<td colspan="3" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No Employees Found",{name:"s",hash:{},data:data}))+"</td>\n\t\t</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<table class="table table-condensed">\n<thead>\n<tr>\n\t<th colspan="3">\n\t\t<div class="pull-left">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employees",{name:"s",hash:{},data:data}))+'\n\t\t</div>\n\t\t<div class="toolbar">\n\t\t\t\x3c!-- \n\t\t\t<a href="#" class="appogee-tooltip" data-tooltip="Expand" data-tooltip-position="left">\n\t\t\t\t<i class="fa fa-object-ungroup"></i>\n\t\t\t</a>\n\t\t\t--\x3e\n\t\t\t<a href="#!'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adu:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.team:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'/employee" class="appogee-tooltip" data-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add Employee",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left">\n\t\t\t\t<i class="glyphicon glyphicon-plus"></i>\n\t\t\t</a>\n\t\t</div>\n\t</th>\n</tr>\n</thead>\n<tbody>\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loadingEmployees:depth0,{name:"if",hash:{},fn:this.program(5,data,0),inverse:this.program(7,data,0),data:data}))!=null?stack1:"")+"</tbody>\n</table>"},useData:true});Handlebars.registerPartial("admin/org/tmpl/OrgViewEmployees",t);Handlebars.registerPartial("admin/org/tmpl/OrgViewEmployees",t);return t})
;define("hbs!admin/org/tmpl/OrgView",["hbs/handlebars","hbs!admin/org/tmpl/OrgViewAdus","hbs!admin/org/tmpl/OrgViewTeams","hbs!admin/org/tmpl/OrgViewVTeams","hbs!admin/org/tmpl/OrgViewEmployees","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="col-sm-4 col-lg-3 adus-container">\n'+((stack1=this.invokePartial(partials["admin/org/tmpl/OrgViewAdus"],depth0,{name:"admin/org/tmpl/OrgViewAdus",data:data,indent:"\t\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+"\t\t</div>\n"},3:function(depth0,helpers,partials,data){return"col-sm-4 col-lg-3"},5:function(depth0,helpers,partials,data){return"col-sm-5 col-md-4"},7:function(depth0,helpers,partials,data){var stack1;return(stack1=this.invokePartial(partials["admin/org/tmpl/OrgViewTeams"],depth0,{name:"admin/org/tmpl/OrgViewTeams",data:data,indent:"\t\t\t",helpers:helpers,partials:partials}))!=null?stack1:""},9:function(depth0,helpers,partials,data){var stack1;return(stack1=this.invokePartial(partials["admin/org/tmpl/OrgViewVTeams"],depth0,{name:"admin/org/tmpl/OrgViewVTeams",data:data,indent:"\t\t\t",helpers:helpers,partials:partials}))!=null?stack1:""},11:function(depth0,helpers,partials,data){return"col-sm-4 col-lg-6"},13:function(depth0,helpers,partials,data){return"col-sm-7 col-md-8"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="row organisation-view">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showAdus:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t<div class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showAdus:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.program(5,data,0),data:data}))!=null?stack1:"")+' teams-container">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.teamMode:depth0,"teams",{name:"ifequal",hash:{},fn:this.program(7,data,0),inverse:this.program(9,data,0),data:data}))!=null?stack1:"")+'\t</div>\n\t<div class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showAdus:depth0,{name:"if",hash:{},fn:this.program(11,data,0),inverse:this.program(13,data,0),data:data}))!=null?stack1:"")+' employees-container">\n'+((stack1=this.invokePartial(partials["admin/org/tmpl/OrgViewEmployees"],depth0,{name:"admin/org/tmpl/OrgViewEmployees",data:data,indent:"\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+"\t</div>\n</div>"},usePartial:true,useData:true});Handlebars.registerPartial("admin/org/tmpl/OrgView",t);return t});define("admin/org/views/OrgView",["jquery","underscore","appogee","admin/dialogs/CreateVTeamDialog","hbs!admin/org/tmpl/OrgView","hbs!admin/org/tmpl/OrgViewAdus","hbs!admin/org/tmpl/OrgViewTeams","hbs!admin/org/tmpl/OrgViewVTeams","hbs!admin/org/tmpl/OrgViewEmployees","jquery.appogee.tooltip"],function($,_,appogee,CreateVTeamDialog,tmplMain,tmplAdus,tmplTeams,tmplVTeams,tmplEmployees){"use strict";var TEAM_CACHE={};var VTEAM_CACHE={};var EMPLOYEE_CACHE={};var View=function($container,adus,adu,teams,team,vteams,employees){var _this98=this;this.$container=$container;if(!team&&teams&&teams.length>0){team=teams[0]}this.setAdus(adus);this.adu=adu;this.teams=teams;this.team=team;this.vteams=vteams;this.vteam=null;this.employees=employees;this.indentAdus=true;this.collapseAdus=false;this.loadingAdus=false;this.loadingTeams=false;this.loadingEmployees=false;this.teamMode="teams";this.showAdus=appogee.isAdusEnabled();this.currentUser=appogee.getCurrentUser();if(!teams){this.fetchTeams()}if(team&&!employees){this.fetchEmployeesByTeam(team.key,function(employees){_this98.employees=employees;_this98.renderEmployees()})}};View.prototype.resetAdus=function(adus){adus.forEach(function(adu){if(adu.hasOwnProperty("adus")){delete adu.adus}});this.setAdus(adus)};View.prototype.addTeam=function(team){if(TEAM_CACHE.hasOwnProperty(team.adu.key)){TEAM_CACHE[team.adu.key].push(team)}if(team.adu.key==this.adu.key){this.teams.push(team)}};View.prototype.addVTeam=function(vteam){if(VTEAM_CACHE.hasOwnProperty(vteam.adu.key)){VTEAM_CACHE[vteam.adu.key].push(vteam)}if(vteam.adu.key==this.adu.key){this.vteams.push(vteam)}};View.prototype.addEmployee=function(employee){if(EMPLOYEE_CACHE.hasOwnProperty(employee.team.key)){EMPLOYEE_CACHE[employee.team.key].push(employee)}if(this.teamMode=="teams"){if(employee.team.key==this.team.key){this.employees.push(employee)}}else if(this.teamMode=="vteams"){if(employee.vteam.key==this.vteam.key){this.employees.push(employee)}}};View.prototype.setAdus=function(adus){adus.forEach(function(adu){adu.expand=true;var index=adu.path.lastIndexOf("/");if(index<=0){return}var parentPath=adu.path.substring(0,index);var parent=_.findWhere(adus,{path:parentPath});if(!parent.hasOwnProperty("adus")){parent.adus=[]}parent.adus.push(adu)});this.adus=adus;this.rootAdu=_.findWhere(adus,{level:1})};View.prototype.fetchTeamsAndEmployees=function(aduKey,callback,force){var _this99=this;force=true;this.loadingTeams=true;this.loadingEmployees=true;if(this.teamMode=="teams"){this.renderTeams()}else{this.renderVirtualTeams()}this.renderEmployees();this.fetchTeams(aduKey,function(teams,vteams){if(_this99.teamMode=="teams"){if(teams.length===0){_this99.loadingEmployees=false;callback(teams,vteams,[]);return}else{_this99.fetchEmployeesByTeam(teams[0].key,function(employees){callback(teams,vteams,employees)},force)}}else{if(vteams.length===0){_this99.loadingEmployees=false;callback(teams,vteams,[]);return}else{_this99.fetchEmployeesByVirtualTeam(vteams[0].key,function(employees){callback(teams,vteams,employees)},force)}}},force)};View.prototype.fetchTeams=function(aduKey,callback,force){var _this100=this;force=true;if(TEAM_CACHE.hasOwnProperty(aduKey)&&!force){callback(TEAM_CACHE[aduKey]);return}this.loadingTeams=true;var url="/teams?aduKey={0}&projection=basic&includeVirtualTeams=true".format(aduKey);appogee.api.get(url,function(response){_this100.loadingTeams=false;_this100.teams=_.where(response.items,{type:"team"});_this100.vteams=_.where(response.items,{type:"vteam"});TEAM_CACHE[aduKey]=_this100.teams;VTEAM_CACHE[aduKey]=_this100.vteams;if(callback){callback(_this100.teams,_this100.vteams)}},{artificialDelay:500})};View.prototype.fetchEmployeesByTeam=function(teamKey,callback,force){var _this101=this;force=true;if(EMPLOYEE_CACHE.hasOwnProperty(teamKey)&&!force){callback(EMPLOYEE_CACHE[teamKey]);return}this.loadingEmployees=true;this.renderEmployees();var url="/employees?teamKey={0}&projection=basic".format(teamKey);appogee.api.get(url,function(response){_this101.loadingEmployees=false;_this101.renderEmployees();var employees=response.items;EMPLOYEE_CACHE[teamKey]=employees;if(callback){callback(employees)}},{artificialDelay:500})};View.prototype.fetchEmployeesByVirtualTeam=function(vteamKey,callback,force){var _this102=this;force=true;if(EMPLOYEE_CACHE.hasOwnProperty(vteamKey)&&!force){callback(EMPLOYEE_CACHE[vteamKey]);return}this.loadingEmployees=true;this.renderEmployees();var url="/employees?teamKey={0}&projection=basic".format(vteamKey);appogee.api.get(url,function(response){_this102.loadingEmployees=false;_this102.renderEmployees();var employees=response.items;EMPLOYEE_CACHE[vteamKey]=employees;if(callback){callback(employees)}},{artificialDelay:500})};View.prototype.renderAdus=function(){this.render(this.$container.find(".adus-container"),tmplAdus)};View.prototype.renderTeams=function(){this.render(this.$container.find(".teams-container"),tmplTeams)};View.prototype.renderVirtualTeams=function(){this.render(this.$container.find(".vteams-container"),tmplVTeams)};View.prototype.renderEmployees=function(){this.render(this.$container.find(".employees-container"),tmplEmployees)};View.prototype.render=function($container,tmpl){var _this103=this;if(!$container){$container=this.$container}if(!tmpl){tmpl=tmplMain}this.teams=_.sortBy(this.teams,"name");this.employees=_.sortBy(this.employees,"name");var maxAduLevel=_.max(this.adus,function(adu){return adu.level}).level;var data={showAdus:this.showAdus,adus:[this.rootAdu],adu:this.adu,maxAduLevel:maxAduLevel,teams:this.teams,team:this.team,vteams:this.vteams,vteam:this.vteam,teamMode:this.teamMode,employees:this.employees,indentAdus:this.indentAdus,collapseAdus:this.collapseAdus,loadingAdus:this.loadingAdus,loadingTeams:this.loadingTeams,loadingEmployees:this.loadingEmployees,isAduManager:this.currentUser.isAduManager()};$container.html(tmpl(data));$container.find(".appogee-tooltip").appogeeTooltip();this.$container.find(".adus-container .toggle-indent").click(function(){_this103.indentAdus=!_this103.indentAdus;_this103.renderAdus()});this.$container.find(".adus-container .toggle-collspase-all").click(function(){_this103.collapseAdus=!_this103.collapseAdus;_this103.adus.forEach(function(adu){var index=adu.path.lastIndexOf("/");if(index<=0){adu.expand=true}else{if(_this103.collapseAdus){adu.expand=false}else{adu.expand=true}}});_this103.renderAdus()});this.$container.find(".adus-container .toggle-expand").click(function(e){var key=$(e.currentTarget).closest("tr").data("key");var adu=_.findWhere(_this103.adus,{key:key});adu.expand=!adu.expand;_this103.renderAdus()});this.$container.find("a.adu").off().click(function(e){var key=$(e.currentTarget).closest("tr").data("key");var adu=_.findWhere(_this103.adus,{key:key});_this103.fetchTeamsAndEmployees(adu.key,function(teams,vteams,employees){_this103.adu=adu;_this103.teams=teams;_this103.team=teams[0];_this103.employees=employees;_this103.render()})});this.$container.find("a.team").off().click(function(e){var key=$(e.currentTarget).closest("tr").data("key");var team=_.findWhere(_this103.teams,{key:key});_this103.fetchEmployeesByTeam(team.key,function(employees){_this103.team=team;_this103.vteam=null;_this103.employees=employees;_this103.render()})});this.$container.find("a.vteam").off().click(function(e){var key=$(e.currentTarget).closest("tr").data("key");var vteam=_.findWhere(_this103.vteams,{key:key});_this103.fetchEmployeesByVirtualTeam(vteam.key,function(employees){_this103.vteam=vteam;_this103.team=null;_this103.employees=employees;_this103.render()})});this.$container.find("a#createVTeam").off().click(function(){var dlg=new CreateVTeamDialog;if(_this103.adu){dlg.setDefaultAduKey(_this103.adu.key)}dlg.onCreate(function(vteam){_this103.vteams.push(vteam);setTimeout(function(){_this103.render()},500)});dlg.show()});this.$container.find(".btnSwitchTeamMode").off().click(function(){if(_this103.teamMode=="teams"){_this103.teamMode="vteams";_this103.render();_this103.$container.find("a.vteam:first-child").first().click()}else{_this103.teamMode="teams";_this103.render();_this103.$container.find("a.team:first-child").first().click()}})};return View});define("admin/org/organisation",["jquery","underscore","appogee","admin/org/views/OrgView"],function($,_,appogee,OrgView){"use strict";return{getLoadUrls:function(){var adusUrl="/adus";var teamsUrl="/teams?includeVirtualTeams=true&aduKey={0}&projection=basic".format(this.adu.key);return{api:[adusUrl,teamsUrl]}},initialize:function(){this.adu=this.currentUser.getActiveAdu()},onLoad:function(adus,allTeams){this.adus=adus.items;var teams=_.where(allTeams.items,{type:"team"});var vteams=_.where(allTeams.items,{type:"vteam"});var team=null;var employees=null;this.view=new OrgView($("#viewContainer"),this.adus,this.adu,teams,team,vteams,employees);this.view.render()},onAduCreated:function(adu){this.adus.push(adu);this.view.resetAdus(this.adus);this.view.renderAdus()},onAduUpdated:function(editedAdu){var adu=_.findWhere(this.adus,{key:editedAdu.key});if(adu.name!=editedAdu.name){location.reload();return}adu.description=editedAdu.description;this.view.renderAdus()},onAduDeleted:function(adu){var i=_.findIndex(this.adus,function(a){return a.key==adu.key});this.adus.splice(i,1);this.view.resetAdus(this.adus);this.view.renderAdus()},onTeamCreated:function(team){this.view.addTeam(team);this.view.renderTeams()},onVTeamCreated:function(vteam){this.view.addVTeam(vteam);this.view.renderVTeams()},onEmployeeCreated:function(employee){this.view.addEmployee(employee);this.view.renderEmployees()}}});define("templates/helpers/ifanyequal",["hbs/handlebars"],function(Handlebars){"use strict";function ifanyequal(){var options=arguments[arguments.length-1];for(var i=0;i<arguments.length-1;i+=2)if(arguments[i]==arguments[i+1])return options.fn(this);return options.inverse(this)}Handlebars.registerHelper("ifanyequal",ifanyequal);return ifanyequal});define("templates/helpers/if_gteq",["hbs/handlebars"],function(Handlebars){Handlebars.registerHelper("if_gteq",function(context,options){if(context>=options.hash.compare)return options.fn(this);return options.inverse(this)})});define("hbs!admin/org/tmpl/AduManager",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/if_gt","templates/helpers/s","templates/helpers/ifanyequal","templates/helpers/if_gteq","templates/helpers/ifin","templates/helpers/ifnotequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"selected"},3:function(depth0,helpers,partials,data){return"completed"},5:function(depth0,helpers,partials,data){return" completed"},7:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<div class="alert alert-info">\n\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Use this page to move data between Divisions.",{name:"s",hash:{},data:data}))+"</p>\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"To begin, select what type of data you wish to move, and the Division from which data currently resides (ie the Source Division).",{name:"s",hash:{},data:data}))+'</p>\n\t</div>\n\t\n\t<div class="form-group">\n\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Data Type",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-5 col-md-4">\n\t\t\t<select class="form-control input-sm" id="ddlDataType">\n\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t<option value="team" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"team",{name:"ifequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t<option value="employees" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee(s)",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t<option value="vteam" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Team",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t<option value="leaveProfile" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"leaveProfile",{name:"ifequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile",{name:"s",hash:{},data:data}))+"</option>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCustomerAccessHr:depth0,{name:"if",hash:{},fn:this.program(10,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</select>\n\t\t\t<div class="help-block">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select what type of data you with to move",{name:"s",hash:{},data:data}))+'</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group">\n\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Source Division",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-5 col-md-4">\n\t\t\t<select class="form-control input-sm" id="ddlSourceAdu">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.adus:depth0,{name:"each",hash:{},fn:this.program(12,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</select>\n\t\t\t<div class="help-block">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select the Division you wish to move data from",{name:"s",hash:{},data:data}))+"</div>\n\t\t</div>\n\t</div>\n\t\n"+((stack1=(helpers.ifanyequal||depth0&&depth0.ifanyequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",depth0!=null?depth0.dataType:depth0,"team",{name:"ifanyequal",hash:{},fn:this.program(14,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n\t"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(17,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(25,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"leaveProfile",{name:"ifequal",hash:{},fn:this.program(28,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(31,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\n\t<div class="row">\n\t\t<div class="col-sm-9 col-md-7 col-lg-6">\n\t\t\t<div class="form-buttons">\n\t\t\t\t<button type="button" class="btn btn-sm btn-default" id="btnNext">\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n'},8:function(depth0,helpers,partials,data){return'selected="selected"'},10:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t<option value="documents" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Company Document(s)",{name:"s",hash:{},data:data}))+"</option>\n"},12:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].sourceAdu:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},14:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<div class="form-group">\n\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Team",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-5 col-md-4">\n\t\t\t<select class="form-control input-sm" id="ddlSourceTeam">\n\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.teams:depth0,{name:"each",hash:{},fn:this.program(15,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</select>\n\t\t\t<div class="help-block">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Team to move. Note that all employees in the team will also be moved.",{name:"s",hash:{},data:data}))+"</div>\n\t\t</div>\n\t</div>\n"},15:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].sourceTeam:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},17:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.sourceTeam:depth0,{name:"if",hash:{},fn:this.program(18,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},18:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\n\t<div class="form-group">\n\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Employee(s)",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-5 col-md-4">\n\t\t\t<select class="form-control input-sm" multiple="multiple" id="ddlSourceEmployees" style="height: 150px;">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.employees:depth0,{name:"each",hash:{},fn:this.program(19,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</select>\n\t\t\t<div class="help-block">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isMac:depth0,{name:"if",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.program(23,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</div>\n\t\t</div>\n\t</div>\n\t"},19:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifin||depth0&&depth0.ifin||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,depths[1]!=null?depths[1].sourceEmployeeKeys:depths[1],{name:"ifin",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.firstName||(depth0!=null?depth0.firstName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"firstName",hash:{},data:data}):helper))+" "+this.escapeExpression((helper=(helper=helpers.lastName||(depth0!=null?depth0.lastName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"lastName",hash:{},data:data}):helper))+"</option>\n"},21:function(depth0,helpers,partials,data){return"\t\t\t\t<em>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Tip: Hold Cmd to select multiple",{name:"s",hash:{},data:data}))+"</em>\n"},23:function(depth0,helpers,partials,data){return"\t\t\t\t<em>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Tip: Hold Ctrl to select multiple",{name:"s",hash:{},data:data}))+"</em>\n"},25:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<div class="form-group">\n\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Virtual Team",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-5 col-md-4">\n\t\t\t<select class="form-control input-sm" id="ddlSourceVirtualTeam">\n\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.vteams:depth0,{name:"each",hash:{},fn:this.program(26,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</select>\n\t\t\t<div class="help-block">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Virtual Team to move.",{name:"s",hash:{},data:data}))+"</div>\n\t\t</div>\n\t</div>\n"},26:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].sourceVirtualTeam:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},28:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<div class="form-group">\n\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Leave Profile",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-5 col-md-4">\n\t\t\t<select class="form-control input-sm" id="ddlSourceLeaveProfile">\n\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.leaveProfiles:depth0,{name:"each",hash:{},fn:this.program(29,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</select>\n\t\t\t<div class="help-block">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Leave Profile to move.",{name:"s",hash:{},data:data}))+"</div>\n\t\t</div>\n\t</div>\n"},29:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].sourceLeaveProfile:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},31:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<div class="form-group">\n\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Company Document(s)",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-5 col-md-4">\n\t\t\t<select class="form-control input-sm" multiple="multiple" id="ddlSourceDocuments" style="height: 150px;">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.documents:depth0,{name:"each",hash:{},fn:this.program(32,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</select>\n\t\t\t<div class="help-block">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isMac:depth0,{name:"if",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.program(34,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</div>\n\t\t</div>\n\t</div>\n"},32:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifin||depth0&&depth0.ifin||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,depths[1]!=null?depths[1].sourceDocumentKeys:depths[1],{name:"ifin",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},34:function(depth0,helpers,partials,data){return"\t\t\t\t<em>T"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"ip: Hold Ctrl to select multiple",{name:"s",hash:{},data:data}))+"</em>\n"},36:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\x3c!-- \n\t<div class="alert alert-info">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"team",{name:"ifequal",hash:{},fn:this.program(37,data,0,blockParams,depths),inverse:this.program(39,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\n\t</div>\n\t --\x3e\n\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"team",{name:"ifequal",hash:{},fn:this.program(45,data,0,blockParams,depths),inverse:this.program(47,data,0,blockParams,depths),data:data
}))!=null?stack1:"")+'\t\n\t<div class="row">\n\t\t<div class="col-sm-6">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"team",{name:"ifequal",hash:{},fn:this.program(50,data,0,blockParams,depths),inverse:this.program(53,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t</div>\n\t\t<div class="col-sm-6">\n\t\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Destination Division",{name:"s",hash:{},data:data}))+"</h4>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"team",{name:"ifequal",hash:{},fn:this.program(66,data,0,blockParams,depths),inverse:this.program(68,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label class="control-label col-sm-8 col-md-6 col-lg-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Destination Division",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div class="controls col-sm-10 col-md-8">\n\t\t\t\t\t<select class="form-control input-sm" id="ddlDestAdu">\n\t\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.adus:depth0,{name:"each",hash:{},fn:this.program(80,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(83,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-buttons">\n\t\t<button type="button" class="btn btn-sm btn-default" id="btnPrev">\n\t\t\t<i class="glyphicon glyphicon-chevron-left"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Back",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t\t<button type="button" class="btn btn-sm btn-default" id="btnNext">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+'\n\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t</button>\n\t</div>\n\t\n'},37:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<p>Selected Team: <strong>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1,depth0))+"/"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceTeam:depth0)!=null?stack1.name:stack1,depth0))+"</strong></p>\n\t\t\t<p>Please select the ADU to move the selected Team.</p>\n\t\t"},39:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(40,data,0),inverse:this.program(42,data,0),data:data}))!=null?stack1:""},40:function(depth0,helpers,partials,data){var stack1;return"\n\t\t\t<p>You have selected "+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceEmployees:depth0)!=null?stack1.length:stack1,depth0))+" Employees from the <strong>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1,depth0))+"/"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceTeam:depth0)!=null?stack1.name:stack1,depth0))+"</strong> Team.</p>\n\t\t\t<p>Please select which Team to move the selected Employees.</p>\n\t\t"},42:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(43,data,0),inverse:this.noop,data:data}))!=null?stack1:""},43:function(depth0,helpers,partials,data){var stack1;return"\n\t\t\t<p>You have selected "+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceDocuments:depth0)!=null?stack1.length:stack1,depth0))+" Documents from the <strong>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1,depth0))+"</strong> ADU.</p>\n\t\t\t<p>Please select the ADU to move the selected Company Documents.</p>\n\t\t"},45:function(depth0,helpers,partials,data){return'\t\t<div class="alert alert-warning">\n\t\t\t<p>\n\t\t\t\t<i class="glyphicon glyphicon-warning-sign"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Moving a team to a different Division will remove the teams parent.",{name:"s",hash:{},data:data}))+"\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"In addition, any active alerts for the team members may be dismissed.",{name:"s",hash:{},data:data}))+"\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,'For further information, please refer to the <a href="https://help.appogeehr.com/support/solutions/articles/22000173992" target="_FRESHDESK">documentation</a>.',{name:"s",hash:{},data:data}))+"\n\t\t\t</p>\n\t\t</div>\n"},47:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(48,data,0),inverse:this.noop,data:data}))!=null?stack1:""},48:function(depth0,helpers,partials,data){return'\t\t<div class="alert alert-warning">\n\t\t\t<p>\n\t\t\t\t<i class="glyphicon glyphicon-warning-sign"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Moving employees to a different Division may cause active alerts to be dismissed.",{name:"s",hash:{},data:data}))+"\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,'For further information, please refer to the <a href="https://help.appogeehr.com/support/solutions/articles/22000173992" target="_FRESHDESK">documentation</a>.',{name:"s",hash:{},data:data}))+"\n\t\t\t</p>\n\t\t</div>\n\t"},50:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Operation: Move Team &amp; Members",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following Team and members will be moved:",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t\t\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-md-2"><strong>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division:",{name:"s",hash:{},data:data}))+'</strong></label>\n\t\t\t\t\t<div class="col-md-10">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1,depth0))+'</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-md-2"><strong>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team:",{name:"s",hash:{},data:data}))+'</strong></label>\n\t\t\t\t\t<div class="col-md-10">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceTeam:depth0)!=null?stack1.name:stack1,depth0))+'</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-md-2"><strong>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Members:",{name:"s",hash:{},data:data}))+'</strong></label>\n\t\t\t\t\t<div class="col-md-10">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.sourceEmployees:depth0,{name:"each",hash:{},fn:this.program(51,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t</div>\n\t\t\t\t</div>\n"},51:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t\t\t<div>"+this.escapeExpression((helper=(helper=helpers.firstName||(depth0!=null?depth0.firstName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"firstName",hash:{},data:data}):helper))+" "+this.escapeExpression((helper=(helper=helpers.lastName||(depth0!=null?depth0.lastName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"lastName",hash:{},data:data}):helper))+"</div>\n"},53:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(54,data,0),inverse:this.program(56,data,0),data:data}))!=null?stack1:""},54:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Operation: Move Employees",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following Employees will be moved:",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-md-2"><strong>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employees:",{name:"s",hash:{},data:data}))+'</strong></label>\n\t\t\t\t\t<div class="col-md-10">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.sourceEmployees:depth0,{name:"each",hash:{},fn:this.program(51,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t</div>\n\t\t\t\t</div>\n"},56:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(57,data,0),inverse:this.program(59,data,0),data:data}))!=null?stack1:""},57:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Operation: Move Virtual Team",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following Virtual Team will be moved:",{name:"s",hash:{},data:data}))+'</p>\n\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-md-2"><strong>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division:",{name:"s",hash:{},data:data}))+'</strong></label>\n\t\t\t\t\t<div class="col-md-10">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1,depth0))+'</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-md-2"><strong>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Team:",{name:"s",hash:{},data:data}))+'</strong></label>\n\t\t\t\t\t<div class="col-md-10">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceVirtualTeam:depth0)!=null?stack1.name:stack1,depth0))+"</div>\n\t\t\t\t</div>\n"},59:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"leaveProfile",{name:"ifequal",hash:{},fn:this.program(60,data,0),inverse:this.program(62,data,0),data:data}))!=null?stack1:""},60:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Operation: Move Leave Profile",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following Leave Profile will be moved:",{name:"s",hash:{},data:data}))+'</p>\n\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-md-2"><strong>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division:",{name:"s",hash:{},data:data}))+'</strong></label>\n\t\t\t\t\t<div class="col-md-10">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1,depth0))+'</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-md-2"><strong>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile:",{name:"s",hash:{},data:data}))+'</strong></label>\n\t\t\t\t\t<div class="col-md-10">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceLeaveProfile:depth0)!=null?stack1.name:stack1,depth0))+"</div>\n\t\t\t\t</div>\n"},62:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(63,data,0),inverse:this.noop,data:data}))!=null?stack1:""},63:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Operation: Company Documents",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following Documents will be moved:",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-md-2"><strong>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Documents:",{name:"s",hash:{},data:data}))+'</strong></label>\n\t\t\t\t\t<div class="col-md-10">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.sourceDocuments:depth0,{name:"each",hash:{},fn:this.program(64,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"},64:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t\t\t<div>"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</div>\n"},66:function(depth0,helpers,partials,data){return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Division to move the Team:",{name:"s",hash:{},data:data}))+"</p>\n"},68:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(69,data,0),inverse:this.program(71,data,0),data:data}))!=null?stack1:""},69:function(depth0,helpers,partials,data){return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Division and Team to move the Employees:",{name:"s",hash:{},data:data}))+"</p>\n"},71:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(72,data,0),inverse:this.program(74,data,0),data:data}))!=null?stack1:""},72:function(depth0,helpers,partials,data){return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Division to move the Virtual Team:",{name:"s",hash:{},data:data}))+"</p>\n"},74:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"leaveProfile",{name:"ifequal",hash:{},fn:this.program(75,data,0),inverse:this.program(77,data,0),data:data}))!=null?stack1:""},75:function(depth0,helpers,partials,data){return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Division to move the Leave Profile:",{name:"s",hash:{},data:data}))+"</p>\n"},77:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(78,data,0),inverse:this.noop,data:data}))!=null?stack1:""},78:function(depth0,helpers,partials,data){return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Division to move the Company Documents:",{name:"s",hash:{},data:data}))+"</p>\n\t\t\t"},80:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].sourceAdu:depths[1])!=null?stack1.key:stack1,{name:"ifnotequal",hash:{},fn:this.program(81,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},81:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[2]!=null?depths[2].destAdu:depths[2])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},83:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.destAdu:depth0,{name:"if",hash:{},fn:this.program(84,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},84:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\n\t\t\t<div class="form-group">\n\t\t\t\t<label class="control-label col-sm-8 col-md-6 col-lg-4">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Destination Team",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div class="controls col-sm-10 col-md-8">\n\t\t\t\t\t<select class="form-control input-sm" id="ddlDestTeam">\n\t\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.teams:depth0,{name:"each",hash:{},fn:this.program(85,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t"},85:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].destTeam:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},87:function(depth0,helpers,partials,data){return'\t<p class="working">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Validating move, please wait ...",{name:"s",hash:{},data:data}))+"\n\t</p>\n"},89:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.validationValid:depth0,{name:"if",hash:{},fn:this.program(90,data,0),inverse:this.program(105,data,0),data:data}))!=null?stack1:""},90:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="alert alert-success">\n\t\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Validations checks passed.",{name:"s",hash:{},data:data}))+"</h4>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"team",{name:"ifequal",hash:{},fn:this.program(91,data,0),inverse:this.program(93,data,0),data:data}))!=null?stack1:"")+'\t\t</div>\n\t\t<button type="button" class="btn btn-sm btn-default" id="btnPrev">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t\t<button type="button" class="btn btn-sm btn-primary" id="btnNext">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Confirm Move",{name:"s",hash:{},data:data}))+"\n\t\t</button>\n"},91:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please confirm that you wish to move the <strong>{source_adu_path}/{source_team_name}</strong> Team, and all of it's members to the <strong>{dest_adu_path}</strong> Division.",{name:"s",hash:{dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1,source_team_name:(stack1=depth0!=null?depth0.sourceTeam:depth0)!=null?stack1.name:stack1,source_adu_path:(stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1},data:data}))+"</p>\n"},93:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(94,data,0),inverse:this.program(96,data,0),data:data}))!=null?stack1:""},94:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please confirm that you wish to move the {num_employees} selected Employees to the <strong>{dest_adu_path}/{dest_team_name}</strong> Team.",{name:"s",hash:{dest_team_name:(stack1=depth0!=null?depth0.destTeam:depth0)!=null?stack1.name:stack1,dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1,num_employees:(stack1=depth0!=null?depth0.sourceEmployees:depth0)!=null?stack1.length:stack1},data:data}))+"</p>\n"},96:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(97,data,0),inverse:this.program(99,data,0),data:data}))!=null?stack1:""},97:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please confirm that you wish to move the <strong>{source_adu_path}/{source_virtual_team_name}</strong> Virtual Team to the <strong>{dest_adu_path}</strong> Division.",{name:"s",hash:{dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1,source_virtual_team_name:(stack1=depth0!=null?depth0.sourceVirtualTeam:depth0)!=null?stack1.name:stack1,source_adu_path:(stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1},data:data}))+"</p>\n"},99:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"leaveProfile",{name:"ifequal",hash:{},fn:this.program(100,data,0),inverse:this.program(102,data,0),data:data}))!=null?stack1:""},100:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please confirm that you wish to move the <strong>{source_adu_path}/{source_leave_profile_name}</strong> Leave Profile to the <strong>{dest_adu_path}</strong> Division.",{name:"s",hash:{dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1,source_leave_profile_name:(stack1=depth0!=null?depth0.sourceLeaveProfile:depth0)!=null?stack1.name:stack1,source_adu_path:(stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1},data:data}))+"</p>\n"},102:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(103,data,0),inverse:this.noop,data:data}))!=null?stack1:""},103:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please confirm that you wish to move the {num_documents} selected Company Documents to the <strong>{dest_adu_path}</strong> Division.",{name:"s",hash:{dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1,num_documents:(stack1=depth0!=null?depth0.sourceDocuments:depth0)!=null?stack1.length:stack1},data:data}))+"</p>\n\t\t\t"},105:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="alert alert-danger">\n\t\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Validation checks failed.",{name:"s",hash:{},data:data}))+"</h4>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"team",{name:"ifequal",hash:{},fn:this.program(106,data,0),inverse:this.program(108,data,0),data:data}))!=null?stack1:"")+"\t\t</div>\n\t\t\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.managers:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(120,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.members:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(123,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.memberManagers:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(126,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(129,data,0),inverse:this.program(134,data,0),data:data}))!=null?stack1:"")+"\t\t\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.emps:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(137,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.vteams:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(141,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please fix the above issues and try again.",{name:"s",hash:{},data:data}))+'</p>\n\t\t\n\t\t<button type="button" class="btn btn-sm btn-default" id="btnReset">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t\t<button type="button" class="btn btn-sm btn-default" id="btnRetryValidation">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Retry",{name:"s",hash:{},data:data}))+"\n\t\t</button>\n\t\t\n"},106:function(depth0,helpers,partials,data){return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The Team cannot be moved because of the following issues:",{name:"s",hash:{},data:data}))+"</p>\n"},108:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(109,data,0),inverse:this.program(111,data,0),data:data}))!=null?stack1:""},109:function(depth0,helpers,partials,data){return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The Employees cannot be moved because of the following issues:",{name:"s",hash:{},data:data}))+"</p>\n"},111:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(112,data,0),inverse:this.program(114,data,0),data:data}))!=null?stack1:""},112:function(depth0,helpers,partials,data){return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This Virtual Team cannot be moved because of the following issues:",{name:"s",hash:{},data:data}))+"</p>\n"},114:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"leaveProfile",{name:"ifequal",hash:{},fn:this.program(115,data,0),inverse:this.program(117,data,0),data:data}))!=null?stack1:""},115:function(depth0,helpers,partials,data){return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This Leave Profile cannot be moved because of the following issues:",{name:"s",hash:{},data:data}))+"</p>\n"},117:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(118,data,0),inverse:this.noop,data:data}))!=null?stack1:""},118:function(depth0,helpers,partials,data){return"\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This Documents cannot be moved because of the following issues:",{name:"s",hash:{},data:data}))+"</p>\n\t\t\t"},120:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team Managers",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following team managers must belong to the {dest_adu_path} Division or higher.",{name:"s",hash:{dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1},data:data
}))+'</p>\n\t\t\t<table class="table table-shaded table-bordered">\n\t\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class="w400">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Manager",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n"+((stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.managers:stack1,{name:"each",hash:{},fn:this.program(121,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</tbody>\n\t\t\t</table>\n"},121:function(depth0,helpers,partials,data){var helper;return"\t\t\t<tr>\n\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</td>\n\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.adu||(depth0!=null?depth0.adu:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"adu",hash:{},data:data}):helper))+"</td>\n\t\t\t</tr>\n"},123:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team Members",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following team members must belong to the {destAduPath} Division or lower.",{name:"s",hash:{destAduPath:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1},data:data}))+'</p>\n\t\t\t<table class="table table-shaded table-bordered">\n\t\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class="w400">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n"+((stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.members:stack1,{name:"each",hash:{},fn:this.program(124,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</tbody>\n\t\t\t</table>\n"},124:function(depth0,helpers,partials,data){var helper;return"\t\t\t<tr>\n\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</td>\n\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.teamAdu||(depth0!=null?depth0.teamAdu:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"teamAdu",hash:{},data:data}):helper))+"</td>\n\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.teamName||(depth0!=null?depth0.teamName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"teamName",hash:{},data:data}):helper))+"</td>\n\t\t\t</tr>\n"},126:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team Members",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following team members are managers of teams not accessible to the destination Division:",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t<table class="table table-shaded table-bordered">\n\t\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class="w400">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n"+((stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.memberManagers:stack1,{name:"each",hash:{},fn:this.program(127,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</tbody>\n\t\t\t</table>\n"},127:function(depth0,helpers,partials,data){var helper;return"\t\t\t<tr>\n\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</td>\n\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.teamAdu||(depth0!=null?depth0.teamAdu:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"teamAdu",hash:{},data:data}):helper))+"/"+this.escapeExpression((helper=(helper=helpers.teamName||(depth0!=null?depth0.teamName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"teamName",hash:{},data:data}):helper))+"</td>\n\t\t\t</tr>\n"},129:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.documentOwners:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(130,data,0),inverse:this.noop,data:data}))!=null?stack1:""},130:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Documents Owners",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following Company Documents have owners that would not be able to access the document if moved to the selected Division.",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t\t<table class="table table-shaded table-bordered">\n\t\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class="w400">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Document",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Owner Email",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t\t\t<th class="w200">\n\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n'+((stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.documentOwners:stack1,{name:"each",hash:{},fn:this.program(131,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t</tbody>\n\t\t\t\t</table>\n"},131:function(depth0,helpers,partials,data){var stack1,helper;return"\t\t\t\t<tr>\n\t\t\t\t\t<td>"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.documentAdu:depth0,{name:"if",hash:{},fn:this.program(132,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+this.escapeExpression((helper=(helper=helpers.documentName||(depth0!=null?depth0.documentName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"documentName",hash:{},data:data}):helper))+"</td>\n\t\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.ownerEmail||(depth0!=null?depth0.ownerEmail:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"ownerEmail",hash:{},data:data}):helper))+'</td>\n\t\t\t\t\t<td><a href="/hr/company-document?key='+this.escapeExpression((helper=(helper=helpers.documentKey||(depth0!=null?depth0.documentKey:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"documentKey",hash:{},data:data}):helper))+'" target="_BLANK">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Open Document",{name:"s",hash:{},data:data}))+"</a>\n\t\t\t\t</tr>\n"},132:function(depth0,helpers,partials,data){var helper;return this.escapeExpression((helper=(helper=helpers.documentAdu||(depth0!=null?depth0.documentAdu:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"documentAdu",hash:{},data:data}):helper))+"/"},134:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.documentOwners:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(135,data,0),inverse:this.noop,data:data}))!=null?stack1:""},135:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Company Documents",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following Company Documents are owned by a member of the team you wish to move, but would not be accessible if the team was moved to the selected Division.",{name:"s",hash:{},data:data}))+"</p>\n\t\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"To rectify this, you can either change or remove the owner, or move the documents to the destination Division with the team.",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t\t<table class="table table-shaded table-bordered">\n\t\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th class="w400">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Document",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Owner Email",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t\t\t<th class="w200">\n\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n'+((stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.documentOwners:stack1,{name:"each",hash:{},fn:this.program(131,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t</tbody>\n\t\t\t\t</table>\n"},137:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profiles",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following team members are assigned a Leave Profile which is not accessible to the destination Division.",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t<table class="table table-shaded table-bordered">\n\t\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class="w400">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n"+((stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.emps:stack1,{name:"each",hash:{},fn:this.program(138,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</tbody>\n\t\t\t</table>\n"},138:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<tr>\n"+((stack1=helpers.each.call(depth0,depth0,{name:"each",hash:{},fn:this.program(139,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</tr>\n"},139:function(depth0,helpers,partials,data){return"\t\t\t\t\t<td>"+this.escapeExpression(this.lambda(depth0,depth0))+"</td>\n"},141:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Teams",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following team members are assigned a Virtual Team which is not accessible to the destination Division.",{name:"s",hash:{},data:data}))+'</p>\n\t\t\t<table class="table table-shaded table-bordered">\n\t\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class="w400">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Team",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n"+((stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.validationErrors:depth0)!=null?stack1.vteams:stack1,{name:"each",hash:{},fn:this.program(138,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</tbody>\n\t\t\t</table>\n"},143:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"team",{name:"ifequal",hash:{},fn:this.program(144,data,0),inverse:this.program(146,data,0),data:data}))!=null?stack1:""},144:function(depth0,helpers,partials,data){return'\t\t<p class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Moving Team, please wait ...",{name:"s",hash:{},data:data}))+"</p>\n"},146:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(147,data,0),inverse:this.program(149,data,0),data:data}))!=null?stack1:""},147:function(depth0,helpers,partials,data){return'\t\t<p class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Moving Employees, please wait ...",{name:"s",hash:{},data:data}))+"</p>\n"},149:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(150,data,0),inverse:this.program(152,data,0),data:data}))!=null?stack1:""},150:function(depth0,helpers,partials,data){return'\t\t<p class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Moving Virtual Team, please wait ...",{name:"s",hash:{},data:data}))+"</p>\n"},152:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"leaveProfile",{name:"ifequal",hash:{},fn:this.program(153,data,0),inverse:this.program(155,data,0),data:data}))!=null?stack1:""},153:function(depth0,helpers,partials,data){return'\t\t<p class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Moving Leave Profile, please wait ...",{name:"s",hash:{},data:data}))+"</p>\n"},155:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(156,data,0),inverse:this.noop,data:data}))!=null?stack1:""},156:function(depth0,helpers,partials,data){return'\t\t<p class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Moving Company Documents, please wait ...",{name:"s",hash:{},data:data}))+"</p>\n\t"},158:function(depth0,helpers,partials,data){var stack1;return'\t<div class="alert alert-success">\n\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Move Successful",{name:"s",hash:{},data:data}))+"</h4>\n\t\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"team",{name:"ifequal",hash:{},fn:this.program(159,data,0),inverse:this.program(161,data,0),data:data}))!=null?stack1:"")+"\t\t\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please choose an option from below:",{name:"s",hash:{},data:data}))+'</p>\n\t</div>\n\t\n\t<button type="button" class="btn btn-sm btn-default" id="btnReset">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Move another",{name:"s",hash:{},data:data}))+"\n\t</button>\n\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"team",{name:"ifequal",hash:{},fn:this.program(173,data,0),inverse:this.program(175,data,0),data:data}))!=null?stack1:"")+"\n"},159:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The <strong>{source_adu_path}/{source_team_name}</strong> Team, and all of it's members have been moved to the <strong>{dest_adu_path}</strong> Division.",{name:"s",hash:{dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1,source_team_name:(stack1=depth0!=null?depth0.sourceTeam:depth0)!=null?stack1.name:stack1,source_adu_path:(stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1},data:data}))+"</p>\n"},161:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(162,data,0),inverse:this.program(164,data,0),data:data}))!=null?stack1:""},162:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The {num_employees} selected Employees have been moved to the <strong>{dest_adu_path}/{dest_team_name}</strong> Team.",{name:"s",hash:{dest_team_name:(stack1=depth0!=null?depth0.destTeam:depth0)!=null?stack1.name:stack1,dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1,num_employees:(stack1=depth0!=null?depth0.sourceEmployees:depth0)!=null?stack1.length:stack1},data:data}))+"</p>\n"},164:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(165,data,0),inverse:this.program(167,data,0),data:data}))!=null?stack1:""},165:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The <strong>{source_adu_path}/{source_virtual_team_name}</strong> Virtual Team has been moved to the <strong>{dest_adu_path}</strong> Division.",{name:"s",hash:{dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1,source_virtual_team_name:(stack1=depth0!=null?depth0.sourceVirtualTeam:depth0)!=null?stack1.name:stack1,source_adu_path:(stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1},data:data}))+"</p>\n"},167:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"leaveProfile",{name:"ifequal",hash:{},fn:this.program(168,data,0),inverse:this.program(170,data,0),data:data}))!=null?stack1:""},168:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The <strong>{source_adu_path}/{source_leave_profile_name}</strong> Leave Profile has been moved to the <strong>{dest_adu_path}</strong> Division.",{name:"s",hash:{dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1,source_leave_profile_name:(stack1=depth0!=null?depth0.sourceLeaveProfile:depth0)!=null?stack1.name:stack1,source_adu_path:(stack1=depth0!=null?depth0.sourceAdu:depth0)!=null?stack1.path:stack1},data:data}))+"</p>\n"},170:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(171,data,0),inverse:this.noop,data:data}))!=null?stack1:""},171:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The {num_documents} selected Company Documents have been moved to the <strong>{dest_adu_path}</strong> Division.",{name:"s",hash:{dest_adu_path:(stack1=depth0!=null?depth0.destAdu:depth0)!=null?stack1.path:stack1,num_documents:(stack1=depth0!=null?depth0.sourceDocuments:depth0)!=null?stack1.length:stack1},data:data}))+"</p>\n\t\t"},173:function(depth0,helpers,partials,data){var stack1;return'\t\t<a href="/admin/organisation/team?key='+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceTeam:depth0)!=null?stack1.key:stack1,depth0))+'" class="btn btn-sm btn-default">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Open Team",{name:"s",hash:{},data:data}))+'\n\t\t</a>\n\t\t<a href="/admin/organisation/employees" class="btn btn-sm btn-default">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Go to Employee Directory",{name:"s",hash:{},data:data}))+"\n\t\t</a>\n"},175:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"employees",{name:"ifequal",hash:{},fn:this.program(176,data,0),inverse:this.program(178,data,0),data:data}))!=null?stack1:""},176:function(depth0,helpers,partials,data){return'\t\t<a href="/admin/organisation/employees" class="btn btn-sm btn-default">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Go to Employee Directory",{name:"s",hash:{},data:data}))+"\n\t\t</a>\n"},178:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(179,data,0),inverse:this.program(181,data,0),data:data}))!=null?stack1:""},179:function(depth0,helpers,partials,data){var stack1;return'\t\t<a href="/admin/organisation/vteam?key='+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceVirtualTeam:depth0)!=null?stack1.key:stack1,depth0))+'" class="btn btn-sm btn-default">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Open Virtual Team",{name:"s",hash:{},data:data}))+"\n\t\t</a>\n"},181:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"leaveProfile",{name:"ifequal",hash:{},fn:this.program(182,data,0),inverse:this.program(184,data,0),data:data}))!=null?stack1:""},182:function(depth0,helpers,partials,data){var stack1;return'\t\t<a href="/admin/leave-profile?key='+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.sourceLeaveProfile:depth0)!=null?stack1.key:stack1,depth0))+'" class="btn btn-sm btn-default">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Open Leave Profile",{name:"s",hash:{},data:data}))+"\n\t\t</a>\n"},184:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.dataType:depth0,"documents",{name:"ifequal",hash:{},fn:this.program(185,data,0),inverse:this.noop,data:data}))!=null?stack1:""},185:function(depth0,helpers,partials,data){return'\t\t<a href="/mgmt/company-documents" class="btn btn-sm btn-default">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Go to Company Documents",{name:"s",hash:{},data:data}))+"\n\t\t</a>\n\t"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<div class="wizard_header hidden-xs">\n\t<div class="tab col-sm-3 '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,1,{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,{name:"if_gt",hash:{compare:1},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">1</span>\n\t\t<span class="title">\n\t\t\t<span class="hidden-xs hidden-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Source",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t<span class="hidden-md hidden-lg">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Source",{name:"s",hash:{},data:data}))+'</span>\n\t\t</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t\t<i class="glyphicon glyphicon-play"></i>\n\t</div>\n\t<div class="tab col-sm-3 '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,2,{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,{name:"if_gt",hash:{compare:2},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">2</span>\n\t\t<span class="title">\n\t\t\t<span class="hidden-xs hidden-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Destination",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t<span class="hidden-md hidden-lg">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Destination",{name:"s",hash:{},data:data}))+'</span>\n\t\t</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t\t<i class="glyphicon glyphicon-play"></i>\n\t</div>\n\t<div class="tab col-sm-3 '+((stack1=(helpers.ifanyequal||depth0&&depth0.ifanyequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,3,depth0!=null?depth0.step:depth0,4,{name:"ifanyequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gteq||depth0&&depth0.if_gteq||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,{name:"if_gteq",hash:{compare:4},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">3</span>\n\t\t<span class="title">\n\t\t\t<span class="hidden-xs hidden-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Review &amp; Confirm",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t<span class="hidden-md hidden-lg">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Confirm",{name:"s",hash:{},data:data}))+'</span>\n\t\t</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t\t<i class="glyphicon glyphicon-play"></i>\n\t</div>\n\t<div class="tab last col-sm-3 '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,5,{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,6,{name:"ifequal",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">4</span>\n\t\t<span class="title">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Complete",{name:"s",hash:{},data:data}))+'</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t</div>\n\t<div class="clearfix"></div>\n</div>\n\n<div class="form-horizontal">\n\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,1,{name:"ifequal",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,2,{name:"ifequal",hash:{},fn:this.program(36,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,3,{name:"ifequal",hash:{},fn:this.program(87,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,4,{name:"ifequal",hash:{},fn:this.program(89,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,5,{name:"ifequal",hash:{},fn:this.program(143,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,6,{name:"ifequal",hash:{},fn:this.program(158,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n</div>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/org/tmpl/AduManager",t);return t});define("admin/org/views/AduManager",["jquery","underscore","appogee","hbs!admin/org/tmpl/AduManager"],function($,_,appogee,tmpl){"use strict";var S,R={errorNoDataType:"Please select a Data Type.",errorNoSourceAdu:"Please select the source ADU.",errorNoSourceTeam:"Please select which Team you wish to move.",errorNoTeam:"Please select a Team.",errorNoSourceEmployees:"Please select which Employee(s) you wish to move.",errorNoSourceVirtualTeam:"Please select which Virtual Team you wish to move.",errorNoSourceLeaveProfile:"Please select which Leave Profile you wish to move.",errorNoSourceDocument:"Please select which Company Document(s) you wish to move.",errorNoDestAdu:"Please select the destination ADU.",errorNoDestTeam:"Please select the destination Team.",errorOperationFailedTitle:"Operation Failed",errorOperationFailedMsg:"The operation failed validation checks."};var DataType={Team:"team",Employees:"employees",VirtualTeam:"vteam",LeaveProfile:"leaveProfile",Documents:"documents"};var STEP_SOURCE=1;var STEP_DEST=2;var STEP_VALIDATING=3;var STEP_REVIEW=4;var STEP_MOVING=5;var STEP_COMPLETE=6;var View=function($container){S=appogee.getStrings("AduManager",R);this.$container=$container;this.defaultAduKey=appogee.util.getUrlParam("aduKey");this.defaultTeamKey=appogee.util.getUrlParam("teamKey");this.defaultEmployeeKey=appogee.util.getUrlParam("employeeKey");this.defaultVirtualTeamKey=appogee.util.getUrlParam("vteamKey");this.defaultLeaveProfileKey=appogee.util.getUrlParam("leaveProfileKey");this.defaultDocumentKey=appogee.util.getUrlParam("docKey");this.isMac=appogee.util.isMac();this.reset();this.preFetch();this.fetchTeams(this.sourceAdu.key)};View.prototype.preFetch=function(){if(this.defaultAduKey){if(this.defaultTeamKey){if(this.defaultEmployeeKey){this.dataType=DataType.Employees}else{
this.dataType=DataType.Team}}else if(this.defaultDocumentKey){this.dataType=DataType.Documents}else if(this.defaultVirtualTeamKey){this.dataType=DataType.VirtualTeam}else if(this.defaultLeaveProfileKey){this.dataType=DataType.LeaveProfile}}var defaultAdu=null;if(this.defaultAduKey){defaultAdu=_.findWhere(this.adus,{key:this.defaultAduKey})}if(defaultAdu){this.sourceAdu=defaultAdu}else{this.sourceAdu=this.adus[0]}var preFetchUrls=[];if(this.dataType==DataType.Team){preFetchUrls.push("/teams?aduKey="+this.sourceAdu.key)}else if(this.dataType==DataType.Employees){preFetchUrls.push("/teams?aduKey="+this.sourceAdu.key);preFetchUrls.push("/employees?teamKey="+this.defaultTeamKey)}else if(this.dataType==DataType.VirtualTeam){preFetchUrls.push("/virtual-teams?aduKey="+this.sourceAdu.key)}else if(this.dataType==DataType.LeaveProfile){preFetchUrls.push("/leave-profiles?aduKey="+this.sourceAdu.key)}else if(this.dataType==DataType.Documents){preFetchUrls.push("/company-documents?aduKey="+this.sourceAdu.key)}var me=this;appogee.load(preFetchUrls,function(response){if(me.dataType==DataType.Team){me.teams[me.sourceAdu.key]=response[0].items;me.sourceTeam=_.findWhere(me.teams[me.sourceAdu.key],{key:me.defaultTeamKey})}else if(me.dataType==DataType.Employees){me.teams[me.sourceAdu.key]=response[0].items;me.sourceTeam=_.findWhere(me.teams[me.sourceAdu.key],{key:me.defaultTeamKey});me.employees[me.defaultTeamKey]=response[1].items;var employee=_.findWhere(me.employees[me.defaultTeamKey],{key:me.defaultEmployeeKey});me.sourceEmployees=[employee]}else if(me.dataType==DataType.VirtualTeam){me.vteams[me.sourceAdu.key]=response[0].items;me.sourceVirtualTeam=_.findWhere(me.vteams[me.sourceAdu.key],{key:me.defaultVirtualTeamKey})}else if(me.dataType==DataType.LeaveProfile){me.leaveProfiles[me.sourceAdu.key]=response[0].items;me.sourceLeaveProfile=_.findWhere(me.leaveProfiles[me.sourceAdu.key],{key:me.defaultLeaveProfileKey})}else if(me.dataType==DataType.Documents){me.documents[me.sourceAdu.key]=response[0].items;var doc=_.findWhere(me.documents[me.sourceAdu.key],{key:me.defaultDocumentKey});me.sourceDocuments=[doc]}me.render()},{isApi:true})};View.prototype.reset=function(){this.step=STEP_SOURCE;this.dataType=null;this.adus=appogee.getAdus();this.teams={};this.employees={};this.vteams={};this.leaveProfiles={};this.documents={};this.sourceAdu=this.adus[0];this.sourceTeam=null;this.sourceEmployees=[];this.sourceVirtualTeam=null;this.sourceLeaveProfile=null;this.sourceDocuments=[];this.destAdu=null;this.destTeam=null;this.validationValid=false;this.validationErrors=null};View.prototype.render=function(){var teams=null;var employees=null;var vteams=null;var leaveProfiles=null;var documents=null;if(this.step==STEP_SOURCE){teams=this.teams[this.sourceAdu.key];documents=this.documents[this.sourceAdu.key];vteams=this.vteams[this.sourceAdu.key];leaveProfiles=this.leaveProfiles[this.sourceAdu.key];if(this.sourceTeam&&this.dataType==DataType.Employees){employees=this.employees[this.sourceTeam.key]}}else if(this.step==STEP_DEST){if(this.destAdu){teams=this.teams[this.destAdu.key]}if(this.destTeam){employees=this.employees[this.destTeam.key]}}var sourceEmployeeKeys=[];if(this.sourceEmployees){sourceEmployeeKeys=_.pluck(this.sourceEmployees,"key")}var sourceDocumentKeys=[];if(this.sourceDocuments){sourceDocumentKeys=_.pluck(this.sourceDocuments,"key")}var data={step:this.step,isMac:this.isMac,adus:this.adus,teams:teams,employees:employees,vteams:vteams,leaveProfiles:leaveProfiles,documents:documents,sourceAdu:this.sourceAdu,sourceTeam:this.sourceTeam,sourceEmployees:this.sourceEmployees,sourceEmployeeKeys:sourceEmployeeKeys,sourceVirtualTeam:this.sourceVirtualTeam,sourceLeaveProfile:this.sourceLeaveProfile,sourceDocuments:this.sourceDocuments,sourceDocumentKeys:sourceDocumentKeys,destAdu:this.destAdu,destTeam:this.destTeam,dataType:this.dataType,validationValid:this.validationValid,validationErrors:this.validationErrors,canCustomerAccessHr:appogee.canCustomerAccessHr()};this.$container.html(tmpl(data));var me=this;this.$container.find("#ddlSourceAdu").change(function(){me.sourceAdu=_.findWhere(me.adus,{key:this.value});me.sourceTeam=null;me.sourceEmployees=[];me.render();if(me.dataType==DataType.Team||me.dataType==DataType.Employees){me.fetchTeams(me.sourceAdu.key)}else if(me.dataType==DataType.Documents){me.fetchDocuments(me.sourceAdu.key)}else if(me.dataType==DataType.VirtualTeam){me.fetchVirtualTeams(me.sourceAdu.key)}else if(me.dataType==DataType.LeaveProfile){me.fetchLeaveProfiles(me.sourceAdu.key)}});this.$container.find("#ddlDataType").change(function(){me.dataType=this.value;me.render();if(me.dataType==DataType.Team||me.dataType==DataType.Employees){me.fetchTeams(me.sourceAdu.key)}else if(me.dataType==DataType.VirtualTeam){if(!me.vteams.hasOwnProperty(me.sourceAdu.key)){me.fetchVirtualTeams(me.sourceAdu.key)}}else if(me.dataType==DataType.LeaveProfile){if(!me.leaveProfiles.hasOwnProperty(me.sourceAdu.key)){me.fetchLeaveProfiles(me.sourceAdu.key)}}else if(me.dataType==DataType.Documents){if(!me.documents.hasOwnProperty(me.sourceAdu.key)){me.fetchDocuments(me.sourceAdu.key)}}});this.$container.find("#ddlDestAdu").change(function(){me.destAdu=_.findWhere(me.adus,{key:this.value});me.destTeam=null;me.render();me.fetchTeams(me.destAdu.key)});this.$container.find("#ddlSourceTeam").change(function(){me.sourceTeam=_.findWhere(me.teams[me.sourceAdu.key],{key:this.value});me.sourceEmployees=[];me.render();if(me.dataType==DataType.Employees){me.fetchEmployees()}});this.$container.find("#btnNext").click(function(){me.next()});this.$container.find("#btnPrev").click(function(){me.prev()});this.$container.find("#btnReset").click(function(){me.reset();me.render()});this.$container.find("#btnRetryValidation").click(function(){me.validate()})};View.prototype.fetchTeams=function(aduKey){var me=this;if(this.teams.hasOwnProperty(aduKey)){this.populateTeams();return}var url="/teams?aduKey="+aduKey;appogee.api.get(url,function(response){me.teams[aduKey]=response.items;me.populateTeams()})};View.prototype.populateTeams=function(){var options={valueName:"name"};if(this.sourceTeam){options.defaultKey=this.sourceTeam.key}else if(this.defaultTeamKey){options.defaultKey=this.defaultTeamKey}appogee.ui.populateDropdown($("#ddlSourceTeam"),this.teams[this.sourceAdu.key],options);if(this.destAdu){options={valueName:"name"};appogee.ui.populateDropdown($("#ddlDestTeam"),this.teams[this.destAdu.key],options)}};View.prototype.fetchEmployees=function(callback){var me=this;if(this.employees.hasOwnProperty(this.sourceTeam.key)){if(callback){callback()}else{me.populateEmployees()}return}var url="/employees?teamKey="+this.sourceTeam.key;appogee.api.get(url,function(response){me.employees[me.sourceTeam.key]=response.items;if(callback){callback()}else{me.populateEmployees()}})};View.prototype.populateEmployees=function(){var options={defaultValue:null,valueFormatter:function(employee){return"{0} {1}".format(employee.firstName,employee.lastName)}};if(this.selectedEmployee){options.defaultKey=this.selectedEmployee.key}appogee.ui.populateDropdown($("#ddlSourceEmployees"),this.employees[this.sourceTeam.key],options)};View.prototype.fetchVirtualTeams=function(aduKey){var me=this;if(this.vteams.hasOwnProperty(aduKey)){this.populateVirtualTeams();return}var url="/virtual-teams?aduKey="+aduKey;appogee.api.get(url,function(response){me.vteams[aduKey]=response.items;me.populateVirtualTeams()})};View.prototype.populateVirtualTeams=function(){var options={valueName:"name"};if(this.sourceVirtualTeam){options.defaultKey=this.sourceVirtualTeam.key}else if(this.defaultVirtualTeamKey){options.defaultKey=this.defaultVirtualTeamKey}appogee.ui.populateDropdown($("#ddlSourceVirtualTeam"),this.vteams[this.sourceAdu.key],options)};View.prototype.fetchLeaveProfiles=function(aduKey){var me=this;if(this.leaveProfiles.hasOwnProperty(aduKey)){this.populateLeaveProfiles();return}var url="/leave-profiles?aduKey="+aduKey;appogee.api.get(url,function(response){me.leaveProfiles[aduKey]=response.items;me.populateLeaveProfiles()})};View.prototype.populateLeaveProfiles=function(){var options={valueName:"name"};if(this.sourceLeaveProfile){options.defaultKey=this.sourceLeaveProfile.key}else if(this.defaultLeaveProfileKey){options.defaultKey=this.defaultLeaveProfileKey}appogee.ui.populateDropdown($("#ddlSourceLeaveProfile"),this.leaveProfiles[this.sourceAdu.key],options)};View.prototype.fetchDocuments=function(){var me=this;if(this.documents.hasOwnProperty(this.sourceAdu.key)){this.populateDocuments();return}var url="/company-documents?aduKey="+this.sourceAdu.key;appogee.api.get(url,function(response){me.documents[me.sourceAdu.key]=response.items;me.populateDocuments()})};View.prototype.populateDocuments=function(){var options={defaultValue:null,valueName:"name"};appogee.ui.populateDropdown($("#ddlSourceDocuments"),this.documents[this.sourceAdu.key],options)};View.prototype.next=function(){var me=this;if(this.step==STEP_SOURCE){if(this.dataType===null){appogee.valert(S.errorNoDataType);return}var sourceAduKey=$("#ddlSourceAdu").val();var sourceTeamKey=$("#ddlSourceTeam").val();if(!sourceAduKey){appogee.valert(S.errorNoSourceAdu);return}this.sourceAdu=_.findWhere(me.adus,{key:sourceAduKey});if(this.dataType==DataType.Team){if(!sourceTeamKey){appogee.valert(S.errorNoSourceTeam);return}this.sourceTeam=_.findWhere(me.teams[sourceAduKey],{key:sourceTeamKey});this.fetchEmployees(function(){me.sourceEmployees=me.employees[me.sourceTeam.key];me.step=STEP_DEST;me.render()})}else if(this.dataType==DataType.Employees){if(!sourceTeamKey){appogee.valert(S.errorNoTeam);return}this.sourceTeam=_.findWhere(me.teams[sourceAduKey],{key:sourceTeamKey});var sourceEmployeeKeys=$("#ddlSourceEmployees").val();if(!sourceEmployeeKeys){appogee.valert(S.errorNoSourceEmployees);return}this.sourceEmployees=sourceEmployeeKeys.map(function(key){return _.find(me.employees[me.sourceTeam.key],{key:key})});this.step=STEP_DEST;this.render()}else if(this.dataType==DataType.VirtualTeam){var sourceVirtualTeamKey=$("#ddlSourceVirtualTeam").val();if(!sourceVirtualTeamKey){appogee.valert(S.errorNoSourceVirtualTeam);return}this.sourceVirtualTeam=_.findWhere(me.vteams[sourceAduKey],{key:sourceVirtualTeamKey});me.step=STEP_DEST;me.render()}else if(this.dataType==DataType.LeaveProfile){var sourceLeaveProfileKey=$("#ddlSourceLeaveProfile").val();if(!sourceLeaveProfileKey){appogee.valert(S.errorNoSourceLeaveProfile);return}this.sourceLeaveProfile=_.findWhere(me.leaveProfiles[sourceAduKey],{key:sourceLeaveProfileKey});me.step=STEP_DEST;me.render()}else if(this.dataType==DataType.Documents){var sourceDocumentKeys=$("#ddlSourceDocuments").val();if(!sourceDocumentKeys){appogee.valert(S.errorNoSourceDocument);return}this.sourceDocuments=sourceDocumentKeys.map(function(key){return _.find(me.documents[me.sourceAdu.key],{key:key})});this.step=STEP_DEST;this.render()}}else if(this.step==STEP_DEST){var aduKey=$("#ddlDestAdu").val();if(!aduKey){appogee.valert(S.errorNoDestAdu);return}this.destAdu=_.findWhere(this.adus,{key:aduKey});if(this.dataType==DataType.Employees){var destTeamKey=$("#ddlDestTeam").val();if(!aduKey){appogee.valert(S.errorNoDestTeam);return}this.destTeam=_.findWhere(this.teams[this.destAdu.key],{key:destTeamKey})}this.validate()}else if(this.step==STEP_REVIEW){this.commit()}};View.prototype.prev=function(){if(this.step==STEP_DEST){this.step=STEP_SOURCE;this.render()}else if(this.step==STEP_REVIEW){this.step=STEP_SOURCE;this.render()}};View.prototype.validate=function(){this.step=STEP_VALIDATING;this.render();if(this.dataType==DataType.Team){this._validateMoveTeam()}else if(this.dataType==DataType.Employees){this._validateMoveEmployees()}else if(this.dataType==DataType.VirtualTeam){this._validateMoveVirtualTeam()}else if(this.dataType==DataType.LeaveProfile){this._validateMoveLeaveProfile()}else if(this.dataType==DataType.Documents){this._validateMoveDocuments()}};View.prototype._validateMoveTeam=function(){var data={teamKey:this.sourceTeam.key,aduKey:this.destAdu.key};this._validateMove("/admin/org/adus/validate_move_team",data)};View.prototype._validateMoveEmployees=function(){var sourceEmployeeKeys=_.pluck(this.sourceEmployees,"key");var data={employeeKeys:sourceEmployeeKeys,teamKey:this.destTeam.key};this._validateMove("/admin/org/adus/validate_move_employees",data)};View.prototype._validateMoveVirtualTeam=function(){var data={vteamKey:this.sourceVirtualTeam.key,aduKey:this.destAdu.key};this._validateMove("/admin/org/adus/validate_move_vteam",data)};View.prototype._validateMoveLeaveProfile=function(){var data={leaveProfileKey:this.sourceLeaveProfile.key,aduKey:this.destAdu.key};this._validateMove("/admin/org/adus/validate_move_leave_profile",data)};View.prototype._validateMoveDocuments=function(){var sourceDocumentKeys=_.pluck(this.sourceDocuments,"key");var data={documentKeys:sourceDocumentKeys,aduKey:this.destAdu.key};this._validateMove("/admin/org/adus/validate_move_documents",data)};View.prototype._validateMove=function(url,data){var me=this;appogee.xhr.post(url,data,function(response){me.validationValid=false;me.validationErrors=null;if(response.success){me.validationValid=true;me.step=STEP_REVIEW}else if(response.reason=="Validation Error"){me.step=STEP_REVIEW;me.validationErrors=response.errors}else{appogee.valert(S.errorOperationFailedTitle,response.reason);me.step=STEP_SOURCE}me.render()},{artificialDelay:true})};View.prototype.commit=function(){this.step=STEP_MOVING;this.render();if(this.dataType==DataType.Team){this._commitMoveTeam()}else if(this.dataType==DataType.Employees){this._commitMoveEmployees()}else if(this.dataType==DataType.VirtualTeam){this._commitMoveVirtualTeam()}else if(this.dataType==DataType.LeaveProfile){this._commitMoveLeaveProfile()}else if(this.dataType==DataType.Documents){this._commitMoveDocuments()}};View.prototype._commitMoveTeam=function(){var data={teamKey:this.sourceTeam.key,aduKey:this.destAdu.key};this._commitMove("/admin/org/adus/commit_move_team",data)};View.prototype._commitMoveEmployees=function(){var sourceEmployeeKeys=_.pluck(this.sourceEmployees,"key");var data={employeeKeys:sourceEmployeeKeys,teamKey:this.destTeam.key};this._commitMove("/admin/org/adus/commit_move_employees",data)};View.prototype._commitMoveVirtualTeam=function(){var data={vteamKey:this.sourceVirtualTeam.key,aduKey:this.destAdu.key};this._commitMove("/admin/org/adus/commit_move_vteam",data)};View.prototype._commitMoveLeaveProfile=function(){var data={leaveProfileKey:this.sourceLeaveProfile.key,aduKey:this.destAdu.key};this._commitMove("/admin/org/adus/commit_move_leave_profile",data)};View.prototype._commitMoveDocuments=function(){var sourceDocumentKeys=_.pluck(this.sourceDocuments,"key");var data={documentKeys:sourceDocumentKeys,aduKey:this.destAdu.key};this._commitMove("/admin/org/adus/commit_move_documents",data)};View.prototype._commitMove=function(url,data){var me=this;appogee.xhr.post(url,data,function(response){if(response.success){me.step=STEP_COMPLETE}else if(response.reason=="Move Invalid"){appogee.valert(S.errorOperationFailed);me.validationErrors=response.errors;me.step=STEP_REVIEW}else{appogee.valert(S.errorOperationFailedTitle,response.reason);me.step=STEP_SOURCE}me.render()},{artificialDelay:true})};return View});define("hbs!admin/org/dlg/AboutAduManager",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"\t\t<dt>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Company Documents",{name:"s",hash:{},data:data}))+"</dt>\n\t\t<dd>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Company Documents can be moved to a different Division, so long as the Document Owners remain in an equal or higher Division.",{name:"s",hash:{},data:data}))+"</dd>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="dlg-about">\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Divisional Data Transfer Tool",{name:"s",hash:{},data:data}))+"</h4>\n\t\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This tool allows you to move data to different Divisions.",{name:"s",hash:{},data:data}))+"</p>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following data transfers are supported:",{name:"s",hash:{},data:data}))+"</p>\n\t\n\t<dl>\n\t\t<dt>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Teams",{name:"s",hash:{},data:data}))+"</dt>\n\t\t<dd>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Moving a Team also moves the Employees within the Team.",{name:"s",hash:{},data:data}))+"</dd>\n\n\t\t<dt>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employees",{name:"s",hash:{},data:data}))+"</dt>\n\t\t<dd>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employees can be moved to a Team in a different Division.",{name:"s",hash:{},data:data}))+"</dd>\n\n\t\t<dt>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Team",{name:"s",hash:{},data:data}))+"</dt>\n\t\t<dd>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Teams can be moved to a different Division, so long as the Virtual Team members remain in an equal or lower Division. This does not move the members of the Virtual Team.",{name:"s",hash:{},data:data}))+"</dd>\n\n\t\t<dt>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profiles",{name:"s",hash:{},data:data}))+"</dt>\n\t\t<dd>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Teams can be moved to a different Division, so long as all Employees assigned the Leave Profile remain in an equal or higher Division.",{name:"s",hash:{},data:data}))+"</dd>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCustomerAccessHr:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</dl>\n\t\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The tool is split into a number of parts:",{name:"s",hash:{},data:data}))+"</p>\n\t<dl>\n\t\t<dt>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Source",{name:"s",hash:{},data:data}))+"</dt>\n\t\t<dd>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select what data you wish to move",{name:"s",hash:{},data:data}))+"</dd>\n\t\t<dt>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Destination",{name:"s",hash:{},data:data}))+"</dt>\n\t\t<dd>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Division you wish to move the data to.",{name:"s",hash:{},data:data}))+"</dd>\n\t\t<dt>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Review &amp; Confirm",{name:"s",hash:{},data:data}))+"</dt>\n\t\t<dd>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The request to move data is validated. If validation fails, a report is provided explaining why. You may need to use a different approach to achieve your desired outcome.",{name:"s",hash:{},data:data}))+'</dd>\n\t</dl>\n\t\n\t<div class="buttons">\n\t\t<label>\n\t\t\t<input type="checkbox" checked="checked" />\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Don't show me this message again",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t\t\n\t\t<div style="padding: 10px;">\n\t\t\t<button class="btn btn-sm btn-default">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Close",{name:"s",hash:{},data:data}))+"\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n</div>"},useData:true});Handlebars.registerPartial("admin/org/dlg/AboutAduManager",t);return t});define("admin/org/dlg/AboutAduManager",["jquery","underscore","appogee","hbs!admin/org/dlg/AboutAduManager"],function($,_,appogee,tmpl){"use strict";var COOKIE_ABOUT="adum";var $dlg=null;var Dialog=function(){if($dlg===null){$dlg=$("<div />").addClass("dialog")}};Dialog.prototype.render=function(){var _this104=this;var data={canCustomerAccessHr:appogee.canCustomerAccessHr()};$dlg.html(tmpl(data));$dlg.find("button").click(function(){var dontShowAgain=$dlg.find('input[type="checkbox"]').prop("checked");if(dontShowAgain){appogee.cookies.set(COOKIE_ABOUT,1,365)}else{appogee.cookies.set(COOKIE_ABOUT,1,0)}_this104.dlg.hide()})};Dialog.prototype.show=function(){this.dlg=new appogee.Dialog($dlg,{width:700});this.dlg.clearButtons();this.render();this.dlg.show()};return Dialog});define("admin/org/adu_manager",["jquery","appogee","admin/org/views/AduManager","admin/org/dlg/AboutAduManager"],function($,appogee,AduManagerView,AboutAduManager){"use strict";var COOKIE_ABOUT="adum";return{loadUrls:{},initialize:function(){var _this105=this;this.view=new AduManagerView($("#viewContainer"));this.view.render();if(!appogee.cookies.get(COOKIE_ABOUT)){this.showAbout()}$("#btnAbout").click(function(){_this105.showAbout()})},showAbout:function(){var dlg=new AboutAduManager;dlg.show()}}});define("enums/EmployeeStatus",["appogee"],function(appogee){"use strict";var S,R={joining:"Joining",active:"Active",former:"Former",archived:"Archived"};var EmployeeStatus={Joining:"joining",Active:"active",Former:"former",Archived:"archived",init:function(){if(!S){S=appogee.getStrings("EmployeeStatus",R)}},toString:function(s){this.init();if(s=="joining"){return S.joining}else if(s=="active"){return S.active}else if(s=="former"){return S.former}else if(s=="archived"){return S.archived}}};return EmployeeStatus});define("hbs!admin/org/tmpl/OrgSelector",["hbs/handlebars","templates/helpers/s","templates/helpers/formatDate"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"form-inline"},3:function(depth0,helpers,partials,data){var stack1;return'\t<div class="filter-group">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showLabels:depth0,{name:"if",hash:{},fn:this.program(4,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<select class="form-control input-sm ddlAdu">\n\t\t</select>\n\t</div>\n'},4:function(depth0,helpers,partials,data){return"\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Division",{name:"s",hash:{},data:data}))+"</label>\n"},6:function(depth0,helpers,partials,data){var stack1;return'\t<div class="filter-group">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showLabels:depth0,{name:"if",hash:{},fn:this.program(7,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<select class="form-control input-sm ddlTeam">\n\t\t</select>\n\t</div>\n'},7:function(depth0,helpers,partials,data){return"\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Team",{name:"s",hash:{},data:data}))+"</label>\n"},9:function(depth0,helpers,partials,data){var stack1;return'\t<div class="filter-group">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showLabels:depth0,{name:"if",hash:{},fn:this.program(10,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<select class="form-control input-sm ddlEmployee">\n\t\t</select>\n\t</div>\n'},10:function(depth0,helpers,partials,data){return"\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Employee",{name:"s",hash:{},data:data}))+"</label>\n"},12:function(depth0,helpers,partials,data){var stack1;return'\t<div class="filter-group">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showLabels:depth0,{name:"if",hash:{},fn:this.program(13,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<select class="form-control input-sm ddlLeaveProfile">\n\t\t</select>\n\t</div>\n'},13:function(depth0,helpers,partials,data){return"\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Leave Profile",{name:"s",hash:{},data:data}))+"</label>\n"},15:function(depth0,helpers,partials,data){var stack1;return'\t<div class="filter-group">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showLabels:depth0,{name:"if",hash:{},fn:this.program(16,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<select class="form-control input-sm ddlDateRange">\n\t\t</select>\n\t</div>\n'},16:function(depth0,helpers,partials,data){return"\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Date Range",{name:"s",hash:{},data:data}))+"</label>\n"},18:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.showDateRangeCustom:depth0,{name:"if",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:""},19:function(depth0,helpers,partials,data){var stack1;return'\t<div class="filter-group">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showLabels:depth0,{name:"if",hash:{},fn:this.program(20,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<input type="text" class="form-control input-sm date-picker txtStartDate"\n\t\t\t'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.dateRangeStartDate:depth0,{name:"if",hash:{},fn:this.program(22,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+' />\n\t</div>\n\t<div class="filter-group">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showLabels:depth0,{name:"if",hash:{},fn:this.program(24,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<input type="text" class="form-control input-sm date-picker txtEndDate"\n\t\t\t '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.dateRangeEndDate:depth0,{name:"if",hash:{},fn:this.program(26,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+' />\n\t</div>\n\t<div class="filter-group">\n\t\t<button class="btn btn-primary btn-sm btnGo">GO</button>\n\t</div>\n\t'},20:function(depth0,helpers,partials,data){return"\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start Date",{name:"s",hash:{},data:data}))+"</label>\n"},22:function(depth0,helpers,partials,data){return'value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,depth0!=null?depth0.dateRangeStartDate:depth0,{name:"formatDate",hash:{},data:data}))+'"'},24:function(depth0,helpers,partials,data){return"\t\t<label>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"End Date",{name:"s",hash:{},data:data}))+"</label>\n"},26:function(depth0,helpers,partials,data){return'value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,depth0!=null?depth0.dateRangeEndDate:depth0,{name:"formatDate",hash:{},data:data}))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper;return'<div class="org-selector org-selector-'+this.escapeExpression((helper=(helper=helpers.align||(depth0!=null?depth0.align:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"align",hash:{},data:data}):helper))+" filters "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.formInline:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showAdus:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showTeams:depth0,{name:"if",hash:{},fn:this.program(6,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showEmployees:depth0,{name:"if",hash:{},fn:this.program(9,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showLeaveProfiles:depth0,{name:"if",hash:{},fn:this.program(12,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showDateRange:depth0,{name:"if",hash:{},fn:this.program(15,data,0),inverse:this.program(18,data,0),data:data}))!=null?stack1:"")+"</div>"},useData:true});Handlebars.registerPartial("admin/org/tmpl/OrgSelector",t);return t});define("admin/org/views/OrgSelector",["jquery","underscore","appogee","enums/MonthAbbr","enums/EmployeeStatus","hbs!admin/org/tmpl/OrgSelector","jquery.appogee.datePicker"],function($,_,appogee,MonthAbbr,EmployeeStatus,tmpl){"use strict";var S,R={loading:"Loading ...",allTeams:"- All Teams -",select:"- Select -",virtualTeams:"Virtual Teams",teams:"Teams",allEmployees:"- All Employees -"};var ADU_COOKIE_KEY="a_k";var TEAM_COOKIE_KEY="t_k";var LEAVE_PROFILE_COOKIE_KEY="lp_k";var DATE_RANGE_COOKIE_KEY="dr_k";var View=function($container,options){S=appogee.getStrings("OrgSelector",R);var adus=null;this.currentUser=appogee.getCurrentUser();if(this.currentUser.isAduManager()){adus=appogee.getAdus()}else{adus=appogee.getAdus({root:"self"})}this.$container=$container;options=$.extend({teamsUrl:"/teams",teamsUrlApi:true,teamsProjection:"basic",teams:[],leaveProfiles:[],aduDefaultKey:null,aduTraverse:"both",adus:adus,showTeamAll:false,showTeamAllForce:false,showTeamSelect:true,teamAutoSelect:true,teamDefaultKey:null,excludeTeamKeys:[],showLeaveProfiles:false,leaveProfileAutoSelect:true,leaveProfileDefaultKey:null,showTeams:true,showVTeams:true,showEmployees:false,groupEmployeesByStatus:false,showDateRange:false,dateRangeStartYear:null,dateRangeEndYear:null,dateRangeStartMonth:0,showDateRangeCustom:false,dateRangeStartDate:null,dateRangeEndDate:null,view:null,viewTeamKeyFieldName:"team_keys",useCookies:true,formInline:false,showLabels:true,align:"left"},options||{});this.adus=options.adus;this.teamsUrl=options.teamsUrl;this.teamsUrlApi=options.teamsUrlApi;this.teamsProjection=options.teamsProjection;this.teams=options.teams;this.leaveProfiles=options.leaveProfiles;this.employees=[];this.showAdus=this.adus.length>1;this.aduDefaultKey=options.aduDefaultKey;this.aduTraverse=options.aduTraverse;this.showVTeams=options.showVTeams;this.showTeams=options.showTeams;this.showTeamAll=options.showTeamAll;this.showTeamAllForce=options.showTeamAllForce;this.showTeamSelect=options.showTeamSelect;this.teamAutoSelect=options.teamAutoSelect;this.teamDefaultKey=options.teamDefaultKey;this.excludeTeamKeys=options.excludeTeamKeys;this.showLeaveProfiles=options.showLeaveProfiles;this.leaveProfileAutoSelect=options.leaveProfileAutoSelect;this.leaveProfileDefaultKey=options.leaveProfileDefaultKey;this.showEmployees=options.showEmployees;this.groupEmployeesByStatus=options.groupEmployeesByStatus;this.showDateRange=options.showDateRange;this.dateRangeStartYear=options.dateRangeStartYear;this.dateRangeEndYear=options.dateRangeEndYear;this.dateRangeStartMonth=options.dateRangeStartMonth;if(this.showDateRange){if(this.dateRangeStartYear===null||this.dateRangeEndYear===null){throw"dateRangeStartYear and dateRangeEndYear must be provided for date ranges"}}this.showDateRangeCustom=options.showDateRangeCustom;this.dateRangeStartDate=options.dateRangeStartDate;this.dateRangeEndDate=options.dateRangeEndDate;this.useCookies=options.useCookies;this.formInline=options.formInline;this.showLabels=options.showLabels;this.align=options.align;this.aduChangeHandlers=[];this.teamChangeHandlers=[]
;this.employeeChangeHandlers=[];this.leaveProfileChangeHandlers=[];this.dateRangeChangeHandlers=[];this.updateHandlers=[];this.teamFetchHandlers=[];this.employeeFetchHandlers=[];this.leaveProfileFetchHandlers=[];this.firstTeamPopulate=true;this.firstLeaveProfilePopulate=true;this.firstRender=true;if(options.view){this.onAduChange(function(adu){options.view.addDefaultKeyFilter("adu_key",adu.key);options.view.removeKeyFilter(options.viewTeamKeyFieldName,true);options.view.fetch()});this.onTeamChange(function(team){if(team){options.view.addKeyFilter(options.viewTeamKeyFieldName,team.key)}else{options.view.removeKeyFilter(options.viewTeamKeyFieldName)}})}};View.prototype.onUpdate=function(handler){this.updateHandlers.push(handler)};View.prototype.onAduChange=function(handler){this.aduChangeHandlers.push(handler)};View.prototype.onTeamFetch=function(handler){this.teamFetchHandlers.push(handler)};View.prototype.onTeamChange=function(handler){this.teamChangeHandlers.push(handler)};View.prototype.onLeaveProfileFetch=function(handler){this.leaveProfileFetchHandlers.push(handler)};View.prototype.onLeaveProfileChange=function(handler){this.leaveProfileChangeHandlers.push(handler)};View.prototype.onDateRangeChange=function(handler){this.dateRangeChangeHandlers.push(handler)};View.prototype.onEmployeeChange=function(handler){this.employeeChangeHandlers.push(handler)};View.prototype.onEmployeeFetch=function(handler){this.employeeFetchHandlers.push(handler)};View.prototype.disableControls=function(){this.$container.find("select,input,button").attr("disabled",true)};View.prototype.enableControls=function(){this.$container.find("select,input,button").attr("disabled",false)};View.prototype.getSelectedAdu=function(){var adu=this.adus[0];if(!adu){adu=this.currentUser.adu}if(this.showAdus){var aduKey=this.$container.find(".ddlAdu").val();adu=_.findWhere(this.adus,{key:aduKey})}return adu};View.prototype.getSelectedTeam=function(){var teamKey=this.$container.find(".ddlTeam").val();var team=_.findWhere(this.teams,{key:teamKey});return team};View.prototype.getSelectedEmployee=function(){var employeeKey=this.$container.find(".ddlEmployee").val();var employee=_.findWhere(this.employees,{key:employeeKey});return employee};View.prototype.getSelectedLeaveProfile=function(){var leaveProfileKey=this.$container.find(".ddlLeaveProfile").val();var leaveProfile=_.findWhere(this.leaveProfiles,{key:leaveProfileKey});return leaveProfile};View.prototype.getSelectedDateRange=function(){var year=this.$container.find(".ddlDateRange").val();return year};View.prototype.getSelectedStartDate=function(){var startDate=this.$container.find(".txtStartDate").datepicker("getDate");return startDate};View.prototype.getSelectedEndDate=function(){var endDate=this.$container.find(".txtEndDate").datepicker("getDate");return endDate};View.prototype.render=function(){var _this106=this;var data={align:this.align,formInline:this.formInline,showAdus:this.adus.length>1,showTeams:this.showTeams,showEmployees:this.showEmployees,showLeaveProfiles:this.showLeaveProfiles,showDateRange:this.showDateRange,showDateRangeCustom:this.showDateRangeCustom,dateRangeStartDate:this.dateRangeStartDate,dateRangeEndDate:this.dateRangeEndDate,showLabels:this.showLabels};this.$container.html(tmpl(data)).find(".date-picker").appogeeDatePicker();this.populateAduDropdown();this.populateTeamDropdown();this.populateEmployeeDropdown();this.populateLeaveProfileDropdown();this.populateDateRangeDropdown();var $ddlAdu=this.$container.find(".ddlAdu");var $ddlTeam=this.$container.find(".ddlTeam");var $ddlEmployee=this.$container.find(".ddlEmployee");var $ddlLeaveProfile=this.$container.find(".ddlLeaveProfile");var $ddlDateRange=this.$container.find(".ddlDateRange");var $btnGo=this.$container.find(".btnGo");$ddlAdu.change(function(e){var aduKey=$(e.currentTarget).val();var adu=_.findWhere(_this106.adus,{key:aduKey});_this106.aduChangeHandlers.forEach(function(h){return h(adu)});$ddlTeam.html("<option>"+S.loading+"</option>");$ddlLeaveProfile.html("<option>"+S.loading+"</option>");_this106.fetchTeams();_this106.fetchLeaveProfiles()});$ddlTeam.change(function(e){var teamKey=$(e.currentTarget).val();var team=_.findWhere(_this106.teams,{key:teamKey});$ddlEmployee.val("");_this106.teamChangeHandlers.forEach(function(h){return h(team)});_this106.fetchEmployees()});$ddlLeaveProfile.change(function(e){var leaveProfileKey=$(e.currentTarget).val();var leaveProfile=_.findWhere(_this106.leaveProfiles,{key:leaveProfileKey});_this106.leaveProfileChangeHandlers.forEach(function(h){return h(leaveProfile)})});$ddlEmployee.change(function(e){var employeeKey=$(e.currentTarget).val();var employee=_.findWhere(_this106.employees,{key:employeeKey});_this106.employeeChangeHandlers.forEach(function(h){return h(employee)})});$ddlDateRange.change(function(e){var year=$(e.currentTarget).val();_this106.dateRangeChangeHandlers.forEach(function(h){return h(year)})});$btnGo.click(function(){_this106.updateHandlers.forEach(function(h){return h()})});if(this.firstRender){if(!this.teams||this.teams.length===0){this.fetchTeams()}if(!this.leaveProfiles||this.leaveProfiles.length===0){this.fetchLeaveProfiles()}this.firstRender=false}};View.prototype.populateAduDropdown=function(){var defaultKey=this.aduDefaultKey;var defaultAdu=_.find(this.adus,{key:defaultKey});if(!defaultKey){var adu=this.currentUser.getActiveAdu();if(adu){defaultKey=adu.key}}if(!defaultKey){defaultKey=this.currentUser.adu.key}var options={keyName:"key",valueName:"path",defaultValue:"",defaultKey:defaultKey};if(this.useCookies){options.cookieKey=ADU_COOKIE_KEY}if(this.aduTraverse=="up"){this.adus=_.filter(this.adus,function(a){if(a.isParent(defaultAdu,true)){return a}})}else if(this.aduTraverse=="down"){this.adus=_.filter(this.adus,function(a){if(defaultAdu.isParent(a,true)){return a}})}var $ddlAdu=this.$container.find(".ddlAdu");appogee.ui.populateDropdown($ddlAdu,this.adus,options);var adu=this.getSelectedAdu();this.aduChangeHandlers.forEach(function(h){return h(adu)})};View.prototype.fetchTeams=function(){var _this107=this;if(!this.showTeams){return}this.teamFetchHandlers.forEach(function(h){return h()});var adu=this.getSelectedAdu();var url="{0}?projection={1}&aduKey={2}".format(this.teamsUrl,this.teamsProjection,adu.key);if(this.showVTeams){url+="&includeVirtualTeams=true"}var ob=this.teamsUrlApi?appogee.api:appogee.xhr;ob.get(url,function(response){_this107.teams=response.items;_this107.populateTeamDropdown();_this107.fetchEmployees()})};View.prototype.populateTeamDropdown=function(){var _this108=this;var teams=_.filter(this.teams,function(t){return _this108.excludeTeamKeys.indexOf(t.key)==-1});var defaultKey="";if(this.teamAutoSelect&&teams.length>0){defaultKey=teams[0].key}if(this.firstTeamPopulate&&this.teamDefaultKey){defaultKey=this.teamDefaultKey}var defaultValue=null;if(this.showTeamAllForce||this.showTeamAll&&this.currentUser.isHrManager()){defaultValue=S.allTeams}else if(this.showTeamSelect){defaultValue=S.select}var options={keyName:"key",valueName:"name",defaultValue:defaultValue,default:defaultKey};if(this.useCookies){options.cookieKey=TEAM_COOKIE_KEY}if(this.showVTeams){teams.forEach(function(t){if(t.type=="vteam"){t.typeString=S.virtualTeams}else{t.typeString=S.teams}});options.groupBy="typeString";options.groupBySingle=false}var $ddlTeam=this.$container.find(".ddlTeam");appogee.ui.populateDropdown($ddlTeam,teams,options);var team=this.getSelectedTeam();this.teamChangeHandlers.forEach(function(h){return h(team)});if(this.firstTeamPopulate){this.fetchEmployees()}this.firstTeamPopulate=false};View.prototype.fetchLeaveProfiles=function(){var _this109=this;if(!this.showLeaveProfiles){return}this.leaveProfileFetchHandlers.forEach(function(h){return h()});var adu=this.getSelectedAdu();var url="/leave-profiles?projection=summary&aduKey={0}&aduTraverse=up".format(adu.key);appogee.api.get(url,function(response){_this109.leaveProfiles=response.items;_this109.populateLeaveProfileDropdown()})};View.prototype.populateLeaveProfileDropdown=function(){var defaultKey="";if(this.leaveProfileAutoSelect&&this.leaveProfiles.length>0){defaultKey=this.leaveProfiles[0].key}if(this.firstLeaveProfilePopulate&&this.leaveProfileDefaultKey){defaultKey=this.leaveProfileDefaultKey}this.firstLeaveProfilePopulate=false;var options={keyName:"key",valueName:"name",groupBy:"adu.path",default:defaultKey};if(this.useCookies){options.cookieKey=LEAVE_PROFILE_COOKIE_KEY}var $ddlLeaveProfile=this.$container.find(".ddlLeaveProfile");appogee.ui.populateDropdown($ddlLeaveProfile,this.leaveProfiles,options);var leaveProfile=this.getSelectedLeaveProfile();this.leaveProfileChangeHandlers.forEach(function(h){return h(leaveProfile)})};View.prototype.populateDateRangeDropdown=function(){var dateRanges=[];var defaultKey="";var today=new Date;for(var year=this.dateRangeStartYear;year<=this.dateRangeEndYear;year++){var dateRangeEndMonth=this.dateRangeStartMonth===0?11:this.dateRangeStartMonth-1;var endYear=this.dateRangeStartMonth===0?year:year+1;var startDate=new Date(year,this.dateRangeStartMonth,1);var endDate=new Date(year+1,this.dateRangeStartMonth,1);if(today>=startDate&&today<endDate){defaultKey=year}var value="{0} {1} - {2} {3}".format(MonthAbbr.toString(this.dateRangeStartMonth+1),year,MonthAbbr.toString(dateRangeEndMonth+1),endYear);dateRanges.push({key:year,value:value})}var options={default:defaultKey};if(this.useCookies){options.cookieKey=DATE_RANGE_COOKIE_KEY}var $ddlDateRange=this.$container.find(".ddlDateRange");appogee.ui.populateDropdown($ddlDateRange,dateRanges,options);var dateRange=this.getSelectedDateRange();this.dateRangeChangeHandlers.forEach(function(h){return h(dateRange)})};View.prototype.fetchEmployees=function(){var _this110=this;if(!this.showEmployees){return}var team=this.getSelectedTeam();if(!team){this.employees=[];this.populateEmployeeDropdown();return}this.employeeFetchHandlers.forEach(function(h){return h()});var url="/employees?teamKey={0}&projection=basic".format(team.key);appogee.api.get(url,function(response){_this110.employees=response.items;_this110.populateEmployeeDropdown()})};View.prototype.populateEmployeeDropdown=function(){var $ddlEmployee=this.$container.find(".ddlEmployee");var params={keyName:"key",valueFormatter:function(e){return e.firstName+" "+e.lastName},defaultValue:S.allEmployees};if(this.groupEmployeesByStatus){params.groupBy="status";params.groupByFormatter=function(s){return EmployeeStatus.toString(s)}}appogee.ui.populateDropdown($ddlEmployee,this.employees,params)};return View});define("admin/org/teams",["jquery","appogee","admin/org/views/OrgSelector"],function($,appogee,OrgSelector){"use strict";var S,R={colName:"Name",colParent:"Parent Team",colManagers:"Managers",ttReader:"Reader",ttPrimaryManager:"Primary Manager",ttEditor:"Editor",colMembers:"Members",colLeaveApprovers:"Leave Approvers",colSickApprovers:"Sickness Approvers",colToilApprovers:"{toil_term} Approvers",colActiveLeaveYears:"Active Leave Years",colSickEnabled:"Sickness Enabled?",ttSickEnabled:"Sickness is enabled for this team",colToilEnabled:"{toil_term} Enabled?",ttToilEnabled:"{toil_term} is enabled for this team",leave:"Leave",sick:"Sickness",ttInvalidTypes:"The approval flow for {types} is invalid. Members of this team cannot create requests until the Approval Flow is completed.",notConfigured:"Not Configured"};var COLUMN_CONFIG_KEY="tck";var COLUMNS=["managers","members","leaveApprovers","sickApprovers","toilApprovers","activeLeaveYears","sickEnabled","toilEnabled","parent"];var DEFAULT_COLUMNS=[1,1,0,0,0,0,0,0,1];return{defaultStrings:R,setViewColumns:function(){},initialize:function(){var _this111=this;S=this.S;this.initView();this.initOrgSelector();$("#btnCreateTeam").click(function(){_this111.createTeam()})},initOrgSelector:function(){this.orgSelector=new OrgSelector($("#orgSelector"),{showTeams:false,view:this.view});this.orgSelector.render()},initView:function(){var label=null;this.view=new appogee.View($("#viewContainer"),"teams",{showSearch:false});this.view.addDefaultKeyFilter("adu_key",this.currentUser.getActiveAduKey());this.view.initColumnConfig(COLUMN_CONFIG_KEY,COLUMNS,DEFAULT_COLUMNS,$("#ddlColumns"));this.view.addColumn({type:"custom",label:S.colName,width:"200",render:function(team){var valid=true;var invalidTypes=[];if(team.leaveSettings&&team.leaveSettings.enabled&&(!team.leaveSettings.approvalDef||team.leaveSettings.approvalDef.length===0)){valid=false;invalidTypes.push(S.leave)}if(team.sickSettings&&team.sickSettings.enabled&&(!team.sickSettings.approvalDef||team.sickSettings.approvalDef.length===0)){valid=false;invalidTypes.push(S.sick)}if(team.toilSettings&&team.toilSettings.enabled&&(!team.toilSettings.approvalDef||team.toilSettings.approvalDef.length===0)){valid=false;invalidTypes.push(appogee.getToilTerm())}var html="";if(!valid){invalidTypes=appogee.util.joinWithAnd(invalidTypes);var title=S.ttInvalidTypes.format({types:invalidTypes});html='<i class="glyphicon glyphicon-exclamation-sign text-danger" title="{0}"></i> '.format(title)}html+='<a href="/admin/organisation/team?key={0}">{1}</a>'.format(team.key,team.name);return html}});this.view.addColumn({id:"parent",type:"custom",label:S.colParent,width:"200",render:function(team){if(team.parent){return team.parent.name}else if(team.parentTeamConfigured){return""}else{return'<span class="red">['+S.notConfigured+"]</span>"}}});this.view.addColumn({id:"managers",type:"custom",label:S.colManagers,width:"200",render:function(team){var managers=[];if(team.managers){managers=team.managers.map(function(manager){var icon="glyphicon glyphicon-sunglasses";var tooltip=S.ttReader;if(manager.key==team.managerKey){icon="glyphicon glyphicon-star";tooltip=S.ttPrimaryManager}else if(team.editorKeys.indexOf(manager.key)>-1){icon="glyphicon glyphicon-pencil";tooltip=S.ttEditor}var html='<span title="{0}"><i class="{1}"></i> {2}</span>'.format(tooltip,icon,manager.name);return html})}return managers.join(", ")}});this.view.addColumn({id:"members",type:"custom",label:S.colMembers,width:"200",render:function(team){var members=[];if(team.members){members=team.members.map(function(member){return member.name})}return members.join(", ")}});this.view.addColumn({id:"leaveApprovers",type:"custom",label:S.colLeaveApprovers,render:function(team){var levels=[];if(team.leaveSettings){team.leaveSettings.approvalDef.forEach(function(approvalDef,i){var level=[];approvalDef.approvers.forEach(function(approver){level.push(approver.email)});levels.push("Level {0}: {1}".format(i+1,level.join(", ")))})}return levels.join("<br />")}});this.view.addColumn({id:"sickApprovers",type:"custom",label:S.colSickApprovers,render:function(team){var levels=[];if(team.sickSettings){team.sickSettings.approvalDef.forEach(function(approvalDef,i){var level=[];approvalDef.approvers.forEach(function(approver){level.push(approver.email)});levels.push("Level {0}: {1}".format(i+1,level.join(", ")))})}return levels.join("<br />")}});label=S.colToilApprovers.format({toil_term:appogee.getToilTerm()});this.view.addColumn({id:"toilApprovers",type:"custom",label:label,render:function(team){var levels=[];if(team.toilSettings){team.toilSettings.approvalDef.forEach(function(approvalDef,i){var level=[];approvalDef.approvers.forEach(function(approver){level.push(approver.email)});levels.push("Level {0}: {1}".format(i+1,level.join(", ")))})}return levels.join("<br />")}});this.view.addColumn({id:"activeLeaveYears",type:"custom",label:S.colActiveLeaveYears,render:function(team){return team.activeLeaveYears.join(", ")}});this.view.addColumn({id:"sickEnabled",type:"image",label:S.colSickEnabled,width:50,field:"sickEnabled",mappings:{true:{src:"/img/leave/tmp/tick.png",tooltip:S.ttSickEnabled}}});label=S.colToilEnabled.format({toil_term:appogee.getToilTerm()});var tt=S.ttToilEnabled.format({toil_term:appogee.getToilTerm()});this.view.addColumn({id:"toilEnabled",type:"image",label:label,width:50,field:"toilEnabled",mappings:{true:{src:"/img/leave/tmp/tick.png",tooltip:tt}}})},onTeamCreated:function(){var _this112=this;setTimeout(function(){_this112.view.fetch()},500)}}});define("hbs!admin/templates/leave/ActiveLeaveYears",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/ifin"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0,depths[1]!=null?depths[1].current_year:depths[1],{name:"ifequal",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.program(4,data,0,blockParams,depths),data:data}))!=null?stack1:""},2:function(depth0,helpers,partials,data){return'\t\t<label class="checkbox-inline disabled">\n\t\t\t<input type="checkbox" value="'+this.escapeExpression(this.lambda(depth0,depth0))+'" checked="checked" disabled="disabled" />\n\t\t\t'+this.escapeExpression(this.lambda(depth0,depth0))+"\n\t\t</label>\n"},4:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t<label class="checkbox-inline">\n\t\t\t<input type="checkbox" value="'+this.escapeExpression(this.lambda(depth0,depth0))+'" '+((stack1=(helpers.ifin||depth0&&depth0.ifin||helpers.helperMissing).call(depth0,depths[1],depths[2]!=null?depths[2].selected:depths[2],{name:"ifin",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t"+this.escapeExpression(this.lambda(depth0,depth0))+"\n\t\t</label>\n"},5:function(depth0,helpers,partials,data){return'checked="checked"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.years:depth0,{name:"each",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},useData:true,useDepths:true});Handlebars.registerPartial("admin/templates/leave/ActiveLeaveYears",t);return t});define("admin/views/leave/ActiveLeaveYears",["jquery","underscore","appogee","hbs!admin/templates/leave/ActiveLeaveYears"],function($,_,appogee,tmpl){"use strict";var ActiveLeaveYearView=function($container,years){this.$container=$container;if(!years||years.length===0){var d=new Date;years=[d.getFullYear(),d.getFullYear()+1]}this.years=years.map(function(year){return parseInt(year)})};ActiveLeaveYearView.prototype.getSelectedYears=function(){return this.years};ActiveLeaveYearView.prototype.render=function(){var startYear=new Date(appogee.getInstallDate()).getFullYear()-1;var today=new Date;var endYear=today.getFullYear()+2;if(this.years.length>0){startYear=Math.min(startYear,_.min(this.years));endYear=Math.max(endYear,_.max(this.years))}var data={years:_.range(startYear,endYear+1),current_year:today.getFullYear(),selected:this.years};this.$container.html(tmpl(data));var me=this;this.$container.find('input[type="checkbox"]').change(function(){var year=parseInt($(this).val());for(var i=0;i<me.years.length;i++){if(me.years[i]==year){me.years.splice(i,1)}}if(this.checked){me.years.push(year)}})};return ActiveLeaveYearView});define("templates/helpers/ifmathequal",["hbs/handlebars"],function(Handlebars){Handlebars.registerHelper("ifmathequal",function(lvalue,operator,rvalue,value,options){if(arguments.length<4){options=rvalue;rvalue=operator;operator="+"}lvalue=parseFloat(lvalue);rvalue=parseFloat(rvalue);var val={"+":lvalue+rvalue,"-":lvalue-rvalue,"*":lvalue*rvalue,"/":lvalue/rvalue,"%":lvalue%rvalue}[operator];if(val==value)return options.fn(this);return options.inverse(this)})});define("templates/helpers/set",["hbs/handlebars"],function(Handlebars){function set(name,value){this[name]=value}Handlebars.registerHelper("set",set);return set});define("hbs!admin/templates/leave/ApprovalDef",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal","templates/helpers/if_gt","templates/helpers/math","templates/helpers/ifmathequal","templates/helpers/set","templates/helpers/ifnotequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.levels:depth0,{name:"each",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},2:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.approvers:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:1},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t\t\t\t<label class="radio-inline">\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Required:",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t\t</label>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.approvers:depth0,{name:"each",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")},4:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t\t\t\t\t<label class="radio-inline">\n\t\t\t\t\t\t\t\t<input type="radio" class="required" data-level="0" value="'+this.escapeExpression((helpers.math||depth0&&depth0.math||helpers.helperMissing).call(depth0,data&&data.index,1,{name:"math",hash:{},data:data}))+'" '+((stack1=(helpers.ifmathequal||depth0&&depth0.ifmathequal||helpers.helperMissing).call(depth0,data&&data.index,"+",1,depths[1]!=null?depths[1].required:depths[1],{name:"ifmathequal",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+' name="rad'+this.escapeExpression(this.lambda(depths[4]!=null?depths[4].randomID:depths[4],depth0))+'Lvl1" /> '+this.escapeExpression((helpers.math||depth0&&depth0.math||helpers.helperMissing).call(depth0,data&&data.index,1,{name:"math",hash:{},data:data}))+"\n\t\t\t\t\t\t\t</label>\n"},5:function(depth0,helpers,partials,data){return'checked="checked"'},7:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"\t"+this.escapeExpression((helpers.set||depth0&&depth0.set||helpers.helperMissing).call(depth0,"iLevel",data&&data.index,{name:"set",hash:{},data:data}))+"\n"+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depths[1]!=null?depths[1].levels:depths[1])!=null?stack1.length:stack1,1,{name:"ifnotequal",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers.each.call(depth0,depth0!=null?depth0.approvers:depth0,{name:"each",hash:{},fn:this.program(14,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.type:depth0,"team",{name:"ifequal",hash:{},fn:this.program(17,data,0,blockParams,depths),inverse:this.program(19,data,0,blockParams,depths),data:data}))!=null?stack1:"")},8:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t<thead>\n\t\t<tr>\n\t\t\t<th style="background-color: #ffe;">\n\t\t\t\t<div class="pull-left">\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Level",{name:"s",hash:{},data:data}))+" "+this.escapeExpression((helpers.math||depth0&&depth0.math||helpers.helperMissing).call(depth0,data&&data.index,1,{name:"math",hash:{},data:data}))+'\n\t\t\t\t</div>\n\t\t\t\t<div class="pull-right">\n'+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.approvers:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:1},fn:this.program(9,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th colspan="2" style="background-color: #ffe; text-align: right;">\n'+((stack1=helpers.unless.call(depth0,depths[2]!=null?depths[2].isVirtual:depths[2],{name:"unless",hash:{},fn:this.program(12,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</th>\n\t\t</tr>\n\t\t</thead>\n"},9:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t\t\t\t<label class="radio-inline">\n\t\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Required:",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t\t</label>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.approvers:depth0,{name:"each",hash:{},fn:this.program(10,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")},10:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t\t\t\t\t<label class="radio-inline">\n\t\t\t\t\t\t\t\t<input type="radio" class="required" data-level="'+this.escapeExpression(this.lambda(depths[1]!=null?depths[1].iLevel:depths[1],depth0))+'" value="'+this.escapeExpression((helpers.math||depth0&&depth0.math||helpers.helperMissing).call(depth0,data&&data.index,1,{name:"math",hash:{},data:data}))+'" '+((stack1=(helpers.ifmathequal||depth0&&depth0.ifmathequal||helpers.helperMissing).call(depth0,data&&data.index,"+",1,depths[1]!=null?depths[1].required:depths[1],{name:"ifmathequal",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+' name="rad'+this.escapeExpression(this.lambda(depths[4]!=null?depths[4].randomID:depths[4],depth0))+"Lvl"+this.escapeExpression(this.lambda(depths[1]!=null?depths[1].iLevel:depths[1],depth0))+'" />'+this.escapeExpression((helpers.math||depth0&&depth0.math||helpers.helperMissing).call(depth0,data&&data.index,1,{name:"math",hash:{},data:data}))+"\n\t\t\t\t\t\t\t</label>\n"},12:function(depth0,helpers,partials,data){var stack1,helper;return'\t\t\t\t<div class="checkbox pull-right">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" data-level="'+this.escapeExpression((helper=(helper=helpers.index||data&&data.index)!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"index",hash:{},data:data}):helper))+'" class="type" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.type:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Use Virtual Team",{name:"s",hash:{},data:data}))+"\n\t\t\t\t</label>\n\t\t\t\t</div>\n"},14:function(depth0,helpers,partials,data){var stack1;return"\t\t<tr>\n\t\t\t<td>"+this.escapeExpression(this.lambda(depth0!=null?depth0.email:depth0,depth0))+'</td>\n\t\t\t<td>\n\t\t\t\t<select class="form-control input-sm role" data-email="'+this.escapeExpression(this.lambda(depth0!=null?depth0.email:depth0,depth0))+'">\n\t\t\t\t\t<option value="primary" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.role:depth0,"primary",{name:"ifequal",hash:{},fn:this.program(15,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Primary",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t<option value="alternate" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.role:depth0,"alternate",{name:"ifequal",hash:{},fn:this.program(15,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Alternate",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t</select>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a href="#" type="button" class="btn btn-remove-approver" data-key="'+this.escapeExpression(this.lambda(depth0!=null?depth0.key:depth0,depth0))+'">\n\t\t\t\t\t<i class="glyphicon glyphicon-trash"></i> '+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Remove",{name:"s",hash:{},data:data}))+"\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t</tr>\n"},15:function(depth0,helpers,partials,data){return'selected="selected"'},17:function(depth0,helpers,partials,data){var helper;return'\t<tr>\n\t\t<td>\n\t\t\t<input type="text" class="form-control input-sm txt_approver" placeholder="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start typing to search ...",{name:"s",hash:{},data:data}))+'" />\n\t\t</td>\n\t\t<td>\n\t\t\t<select class="form-control input-sm approver_role">\n\t\t\t\t<option value="primary">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Primary",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t<option value="alternate">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Alternate",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t</select>\n\t\t</td>\n\t\t<td>\n\t\t\t<a href="#" data-level="'+this.escapeExpression((helper=(helper=helpers.index||data&&data.index)!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"index",hash:{},data:data}):helper))+'" class="btn btn-add">\n\t\t\t\t<i class="glyphicon glyphicon-plus-sign"></i> '+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+"\n\t\t\t</a>\n\t\t</td>\n\t</tr>\n"},19:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.type:depth0,"vteam",{name:"ifequal",hash:{},fn:this.program(20,data,0),inverse:this.noop,data:data}))!=null?stack1:""},20:function(depth0,helpers,partials,data){return'\t<tr>\n\t\t<td colspan="3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Inherited from Virtual Team",{name:"s",hash:{},data:data}))+"</td>\n\t</tr>\n\t"},22:function(depth0,helpers,partials,data){return'\t<tr style="background: #eee;">\n\t\t<th colspan="3"><a href="#" class="btn-add-level">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add Another Approval Level",{name:"s",hash:{},data:data}))+"</a></th>\n\t</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<p class="text-danger">'+this.escapeExpression(this.lambda(depth0!=null?depth0.error:depth0,depth0))+'</p>\n\n<table class="table table-bordered table-shaded">\n<thead>\n<tr style="background: #eee;">\n\t<th>\n\t\t<div class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Approver",{name:"s",hash:{},data:data}))+'</div>\n\t\t<div class="pull-right">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.levels:depth0)!=null?stack1.length:stack1,1,{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t</div>\n\t\t\n\t</th>\n\t<th class="w150">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Role",{name:"s",hash:{},data:data}))+'</th>\n\t<th class="w100">&nbsp;</th>\n</tr>\n</thead>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.levels:depth0,{name:"each",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showAddAnotherLevel:depth0,{name:"if",hash:{},fn:this.program(22,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"</table>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/templates/leave/ApprovalDef",t);return t})
;define("admin/views/leave/ApprovalDef",["jquery","underscore","appogee","hbs!admin/templates/leave/ApprovalDef","jquery.appogee.userPicker"],function($,_,appogee,tmpl){"use strict";var S,R={errorNoApproverTitle:"No Approver Selected",errorNoApproverMsg:"Please select an approver.",errorApproverExistsTitle:"Approver already added",errorApproverExistsMsg:"The Approver {approver_email} has already been added to this approval flow.",confirmSwitchTypeTitle:"Switch Type?",confirmSwitchTypeMsg1:"This will inherit the approval flow as defined on each users Virtual Team into Level {level}.",confirmSwitchTypeMsg2:"Any current Level {level} approvers will be removed.",confirmSwitchTypeMsg3:"Do you wish to continue?",errorNoApprovers:"At least 1 approver must be defined",errorApproverMinimum:"Level {level} must have at least {required} Primary Approver",errorApproverMinimumPlural:"Level {level} must have at least {required} Primary Approvers"};var APPROVER_ROLE_PRIMARY="primary";var APPROVER_ROLE_ALTERNATIVE="alternate";var TYPE_TEAM="team";var TYPE_VIRTUAL_TEAM="vteam";var ApprovalView=function($container,approvalDef,isVirtual,aduKey){S=appogee.getStrings("ApprovalDef",R);if(!approvalDef){approvalDef=[]}this.levels=approvalDef;this.$container=$container;this.isVirtual=isVirtual;this.aduKey=aduKey;this.randomID=appogee.util.randomString(6);this.eventHandlers={};this.aouPath=null};ApprovalView.prototype.addEventHandler=function(event,handler){if(!(event in this.eventHandlers)){this.eventHandlers[event]=[]}this.eventHandlers[event].push(handler)};ApprovalView.prototype.fireEvent=function(event){if(event in this.eventHandlers){var args=[];if(arguments.length>1){args=_.rest(arguments,1)}$.each(this.eventHandlers[event],function(i,handler){handler.apply(this,args)})}};ApprovalView.prototype.render=function(){var keys=this.listApproverKeys();if(this.levels.length===0){this.levels.push({type:TYPE_TEAM,approvers:[],required:1})}var approvalDef={showAddAnotherLevel:this.levels[this.levels.length-1].approvers.length>0||this.levels[this.levels.length-1].type==TYPE_VIRTUAL_TEAM,levels:this.levels,error:this.getInvalidMessage(),isVirtual:this.isVirtual,randomID:this.randomID};this.$container.html(tmpl(approvalDef));var userPickerParams={status:["joining","active"]};if(this.aduKey){userPickerParams["aduKey"]=this.aduKey;userPickerParams["aduTraverse"]="up"}if(this.aouPath){userPickerParams.aouPath=this.aouPath;userPickerParams.aouRec=-1}this.$container.find(".txt_approver").userPicker({params:userPickerParams});var me=this;this.$container.find("a.btn-add").click(function(e){e.preventDefault();var level=parseInt($(this).data("level"));me.add(this,level)});this.$container.find("a.btn-add-level").click(function(e){e.preventDefault();me.addLevel()});this.$container.find("a.btn-remove-approver").click(function(e){e.preventDefault();var approverKey=$(this).data("key");me.remove(approverKey)});this.$container.find("select.role").change(function(){var email=$(this).data("email");me.updateRole(email,this.value);me.render()});this.$container.find('input[type="checkbox"].type').change(function(){var level=$(this).data("level");me.toggleType(level)});this.$container.find('input[type="radio"].required').change(function(){var level=parseInt($(this).data("level"));me.setRequired(level,this.value)})};ApprovalView.prototype.listApproverKeys=function(){var keys=[];$.each(this.levels,function(){keys=keys.concat(_.pluck(this.approvers,"key"))});return keys};ApprovalView.prototype.listApprovers=function(){var approvers=[];$.each(this.levels,function(){$.each(this.approvers,function(){approvers.push({key:this.key,email:this.email})})});return approvers};ApprovalView.prototype.add=function(ob,level){var ddlApprover=$(ob).parent().parent().find(".approver");var txtApprover=$(ob).parent().parent().find(".txt_approver");var ddlRole=$(ob).parent().parent().find(".approver_role");var approverKey=txtApprover.userPicker("getKey");var approverEmail=txtApprover.userPicker("getEmail");var role=ddlRole.val();if(!approverKey){appogee.valert(S.errorNoApprover);return}if(this.listApproverKeys().indexOf(approverKey)>-1){appogee.valert(S.get("errorApproverExists",{approver_email:approverEmail}));return}var approver={key:approverKey,email:approverEmail,role:role};if(this.levels.length===0){this.levels.push({type:TYPE_TEAM,approvers:[],required:1})}this.levels[level].approvers.push(approver);if(this.levels[level].approvers.length==1){this.levels[level].required=1}this.fireEvent("add",approver);this.render()};ApprovalView.prototype.remove=function(key){var me=this;var doBreak=false;$.each(this.levels,function(iLevel,level){$.each(level.approvers,function(iApprover,approver){if(approver.key==key){level.approvers.splice(iApprover,1);if(level.approvers.length===0){me.levels.splice(iLevel,1);doBreak=true}return false}});if(doBreak){return false}});$.each(this.levels,function(iLevel,level){if(level.required>level.approvers.length){level.required=Math.max(1,level.approvers.length)}});this.render()};ApprovalView.prototype.updateRole=function(email,role){$.each(this.levels,function(iLevel,level){$.each(level.approvers,function(iApprover,approver){if(approver.email==email){approver.role=role}})})};ApprovalView.prototype.toggleType=function(level){var currentType=this.levels[level].type;if(currentType==TYPE_TEAM){var me=this;var msg=S.get("confirmSwitchType",{level:level+1});appogee.confirm(msg,function(){me.levels[level].type=TYPE_VIRTUAL_TEAM;me.levels[level].approvers=[];me.render()})}else{this.levels[level].type=TYPE_TEAM;this.render()}};ApprovalView.prototype.setRequired=function(level,required){this.levels[level].required=parseInt(required);this.render()};ApprovalView.prototype.addLevel=function(){this.levels.push({type:TYPE_TEAM,approvers:[],required:1});this.render()};ApprovalView.prototype.isValid=function(emptyOk){return this.getInvalidMessage(emptyOk)===null};ApprovalView.prototype.getInvalidMessage=function(emptyOk){var msg=null;if(!this.isVirtual&&!emptyOk){var approvers=this.listApprovers();if(approvers.length===0){return S.errorNoApprovers}}$.each(this.levels,function(iLevel,level){if(level.approvers.length){var primaryApprovers=_.where(level.approvers,{role:APPROVER_ROLE_PRIMARY});if(primaryApprovers.length<level.required){if(level.required==1){msg=S.errorApproverMinimum.format({level:iLevel+1,required:level.required})}else{msg=S.errorApproverMinimumPlural.format({level:iLevel+1,required:level.required})}return false}}});return msg};ApprovalView.prototype.getDef=function(){for(var i=this.levels.length-1;i>=0;i--){if(this.levels[i].type==TYPE_TEAM&&this.levels[i].approvers.length===0){this.levels.splice(i,1)}}return this.levels};return ApprovalView});define("hbs!admin/templates/ManagersView",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal","templates/helpers/if_gt"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Role",{name:"s",hash:{},data:data}))+"</th>\n"},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"<tr>\n\t<td>"+this.escapeExpression(this.lambda(depth0!=null?depth0.email:depth0,depth0))+"</td>\n"+((stack1=helpers.unless.call(depth0,depths[1]!=null?depths[1].readerOnly:depths[1],{name:"unless",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t<td class="colPrimary text-center">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.primary:depth0,{name:"if",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.program(9,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t</td>\n\t<td class="text-center">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.primary:depth0,{name:"if",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.program(13,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t</td>\n</tr>\n"},4:function(depth0,helpers,partials,data){var stack1;return'\t<td>\n\t\t<select class="form-control input-sm role" data-key="'+this.escapeExpression(this.lambda(depth0!=null?depth0.key:depth0,depth0))+'">\n\t\t\t<option value="0" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.role:depth0,0,{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reader",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t<option value="1" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.role:depth0,1,{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Editor",{name:"s",hash:{},data:data}))+"</option>\n\t\t</select>\n\t</td>\n"},5:function(depth0,helpers,partials,data){return'selected="selected"'},7:function(depth0,helpers,partials,data){return'\t\t\t<span class="btn btn-sm btn-primary alert-success nohover w-min-100">\n\t\t\t\t<i class="glyphicon glyphicon-star"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Primary",{name:"s",hash:{},data:data}))+"\n\t\t\t</span>\n"},9:function(depth0,helpers,partials,data){return'\t\t\t<button type="button" class="btn btn-sm btn-default btnPrimary w-min-100" data-key="'+this.escapeExpression(this.lambda(depth0!=null?depth0.key:depth0,depth0))+'">\n\t\t\t\t<i class="glyphicon glyphicon-star-empty"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Set Primary",{name:"s",hash:{},data:data}))+"\n\t\t\t</button>\n"},11:function(depth0,helpers,partials,data){return"\t\t\t&nbsp;\n"},13:function(depth0,helpers,partials,data){return'\t\t\t<a href="javascript:void(0);" type="button" class="btn btn-remove-manager" data-key="'+this.escapeExpression(this.lambda(depth0!=null?depth0.key:depth0,depth0))+'">\n\t\t\t\t<i class="glyphicon glyphicon-trash"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Remove",{name:"s",hash:{},data:data}))+"\n\t\t\t</a>\n"},15:function(depth0,helpers,partials,data){var stack1;return"\t<td>\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.managers:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(16,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n"},16:function(depth0,helpers,partials,data){return'\t\t<select class="form-control input-sm role">\n\t\t\t<option value="0">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reader",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t<option value="1">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Editor",{name:"s",hash:{},data:data}))+"</option>\n\t\t</select>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<p>\n\t<a href="javascript: void(0);" id="btnManagerHelp">\n\t\t<i class="glyphicon glyphicon-question-sign"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Help",{name:"s",hash:{},data:data}))+'\n\t</a>\n</p>\n\t\n<div class="alert alert-info" id="managerHelpContainer">\n\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"<p>Managers have access to all sections under the <strong>Team Manager</strong> section of the application.</p>\n\t\t <p>Each manager can be configured with either the <strong>Reader</strong> or <strong>Editor</strong> role, which gives them read or edit access to the data. Note that in order to edit specific fields, field level security must also be configured from the Field Configuration page.</p>\n\t\t <p>The Primary Manager will be represented on the Org Chart for this team, and be referred to as the manager for each Employee in the team.</p>",{name:"s",hash:{},data:data}))+'\n\t<div class="text-right">\n\t\t<a href="https://help.appogeehr.com/support/solutions/articles/22000104012" target="_FRESHDESK">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Click here for further information",{name:"s",hash:{},data:data}))+'</a>\n\t</div>\n</div>\n\n<table class="table table-bordered table-shaded view">\n<thead>\n<tr style="background: #eee;">\n\t<th>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Manager",{name:"s",hash:{},data:data}))+"</th>\n"+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.readerOnly:depth0,{name:"unless",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t<th class="w150">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Primary",{name:"s",hash:{},data:data}))+'</th>\n\t<th class="w100">&nbsp;</th>\n</tr>\n</thead>\n<tbody>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.managers:depth0,{name:"each",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'</tbody>\n<tfoot>\n<tr>\n\t<td>\n\t\t<input type="text" class="form-control input-sm txt_manager" placeholder="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start typing to search ...",{name:"s",hash:{},data:data}))+'" />\n\t</td>\n'+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.readerOnly:depth0,{name:"unless",hash:{},fn:this.program(15,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t<td>&nbsp;</td>\n\t<td class="text-center">\n\t\t<a href="javascript:void(0);" class="btn btn-add">\n\t\t\t<i class="glyphicon glyphicon-plus-sign"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+"\n\t\t</a>\n\t</td>\n</tr>\n</tfoot>\n</table>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/templates/ManagersView",t);return t});define("admin/views/ManagersView",["jquery","underscore","appogee","hbs!admin/templates/ManagersView","jquery.appogee.userPicker"],function($,_,appogee,tmpl){"use strict";var S,R={errorNoManagerTitle:"No Manager Selected",errorNoManagerMsg:"Please select a manager by searching in the textbox, then selecting a search result.",errorManagerExistsTitle:"Manager already added",errorManagerExistsMsg:"The Manager {manager_email} has already been added."};var ROLE_READER=0;var ROLE_EDITOR=1;var ManagersView=function($container,team){S=appogee.getStrings("ManagersView",R);this.$container=$container;this.team=team;this.readerOnly=false;if(this.team.type=="vteam"){this.readerOnly=true}this._composeManagers()};ManagersView.prototype._composeManagers=function(){this.managers=[];var i=0;if(this.team.readers){for(i=0;i<this.team.readers.length;i++){var primary=this.team.manager&&this.team.manager.key==this.team.readers[i].key;this.managers.push({email:this.team.readers[i].email,key:this.team.readers[i].key,role:0,primary:primary})}}if(this.team.editors){for(i=0;i<this.team.editors.length;i++){for(var j=0;j<this.managers.length;j++){if(this.team.editors[i].key==this.managers[j].key){this.managers[j].role=ROLE_EDITOR;break}}}}};ManagersView.prototype.getManagers=function(){var manager=null;var readers=[];var editors=[];for(var i=0;i<this.managers.length;i++){readers.push({key:this.managers[i].key});if(this.managers[i].role===ROLE_EDITOR){editors.push({key:this.managers[i].key})}if(this.managers[i].primary){manager={key:this.managers[i].key}}}return{manager:manager,readers:readers,editors:editors}};ManagersView.prototype.render=function(){var me=this;var data={managers:this.managers,readerOnly:this.readerOnly};this.$container.html(tmpl(data));$("#managerHelpContainer").toggle(this.managers.length===0);$("#btnManagerHelp").parent().toggle(this.managers.length>0);$("#btnManagerHelp").click(function(){$(this).parent().hide();$("#managerHelpContainer").toggle()});this.$container.find(".txt_manager").userPicker({params:{status:["joining","active"],aduKey:this.team.adu.key,aduTraverse:"up"}});this.$container.find("a.btn-add").click(function(e){e.preventDefault();me.doAdd(this)});this.$container.find("a.btn-remove-manager").click(function(e){e.preventDefault();me.remove($(this).data("key"))});this.$container.find("select.role").change(function(){me.updateRole($(this).data("key"),this.value)});this.$container.find(".btnPrimary").click(function(){me.setPrimary($(this).data("key"))})};ManagersView.prototype.doAdd=function(ob){var txtManager=$(ob).parent().parent().find(".txt_manager");var ddlRole=$(ob).parent().parent().find(".role");var managerKey=txtManager.userPicker("getKey");var managerEmail=txtManager.userPicker("getEmail");var role=ROLE_READER;if(!this.readerOnly){role=parseInt(ddlRole.val())}if(!managerKey){appogee.valert(S.errorNoManager);return}var existingKeys=_.pluck(this.managers,"key");if(existingKeys.indexOf(managerKey)>-1){appogee.valert(S.get("errorManagerExists",{manager_email:managerEmail}));return}this.add(managerKey,managerEmail,role)};ManagersView.prototype.byKey=function(key){return _.findWhere(this.managers,{key:key})};ManagersView.prototype.add=function(key,email,role){var manager=this.byKey(key);if(!manager){var primary=false;if(this.managers.length===0){primary=true;role=ROLE_EDITOR}this.managers.push({email:email,key:key,role:role,primary:primary})}else if(manager.role<role){manager.role=role}this.render()};ManagersView.prototype.remove=function(key){for(var i=this.managers.length-1;i>=0;i--){if(this.managers[i].key==key){this.managers.splice(i,1);break}}this.render()};ManagersView.prototype.updateRole=function(key,role){$.each(this.managers,function(){if(this.key==key){this.role=parseInt(role)}})};ManagersView.prototype.setPrimary=function(key){$.each(this.managers,function(i,manager){manager.primary=false});var manager=this.byKey(key);manager.primary=true;this.render()};return ManagersView});define("hbs!admin/templates/MembersView",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<th class="w100">&nbsp;</th>\n'},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'<tr data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">\n\t<td><a href="/admin/organisation/employee?key='+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.firstName||(depth0!=null?depth0.firstName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"firstName",hash:{},data:data}):helper))+" "+this.escapeExpression((helper=(helper=helpers.lastName||(depth0!=null?depth0.lastName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"lastName",hash:{},data:data}):helper))+"</a></td>\n\t<td>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</td>\n\t<td>"+this.escapeExpression((helper=(helper=helpers.jobTitle||(depth0!=null?depth0.jobTitle:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"jobTitle",hash:{},data:data}):helper))+"</td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depths[1]!=null?depths[1].team:depths[1])!=null?stack1.type:stack1,"vteam",{name:"ifequal",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"</tr>\n"},4:function(depth0,helpers,partials,data){return'\t<th>\n\t\t<button class="btn btn-sm btn-delete btn-default btnRemove">\n\t\t\t<i class="glyphicon glyphicon-remove"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Remove",{name:"s",hash:{},data:data}))+"\n\t\t</button>\n\t</th>\n"},6:function(depth0,helpers,partials,data){var stack1;return'<tr>\n\t<td colspan="'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.team:depth0)!=null?stack1.type:stack1,"vteam",{name:"ifequal",hash:{},fn:this.program(7,data,0),inverse:this.program(9,data,0),data:data}))!=null?stack1:"")+'" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No Members Found",{name:"s",hash:{},data:data}))+"</td>\n</tr>\n"},7:function(depth0,helpers,partials,data){return"4"},9:function(depth0,helpers,partials,data){return"3"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<table class="table table-bordered table-shaded table-condensed">\n<thead>\n<tr>\n\t<th>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee Name",{name:"s",hash:{},data:data}))+"</th>\n\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email",{name:"s",hash:{},data:data}))+"</th>\n\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Job Title",{name:"s",hash:{},data:data}))+"</th>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.team:depth0)!=null?stack1.type:stack1,"vteam",{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"</tr>\n</thead>\n<tbody>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.members:depth0,{name:"each",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.program(6,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"</tbody>\n</table>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/templates/MembersView",t);return t});define("admin/views/MembersView",["jquery","underscore","appogee","hbs!admin/templates/MembersView"],function($,_,appogee,tmpl){"use strict";var S,R={confirmRemoveMemberTitle:"Confirm Remove Member",confirmRemoveMemberMsg1:"This will remove {member_email} from the team.",confirmRemoveMemberMsg2:"Do you wish to continue?",alertRemoveMemberSuccessTitle:"Team Member Removed",alertRemoveMemberSuccessMsg:"The employee has been removed from the team."};var View=function($container,team,members){S=appogee.getStrings("MembersView",R);this.$container=$container;this.team=team;this.members=members};View.prototype.fetch=function(){var _this113=this;var url=null;if(this.team.type=="team"){url="/teams/{0}/members".format(this.team.key)}else{url="/vteams/{0}/members".format(this.team.key)}appogee.api.get(url,function(response){_this113.members=response.items;_this113.render()})};View.prototype.render=function(){var _this114=this;var data={team:this.team,members:this.members};this.$container.html(tmpl(data));this.$container.find(".btnRemove").click(function(e){var key=$(e.currentTarget).closest("tr").data("key");var member=_.findWhere(_this114.members,{key:key});_this114.remove(member)})};View.prototype.remove=function(member){var _this115=this;var confirmRemoveMemberMsg1=S.confirmRemoveMemberMsg1.replace("{member_email}","<strong>{member_email}</strong>");var msg=appogee.util.joinWithPs(confirmRemoveMemberMsg1.format({member_email:member.email}),S.confirmRemoveMemberMsg2);appogee.confirm(S.confirmRemoveMemberTitle,msg,function(){var body={teamKey:_this115.key,employeeKey:member.key};$("#btnAddMember,#txtAddMember").attr("disabled",true);appogee.xhr.post("/admin/org/vteams/remove_member",body,function(){$("#btnAddMember,#txtAddMember").attr("disabled",false);appogee.alert(S.alertRemoveMemberSuccessTitle,S.alertRemoveMemberSuccessMsg);_this115.fetch()},{artificialDelay:true})})};return View});define("hbs!templates/audit/Template",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"\t<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Audit Log",{name:"s",hash:{},data:data}))+"</h4>\n"},3:function(depth0,helpers,partials,data){var stack1;return"\t<div "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showClose:depth0,{name:"if",hash:{},fn:this.program(4,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'>\n\t\t<div class="pull-left">\n\t\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Audit Log",{name:"s",hash:{},data:data}))+"</h4>\n\t\t</div>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showClose:depth0,{name:"if",hash:{},fn:this.program(6,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<div class="clearfix"></div>\n\t\n\t\t<div class="row">\n\t\t\t<div class="col-sm-4">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.filterSet:depth0,"employee-profile",{name:"ifequal",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.filterSet:depth0,"employee-record",{name:"ifequal",hash:{},fn:this.program(10,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.filterSet:depth0,"company-document",{name:"ifequal",hash:{},fn:this.program(12,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</div>\n\t\t</div>\n\t</div>\n"},4:function(depth0,helpers,partials,data){return'class="audit_header"'},6:function(depth0,helpers,partials,data){return'\t\t<div class="pull-right">\n\t\t\t<button type="button" class="close" title="Collapse Audit Log" id="btnCloseAudit">\n\t\t\t\t<span aria-hidden="true">Ã</span>\n\t\t\t</button>\n\t\t</div>\n'},8:function(depth0,helpers,partials,data){return'\t\t\t\t<select class="form-control input-sm ddlAuditType">\n\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select Activity -",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee Profile",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t\t<option value="1000">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="1001">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t\x3c!-- <option value="1002">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option> --\x3e\n\t\t\t\t\t\t\x3c!-- <option value="1003">Restore</option> --\x3e\n\t\t\t\t\t\t\n\t\t\t\t\t\t<option value="1012">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Xero Sync",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee Profile (Reads)",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t\t<option value="1004">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"View Employee Profile",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="1005">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"View Masked Field",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Actions",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t\t<option value="1006">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Employee Status",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="1007">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Team",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="1008">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Email",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="1017">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Roles",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<option value="1009">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enable Self Service",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="1010">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enable Self Service Failure",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="1011">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disable Self Service",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Job History",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t    <option value="1501">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1502">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1503">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Dependents",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t    <option value="1511">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1512">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1513">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next Of Kin",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t    <option value="1521">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1522">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data
}))+'</option>\n\t\t\t\t\t    <option value="1523">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Emergency Contacts",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t    <option value="1531">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1532">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1533">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Learning Items",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t    <option value="1541">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1542">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1543">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Right to Work",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t    <option value="1551">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1552">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1553">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disabilities",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t    <option value="1561">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1562">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1563">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disciplines",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t    <option value="1571">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1572">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1573">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Benefits",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t    <option value="1581">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1582">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1583">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Assets",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t    <option value="1591">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Add",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1592">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t    <option value="1593">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+"</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t</select>\n"},10:function(depth0,helpers,partials,data){return'\t\t\t\t<select class="form-control input-sm ddlAuditType">\n\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select Activity -",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee Record",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t\t<option value="2001">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="2002">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="2003">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Acknowledgement",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t\t<option value="2004">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Request",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="2005">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Acknowledge",{name:"s",hash:{},data:data}))+"</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t</select>\n"},12:function(depth0,helpers,partials,data){return'\t\t\t\t<select class="form-control input-sm ddlAuditType">\n\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select Activity -",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Company Document",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t\t<option value="2501">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="2502">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Update",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="2503">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Delete",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Acknowledgement",{name:"s",hash:{},data:data}))+'">\n\t\t\t\t\t\t<option value="2504">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Request",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t\t\t<option value="2505">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Acknowledge",{name:"s",hash:{},data:data}))+"</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t</select>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return((stack1=helpers.unless.call(depth0,depth0!=null?depth0.filterSet:depth0,{name:"unless",hash:{},fn:this.program(1,data,0),inverse:this.program(3,data,0),data:data}))!=null?stack1:"")+'<div class="audit_view_container"></div>'},useData:true});Handlebars.registerPartial("templates/audit/Template",t);return t});define("templates/helpers/if_inrange",["hbs/handlebars"],function(Handlebars){"use strict";function ifInRange(val,min,max,options){var response=null;if(val>=min&&val<=max){response=options.fn(this)}else{response=options.inverse(this)}return response}Handlebars.registerHelper("if_inrange",ifInRange);return ifInRange});define("hbs!templates/audit/Detail",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/s","templates/helpers/ifanyequal","templates/helpers/if_inrange"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,1e3,{name:"ifequal",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,1005,{name:"ifequal",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,1007,{name:"ifequal",hash:{},fn:this.program(13,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,1008,{name:"ifequal",hash:{},fn:this.program(15,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,1020,{name:"ifequal",hash:{},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,1017,{name:"ifequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,1018,{name:"ifequal",hash:{},fn:this.program(21,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,1019,{name:"ifequal",hash:{},fn:this.program(23,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,1016,{name:"ifequal",hash:{},fn:this.program(25,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifanyequal||depth0&&depth0.ifanyequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,2004,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,2504,{name:"ifanyequal",hash:{},fn:this.program(27,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifanyequal||depth0&&depth0.ifanyequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,2005,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,2505,{name:"ifanyequal",hash:{},fn:this.program(29,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.id:stack1,{name:"if",hash:{},fn:this.program(31,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,1013,{name:"ifequal",hash:{},fn:this.program(33,data,0),inverse:this.program(52,data,0),data:data}))!=null?stack1:"")},2:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="audit_value">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.method:stack1,"manual",{name:"ifequal",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.method:stack1,"csv",{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.method:stack1,"gapps",{name:"ifequal",hash:{},fn:this.program(7,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.method:stack1,"xero",{name:"ifequal",hash:{},fn:this.program(9,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</div>\n"},3:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Created via Manual Input",{name:"s",hash:{},data:data}))+"\n"},5:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Created via CSV Import",{name:"s",hash:{},data:data}))+"\n"},7:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Created via G Suite Import",{name:"s",hash:{},data:data}))+"\n"},9:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Created via Xero Import",{name:"s",hash:{},data:data}))+"\n"},11:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="audit_value">'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.fieldLabel:stack1,depth0))+"</div>\n"},13:function(depth0,helpers,partials,data){var stack1;return'\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<th style="width: 20%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Field",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed From",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed To",{name:"s",hash:{},data:data}))+"</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</td>\n\t\t\t<td><a href="/hr/team?key='+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1)!=null?stack1.key:stack1,depth0))+'">'+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1)!=null?stack1.name:stack1,depth0))+'</a></td>\n\t\t\t<td><a href="/hr/team?key='+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1)!=null?stack1.key:stack1,depth0))+'">'+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1)!=null?stack1.name:stack1,depth0))+"</a></td>\n\t\t</tr>\n\t\t</tbody>\n\t\t</table>\n"},15:function(depth0,helpers,partials,data){var stack1;return'\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<th style="width: 20%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Field",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed From",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed To",{name:"s",hash:{},data:data}))+"</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email",{name:"s",hash:{},data:data}))+'</td>\n\t\t\t<td><a href="/hr/team?key='+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1)!=null?stack1.key:stack1,depth0))+'">'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1,depth0))+'</a></td>\n\t\t\t<td><a href="/hr/team?key='+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1)!=null?stack1.key:stack1,depth0))+'">'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1,depth0))+"</a></td>\n\t\t</tr>\n\t\t</tbody>\n\t\t</table>\n"},17:function(depth0,helpers,partials,data){var stack1;return'\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<th style="width: 20%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Field",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed From",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed To",{name:"s",hash:{},data:data}))+"</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Team",{name:"s",hash:{},data:data}))+'</td>\n\t\t\t<td><a href="/hr/team?key='+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1)!=null?stack1.key:stack1,depth0))+'">'+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1)!=null?stack1.name:stack1,depth0))+'</a></td>\n\t\t\t<td><a href="/hr/team?key='+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1)!=null?stack1.key:stack1,depth0))+'">'+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1)!=null?stack1.name:stack1,depth0))+"</a></td>\n\t\t</tr>\n\t\t</tbody>\n\t\t</table>\n"},19:function(depth0,helpers,partials,data){var stack1;return'\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<th style="width: 20%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Field",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed From",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed To",{name:"s",hash:{},data:data}))+"</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Roles",{name:"s",hash:{},data:data}))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1,depth0))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1,depth0))+"</td>\n\t\t</tr>\n\t\t</tbody>\n\t\t</table>\n"},21:function(depth0,helpers,partials,data){var stack1;return'\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<th style="width: 20%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Field",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed From",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed To",{name:"s",hash:{},data:data}))+"</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Login",{name:"s",hash:{},data:data}))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1,depth0))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1,depth0))+"</td>\n\t\t</tr>\n\t\t</tbody>\n\t\t</table>\n"},23:function(depth0,helpers,partials,data){var stack1;return'\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<th style="width: 20%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Field",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed From",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed To",{name:"s",hash:{},data:data}))+"</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile",{name:"s",hash:{},data:data}))+'</td>\n\t\t\t<td><a href="/admin/leave-profile?key='+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1)!=null?stack1.key:stack1,depth0))+'">'+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1)!=null?stack1.name:stack1,depth0))+'</a></td>\n\t\t\t<td><a href="/admin/leave-profile?key='+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1)!=null?stack1.key:stack1,depth0))+'">'+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1)!=null?stack1.name:stack1,depth0))+"</a></td>\n\t\t</tr>\n\t\t</tbody>\n\t\t</table>\n"},25:function(depth0,helpers,partials,data){var stack1;return'\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<th style="width: 20%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Field",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed From",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 40%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed To",{name:"s",hash:{},data:data}))+"</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"ADU",{name:"s",hash:{},data:data}))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.from:stack1)!=null?stack1.path:stack1,depth0))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.to:stack1)!=null?stack1.path:stack1,depth0))+"</td>\n\t\t</tr>\n\t\t</tbody>\n\t\t</table>\n"},27:function(depth0,helpers,partials,data){var stack1;return'\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<td style="width: 20%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Request For",{name:"s",hash:{},data:data}))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.request_for:stack1)!=null?stack1.email:stack1,depth0))+"</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Due Date",{name:"s",hash:{},data:data}))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.due_date:stack1,depth0))+"</td>\n\t\t</tr>\n\t\t</tbody>\n\t\t</table>\n"},29:function(depth0,helpers,partials,data){var stack1;return'\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<td style="width: 20%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Acknowledged By",{name:"s",hash:{},data:data}))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.acknowledged_by:stack1)!=null?stack1.email:stack1,depth0))+"</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Comments",{name:"s",hash:{},data:data}))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.comments:stack1,depth0))+"</td>\n\t\t</tr>\n\t\t</tbody>\n\t\t</table>\n"},31:function(depth0,helpers,partials,data){var stack1;return'\t\x3c!-- \n\t<div class="audit_value">ID: '+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.id:stack1,depth0))+"</div>\n\t--\x3e\n"},33:function(depth0,helpers,partials,data){var stack1;return"\t\t\n"+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.msgs:stack1,{name:"if",hash:{},fn:this.program(34,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\n\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<th style="width: 16%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Profile",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 20%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Field",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 32%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed From",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 32%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed To",{name:"s",hash:{},data:data}))+"</th>\n\t\t</tr>\n"+((stack1=helpers.each.call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.fields:stack1,{name:"each",hash:{},fn:this.program(37,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tbody>\n\t\t</table>\n"},34:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="audit_value">\n\t\t<ul>\n'+((stack1=helpers.each.call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.msgs:stack1,{name:"each",hash:{},fn:this.program(35,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</ul>\n\t\t</div>\n"},35:function(depth0,helpers,partials,data){return"\t\t\t\t<li>"+this.escapeExpression(this.lambda(depth0,depth0))+"</li>\n"},37:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0!=null?depth0.hidden:depth0,{name:"unless",hash:{},fn:this.program(38,data,0),inverse:this.noop,data:data}))!=null?stack1:""},38:function(depth0,helpers,partials,data){var stack1,helper;return"\t\t<tr>\n\t\t\t<td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.type:depth0,"hr",{name:"ifequal",hash:{},fn:this.program(39,data,0),inverse:this.program(41,data,0),data:data}))!=null?stack1:"")+"\n\t\t\t</td>\n\t\t\t<td>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.label:depth0,{name:"if",hash:{},fn:this.program(44,data,0),inverse:this.program(46,data,0),data:data}))!=null?stack1:"")+"\n\t\t\t</td>\n\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.changed_from||(depth0!=null?depth0.changed_from:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"changed_from",hash:{},data:data}):helper))+"</td>\n\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.changed_to||(depth0!=null?depth0.changed_to:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"changed_to",hash:{},data:data}):helper))+"</td>\n\t\t</tr>\n"},39:function(depth0,helpers,partials,data){return"\t\t\t\t\tAppogee HR\n\t\t\t\t"},41:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.type:depth0,"xero",{name:"ifequal",hash:{},fn:this.program(42,data,0),inverse:this.noop,data:data}))!=null?stack1:""},42:function(depth0,helpers,partials,data){return"\n\t\t\t\t\tXero\n\t\t\t\t"},44:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.label||(depth0!=null?depth0.label:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{
name:"label",hash:{},data:data}):helper))+"\n\t\t\t\t"},46:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.field_name:depth0,{name:"if",hash:{},fn:this.program(47,data,0),inverse:this.program(49,data,0),data:data}))!=null?stack1:""},47:function(depth0,helpers,partials,data){var helper;return"\n\t\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.field_name||(depth0!=null?depth0.field_name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"field_name",hash:{},data:data}):helper))+"\n\t\t\t\t"},49:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.field:depth0,{name:"if",hash:{},fn:this.program(50,data,0),inverse:this.noop,data:data}))!=null?stack1:""},50:function(depth0,helpers,partials,data){var helper;return"\n\t\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.field||(depth0!=null?depth0.field:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"field",hash:{},data:data}):helper))+"\n\t\t\t\t"},52:function(depth0,helpers,partials,data){var stack1;return((stack1=(helpers.if_inrange||depth0&&depth0.if_inrange||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,2104,2107,{name:"if_inrange",hash:{},fn:this.program(53,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.fields:stack1,{name:"if",hash:{},fn:this.program(55,data,0),inverse:this.noop,data:data}))!=null?stack1:"")},53:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="audit_value">\n\t\t\t<strong>Field: </strong>'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.field_label:stack1,depth0))+" \n\t\t</div>\n"},55:function(depth0,helpers,partials,data){var stack1;return'\t\t<table class="table table-responsive table-bordered table-shaded table-condensed table-audit-detail">\n\t\t<tbody>\n\t\t<tr>\n\t\t\t<th style="width: 30%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Field",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 35%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed From",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th style="width: 35%;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Changed To",{name:"s",hash:{},data:data}))+"</th>\n\t\t</tr>\n"+((stack1=helpers.each.call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.detail:stack1)!=null?stack1.fields:stack1,{name:"each",hash:{},fn:this.program(56,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tbody>\n\t\t</table>\n"},56:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0!=null?depth0.hidden:depth0,{name:"unless",hash:{},fn:this.program(57,data,0),inverse:this.noop,data:data}))!=null?stack1:""},57:function(depth0,helpers,partials,data){var stack1,helper;return"\t\t<tr>\n\t\t\t<td>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.label:depth0,{name:"if",hash:{},fn:this.program(44,data,0),inverse:this.program(46,data,0),data:data}))!=null?stack1:"")+"\n\t\t\t</td>\n\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.changed_from||(depth0!=null?depth0.changed_from:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"changed_from",hash:{},data:data}):helper))+"</td>\n\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.changed_to||(depth0!=null?depth0.changed_to:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"changed_to",hash:{},data:data}):helper))+"</td>\n\t\t</tr>\n"},59:function(depth0,helpers,partials,data){var stack1;return'\t<div class="audit-comments">\n\t\t<div><strong>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Comments",{name:"s",hash:{},data:data}))+"</strong></div>\n\t\t"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.log:depth0)!=null?stack1.comments:stack1,depth0))+"\n\t</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showDetail:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.comments:stack1,{name:"if",hash:{},fn:this.program(59,data,0),inverse:this.noop,data:data}))!=null?stack1:"")},useData:true});Handlebars.registerPartial("templates/audit/Detail",t);return t});define("views/audit/EmbeddedAuditView",["jquery","hbs/handlebars","appogee","hbs!templates/audit/Template","hbs!templates/audit/Detail"],function($,Handlebars,appogee,tmpl,tmplDetail){"use strict";var P1_MIGRATED_AUDIT=1;var S,R={colUserDate:"User / Date",colDate:"Date",colUser:"User",systemOperation:"System Operation",unknownUser:"Unknown User",colActivity:"Activity",employeeTarget:"Employee / Target",colTarget:"Target",colEmployee:"Employee",colDetailComments:"Detail / Comments"};var View=function($container,targetKey,eventTypeId,options){S=appogee.getStrings("EmbeddedAuditView",R);options=$.extend({showTarget:false,showProfile:false,combineDateUser:false},options||{});this.$container=$container;this.filterSet=null;this.targetKey=targetKey;this.eventTypeId=eventTypeId;this.onCloseHandler=null;this.showTarget=options.showTarget;this.showProfile=options.showProfile;this.combineDateUser=options.combineDateUser;this.currentUser=appogee.getCurrentUser()};View.prototype.setFilterSet=function(filterSet){this.filterSet=filterSet};View.prototype.render=function(){var data={filterSet:this.filterSet};if(this.onCloseHandler){data.showClose=true}this.$container.html(tmpl(data));this.$viewContainer=this.$container.find(".audit_view_container");this.auditView=new appogee.View(this.$viewContainer,"audits",{showSearch:false,cssClass:"audit"});if(this.targetKey){this.auditView.addDefaultKeyFilter("target_key",this.targetKey)}if(this.eventTypeId){this.auditView.addDefaultFilter("type_id",this.eventTypeId)}this.auditView.setDateFormatString(this.currentUser.dateFormatString);this.auditView.setDateTimeFormatString(this.currentUser.dateTimeFormatString);this.auditView.addDateTimeFormatter("timestamp");if(this.combineDateUser){this.auditView.addColumn({type:"custom",label:S.colUserDate,width:200,render:function(log){var html="";if(log.operatorType=="user"){html+="<div>"+log.operatorName+"</div>"}else if(log.operatorType=="api"){html+="<div>API: "+log.operatorName+"</div>"}else if(log.operatorType=="system"){html+="<div>"+S.systemOperation+"</div>"}else{html+="<div>"+S.unknownUser+"</div>"}html+="<div>"+log.timestamp+"</div>";return html}})}else{this.auditView.addColumn({type:"text",label:S.colDate,field:"[timestamp]",width:200});this.auditView.addColumn({type:"custom",label:S.colUser,width:200,render:function(log){if(log.operatorType=="user"){return log.operatorName}else if(log.operatorType=="api"){return"API: "+log.operatorName}else if(log.operatorType=="system"){return S.systemOperation}else{return S.unknownUser}}})}if(!this.eventTypeId){this.auditView.addColumn({type:"custom",label:S.colActivity,width:200,render:function(log){if(log.typeId==P1_MIGRATED_AUDIT){return log.detail.activity}else{return log.type}}})}if(this.showTarget&&this.showProfile){this.auditView.addColumn({type:"custom",label:S.employeeTarget,width:200,render:function(log){var html="";if(log.employee){if(log.employee.key==log.target.key){html='<a href="{0}">{1}</a>'.format(log.employee.key,log.employee.email)}else{var employeeLink='<a href="{0}">{1}</a>'.format(log.employee.key,log.employee.email);var targetLink='<a href="{0}">{1}</a>'.format(log.target.key,log.target.description);html="<div>"+employeeLink+"</div><div>"+targetLink+"</div>"}}else{html='<a href="{0}">{1}</a>'.format(log.target.key,log.target.description)}return new Handlebars.SafeString(html)}})}else{if(this.showTarget){this.auditView.addColumn({type:"custom",label:S.colTarget,width:200,render:function(log){if(log.typeId>=2e3&&log.typeId<2100){var index=log.target.description.indexOf(":");var email=log.target.description.substring(0,index);var docName=log.target.description.substring(index+2,log.target.description.length);return"<div>{0}</div><div>{1}</div>".format(email,docName)}else if(log.target&&log.target.description){return log.target.description}else{return""}}})}if(this.showProfile){this.auditView.addColumn({type:"text",label:S.colEmployee,field:"[employee.email]",width:200})}}this.auditView.addColumn({type:"custom",label:S.colDetailComments,className:"nopadding",render:function(log){var html=tmplDetail({showDetail:true,log:log});return html}});var me=this;this.$container.find(".ddlAuditType").change(function(){if(this.value===""){me.auditView.removeFilter("type_id")}else{me.auditView.addFilter("type_id",this.value)}});this.$container.find("#btnNamespace").click(function(){var ns=$("#txtNamespace").val();if(ns===""){me.auditView.removeFilter("ns")}else{me.auditView.addFilter("ns",ns)}});if(this.onCloseHandler){this.$container.find("#btnCloseAudit").click(function(){me.onCloseHandler()})}};View.prototype.fetch=function(){this.auditView.fetch()};View.prototype.onClose=function(handler){this.onCloseHandler=handler};return View});define("admin/org/team",["jquery","underscore","appogee","admin/views/leave/ActiveLeaveYears","admin/views/leave/ApprovalDef","admin/views/ManagersView","admin/views/MembersView","views/audit/EmbeddedAuditView","jquery.appogee.tabs"],function($,_,appogee,ActiveLeaveYears,ApprovalDef,ManagersView,MembersView,AuditView){"use strict";var S,R={alertNoEmployeeTitle:"No Employee",alertNoEmployeeMsg:"To add a member to the team, please enter their email address in the textbox, and select the employee from the options provided.",alertInvalidEmployeeTitle:"Invalid Employee",alertInvalidEmployeeMsg:"To add a member to the team, please enter their email address in the textbox, and select the employee from the options provided.",alertAlreadyMemberTitle:"Existing Member",alertAlreadyMemberMsg:"The employee is already a member of this team",confirmAddMemberTitle:"Confirm Add Member",confirmAddMemberMsg1:"This will add the member {member_email} to this team. If the user already exists in another team they will be moved.",confirmAddMemberMsg2:"Do you wish to continue?",alertAddMemberSuccessTitle:"Employee Added",alertAddMemberSuccessMsg:"The employee has been added to this team",alertDisableCalTitle:"Disabling Personal Calendar Sync",alertDisableGCalMsg:"Note: disabling G Suite Personal Calendar Sync will not remove any existing calendar entries.",alertDisableOCalMsg:"Note: disabling Office 365 Personal Calendar Sync will not remove any existing calendar entries.",alertGappsOooErrorTitle:"G Suite Integration Incomplete",alertGappsOooErrorMsg1:"Out of Office can only be enabled when G Suite Integration has been completed.",alertGappsOooErrorMsg2:'If you are an Appogee Leave Administrator, you can complete integration from the Appogee Leave Settings page by <a href="{url}">clicking here',alertGappsOooErrorMsg3:"Otherwise please contact your Appogee Leave administrator to complete integration.",errorChangeAduTitle:"Insuficient Access",errorChangeAduMsg:"You do not have access to change this teams Division",confirmChangeAduTitle:"Change Division",confirmChangeAduMsg1:"To move a Team to a different Division, please use the ADU Management tool.",confirmChangeAduMsg2:"Would you like to be redirected there now?",confirmCopyApprovalTitle:"Copy Approvals?",confirmCopyApprovalMsg1:"This will copy the approval definition. The current approval definition will be overwitten.",confirmCopyApprovalMsg2:"Do you wish to continue?",errorNoName:"Please enter a <strong>Name</strong> for this Team on the Main Details tab.",errorInvalidLeaveNotificationList:"Invalid Leave Notification List",errorInvalidSickNotifiationList:"Invalid Sickness Notification List",errorInvalidToilNotifiationList:"Invalid {toil_term} Notification List",leaveSettings:"Leave Settings",errorLeaveApprovalFlowTitle:"Leave Approval Flow Invalid",errorLeaveApprovalFlowMsg:"The Leave Approval Flow is Invalid. Please see the Leave Settings tab for further information.",sickSettings:"Sickness Settings",errorSickApprovalFlowTitle:"Sickness Approval Flow Invalid",errorSickApprovalFlowMsg:"The Sickness Approval Flow is Invalid. Please see the Sickness Settings tab for further information.",toilSettings:"{toil_term} Settings",errorToilApprovalFlowTitle:"{toil_term} Approval Flow Invalid",errorToilApprovalFlowMsg:"The {toil_term} Approval Flow is Invalid. Please see the {toil_term} Settings tab for further information.",noApprovalFlowTitle:"Approval Flow Invalid",noApprovalFlowMsg1:"An Approval Flow has not been defined on the following tabs:",noApprovalFlowMsg2:"Any members of this team will not be able to submit requests until an appropriate Approval Flow has been defined.",invalidParentTeamTitle:"Invalid Parent Team",invalidParentTeamMsg:"The Parent Team has already been defined as a child of this team. Please select a different Parent Team.",invalidNotificationEmail:"The email address <strong>{email}</strong> in the Notification List is not a valid email address. Please correct and try again.",errorDeleteTeamNoMembersTitle:"Delete Team",errorDeleteTeamNoMembersMsg:"You cannot delete a Team that has members. Please move the members to another team, then try again.",confirmDeleteTeamTitle:"Delete Team?",confirmDeleteTeamMsg1:"This will delete the Team.",confirmDeleteTeamMsg2:"Do you wish to continue?",nfyDeleting:"Deleting Team ...",nfyDeleted:"Team Deleted Successfully",alertDeletedTitle:"Team Deleted",alertDeletedMsg:"The Team has been deleted. You will now be redirected to the Teams page.",errorLeaveApproverNotManagerTitle:"Invalid Leave Approver",errorLeaveApproverNotManagerMsg1:"The following Leave Approvers are not Managers:",errorLeaveApproverNotManagerMsg2:"{approver_emails}",errorSickApproverNotManagerTitle:"Invalid Sickness Approver",errorSickApproverNotManagerMsg1:"The following Sickness Approvers are not Managers:",errorSickApproverNotManagerMsg2:"{approver_emails}",errorToilApproverNotManagerTitle:"Invalid {toil_term} Approver",errorToilApproverNotManagerMsg1:"The following {toil_term} Approvers are not Managers:",errorToilApproverNotManagerMsg2:"{approver_emails}",noParentTeam:"No Parent Team",notConfigured:"Not Configured"};var CreateScope={Self:"self",Team:"team",Manager:"managers",ADU:"adu"};var GCAL_SYNC_DETAIL_TYPE=1;var GCAL_SYNC_DETAIL_REASON=2;var GCAL_SYNC_DETAIL_APPROVAL=4;var DEFAULT_LEAVE_SETTINGS={enabled:true,requireReason:true,notificationList:[],createScope:CreateScope.Self,selfApprove:true,approvalDef:[]};var DEFAULT_SICK_SETTINGS={enabled:false,requireReason:true,notificationList:[],createScope:CreateScope.Self,selfApprove:true,approvalDef:[]};var DEFAULT_TOIL_SETTINGS={enabled:false,requireReason:true,notificationList:[],createScope:CreateScope.Self,selfApprove:true,approvalDef:[]};return{defaultStrings:R,views:{},contextHelp:true,getLoadUrls:function(){var teamUrl="/teams/{0}?projection=leave".format(this.key);var hrManagersUrl="/employees?role=hr&projection=basic";var teamsUrl="/teams?aduKey={0}&projection=basic".format(this.aduKey);return{api:[teamUrl,hrManagersUrl,teamsUrl]}},initialize:function(){S=this.S;this.key=$("#txtKey").val();this.aduKey=$("#txtAduKey").val();this.parentTeamValid=true;$("#invalidParentTeamNote").hide();this.toilTerm=appogee.getToilTerm();this.attachEvents();this.initAuditView()},onLoad:function(team,hrManagers,teams){this.team=team;this.hrManagers=hrManagers.items;this.teams=teams.items;this.team.leaveSettings=this.team.leaveSettings||DEFAULT_LEAVE_SETTINGS;this.team.leaveSettings.notificationList=this.team.leaveSettings.notificationList||[];this.team.sickSettings=this.team.sickSettings||DEFAULT_SICK_SETTINGS;this.team.sickSettings.notificationList=this.team.sickSettings.notificationList||[];this.team.toilSettings=this.team.toilSettings||DEFAULT_TOIL_SETTINGS;this.team.toilSettings.notificationList=this.team.toilSettings.notificationList||[];this.populate();var me=this;this.views.activeLeaveYears=new ActiveLeaveYears($("#activeLeaveYearContainer"),this.team.activeLeaveYears);this.views.activeLeaveYears.render();this.views.leaveApprovalDef=new ApprovalDef($("#leaveApprovalDef"),this.team.leaveSettings.approvalDef,false,this.team.adu.key);this.views.leaveApprovalDef.render();this.views.sickApprovalDef=new ApprovalDef($("#sickApprovalDef"),this.team.sickSettings.approvalDef,false,this.team.adu.key);this.views.sickApprovalDef.render();this.views.toilApprovalDef=new ApprovalDef($("#toilApprovalDef"),this.team.toilSettings.approvalDef,false,this.team.adu.key);this.views.toilApprovalDef.render();this.views.leaveApprovalDef.addEventHandler("add",function(approver){me.approverAdded("leave",approver)});this.views.sickApprovalDef.addEventHandler("add",function(approver){me.approverAdded("sick",approver)});this.views.toilApprovalDef.addEventHandler("add",function(approver){me.approverAdded("toil",approver)});this.views.managers=new ManagersView($("#managersView"),this.team);this.views.managers.render();$("#txtAddMember").userPicker({params:{status:["joining","active"],aduKey:this.team.adu.key}});this.views.members=new MembersView($("#membersView"),this.team);this.views.members.fetch()},approverAdded:function(requestType,approver){this.views.managers.add(approver.key,approver.email,0)},initAuditView:function(){this.views.audit=new AuditView($("#auditContainer"),this.key,null,{combineDateUser:true});this.views.audit.render();this.views.audit.fetch()},populate:function(){var _this116=this;$("#h2Title").html(this.team.name);$("#txtName").val(this.team.name);$("#txtDescription").val(this.team.description);var hrManagerKey="";if(this.team.hrManager&&this.team.hrManager.key){hrManagerKey=this.team.hrManager.key}appogee.ui.populateDropdown($("#ddlHrManager"),this.hrManagers,{valueFormatter:function(e){return"{0} {1}".format(e.firstName,e.lastName)},default:hrManagerKey});var parentTeamKey="";if(this.team.parent&&this.team.parent.key){parentTeamKey=this.team.parent.key}else if(this.team.parentTeamConfigured){parentTeamKey="none"}var availableParentTeams=_.filter(this.teams,function(team){return team.key!=_this116.team.key});availableParentTeams.push({key:"none",name:"("+S.noParentTeam+")"});appogee.ui.populateDropdown($("#ddlParentTeam"),availableParentTeams,{valueName:"name",defaultValue:"- "+S.notConfigured+" -",default:parentTeamKey});$("#ddlParentTeam").change(function(){_this116.checkParentTeam()});$("#chkSicknessEnabled").prop("checked",this.team.sickSettings.enabled);$("#chkToilEnabled").prop("checked",this.team.toilSettings.enabled);$("#tabSick").toggle(this.team.sickSettings.enabled);$("#tabToil").toggle(this.team.toilSettings.enabled);$("#divSickDisabledNote").toggle(!this.team.sickSettings.enabled);$("#divToilDisabledNote").toggle(!this.team.toilSettings.enabled);$("#ddlCalStartDay").val(this.team.calStartDay);$("#ddlCalAccess").val(this.team.calAccess);$("#chkLeaveRequireReason").prop("checked",this.team.leaveSettings.requireReason);$("#chkLeavePreventSelfApproval").prop("checked",!this.team.leaveSettings.selfApprove);$("#txtLeaveNotifications").val(this.team.leaveSettings.notificationList.join(","));if(this.team.leaveSettings.createScope==CreateScope.Self){$("#radLeaveCreateScopeSelf").prop("checked",true)}else if(this.team.leaveSettings.createScope==CreateScope.Manager){$("#radLeaveCreateScopeManager").prop("checked",true)}if(this.team.sickSettings.createScope==CreateScope.Self){$("#radSickCreateScopeSelf").prop("checked",true)}else if(this.team.sickSettings.createScope==CreateScope.Team){$("#radSickCreateScopeTeam").prop("checked",true)}else if(this.team.sickSettings.createScope==CreateScope.Manager){$("#radSickCreateScopeManager").prop("checked",true)}else if(this.team.sickSettings.createScope==CreateScope.ADU){$("#radSickCreateScopeAdu").prop("checked",true)}$("#chkSickRequireReason").prop("checked",this.team.sickSettings.requireReason);$("#chkSickPreventSelfApproval").prop("checked",!this.team.sickSettings.selfApprove);$("#txtSickNotifications").val(this.team.sickSettings.notificationList.join(","));if(this.team.toilSettings){$("#chkToilPreventSelfApproval").prop("checked",!this.team.toilSettings.selfApprove);if(this.team.toilSettings.notificationList){$("#txtToilNotifications").val(this.team.toilSettings.notificationList.join(","))}if(this.team.toilSettings.createScope==CreateScope.Self){$("#radToilCreateScopeSelf").prop("checked",true)}else if(this.team.toilSettings.createScope==CreateScope.Manager){$("#radToilCreateScopeManager").prop("checked",true)}}$("#chkICal").prop("checked",this.team.icalSync);$("#chkGCal").prop("checked",this.team.gappsCalSync);$("#chkOCal").prop("checked",this.team.o365CalSync);$("#chkOoo").prop("checked",this.team.gappsOooSync);$("#chkCalDetailType").prop("checked",this.team.calSyncDetail&GCAL_SYNC_DETAIL_TYPE);$("#chkCalDetailReason").prop("checked",this.team.calSyncDetail&GCAL_SYNC_DETAIL_REASON);this.toggleCopyButtons()},checkParentTeam:function(){var _this117=this;var parentTeamKey=$("#ddlParentTeam").val();if(parentTeamKey=="none"){return}var url="/admin/org/teams/check_parent_team?key={0}&parentKey={1}".format(this.team.key,parentTeamKey);appogee.xhr.get(url,function(response){_this117.parentTeamValid=response.valid;$("#invalidParentTeamNote").toggle(!_this117.parentTeamValid)})},toggleCopyButtons:function(){var sick=$("#chkSicknessEnabled").prop("checked");var toil=$("#chkToilEnabled").prop("checked");$("#leaveCopyFrom").toggle(sick||toil);$("#btnCopySickToLeave").toggle(sick);$("#btnCopySickToToil").toggle(sick);$("#btnCopyToilToLeave").toggle(toil);$("#btnCopyToilToSick").toggle(toil)},attachEvents:function(){var _this118=this;var me=this;$("#chkSicknessEnabled").change(function(){$("#tabSick").toggle(this.checked);$("#divSickDisabledNote").toggle(!this.checked);me.toggleCopyButtons()});$("#chkToilEnabled").change(function(){$("#tabToil").toggle(this.checked);$("#divToilDisabledNote").toggle(!this.checked);me.toggleCopyButtons()});$("#btnCopyLeaveToSick").click(function(){me.copyApproval("leave","sick")});$("#btnCopyLeaveToToil").click(function(){me.copyApproval("leave","toil")});$("#btnCopySickToLeave").click(function(){me.copyApproval("sick","leave")});$("#btnCopySickToToil").click(function(){me.copyApproval("sick","toil")});$("#btnCopyToilToLeave").click(function(){me.copyApproval("toil","leave")});$("#btnCopyToilToSick").click(function(){me.copyApproval("toil","sick")});$("#btnSave").click(function(){me.save()});$("#btnChangeAdu").click(function(){var currentUser=appogee.getCurrentUser();if(!currentUser.isAduManager()){appogee.valert(S.errorChangeAdu);return}appogee.confirm(S.confirmChangeAdu,function(){var url="/admin/organisation/adu-manager?aduKey={0}&teamKey={1}".format(_this118.team.adu.key,_this118.team.key);location.href=url})});$("#btnDelete").click(function(){me.doDelete()});$("#btnAddMember").click(function(){me.addMember()});$("#chkGCal").click(function(){if(!$(this).prop("checked")){appogee.alert(S.alertDisableCal,S.alertDisableCalMsg)}});$("#chkOCal").click(function(){if(!$(this).prop("checked")){appogee.alert(S.alertDisableCalTitle,S.alertDisableOCalMsg)}});$("#chkOoo").click(function(){if($(this).prop("checked")){$("#oooAccessSuccess").hide();$("#oooAccessError").hide();$("#oooCheckingAccess").show();var url="/admin/org/teams/test_ooo";appogee.xhr.get(url,function(response){$("#oooCheckingAccess").hide();if(response.success){$("#oooAccessSuccess").show();setTimeout(function(){$("#oooAccessSuccess").fadeOut()},3e3)}else{$("#chkOoo").prop("checked",false);$("#chkOoo").prop("disabled",true);$("#oooAccessError").show();var msg=appogee.util.joinWithPs(S.alertGappsOooErrorMsg1,S.alertGappsOooErrorMsg2,S.alertGappsOooErrorMsg3);msg=msg.format({url:"/config/integration/gapps"});appogee.valert(S.alertGappsOooErrorTitle,msg)}})}})},copyApproval:function(from,to){var views={leave:this.views.leaveApprovalDef,sick:this.views.sickApprovalDef,toil:this.views.toilApprovalDef};appogee.confirm(S.confirmCopyApproval,function(){var newObject=JSON.parse(JSON.stringify(views[from].levels));views[to].levels=newObject;views[to].render()})},save:function(options){var me=this;options=$.extend({ignoreApprovalFlowWarning:false,bail:false},options||{});if(options.bail){return}var name=$("#txtName").val();var description=$("#txtDescription").val();var hrManagerKey=$("#ddlHrManager").val();var parentTeamKey=$("#ddlParentTeam").val();var sickEnabled=$("#chkSicknessEnabled").prop("checked");var toilEnabled=$("#chkToilEnabled").prop("checked");var activeLeaveYears=this.views.activeLeaveYears.getSelectedYears();var calStartDay=parseInt($("#ddlCalStartDay").val());var calAccess=parseInt($("#ddlCalAccess").val());var leaveRequireReason=$("#chkLeaveRequireReason").prop("checked");var leaveCreateScope=$('input[type="radio"][name="radLeaveCreateScope"]:checked').val();var leaveSelfApprove=!$("#chkLeavePreventSelfApproval").prop("checked");var leaveNotificationList=this.getNotificationList($("#txtLeaveNotifications"));var leaveApprovalDef=this.views.leaveApprovalDef.getDef();var sickCreateScope=$('input[type="radio"][name="radSickCreateScope"]:checked').val();var sickRequireReason=$("#chkSickRequireReason").prop("checked");var sickSelfApprove=!$("#chkSickPreventSelfApproval").prop("checked");var sickNotificationList=this.getNotificationList($("#txtSickNotifications"));var sickApprovalDef=this.views.sickApprovalDef.getDef();var toilSelfApprove=!$("#chkToilPreventSelfApproval").prop("checked");var toilCreateScope=$('input[type="radio"][name="radToilCreateScope"]:checked').val();var toilNotificationList=this.getNotificationList($("#txtToilNotifications"));var toilApprovalDef=this.views.toilApprovalDef.getDef();var icalSync=$("#chkICal").is(":checked");var gappsCalSync=$("#chkGCal").is(":checked");var o365CalSync=$("#chkOCal").is(":checked");var gappsOooSync=$("#chkOoo").is(":checked");var calSyncDetail=this.getCalSyncDetail();if(!name){appogee.valert(S.errorNoName);return}if(!this.isNotificationListValid($("#txtLeaveNotifications"),S.errorInvalidLeaveNotificationList)){return}if(sickEnabled&&!this.isNotificationListValid($("#txtSickNotifications"),S.errorInvalidSickNotifiationList)){return}if(toilEnabled&&!this.isNotificationListValid($("#txtToilNotifications"),S.errorInvalidToilNotifiationList.format({toil_term:this.toilTerm}))){return}var msg=null;var approvalFlowsNotSet=[];if(!options.ignoreApprovalFlowWarning&&leaveApprovalDef.length===0){approvalFlowsNotSet.push(S.leaveSettings)}else if(!this.views.leaveApprovalDef.isValid(true)){appogee.valert(S.errorLeaveApprovalFlow);return}if(sickEnabled){if(!options.ignoreApprovalFlowWarning&&sickApprovalDef.length===0){approvalFlowsNotSet.push(S.sickSettings)}else if(!this.views.sickApprovalDef.isValid(true)){appogee.valert(S.errorSickApprovalFlow);return}}if(toilEnabled){if(!options.ignoreApprovalFlowWarning&&toilApprovalDef.length===0){approvalFlowsNotSet.push(S.toilSettings.format({toil_term:this.toilTerm}))}else if(!this.views.toilApprovalDef.isValid(true)){appogee.valert(S.get("errorToilApprovalFlow",{toil_term:this.toilTerm}));return}}if(approvalFlowsNotSet.length>0){msg="<p>"+S.noApprovalFlowMsg1+"</p>";msg+="<ul><li>"+approvalFlowsNotSet.join("</li><li>")+"</li></ul>";msg+="<p>"+S.noApprovalFlowMsg2+"</p>";appogee.yesNoContinue(S.noApprovalFlowTitle,msg,function(btn){if(btn=="yes"){me.save({ignoreApprovalFlowWarning:true})}else{me.save({bail:true})}});return}var leaveSettings={enabled:true,requireReason:leaveRequireReason,notificationList:leaveNotificationList,createScope:leaveCreateScope,selfApprove:leaveSelfApprove,approvalDef:leaveApprovalDef};var sickSettings=null;if(sickEnabled){sickSettings={enabled:true,requireReason:sickRequireReason,notificationList:sickNotificationList,createScope:sickCreateScope,selfApprove:sickSelfApprove,approvalDef:sickApprovalDef}}var toilSettings=null;if(toilEnabled){toilSettings={enabled:true,requireReason:true,notificationList:toilNotificationList,createScope:toilCreateScope,selfApprove:toilSelfApprove,approvalDef:toilApprovalDef}}var managers=this.views.managers.getManagers();var leaveApproversNotManagers=[];leaveApprovalDef.forEach(function(level){level.approvers.forEach(function(approver){var found=_.find(managers.readers,function(manager){return manager.key==approver.key});if(!found){leaveApproversNotManagers.push(approver.email)}})});if(leaveApproversNotManagers.length>0){appogee.valert(S.get("errorLeaveApproverNotManager",{approver_emails:leaveApproversNotManagers.join(", ")}));return}var sickApproversNotManagers=[];sickApprovalDef.forEach(function(level){level.approvers.forEach(function(approver){var found=_.find(managers.readers,function(manager){return manager.key==approver.key});if(!found){sickApproversNotManagers.push(approver.email)}})});if(sickApproversNotManagers.length>0){appogee.valert(S.get("errorSickApproverNotManager",{approver_emails:sickApproversNotManagers.join(", ")}));return}var toilApproversNotManagers=[];toilApprovalDef.forEach(function(level){level.approvers.forEach(function(approver){var found=_.find(managers.readers,function(manager){return manager.key==approver.key});if(!found){toilApproversNotManagers.push(approver.email)}})});if(toilApproversNotManagers.length>0){appogee.valert(S.get("errorToilApproverNotManager",{toil_term:this.toilTerm,approver_emails:toilApproversNotManagers.join(", ")}));return}var team={name:name,description:description,activeLeaveYears:activeLeaveYears,calStartDay:calStartDay,calAccess:calAccess,hrManager:null,parent:null,leaveSettings:leaveSettings,sickSettings:sickSettings,toilSettings:toilSettings,manager:managers.manager,readers:managers.readers,editors:managers.editors,icalSync:icalSync,gappsCalSync:gappsCalSync,o365CalSync:o365CalSync,gappsOooSync:gappsOooSync,calSyncDetail:calSyncDetail};if(hrManagerKey){team.hrManager={key:hrManagerKey}}if(parentTeamKey){if(parentTeamKey=="none"){team.parent="none"}else{if(!this.parentTeamValid){appogee.valert(S.invalidParentTeam);return}team.parent={key:parentTeamKey}}}var notifier=appogee.notifier.saving();var url=null;if(!this.key){url="/teams";appogee.api.post(url,team,function(response){notifier.success();location.href="/hr/team?key={0}".format(response.key)},{artificialDelay:true})}else{url="/teams/{0}".format(this.key);appogee.api.put(url,team,function(){notifier.success();setTimeout(function(){me.views.audit.fetch()},1e3)},{artificialDelay:true})}},isNotificationListValid:function($fld,dlgTitle){var val=$fld.val().trim();if(!val){return true}var emails=val.split(",");for(var i=0;i<emails.length;i++){var email=emails[i].replace(/ /g,"");if(!appogee.validation.validateEmail(email)){var msg=S.invalidNotificationEmail.format({email:email});appogee.valert(dlgTitle,msg);return false}}return true},getNotificationList:function($fld){var val=$fld.val().trim();if(!val){return[]}var emails=val.split(",");var retEmails=[];for(var i=0;i<emails.length;i++){var email=emails[i].replace(/ /g,"");if(appogee.validation.validateEmail(email)){retEmails.push(email)}}return retEmails},getCalSyncDetail:function(){var calSyncDetail=0;if($("#chkCalDetailType").prop("checked")){calSyncDetail|=GCAL_SYNC_DETAIL_TYPE}if($("#chkCalDetailReason").prop("checked")){calSyncDetail|=GCAL_SYNC_DETAIL_REASON}return calSyncDetail},doDelete:function(){if(this.team.members&&this.team.members.length>0){appogee.valert(S.errorDeleteTeamNoMembers);return}
var me=this;appogee.confirm(S.confirmDeleteTeam,function(){var url="/teams/{0}".format(me.team.key);var notifier=appogee.notifier.notify(S.nfyDeleting);appogee.api.delete(url,function(){notifier.success(S.nfyDeleted);appogee.alert(S.alertDeleted,function(){location.href="/admin/organisation/teams"})},{artificialDelay:true})})},addMember:function(){var _this119=this;var employeeKey=$("#txtAddMember").userPicker("getKey");var employeeEmail=$("#txtAddMember").userPicker("getEmail");if(!employeeKey){appogee.valert(S.alertNoEmployee);return}if(!appogee.validation.validateEmail(employeeEmail)){appogee.valert(S.alertInvalidEmployee);return}var teamMember=_.where(this.team.members,{key:employeeKey});if(teamMember.length>0){appogee.valert(S.alertAlreadyMember);return}var body={teamKey:this.key,employeeKey:employeeKey};var confirmAddMemberMsg1=S.confirmAddMemberMsg1.replace("{member_email}","<strong>{member_email}</strong>");confirmAddMemberMsg1=confirmAddMemberMsg1.format({member_email:employeeEmail});var msg=appogee.util.joinWithPs(confirmAddMemberMsg1,S.confirmAddMemberMsg2);appogee.confirm(S.confirmAddMemberTitle,msg,function(){$("#btnAddMember,#txtAddMember").attr("disabled",true);appogee.xhr.post("/admin/org/teams/add_member",body,function(response){$("#btnAddMember,#txtAddMember").attr("disabled",false);$("#txtAddMember").val("");if(response.success){appogee.alert(S.alertAddMemberSuccessTitle,S.alertAddMemberSuccessMsg);_this119.views.members.fetch()}},{artificialDelay:true})})}}});define("admin/org/vteams",["jquery","appogee","admin/org/views/OrgSelector","admin/dialogs/CreateVTeamDialog"],function($,appogee,OrgSelector,CreateVTeamDialog){"use strict";var S,R={colName:"Name",leave:"Leave",sick:"Sickness",ttInvalidTypes:"The approval flow for {types} is invalid. Members of this team cannot create requests until the Approval Flow is completed.",colManagers:"Managers",colMembers:"Members",colLeaveApprovers:"Leave Approvers",colSickApprovers:"Sickness Approvers",colToilApprovers:"{toil_term} Approvers"};var COLUMN_CONFIG_KEY="vtck";var COLUMNS=["managers","members","leaveApprovers","sickApprovers","toilApprovers"];var DEFAULT_COLUMNS=[1,1,0,0,0];return{defaultStrings:R,initialize:function(){var _this120=this;S=this.S;this.initView();this.initOrgSelector();$("#btnCreateVTeam").click(function(){_this120.createVTeam()})},initOrgSelector:function(){this.orgSelector=new OrgSelector($("#orgSelector"),{showTeams:false,view:this.view});this.orgSelector.render()},initView:function(){var label=null;this.view=new appogee.View($("#viewContainer"),"virtual-teams",{showSearch:false});this.view.addDefaultKeyFilter("adu_key",this.currentUser.getActiveAduKey());this.view.initColumnConfig(COLUMN_CONFIG_KEY,COLUMNS,DEFAULT_COLUMNS,$("#ddlColumns"));this.view.addColumn({type:"custom",label:S.colName,width:200,render:function(vteam){var valid=true;var invalidTypes=[];if(vteam.leaveSettings&&vteam.leaveSettings.enabled&&(!vteam.leaveSettings.approvalDef||vteam.leaveSettings.approvalDef.length===0)){valid=false;invalidTypes.push(S.leave)}if(vteam.sickSettings&&vteam.sickSettings.enabled&&(!vteam.sickSettings.approvalDef||vteam.sickSettings.approvalDef.length===0)){valid=false;invalidTypes.push(S.sick)}if(vteam.toilSettings&&vteam.toilSettings.enabled&&(!vteam.toilSettings.approvalDef||vteam.toilSettings.approvalDef.length===0)){valid=false;invalidTypes.push(appogee.getToilTerm())}var html="";if(!valid){invalidTypes=appogee.util.joinWithAnd(invalidTypes);var title=S.ttInvalidTypes.format({types:invalidTypes});html='<i class="glyphicon glyphicon-exclamation-sign text-danger" title="{0}"></i> '.format(title)}var name=vteam.name;if(!name){name="[No Name]"}html+='<a href="/admin/organisation/vteam?key={0}">{1}</a>'.format(vteam.key,name);return html}});this.view.addColumn({id:"managers",type:"custom",width:200,label:S.colManagers,render:function(vteam){var managers=[];if(vteam.managers){managers=vteam.managers.map(function(manager){var icon="glyphicon glyphicon-sunglasses";var tooltip="Reader";if(manager.key==vteam.managerKey){icon="glyphicon glyphicon-star";tooltip="Primary Manager"}var html='<span title="{0}"><i class="{1}"></i> {2}</span>'.format(tooltip,icon,manager.name);return html})}return managers.join(", ")}});this.view.addColumn({id:"members",type:"custom",label:S.colMembers,render:function(vteam){var members=[];if(vteam.members){members=vteam.members.map(function(member){return member.name})}return members.join(", ")}});this.view.addColumn({id:"leaveApprovers",type:"custom",label:S.colLeaveApprovers,render:function(vteam){var levels=[];if(vteam.leaveSettings){vteam.leaveSettings.approvalDef.forEach(function(approvalDef,i){var level=[];approvalDef.approvers.forEach(function(approver){level.push(approver.email)});levels.push("Level {0}: {1}".format(i+1,level.join(", ")))})}return levels.join("<br />")}});this.view.addColumn({id:"sickApprovers",type:"custom",label:S.colSickApprovers,render:function(vteam){var levels=[];if(vteam.sickSettings){vteam.sickSettings.approvalDef.forEach(function(approvalDef,i){var level=[];approvalDef.approvers.forEach(function(approver){level.push(approver.email)});levels.push("Level {0}: {1}".format(i+1,level.join(", ")))})}return levels.join("<br />")}});label=S.colToilApprovers.format({toil_term:appogee.getToilTerm()});this.view.addColumn({id:"toilApprovers",type:"custom",label:label,render:function(vteam){var levels=[];if(vteam.toilSettings){vteam.toilSettings.approvalDef.forEach(function(approvalDef,i){var level=[];approvalDef.approvers.forEach(function(approver){level.push(approver.email)});levels.push("Level {0}: {1}".format(i+1,level.join(", ")))})}return levels.join("<br />")}});this.view.fetch()},createVTeam:function(){var _this121=this;var dlg=new CreateVTeamDialog;dlg.onCreate(function(vteam){setTimeout(function(){_this121.view.fetch()},500)});dlg.show()}}});define("admin/org/vteam",["jquery","underscore","appogee","admin/views/leave/ApprovalDef","admin/views/ManagersView","views/audit/EmbeddedAuditView","jquery.appogee.tabs"],function($,_,appogee,ApprovalDef,ManagersView,AuditView){"use strict";var S,R={alertNoEmployeeTitle:"No Employee",alertNoEmployeeMsg:"To add a member to the Virtual Team, please enter their email address in the textbox, and select the employee from the options provided.",alertInvalidEmployeeTitle:"Invalid Employee",alertInvalidEmployeeMsg:"To add a member to the Virtual Team, please enter their email address in the textbox, and select the employee from the options provided.",confirmAddMemberTitle:"Confirm Add Member",confirmAddMemberMsg1:"This will add the member {member_email} to this Virtual Team. If the user already exists in another Virtual Team they will be moved.",confirmAddMemberMsg2:"Do you wish to continue?",alertAddMemberSuccessTitle:"Employee Added",alertAddMemberSuccessMsg:"The employee has been added to this Virtual Team",alertAddMemberFailedTitle:"Employee Not Added",alertAddMemberFailedMsg:"Invalid Virtual Team. Employee and Team are in different ADUs. The employee has not been added to this Virtual Team.",alertAddMemberAlreadyExistsTitle:"Member Already Exists",alertAddMemberAlreadyExistsMsg:"Employee {member_email} already exists in this Virtual Team.",confirmCopyApprovalsTitle:"Copy Approvals?",confirmCopyApprovalsMsg1:"This will copy the approval definition. The current approval definition will be overwitten.",confirmCopyApprovalsMsg2:"Do you wish to continue?",errorChangeAduTitle:"Insuficient Access",errorChangeAduMsg:"You do not have access to change this teams Division",confirmChangeAduTitle:"Change Division",confirmChangeAduMsg1:"To move a Virtual Team to a different Division, please use the ADU Management tool.",confirmChangeAduMsg2:"Would you like to be redirected there now?",errorNoName:"Please enter a <strong>Name</strong> for this Virtual Team on the Main Details tab.",errorInvalidLeaveNotificationList:"Invalid Leave Notification List",errorInvalidSickNotifiationList:"Invalid Sickness Notification List",errorInvalidToilNotifiationList:"Invalid {toil_term} Notification List",leaveSettings:"Leave Settings",errorLeaveApprovalFlowTitle:"Leave Approval Flow Invalid",errorLeaveApprovalFlowMsg:"The Leave Approval Flow is Invalid. Please see the Leave Settings tab for further information.",sickSettings:"Sickness Settings",errorSickApprovalFlowTitle:"Sickness Approval Flow Invalid",errorSickApprovalFlowMsg:"The Sickness Approval Flow is Invalid. Please see the Sickness Settings tab for further information.",toilSettings:"{toil_term} Settings",errorToilApprovalFlowTitle:"{toil_term} Approval Flow Invalid",errorToilApprovalFlowMsg:"The {toil_term} Approval Flow is Invalid. Please see the {toil_term} Settings tab for further information.",noApprovalFlowTitle:"Approval Flow Invalid",noApprovalFlowMsg1:"An Approval Flow has not been defined on the following tabs:",noApprovalFlowMsg2:"Any members of this team will not be able to submit requests until an appropriate Approval Flow has been defined.",invalidNotificationEmail:"The email address <strong>{email}</strong> in the Notification List is not a valid email address. Please correct and try again.",errorDeleteTeamNoMembersTitle:"Delete Virtual Team",errorDeleteTeamNoMembersMsg:"You cannot delete a Virtual Team that has members. Please remove the members, then try again.",confirmDeleteTeamTitle:"Delete Virtual Team?",confirmDeleteTeamMsg1:"This will delete the Virtual Team.",confirmDeleteTeamMsg2:"Do you wish to continue?",nfyDeleting:"Deleting Virtual Team ...",nfyDeleted:"Virtual Team Deleted Successfully",alertDeletedTitle:"Virtual Team Deleted",alertDeletedMsg:"The Virtual Team has been deleted. You will now be redirected to the Virtual Teams page.",errorLeaveApproverNotManagerTitle:"Invalid Leave Approver",errorLeaveApproverNotManagerMsg1:"The following Leave Approvers are not Managers:",errorLeaveApproverNotManagerMsg2:"{approver_emails}",errorSickApproverNotManagerTitle:"Invalid Sickness Approver",errorSickApproverNotManagerMsg1:"The following Sickness Approvers are not Managers:",errorSickApproverNotManagerMsg2:"{approver_emails}",errorToilApproverNotManagerTitle:"Invalid {toil_term} Approver",errorToilApproverNotManagerMsg1:"The following {toil_term} Approvers are not Managers:",errorToilApproverNotManagerMsg2:"{approver_emails}",alertDisableCalTitle:"Disabling Personal Calendar Sync",colMemberEmployee:"Employee",colMemberDivision:"Division",colMemberTeam:"Team",colMemberJobTitle:"Job Title",btnRemoveLabel:"Remove",confirmRemoveMemberTitle:"Confirm Remove Member",confirmRemoveMemberMsg1:"This will remove {member_email} from the team.",confirmRemoveMemberMsg2:"Do you wish to continue?",alertRemoveMemberSuccessTitle:"Team Member Removed",alertRemoveMemberSuccessMsg:"The employee has been removed from the team."};var DEFAULT_LEAVE_SETTINGS={notificationList:[],approvalDef:[]};var DEFAULT_SICK_SETTINGS={notificationList:[],approvalDef:[]};var DEFAULT_TOIL_SETTINGS={notificationList:[],approvalDef:[]};return{defaultStrings:R,views:{},contextHelp:true,getLoadUrls:function(){var vteamUrl="/vteams/{0}?projection=leave".format(this.key);return{api:[vteamUrl]}},initialize:function(){S=this.S;this.key=$("#txtKey").val();this.toilTerm=appogee.getToilTerm();this.attachEvents();this.initAuditView()},onLoad:function(vteam){this.vteam=vteam;this.vteam.leaveSettings=this.vteam.leaveSettings||DEFAULT_LEAVE_SETTINGS;this.vteam.leaveSettings.notificationList=this.vteam.leaveSettings.notificationList||[];this.vteam.sickSettings=this.vteam.sickSettings||DEFAULT_SICK_SETTINGS;this.vteam.sickSettings.notificationList=this.vteam.sickSettings.notificationList||[];this.vteam.toilSettings=this.vteam.toilSettings||DEFAULT_TOIL_SETTINGS;this.vteam.toilSettings.notificationList=this.vteam.toilSettings.notificationList||[];this.populate();var me=this;this.views.leaveApprovalDef=new ApprovalDef($("#leaveApprovalDef"),this.vteam.leaveSettings.approvalDef,true);this.views.leaveApprovalDef.render();this.views.sickApprovalDef=new ApprovalDef($("#sickApprovalDef"),this.vteam.sickSettings.approvalDef,true);this.views.sickApprovalDef.render();this.views.toilApprovalDef=new ApprovalDef($("#toilApprovalDef"),this.vteam.toilSettings.approvalDef,true);this.views.toilApprovalDef.render();this.views.leaveApprovalDef.addEventHandler("add",function(approver){me.approverAdded("leave",approver)});this.views.sickApprovalDef.addEventHandler("add",function(approver){me.approverAdded("sick",approver)});this.views.toilApprovalDef.addEventHandler("add",function(approver){me.approverAdded("toil",approver)});this.views.managers=new ManagersView($("#managersView"),this.vteam);this.views.managers.render();$("#txtAddMember").userPicker({params:{status:["joining","active"],aduKey:this.vteam.adu.key,aduTraverse:"down"}});this.views.members=new appogee.View($("#membersView"),"vteam-members",{showSearch:false});this.views.members.addKeyFilter("vteam_key",this.vteam.key,true);this.views.members.addColumn({type:"custom",label:S.colMemberEmployee,width:"200",render:function(member){var html='<div><a href="/admin/organisation/employee?key={0}">{1} {2}</a></div>{3}';html=html.format(member.key,member.firstName,member.lastName,member.email);return html}});if(appogee.isAdusEnabled()){this.views.members.addColumn({type:"text",label:S.colMemberDivision,field:"[adu.path]"})}this.views.members.addColumn({type:"custom",label:S.colMemberTeam,render:function(member){var html='<a href="/admin/organisation/team?key={0}">{1}</a>';html=html.format(member.team.key,member.team.name);return html}});this.views.members.addColumn({type:"text",label:S.colMemberJobTitle,field:"[jobTitle]"});this.views.members.addColumn({type:"js",width:"100",cssClass:"btnRemove",onClick:function(member){me.remove(member)},render:function(member){var html='<button class="btn btn-sm btn-delete btn-default btnRemove" data-key={0}>'.format(member.key);html+='<i class="glyphicon glyphicon-remove"></i> '+S.btnRemoveLabel+"</button>";return html}});this.views.members.fetch()},remove:function(member){var me=this;var confirmRemoveMemberMsg1=S.confirmRemoveMemberMsg1.replace("{member_email}","<strong>{member_email}</strong>");var msg=appogee.util.joinWithPs(confirmRemoveMemberMsg1.format({member_email:member.email}),S.confirmRemoveMemberMsg2);appogee.confirm(S.confirmRemoveMemberTitle,msg,function(){var body={teamKey:me.vteam.key,employeeKey:member.key};$("#btnAddMember,#txtAddMember").attr("disabled",true);appogee.xhr.post("/admin/org/vteams/remove_member",body,function(){$("#btnAddMember,#txtAddMember").attr("disabled",false);appogee.alert(S.alertRemoveMemberSuccessTitle,S.alertRemoveMemberSuccessMsg);me.views.members.fetch()},{artificialDelay:true})})},approverAdded:function(requestType,approver){this.views.managers.add(approver.key,approver.email,0)},initAuditView:function(){this.views.audit=new AuditView($("#auditContainer"),this.key,null,{combineDateUser:true});this.views.audit.render();this.views.audit.fetch()},populate:function(){$("#h2Title").html(this.vteam.name);$("#txtName").val(this.vteam.name);$("#txtDescription").val(this.vteam.description);$("#ddlCalAccess").val(this.vteam.calAccess);$("#txtLeaveNotifications").val(this.vteam.leaveSettings.notificationList.join(","));$("#txtSickNotifications").val(this.vteam.sickSettings.notificationList.join(","));if(this.vteam.toilSettings.notificationList){$("#txtToilNotifications").val(this.vteam.toilSettings.notificationList.join(","))}},attachEvents:function(){var _this122=this;var me=this;$("#btnCopyLeaveToSick").click(function(){me.copyApproval("leave","sick")});$("#btnCopyLeaveToToil").click(function(){me.copyApproval("leave","toil")});$("#btnCopySickToLeave").click(function(){me.copyApproval("sick","leave")});$("#btnCopySickToToil").click(function(){me.copyApproval("sick","toil")});$("#btnCopyToilToLeave").click(function(){me.copyApproval("toil","leave")});$("#btnCopyToilToSick").click(function(){me.copyApproval("toil","sick")});$("#btnSave").click(function(){me.save()});$("#btnChangeAdu").click(function(){var currentUser=appogee.getCurrentUser();if(!currentUser.isAduManager()){appogee.valert(S.errorChangeAdu);return}appogee.confirm(S.confirmChangeAdu,function(){var url="/admin/organisation/adu-manager?aduKey={0}&vteamKey={1}".format(_this122.vteam.adu.key,_this122.vteam.key);location.href=url})});$("#btnDelete").click(function(){me.doDelete()});$("#btnAddMember").click(function(){me.addMember()})},copyApproval:function(from,to){var views={leave:this.views.leaveApprovalDef,sick:this.views.sickApprovalDef,toil:this.views.toilApprovalDef};appogee.confirm(S.confirmCopyApprovals,function(){var newObject=JSON.parse(JSON.stringify(views[from].levels));views[to].levels=newObject;views[to].render()})},save:function(options){var me=this;options=$.extend({ignoreApprovalFlowWarning:true,bail:false},options||{});if(options.bail){return}var name=$("#txtName").val();var description=$("#txtDescription").val();var calAccess=parseInt($("#ddlCalAccess").val());var leaveNotificationList=this.getNotificationList($("#txtLeaveNotifications"));var leaveApprovalDef=this.views.leaveApprovalDef.getDef();var sickNotificationList=this.getNotificationList($("#txtSickNotifications"));var sickApprovalDef=this.views.sickApprovalDef.getDef();var toilNotificationList=this.getNotificationList($("#txtToilNotifications"));var toilApprovalDef=this.views.toilApprovalDef.getDef();if(!name){appogee.valert(S.errorNoName);return}if(!this.isNotificationListValid($("#txtLeaveNotifications"),S.errorInvalidLeaveNotificationList)){return}if(!this.isNotificationListValid($("#txtSickNotifications"),S.errorInvalidSickNotifiationList)){return}if(!this.isNotificationListValid($("#txtToilNotifications"),S.errorInvalidToilNotifiationList.format({toil_term:this.toilTerm}))){return}var msg=null;var approvalFlowsNotSet=[];if(!options.ignoreApprovalFlowWarning&&leaveApprovalDef.length===0){approvalFlowsNotSet.push(S.leaveSettings)}else if(!this.views.leaveApprovalDef.isValid(true)){appogee.valert(S.errorLeaveApprovalFlow);return}if(!options.ignoreApprovalFlowWarning&&sickApprovalDef.length===0){approvalFlowsNotSet.push(S.sickSettings)}else if(!this.views.sickApprovalDef.isValid(true)){appogee.valert(S.errorSickApprovalFlow);return}if(!options.ignoreApprovalFlowWarning&&toilApprovalDef.length===0){approvalFlowsNotSet.push(S.toilSettings.format({toil_term:this.toilTerm}))}else if(!this.views.toilApprovalDef.isValid(true)){appogee.valert(S.get("errorToilApprovalFlow",{toil_term:this.toilTerm}));return}if(approvalFlowsNotSet.length>0){msg="<p>"+S.noApprovalFlowMsg1+"</p>";msg+="<ul><li>"+approvalFlowsNotSet.join("</li><li>")+"</li></ul>";msg+="<p>"+S.noApprovalFlowMsg2+"</p>";appogee.yesNoContinue(S.noApprovalFlowTitle,msg,function(btn){if(btn=="yes"){me.save({ignoreApprovalFlowWarning:true})}else{me.save({bail:true})}});return}var leaveSettings={notificationList:leaveNotificationList,approvalDef:leaveApprovalDef};var sickSettings={notificationList:sickNotificationList,approvalDef:sickApprovalDef};var toilSettings={notificationList:toilNotificationList,approvalDef:toilApprovalDef};var managers=this.views.managers.getManagers();var leaveApproversNotManagers=[];leaveApprovalDef.forEach(function(level){level.approvers.forEach(function(approver){var found=_.find(managers.readers,function(manager){return manager.key==approver.key});if(!found){leaveApproversNotManagers.push(approver.email)}})});if(leaveApproversNotManagers.length>0){appogee.valert(S.get("errorLeaveApproverNotManager",{approver_emails:leaveApproversNotManagers.join(", ")}));return}var sickApproversNotManagers=[];sickApprovalDef.forEach(function(level){level.approvers.forEach(function(approver){var found=_.find(managers.readers,function(manager){return manager.key==approver.key});if(!found){sickApproversNotManagers.push(approver.email)}})});if(sickApproversNotManagers.length>0){appogee.valert(S.get("errorSickApproverNotManager",{approver_emails:sickApproversNotManagers.join(", ")}));return}var toilApproversNotManagers=[];toilApprovalDef.forEach(function(level){level.approvers.forEach(function(approver){var found=_.find(managers.readers,function(manager){return manager.key==approver.key});if(!found){toilApproversNotManagers.push(approver.email)}})});if(toilApproversNotManagers.length>0){appogee.valert(S.get("errorToilApproverNotManager",{toil_term:this.toilTerm,approver_emails:toilApproversNotManagers.join(", ")}));return}var vteam={name:name,description:description,calAccess:calAccess,leaveSettings:leaveSettings,sickSettings:sickSettings,toilSettings:toilSettings,readers:managers.readers};var notifier=appogee.notifier.saving();var url=null;if(!this.key){url="/vteams";appogee.api.post(url,vteam,function(response){notifier.success();location.href="/hr/vteam?key={0}".format(response.key)},{artificialDelay:true})}else{url="/vteams/{0}".format(this.key);appogee.api.put(url,vteam,function(){notifier.success();setTimeout(function(){me.views.audit.fetch()},1e3)},{artificialDelay:true})}},isNotificationListValid:function($fld,dlgTitle){var val=$fld.val().trim();if(!val){return true}var emails=val.split(",");for(var i=0;i<emails.length;i++){var email=emails[i].replace(/ /g,"");if(!appogee.validation.validateEmail(email)){var msg=S.invalidNotificationEmail.format({email:email});appogee.valert(dlgTitle,msg);return false}}return true},getNotificationList:function($fld){var val=$fld.val().trim();if(!val){return[]}var emails=val.split(",");var retEmails=[];for(var i=0;i<emails.length;i++){var email=emails[i].replace(/ /g,"");if(appogee.validation.validateEmail(email)){retEmails.push(email)}}return retEmails},doDelete:function(){if(this.vteam.members&&this.vteam.members.length>0){appogee.valert(S.errorDeleteTeamNoMembers);return}var me=this;appogee.confirm(S.confirmDeleteTeam,function(){var url="/vteams/{0}".format(me.vteam.key);var notifier=appogee.notifier.notify(S.nfyDeleting);appogee.api.delete(url,function(){notifier.success(S.nfyDeleted);appogee.alert(S.alertDeleted,function(){location.href="/admin/organisation/vteams"})},{artificialDelay:true})})},addMember:function(){var _this123=this;var employeeKey=$("#txtAddMember").userPicker("getKey");var employeeEmail=$("#txtAddMember").userPicker("getEmail");if(!employeeKey){appogee.valert(S.alertNoEmployeeTitle,S.alertNoEmployeeMsg);return}if(!appogee.validation.validateEmail(employeeEmail)){appogee.valert(S.alertInvalidEmployeeTitle,S.alertInvalidEmployeeMsg);return}var body={vteamKey:this.key,employeeKey:employeeKey};var confirmAddMemberMsg1=S.confirmAddMemberMsg1.replace("{member_email}","<strong>{member_email}</strong>");confirmAddMemberMsg1=confirmAddMemberMsg1.format({member_email:employeeEmail});var msg=appogee.util.joinWithPs(confirmAddMemberMsg1,S.confirmAddMemberMsg2);appogee.confirm(S.confirmAddMemberTitle,msg,function(){$("#btnAddMember,#txtAddMember").attr("disabled",true);appogee.xhr.post("/admin/org/vteams/add_member",body,function(response){$("#btnAddMember,#txtAddMember").attr("disabled",false);$("#txtAddMember").val("");if(response.success){appogee.alert(S.alertAddMemberSuccessTitle,S.alertAddMemberSuccessMsg);_this123.views.members.fetch()}else if(response.reason=="Invalid ADU"){appogee.valert(S.alertAddMemberFailedTitle,S.alertAddMemberFailedMsg)}else if(response.reason=="Already Member"){msg=S.alertAddMemberAlreadyExistsMsg.replace("{member_email}","<strong>{member_email}</strong>");msg=msg.format({member_email:employeeEmail});appogee.valert(S.alertAddMemberAlreadyExistsTitle,msg)}},{artificialDelay:true})})}}});define("core/EmployeeViewHelper",["jquery","appogee"],function($,appogee){"use strict";var S,R={colEmployee:"Employee Profile",colRoles:"Roles",colWorkTel:"Work Telephone Number",colQuickLinks:"Quick Links",joiningTomorrow:"Joining tomorrow",joiningOn:"Joining on {start_date}",leavingTomorrow:"Leaving tomorrow",leavingOn:"Leaving on {end_date}",leftOn:"Left on {end_date}",selfServiceEnabled:"Self Service Enabled",roleTeamManager:"Team Manager",roleHrManager:"HR Manager",roleMGR:"MGR",roleHR:"HR",roleAduManager:"ADU Manager",roleADU:"ADU",roleAdmin:"Administrator",roleADM:"ADM",openEmployeeProfile:"Open Employee Profile",viewEmployeeRecords:"View Employee Records",viewEmergencyInfo:"View Emergency Information",openUserProfile:"Open User Profile"};var EmployeeStatus={Joining:"joining",Active:"active",Former:"former"};var View=function(view){S=appogee.getStrings("ViewHelper",R);this.view=view};View.prototype.addImageColumn=function(){this.view.addColumn({type:"avatar",field:"imageUrl",width:50,urlFormatter:function(url){return url+"=h46"}})};View.prototype.getStatus=function(currentUser,employee){if(!currentUser.isSomeKindOfManagerFor(employee)){return""}var today=appogee.today();var tomorrow=appogee.today();tomorrow.setDate(tomorrow.getDate()+1);var endDate=null;var status="";if(employee.status==EmployeeStatus.Joining){var startDate=null;if(employee.startDate){startDate=appogee.util.date.fromISOString(employee.startDate);if(startDate>today){if(startDate.getTime()==tomorrow.getTime()){status=S.joiningTomorrow}else{status=S.joiningOn.format({});status=S.joiningOn.format({start_date:appogee.util.date.toString(startDate,currentUser.dateFormatString)})}}}}else if(employee.status==EmployeeStatus.Active){endDate=null;if(employee.endDate){endDate=appogee.util.date.fromISOString(employee.endDate);if(endDate>today){if(endDate.getTime()==tomorrow.getTime()){status=S.leavingTomorrow}else{status=S.leavingOn.format({end_date:appogee.util.date.toString(endDate,currentUser.dateFormatString)})}}}}else if(employee.status=="former"){endDate=null;if(employee.endDate){endDate=appogee.util.date.fromISOString(employee.endDate);if(endDate<today){if(endDate){status+=S.leftOn.format({end_date:appogee.util.date.toString(endDate,currentUser.dateFormatString)})}}}}return status};View.prototype.addEmployeeColumn=function(options){var _this124=this;var defaultUrl="/profile?ekey=";options=$.extend({showSelfServiceIcon:false,secondLineField:"email",url:defaultUrl},options||{});this.view.addColumn({type:"custom",label:S.colEmployee,render:function(employee){var currentUser=appogee.getCurrentUser();var name="[No Name]";if(employee.name){name=employee.name}var html="";if(currentUser.key==employee.key||currentUser.isSomeKindOfManagerFor(employee)){var url="{0}{1}".format(options.url,employee.key);var a='<a href="{0}">{1}</a>'.format(url,name);html+="<div>"+a+"</div>"}else{html+="<div>"+name+"</div>"}if(employee.jobTitle){html+="<div>"+employee.jobTitle+"</div>"}var status=_this124.getStatus(currentUser,employee);if(status){var s='<div class="red">{0}</div>'.format(status);html+="<div>"+s+"</div>"}return html}})};View.prototype.addRolesColumnXX=function(){var ROLES={manager:"Team Manager",hr:"HR Manager",adu:"ADU Manager",admin:"Administrator"};this.view.addColumn({type:"custom",label:S.colRoles,width:142,render:function(profile){if(!profile.roles){return""}var roles=[];profile.roles.forEach(function(role){if(ROLES.hasOwnProperty(role)){roles.push(ROLES[role])}});var html=roles.join("<br />");return html}})};View.prototype.addRolesColumn=function(options){options=$.extend({showAduRole:false},options||{});var width=160;if(options.showAduRole){width=210}this.view.addColumn({type:"custom",label:S.colRoles,width:width,render:function(profile){if(!profile.roles){profile.roles=[]}var html="";if(profile.roles.indexOf("manager")==-1){html+='<span class="badge badge-role badge-role-none">&nbsp;</span> '}else{html+='<span class="badge badge-role alert-info" title="'+S.roleTeamManager+'">'+S.roleMGR+"</span> "}if(profile.roles.indexOf("hr")==-1){html+='<span class="badge badge-role badge-role-none">&nbsp;</span> '}else{html+='<span class="badge badge-role alert-info" title="'+S.roleHrManager+'">'+S.roleHR+"</span> "}if(options.showAduRole){if(profile.roles.indexOf("adu")==-1){html+='<span class="badge badge-role badge-role-none">&nbsp;</span> '}else{html+='<span class="badge badge-role alert-info" title="'+S.roleAduManager+'">'+S.roleADU+"</span> "}}if(profile.roles.indexOf("admin")==-1){html+='<span class="badge badge-role badge-role-none">&nbsp;</span> '}else{html+='<span class="badge badge-role alert-info" title="'+S.roleAdmin+'">'+S.roleADM+"</span> "}return html}})};View.prototype.addWorkTelColumn=function(){this.view.addColumn({type:"custom",label:S.colWorkTel,render:function(profile){var html="";if(profile.workTel){html+='<div style="margin-bottom: 2px;"><i class="fa fa-phone" style="min-width: 16px; font-size: 16px;"></i>{0}</div>'.format(profile.workTel)}if(profile.workMobile){html+='<div><i class="fa fa-mobile" style="min-width: 16px; font-size: 16px;"></i>{0}</div>'.format(profile.workMobile)}return html}})};View.prototype.addQuickLinksColumn=function(){var currentUser=appogee.getCurrentUser();this.view.addColumn({type:"custom",width:120,label:S.colQuickLinks,render:function(profile){var a=('<a href="/profile?key={0}" class="btn btn-sm btn-view text-info appogee-tooltip" data-tooltip="'+S.openEmployeeProfile+'"><i class="glyphicon glyphicon-user text-info"></i></a>').format(profile.key);var b=('<a href="/profile?key={0}&fid=records" class="btn btn-sm btn-view text-success appogee-tooltip" data-tooltip="'+S.viewEmployeeRecords+'"><i class="glyphicon glyphicon-th-list text-success"></i></a>').format(profile.key);var c=('<a href="/profile?key={0}&fid=emergency_contacts" class="btn btn-sm btn-view text-danger appogee-tooltip" data-tooltip="'+S.viewEmergencyInfo+'"><i class="fa fa-life-ring text-danger"></i></a>').format(profile.key);var d="";if(currentUser.isHrManager()){d=('<a href="/admin/organisation/employee?key={0}" class="btn btn-sm btn-view text-danger appogee-tooltip" data-tooltip="'+S.openUserProfile+'"><i class="fa fa-user-circle text-warning"></i></a>').format(profile.key)}return a+b+c+d}})};return View});define("hbs!templates/EmployeeViewTemplate",["hbs/handlebars","hbs!appogee/view/_search","hbs!appogee/view/_pagination","hbs!appogee/view/_table","templates/helpers/renderViewData","templates/helpers/s","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'style="padding: 0px;"'},3:function(depth0,helpers,partials,data){return'style="margin-top: 4px;"'},5:function(depth0,helpers,partials,data){return"selected"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return this.escapeExpression((helpers.renderViewData||depth0&&depth0.renderViewData||helpers.helperMissing).call(depth0,"ignore","ignore",{name:"renderViewData",hash:{},data:data}))+'\n\n<div class="form-horizontal view_header" '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.padHeader:depth0,{name:"unless",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'>\n\t<div class="row view_controls filters">\n\t\t<div class="col-md-4 pull-right">\n\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Search",{name:"s",hash:{},data:data}))+"</label>\n"+((stack1=this.invokePartial(partials["appogee/view/_search"],depth0,{name:"appogee/view/_search",data:data,indent:"\t\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+'\t\t</div>\n\t\t<div class="clearfix"></div>\n\t</div>\n</div>\n\n<div class="employee-view-header">\n\t<div class="pull-left">\n\t\t<div class="view-filters" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showPagination:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t\t<span>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Show:",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t<a href="javascript: void(0);" class="btn-status '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.filters:depth0)!=null?stack1.status:stack1,"joining",{name:"ifequal",hash:{},
fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'" data-status="joining">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Joining",{name:"s",hash:{},data:data}))+'</a>\n\t\t\t<a href="javascript: void(0);" class="btn-status '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.filters:depth0)!=null?stack1.status:stack1,"active",{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'" data-status="active">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Active",{name:"s",hash:{},data:data}))+'</a>\n\t\t\t<a href="javascript: void(0);" class="btn-status '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.filters:depth0)!=null?stack1.status:stack1,"former",{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'" data-status="former">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Former",{name:"s",hash:{},data:data}))+'</a>\n\t\t</div>\n\t</div>\n\t<div class="pull-right">\n'+((stack1=this.invokePartial(partials["appogee/view/_pagination"],depth0,{name:"appogee/view/_pagination",data:data,indent:"\t\t",helpers:helpers,partials:partials}))!=null?stack1:"")+'\t</div>\n\t<div class="clearfix"></div>\n</div>\n\n'+((stack1=this.invokePartial(partials["appogee/view/_table"],depth0,{name:"appogee/view/_table",data:data,helpers:helpers,partials:partials}))!=null?stack1:"")},usePartial:true,useData:true});Handlebars.registerPartial("templates/EmployeeViewTemplate",t);return t});define("templates/helpers/perc_ab",["hbs/handlebars"],function(Handlebars){"use strict";function percAllowanceBar(metrica,metricb,total,dp){if(dp===undefined){dp=1}total=Math.max(total,metrica+metricb);var p=(metrica/total*100).toFixed(dp);return p+"%"}Handlebars.registerHelper("perc_ab",percAllowanceBar);return percAllowanceBar});define("hbs!leave/templates/AllowanceBarMini",["hbs/handlebars","templates/helpers/perc_ab"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"sm"},3:function(depth0,helpers,partials,data){return"xs"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="allowance-bar '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.sm:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.xs:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t<div class="approved" style="width: '+this.escapeExpression((helpers.perc_ab||depth0&&depth0.perc_ab||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.approved:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.pending:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.total:stack1,{name:"perc_ab",hash:{},data:data}))+';"></div>\n\t<div class="pending" style="width: '+this.escapeExpression((helpers.perc_ab||depth0&&depth0.perc_ab||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.pending:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.approved:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.total:stack1,{name:"perc_ab",hash:{},data:data}))+'"></div>\n</div>'},useData:true});Handlebars.registerPartial("leave/templates/AllowanceBarMini",t);return t});define("admin/org/employees",["jquery","appogee","admin/org/views/OrgSelector","core/EmployeeViewHelper","hbs!templates/EmployeeViewTemplate","hbs!leave/templates/AllowanceBarMini"],function($,appogee,OrgSelector,EmployeeViewHelper,tmpl,tmplAllowanceBar){"use strict";var S,R={colName:"Name",colTeam:"Team",colVirtualTeam:"Virtual Team",colLeaveProfile:"Leave Profile"};return{defaultStrings:R,status:"active",getLoadUrls:function(){var teams="/teams?limit=1000&aduKey={0}&includeVirtualTeams=true&projection=basic".format(this.currentUser.getActiveAduKey());return{api:[teams]}},initialize:function(){S=this.S;var me=this;this.view=new appogee.View($("#viewContainer"),"employees",{showSearch:true,tmpl:tmpl});var viewHelper=new EmployeeViewHelper(this.view);this.view.addDefaultKeyFilter("adu_key",this.currentUser.getActiveAduKey());this.view.addFilter("status",this.status,true);this.view.addColumn({type:"avatar",field:"imageUrl",width:16});viewHelper.addEmployeeColumn({showSelfServiceIcon:true,url:"/admin/organisation/employee?key="});this.view.addColumn({type:"link",label:S.colTeam,field:"[team.name]",link:"/admin/organisation/team?key=[team.key]"});this.view.addColumn({type:"custom",label:S.colVirtualTeam,width:300,render:function(employee){var html="";if(employee.virtualTeam){html='<a href="/admin/organisation/vteam?key={0}">{1}</a>'.format(employee.virtualTeam.key,employee.virtualTeam.name)}return html}});this.view.addColumn({type:"link",label:S.colLeaveProfile,field:"[leaveProfile.name]",link:"/admin/leave-profile?key=[leaveProfile.key]"});this.view.addColumn({type:"custom",label:"",width:16,render:function(employee){var html="";if(employee.isGapps){html+='<img src="/img/account/gsuite_64.png" width="16" />'}return html}});this.view.addColumn({type:"custom",label:"",width:16,render:function(employee){var html="";if(employee.iso365){html+='<img src="/img/account/microsoft.png" width="16" />'}return html}});this.view.onRender(function(){$("#viewContainer").find(".btn-status").click(function(){me.status=$(this).data("status");me.view.addFilter("status",me.status)})})},onLoad:function(teams){this.teams=teams.items;this.initOrgSelector()},initOrgSelector:function(){this.orgSelector=new OrgSelector($("#orgSelector"),{teams:this.teams,showTeamAll:true,showTeamSelect:false,showVTeams:true,view:this.view});this.orgSelector.render()},onEmployeeCreated:function(){this.view.fetch()}}});define("hbs!admin/org/tmpl/EmployeeStatusView",["hbs/handlebars","templates/helpers/formatDate","templates/helpers/ifequal","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"control-label col-sm-4 col-md-3 col-lg-4"},3:function(depth0,helpers,partials,data){return"controls col-sm-5 col-md-4 col-lg-6"},5:function(depth0,helpers,partials,data){return'selected="selected"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="form-group">\n\t<label class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.layoutHorizontal:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="continuous_start_date"></i>\n\t\t'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.fieldLabels:depth0)!=null?stack1.continuousStartDate:stack1,depth0))+'\n\t</label>\n\t<div class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.layoutHorizontal:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<input type="text" class="form-control input-sm datepicker" id="txtContinuousStartDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.continuousStartDate:stack1,{name:"formatDate",hash:{},data:data}))+'" />\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.layoutHorizontal:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="start_date"></i>\n\t\t'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.fieldLabels:depth0)!=null?stack1.startDate:stack1,depth0))+'\n\t</label>\n\t<div class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.layoutHorizontal:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<input type="text" class="form-control input-sm datepicker" id="txtStartDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data}))+'" />\n\t\t<div class="help-block text-danger" id="startDateHelp"></div>\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.layoutHorizontal:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="end_date"></i>\n\t\t'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.fieldLabels:depth0)!=null?stack1.endDate:stack1,depth0))+'\n\t</label>\n\t<div class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.layoutHorizontal:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<input type="text" class="form-control input-sm datepicker" id="txtEndDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.endDate:stack1,{name:"formatDate",hash:{},data:data}))+'" />\n\t\t<div class="help-block text-danger" id="endDateHelp"></div>\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.layoutHorizontal:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="status"></i>\n\t\t'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.fieldLabels:depth0)!=null?stack1.status:stack1,depth0))+'\n\t</label>\n\t<div class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.layoutHorizontal:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<select class="form-control input-sm" id="ddlStatus">\n\t\t\t<option value="joining" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.status:stack1,"joining",{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Joining",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t<option value="active" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.status:stack1,"active",{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Active",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t<option value="former" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.status:stack1,"former",{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Former",{name:"s",hash:{},data:data}))+'</option>\n\t\t</select>\n\t\t<div class="help-block text-danger" id="statusHelp"></div>\n\t</div>\n</div>\n\n<div class="alert alert-danger" id="lockOutWarning">\n\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"<strong>Warning: </strong> Changing your own status from Active will lock you out of your account!",{name:"s",hash:{},data:data}))+"</p>\n</div>"},useData:true});Handlebars.registerPartial("admin/org/tmpl/EmployeeStatusView",t);return t});define("admin/org/views/EmployeeStatusView",["jquery","appogee","underscore","hbs!admin/org/tmpl/EmployeeStatusView","jquery.appogee.contextHelp","jquery.appogee.datePicker"],function($,appogee,_,tmpl){"use strict";var S,R={alertNoStartDateTitle:"Missing {start_date}",alertNoStartDateMsg:"Please enter the employees {start_date}.",alertInvalidStartDateTitle:"Invalid {start_date}",alertInvalidStartDateMsg:"{start_date} must be on or after {continuous_start_date}.",alertInvalidEndDateTitle:"Invalid {end_date}",alertInvalidEndDateMsg:"{end_date} must after {start_date}.",alertInvalidStatus:"Invalid Status",alertStatusJoining:"{status} must be Joining if {start_date} is in the future.",alertStatusFormer:"{status} must be Former if {end_date} is in the past.",alertStatusActive:"{status} must be Active if {start_date} is in the past or End Date is in the future.",continuousStartDate:"Continuous Start Date",startDate:"Job Start Date",endDate:"Job End Date",status:"Employee Status"};var View=function($container,employee,options){S=appogee.getStrings("EmployeeStatusView",R);var defaultFieldLabels=this.getDefaultFieldLabels();this.$container=$container;this.employee=employee;this.options=$.extend({layoutHorizontal:false,fieldLabels:defaultFieldLabels},options||{});this.layoutHorizontal=this.options.layoutHorizontal;this.fieldLabels=this.options.fieldLabels;this.currentUser=appogee.getCurrentUser();this.isSelf=this.currentUser.key==this.employee.key;this.S={};for(var labelId in S){if(S.hasOwnProperty(labelId)){if(_.isString(S[labelId])){this.S[labelId]=S[labelId].format({continuous_start_date:this.fieldLabels.continuousStartDate,start_date:this.fieldLabels.startDate,end_date:this.fieldLabels.endDate,status:this.fieldLabels.status})}}}};View.prototype.getDefaultFieldLabels=function(){return{continuousStartDate:S.continuousStartDate,startDate:S.startDate,endDate:S.endDate,status:S.status}};View.prototype.render=function(){var _this125=this;var data={layoutHorizontal:this.layoutHorizontal,fieldLabels:this.fieldLabels,employee:this.employee,isSelf:this.isSelf};this.$container.html(tmpl(data));this.$container.find("#lockOutWarning").hide();this.$container.find(".context-help").contextHelp();$("#txtContinuousStartDate").appogeeDatePicker({yearRange:[-70,2],onSelect:function(){_this125.checkDates();_this125.checkStatus()}}).blur(function(){_this125.checkDates();_this125.checkStatus()});$("#txtStartDate").appogeeDatePicker({yearRange:[-70,2],onSelect:function(){_this125.checkDates();_this125.checkStatus()}}).blur(function(){_this125.checkDates();_this125.checkStatus()});$("#txtEndDate").appogeeDatePicker({yearRange:[-70,2],onSelect:function(){_this125.checkDates();_this125.checkStatus()}}).blur(function(){_this125.checkDates();_this125.checkStatus()});$("#ddlStatus").change(function(){_this125.checkStatus();if(_this125.isSelf){_this125.$container.find("#lockOutWarning").toggle($("#ddlStatus").val()!="active")}});this.checkDates();this.checkStatus()};View.prototype.checkDates=function(){var cStartDate=$("#txtContinuousStartDate").datepicker("getDate");var startDate=$("#txtStartDate").datepicker("getDate");var endDate=$("#txtEndDate").datepicker("getDate");var today=appogee.today();$("#startDateHelp,#endDateHelp").hide();if(cStartDate&&startDate){if(cStartDate>startDate){$("#startDateHelp").html(this.S.alertInvalidStartDateMsg).show()}}if(startDate&&endDate){if(startDate>=endDate){$("#endDateHelp").html(this.S.alertInvalidEndDateMsg).show()}}var status="active";if(this.employee&&this.employee.status){status=this.employee.status}if(startDate){if(startDate>today){status="joining"}}if(endDate){if(endDate<=today){status="former"}}$("#ddlStatus").val(status)};View.prototype.checkStatus=function(){var startDate=$("#txtStartDate").datepicker("getDate");var endDate=$("#txtEndDate").datepicker("getDate");var today=appogee.today();$("#statusHelp").hide();var status=null;if(startDate){if(startDate>today){status="joining"}else{status="active"}}if(endDate){if(endDate<=today){status="former"}else{status="active"}}if(status===null){return}if(status!=$("#ddlStatus").val()){var help="";if(status=="joining"){help=this.S.alertStatusJoining}else if(status=="former"){help=this.S.alertStatusFormer}else if(status=="active"){help=this.S.alertStatusActive}$("#statusHelp").html(help).show()}};View.prototype.validate=function(){var cStartDate=$("#txtContinuousStartDate").datepicker("getDate");var startDate=$("#txtStartDate").datepicker("getDate");var endDate=$("#txtEndDate").datepicker("getDate");var status=$("#ddlStatus").val();var today=appogee.today();if(cStartDate&&!startDate){appogee.valert(this.S.alertNoStartDateTitle,this.S.alertNoStartDateMsg);return false}if(cStartDate&&startDate){if(cStartDate>startDate){appogee.valert(this.S.alertInvalidStartDateTitle,this.S.alertInvalidStartDateMsg);return false}}if(startDate&&endDate){if(startDate>=endDate){appogee.valert(S.alertInvalidEndDateTitle,S.alertInvalidEndDateMsg);return false}}var forcedStatus=null;if(startDate){if(startDate>today){forcedStatus="joining"}else{forcedStatus="active"}}if(endDate){if(endDate<=today){forcedStatus="former"}else if(!forcedStatus){forcedStatus="active"}}if(forcedStatus!==null){if(status!=forcedStatus){var help="";if(forcedStatus=="joining"){help=this.S.alertStatusJoining}else if(forcedStatus=="former"){help=this.S.alertStatusFormer}else if(forcedStatus=="active"){help=this.S.alertStatusActive}appogee.valert(S.alertInvalidStatus,help);return}}return true};View.prototype.getStatus=function(datesAsIso){var cStartDate=$("#txtContinuousStartDate").datepicker("getDate");var startDate=$("#txtStartDate").datepicker("getDate");var endDate=$("#txtEndDate").datepicker("getDate");var status=$("#ddlStatus").val();if(datesAsIso){if(cStartDate){cStartDate=appogee.util.date.toISOString(cStartDate)}if(startDate){startDate=appogee.util.date.toISOString(startDate)}if(endDate){endDate=appogee.util.date.toISOString(endDate)}}return{continuousStartDate:cStartDate,startDate:startDate,endDate:endDate,status:status}};return View});define("hbs!admin/dialogs/tmpl/ChangeStatus",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee Status",{name:"s",hash:{},data:data}))+'</h4>\n<input class="dummy" />\n<div class="alert alert-info alert-flat">\n\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee start and end dates determine the employees status.",{name:"s",hash:{},data:data}))+"\n\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Setting a start or end date to the future date will cause the employee status to automatically change on the specified date.",{name:"s",hash:{},data:data}))+"\n\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Only Active employees can login. Joining and Former employees can only be viewed by HR Managers.",{name:"s",hash:{},data:data}))+'\n</div>\n\n<div class="status-view"></div>\n\n<div class="text-right">\n\t<button class="btn btn-sm btn-default btnClose">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t</button>\n\t\n\t<button class="btn btn-sm btn-primary btnSave">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Save Changes",{name:"s",hash:{},data:data}))+"\n\t</button>\n</div>"},useData:true});Handlebars.registerPartial("admin/dialogs/tmpl/ChangeStatus",t);return t});define("admin/dialogs/ChangeStatusDialog",["jquery","underscore","appogee","admin/org/views/EmployeeStatusView","hbs!admin/dialogs/tmpl/ChangeStatus"],function($,_,appogee,EmployeeStatusView,tmpl){"use strict";var $dlg=null;var Dialog=function(employee,options){this.employee=employee;this.options=options;if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.onChangeHandlers=[];this.onCloseHandlers=[]};Dialog.prototype.onChange=function(handler){this.onChangeHandlers.push(handler)};Dialog.prototype.onClose=function(handler){this.onCloseHandlers.push(handler)};Dialog.prototype.render=function(){var _this126=this;$dlg.html(tmpl());this.view=new EmployeeStatusView($dlg.find(".status-view"),this.employee,this.options);this.view.render();$dlg.find(".btnClose").click(function(){_this126.close()});$dlg.find(".btnSave").click(function(){_this126.save()})};Dialog.prototype.show=function(){var _this127=this;this.dlg=new appogee.Dialog($dlg,{title:"d",dialogClass:"",onBeforeClose:function(){_this127.onCloseHandlers.forEach(function(handler){return handler()})}});this.dlg.clearButtons();this.render();this.dlg.show()};Dialog.prototype.close=function(){this.dlg.hide()};Dialog.prototype.save=function(){var _this128=this;if(!this.view.validate()){return}var body=this.view.getStatus(true);var url="/employees/{0}/status".format(this.employee.key);appogee.api.post(url,body,function(response){_this128.onChangeHandlers.forEach(function(h){return h(response)})});this.close()};return Dialog});define("hbs!admin/dialogs/tmpl/ChangeTeam",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return"\t\t<p>\n\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"To move the employee to a Virtual Team in a different division, please use the ADU Manager tool.",{name:"s",hash:{},data:data}))+'\n\t\t\t<a href="/admin/organisation/adu-manager?aduKey='+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.adu:stack1)!=null?stack1.key:stack1,depth0))+"&teamKey="+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.team:stack1)!=null?stack1.key:stack1,depth0))+"&employeeKey="+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.key:stack1,depth0))+'">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Go to ADU Management tool.",{name:"s",hash:{},data:data}))+"\n\t\t\t</a>\n\t\t</p>\n"},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=(stack1=depths[1]!=null?depths[1].employee:depths[1])!=null?stack1.team:stack1)!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},4:function(depth0,helpers,partials,data){return'selected="selected"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Team",{name:"s",hash:{},data:data}))+'</h4>\n<input type="text" class="dummy" />\n\n<div class="alert alert-info alert-flat">\n\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"To move <strong>{employee_name}</strong> to a different Team, select the new team below.",{name:"s",hash:{employee_name:(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.name:stack1},data:data}))+"</p>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isCurrentUserAduManager:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"</div>\n\n<h5>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Current Team",{name:"s",hash:{},data:data}))+'</h5>\n<table class="table table-bordered table-condensed">\n<tr>\n\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Name",{name:"s",hash:{},data:data}))+"</th>\n\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.team:stack1)!=null?stack1.name:stack1,depth0))+"</td>\n</tr>\n<tr>\n\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Primary Manager",{name:"s",hash:{},data:data}))+'</th>\n\t<td><span id="changeTeamCurrentManager">'+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.team:stack1)!=null?stack1.manager:stack1)!=null?stack1.name:stack1,depth0))+"</span></td>\n</tr>\n<tr>\n\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Members",{name:"s",hash:{},data:data}))+'</th>\n\t<td><span id="changeTeamCurrentMembers">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</span></td>\n</tr>\n</table>\n\n<h5>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Team",{name:"s",hash:{},data:data}))+'</h5>\n<table class="table table-bordered table-condensed">\n<tr>\n\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Name",{name:"s",hash:{},data:data}))+'</th>\n\t<td>\n\t\t<select id="ddlChangeTeam" class="form-control input-sm">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.teams:depth0,{name:"each",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</select>\n\t</td>\n</tr>\n<tr>\n\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Primary Manager",{name:"s",hash:{},data:data}))+'</th>\n\t<td><span id="changeTeamManager">'+this.escapeExpression(this.lambda((stack1=(stack1=(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.team:stack1)!=null?stack1.manager:stack1)!=null?stack1.name:stack1,depth0))+"</span></td>\n</tr>\n<tr>\n\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Members",{name:"s",hash:{},data:data}))+'</th>\n\t<td><span id="changeTeamMembers">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</span></td>\n</tr>\n</table>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/dialogs/tmpl/ChangeTeam",t);return t});define("admin/dialogs/ChangeTeamDialog",["jquery","underscore","appogee","hbs!admin/dialogs/tmpl/ChangeTeam"],function($,_,appogee,tmpl){"use strict";var S,R={btnChangeTeam:"Confirm Change Team",errorNoTeam:"Please select a team.",errorSameTeam:"Please select a different team.",nfhChangingTeam:"Changing Team ..."};var TEAMS=null;var $dlg=null;var Dialog=function(employee){S=appogee.getStrings("ChangeTeamDialog",R);this.employee=employee;this.onChangeHandler=null;if($dlg===null){$dlg=$("<div />").addClass("dialog")}var me=this;this.dlg=new appogee.Dialog($dlg,{width:600,okCallback:function(){me.changeTeam()},okText:S.btnChangeTeam});if(!TEAMS){this.fetchTeams()}};Dialog.prototype.onChange=function(handler){this.onChangeHandler=handler};Dialog.prototype.fetchTeams=function(){var me=this;appogee.api.get("/teams?aduKey="+this.employee.adu.key,function(response){TEAMS=response.items;appogee.ui.populateDropdown($("#ddlChangeTeam"),TEAMS,{defaultValue:"",defaultKey:me.employee.team.key,valueName:"name"});me.populateMeta()},{cachePolicies:{"/teams":{type:"session",expirySeconds:3600}}})};Dialog.prototype.show=function(){var me=this;var data={employee:this.employee,teams:TEAMS,isCurrentUserAduManager:appogee.getCurrentUser().isAduManager()};$dlg.html(tmpl(data));this.populateMeta();$dlg.find("#ddlChangeTeam").change(function(){me.populateMeta()});this.dlg.show()};Dialog.prototype.populateMeta=function(){this.populateCurrentMeta();this.populateNewMeta()};Dialog.prototype.populateCurrentMeta=function(){$dlg.find("#changeTeamCurrentManager").html("");$dlg.find("#changeTeamCurrentMembers").html("");var teamKey=null;if(this.employee.team){teamKey=this.employee.team.key}if(!teamKey){return}var team=_.findWhere(TEAMS,{key:teamKey});if(!team){return}if(team.manager){$dlg.find("#changeTeamCurrentManager").html(team.manager.name)}if(team.members){var members=team.members.map(function(member){return member.name}).join(", ");$dlg.find("#changeTeamCurrentMembers").html(members)}};Dialog.prototype.populateNewMeta=function(){$dlg.find("#changeTeamManager").html("");$dlg.find("#changeTeamMembers").html("");var teamKey=$dlg.find("#ddlChangeTeam").val();if(!teamKey){return}var team=_.findWhere(TEAMS,{key:teamKey});if(!team){return}if(team.manager){$dlg.find("#changeTeamManager").html(team.manager.name)}if(team.members){var members=team.members.map(function(member){return member.name}).join(", ");$dlg.find("#changeTeamMembers").html(members)}};Dialog.prototype.changeTeam=function(){var _this129=this;var teamKey=$dlg.find("#ddlChangeTeam").val();if(!teamKey){appogee.valert(S.errorNoTeam);return}else if(teamKey==this.employee.team.key){appogee.valert(S.errorSameTeam);return}var team=_.findWhere(TEAMS,{key:teamKey});this.dlg.hide();var notifier=appogee.notify(S.nfhChangingTeam);var body={teamKey:teamKey,employeeKey:this.employee.key};appogee.xhr.post("/admin/org/teams/add_member",body,function(response){if(response.success){notifier.success();if(_this129.onChangeHandler){_this129.onChangeHandler(team)}}},{artificialDelay:true})};return Dialog});define("hbs!admin/dialogs/tmpl/ChangeVirtualTeam",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return"\t\t<p>\n\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"To move the employee to a Virtual Team in a different division, please use the ADU Manager tool.",{name:"s",hash:{},data:data}))+'\n\t\t\t<a href="/admin/organisation/adu-manager?aduKey='+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.adu:stack1)!=null?stack1.key:stack1,depth0))+"&teamKey="+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.team:stack1)!=null?stack1.key:stack1,depth0))+"&employeeKey="+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.key:stack1,depth0))+'">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Go to ADU Management tool.",{name:"s",hash:{},data:data}))+"\n\t\t\t</a>\n\t\t</p>\n"},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data
}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=(stack1=depths[1]!=null?depths[1].employee:depths[1])!=null?stack1.virtualTeam:stack1)!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},4:function(depth0,helpers,partials,data){return'selected="selected"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Virtual Team",{name:"s",hash:{},data:data}))+'</h4>\n<input type="text" class="dummy" />\n\n<div class="alert alert-info alert-flat">\n\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Virtual Team you wish to move <strong>{employee_name}</strong>.",{name:"s",hash:{employee_name:(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.name:stack1},data:data}))+"</p>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isCurrentUserAduManager:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"</div>\n\n<h5>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Virtual Team",{name:"s",hash:{},data:data}))+'</h5>\n<table class="table table-bordered table-condensed">\n<tr>\n\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Name",{name:"s",hash:{},data:data}))+'</th>\n\t<td>\n\t\t<select id="ddlChangeVirtualTeam" class="form-control input-sm">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.virtualTeams:depth0,{name:"each",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</select>\n\t</td>\n</tr>\n<tr>\n\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Members",{name:"s",hash:{},data:data}))+'</th>\n\t<td><span id="changeVirtualTeamMembers">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</span></td>\n</tr>\n</table>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/dialogs/tmpl/ChangeVirtualTeam",t);return t});define("admin/dialogs/ChangeVirtualTeamDialog",["jquery","underscore","appogee","hbs!admin/dialogs/tmpl/ChangeVirtualTeam"],function($,_,appogee,tmpl){"use strict";var S,R={btnChangeVirtualTeam:"Confirm Change Virtual Team",errorNoVirtualTeam:"Please select a Virtual Team.",errorSameVirtualTeam:"Please select a different Virtual Team.",nfyChangingVirtualTeam:"Changing Virtual Team ..."};var VIRTUAL_TEAMS=null;var $dlg=null;var Dialog=function(employee){S=appogee.getStrings("ChangeVirtualTeamDialog",R);this.employee=employee;this.onChangeHandler=null;if($dlg===null){$dlg=$("<div />").addClass("dialog")}var me=this;this.dlg=new appogee.Dialog($dlg,{width:600,okCallback:function(){me.changeVirtualTeam()},okText:S.btnChangeVirtualTeam});if(!VIRTUAL_TEAMS){this.fetchVirtualTeams()}};Dialog.prototype.onChange=function(handler){this.onChangeHandler=handler};Dialog.prototype.fetchVirtualTeams=function(){var me=this;appogee.api.get("/virtual-teams?aduKey="+this.employee.adu.key,function(response){VIRTUAL_TEAMS=response.items;var defaultKey=null;if(me.employee.virtualTeam){defaultKey=me.employee.virtualTeam.key}appogee.ui.populateDropdown($("#ddlChangeVirtualTeam"),VIRTUAL_TEAMS,{defaultValue:"",defaultKey:defaultKey,valueName:"name"});me.populateMeta()},{cachePolicies:{"/virtual-teams":{type:"session",expirySeconds:3600}}})};Dialog.prototype.show=function(){var me=this;var data={employee:this.employee,virtualTeams:VIRTUAL_TEAMS,isCurrentUserAduManager:appogee.getCurrentUser().isAduManager()};$dlg.html(tmpl(data));this.populateMeta();$dlg.find("#ddlChangeVirtualTeam").change(function(){me.populateMeta()});this.dlg.show()};Dialog.prototype.populateMeta=function(){this.populateCurrentMeta();this.populateNewMeta()};Dialog.prototype.populateCurrentMeta=function(){$dlg.find("#changeVirtualTeamCurrentManager").html("");$dlg.find("#changeVirtualTeamCurrentMembers").html("");var virtualTeamKey=null;if(this.employee.virtualTeam){virtualTeamKey=this.employee.virtualTeam.key}if(!virtualTeamKey){return}var virtualTeam=_.findWhere(VIRTUAL_TEAMS,{key:virtualTeamKey});if(!virtualTeam){return}if(virtualTeamKey.manager){$dlg.find("#changeVirtualTeamCurrentManager").html(virtualTeamKey.manager.name)}if(virtualTeamKey.members){var members=virtualTeamKey.members.map(function(member){return member.name}).join(", ");$dlg.find("#changeVirtualTeamCurrentMembers").html(members)}};Dialog.prototype.populateNewMeta=function(){$dlg.find("#changeVirtualTeamManager").html("");$dlg.find("#changeVirtualTeamMembers").html("");var virtualTeamKey=$dlg.find("#ddlChangeVirtualTeam").val();if(!virtualTeamKey){return}var virtualTeam=_.findWhere(VIRTUAL_TEAMS,{key:virtualTeamKey});if(!virtualTeam){return}if(virtualTeam.manager){$dlg.find("#changeVirtualTeamManager").html(virtualTeam.manager.name)}if(virtualTeam.members){var members=virtualTeam.members.map(function(member){return member.name}).join(", ");$dlg.find("#changeVirtualTeamMembers").html(members)}};Dialog.prototype.changeVirtualTeam=function(){var _this130=this;var virtualTeamKey=$dlg.find("#ddlChangeVirtualTeam").val();if(!virtualTeamKey){appogee.valert(S.errorNoVirtualTeam);return}else if(this.employee.virtualTeam&&this.employee.virtualTeam.key==virtualTeamKey){appogee.valert(S.errorSameVirtualTeam);return}var virtualTeam=_.findWhere(VIRTUAL_TEAMS,{key:virtualTeamKey});this.dlg.hide();var notifier=appogee.notify(S.nfyChangingVirtualTeam);var body={vteamKey:virtualTeamKey,employeeKey:this.employee.key};appogee.xhr.post("/admin/org/vteams/add_member",body,function(response){if(response.success){notifier.success();if(_this130.onChangeHandler){_this130.onChangeHandler(virtualTeam)}}},{artificialDelay:true})};return Dialog});define("templates/helpers/enumMonthString",["hbs/handlebars","appogee","enums/MonthEnum"],function(Handlebars,appogee,Month){"use strict";function enumMonthString(key){return Month.toString(key)}Handlebars.registerHelper("enumMonthString",enumMonthString);return enumMonthString});define("hbs!admin/dialogs/tmpl/ChangeLeaveProfile",["hbs/handlebars","templates/helpers/s","templates/helpers/enumMonthString"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var helper;return'\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</option>\n"},3:function(depth0,helpers,partials,data){return"\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The allowances should be reviewed via the Adjust Allowance Range tool.",{name:"s",hash:{},data:data}))+"\n"},5:function(depth0,helpers,partials,data){return"\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The allowances should be reviewed via the Allowance Calculator tool.",{name:"s",hash:{},data:data}))+"\n"},7:function(depth0,helpers,partials,data){return'\t\t\t<input type="checkbox" checked="checked" class="chkAdjustAllowanceRange" />\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Visit the Adjust Allowance Range tool after save",{name:"s",hash:{},data:data}))+"\n"},9:function(depth0,helpers,partials,data){return'\t\t\t<input type="checkbox" checked="checked" class="chkAllowanceCalculator" />\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Visit the Allowance Calculator tool after save",{name:"s",hash:{},data:data}))+"\n"},11:function(depth0,helpers,partials,data){var stack1;return'\t<table class="table table-condensed">\n\t<tr>\n\t\t<th colspan="2" style="border-top: 0px;">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Summary",{name:"s",hash:{},data:data}))+'</th>\n\t</tr>\n\t<tr>\n\t\t<td class="col-xm-6">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start Month",{name:"s",hash:{},data:data}))+'</td>\n\t\t<td class="col-xm-6">\n\t\t\t'+this.escapeExpression((helpers.enumMonthString||depth0&&depth0.enumMonthString||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.startMonth:stack1,{name:"enumMonthString",hash:{},data:data}))+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.differentStartMonth:depth0,{name:"if",hash:{},fn:this.program(12,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</td>\n\t</tr>\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.holProfile:stack1,{name:"if",hash:{},fn:this.program(14,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours in working day",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.hoursInDay:stack1,depth0))+"</td>\n\t</tr>\n\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Allowance",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.leaveAllowanceSummary:stack1,depth0))+"</td>\n\t</tr>\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.sickAllowanceSummary:stack1,{name:"if",hash:{},fn:this.program(16,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.custom1AllowanceSummary:stack1,{name:"if",hash:{},fn:this.program(18,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.custom1AllowanceSummary:stack1,{name:"if",hash:{},fn:this.program(20,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</table>\n"},12:function(depth0,helpers,partials,data){return'\t\t\t<span class="text-warning pull-right"><i class="glyphicon glyphicon-alert"></i>&nbsp;\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This leave profile has a different start month",{name:"s",hash:{},data:data}))+'\n\t\t\t</span>\n\t\t\t<div class="clearfix"></div>\n'},14:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Public Holiday Profile",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.holProfile:stack1)!=null?stack1.name:stack1,depth0))+"</td>\n\t</tr>\n"},16:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sickness Allowance",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.sickAllowanceSummary:stack1,depth0))+"</td>\n\t</tr>\n"},18:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Custom 1 Allowance",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.custom1AllowanceSummary:stack1,depth0))+"</td>\n\t</tr>\n"},20:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Custom 2 Allowance",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.custom2AllowanceSummary:stack1,depth0))+"</td>\n\t</tr>\n"},22:function(depth0,helpers,partials,data){return'disabled="disabled"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Leave Profile",{name:"s",hash:{},data:data}))+"</h4>\n<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select the new Leave Profile for the employee below.",{name:"s",hash:{},data:data}))+'</p>\n\n<div class="form-group">\n\t<select class="form-control input-sm ddlLeaveProfile">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.leaveProfiles:depth0,{name:"each",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t</select>\n</div>\n\n<p class="text-danger">\n\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please note that the user's allowances will NOT be automatically updated.",{name:"s",hash:{},data:data}))+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.differentStartMonth:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.program(5,data,0),data:data}))!=null?stack1:"")+'</p>\n\n<div class="form-group">\n\t<div class="checkbox">\n\t\t<label>\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.differentStartMonth:depth0,{name:"if",hash:{},fn:this.program(7,data,0),inverse:this.program(9,data,0),data:data}))!=null?stack1:"")+"\t\t</label>\n\t</div>\n</div>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hasChanged:depth0,{name:"if",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="text-right">\n\t<button class="btn btn-sm btn-default btnCancel">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t</button>\n\t<button class="btn btn-sm btn-primary btnSubmit" '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.hasChanged:depth0,{name:"unless",hash:{},fn:this.program(22,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Leave Profile",{name:"s",hash:{},data:data}))+"\n\t</button>\n</div>"},useData:true});Handlebars.registerPartial("admin/dialogs/tmpl/ChangeLeaveProfile",t);return t});define("admin/dialogs/ChangeLeaveProfileDialog",["jquery","underscore","appogee","hbs!admin/dialogs/tmpl/ChangeLeaveProfile"],function($,_,appogee,tmpl){"use strict";var S,R={errorNoLeaveProfile:"Please select a Leave Profile.",nfyChangingLeaveProfile:"Changing Leave Profile ...",nfyChangedLeaveProfile:"Leave Profile Changed Successfully",alertLeaveProfileChangedTitle:"Leave Profile Changed Successfully",alertLeaveProfileChangedMsg1:"The Leave Profile was changed successfully.",alertLeaveProfileChangedMsg2:"You will now be redirected to the Allowance Calculator where you can review and update this Employees Allowances.",alertLeaveProfileChangedMsg3:"You will now be redirected to the Adjust Allowance Range tool where you can review and realign Employees Allowances ranges."};var LEAVE_PROFILES=null;var $dlg=null;var Dialog=function(employee){S=appogee.getStrings("ChangeLeaveProfileDialog",R);this.employee=employee;this.onChangeHandler=null;this.leaveProfile=employee.leaveProfile;if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.dlg=new appogee.Dialog($dlg,{title:"Change Leave Profile"});this.dlg.clearButtons()};Dialog.prototype.onChange=function(handler){this.onChangeHandler=handler};Dialog.prototype.fetch=function(){var _this131=this;var url="/leave-profiles?projection=summary&aduKey={0}&aduTraverse=up".format(this.employee.adu.key);appogee.api.get(url,function(response){LEAVE_PROFILES=response.items;_this131.employee.leaveProfile=_.findWhere(LEAVE_PROFILES,{key:_this131.employee.leaveProfile.key});var leaveProfile=_this131.employee.leaveProfile;if(_this131.leaveProfile){leaveProfile=_this131.leaveProfile}appogee.ui.populateDropdown($dlg.find(".ddlLeaveProfile"),LEAVE_PROFILES,{defaultKey:leaveProfile.key,valueName:"name",groupBy:"adu.path",defaultValue:""})},{cachePolicies:{"/leave-profiles":{type:"session",expirySeconds:3600}}})};Dialog.prototype.show=function(){this.render();this.dlg.show()};Dialog.prototype.render=function(){var _this132=this;var differentStartMonth=false;if(this.leaveProfile.startMonth!=this.employee.leaveProfile.startMonth){differentStartMonth=true}var data={employee:this.employee,leaveProfiles:LEAVE_PROFILES,leaveProfile:this.leaveProfile,hasChanged:this.leaveProfile.key!=this.employee.leaveProfile.key,differentStartMonth:differentStartMonth};$dlg.html(tmpl(data));this.fetch();$dlg.find(".btnCancel").click(function(){_this132.close()});$dlg.find(".btnSubmit").click(function(){_this132.submit()});$dlg.find(".ddlLeaveProfile").change(function(e){_this132.leaveProfile=_.findWhere(LEAVE_PROFILES,{key:e.currentTarget.value});_this132.render();_this132.dlg.center()})};Dialog.prototype.submit=function(){var _this133=this;var leaveProfileKey=$dlg.find(".ddlLeaveProfile").val();if(!leaveProfileKey){appogee.valert(S.errorNoLeaveProfile);return}var url="/admin/org/employees/change_leave_profile";var data={employeeKey:this.employee.key,leaveProfileKey:leaveProfileKey};var allowanceCalculator=$dlg.find(".chkAllowanceCalculator").prop("checked");var adjustAllowanceRange=$dlg.find(".chkAdjustAllowanceRange").prop("checked");this.close();var notifier=appogee.notify(S.nfyChangingLeaveProfile);appogee.xhr.post(url,data,function(response){notifier.success(S.nfyChangedLeaveProfile);if(_this133.onChangeHandler){_this133.onChangeHandler(response.leaveProfile)}if(allowanceCalculator){var msg=S.alertLeaveProfileChangedMsg1+"<br/>"+S.alertLeaveProfileChangedMsg2;appogee.alert(S.alertLeaveProfileChangedTitle,msg,S.alertLeaveProfileChangedMsg2,function(){location.href="/admin/allowance-calculator?aduKey={0}&teamKey={1}&leaveProfileKey={2}".format(_this133.employee.adu.key,_this133.employee.team.key,leaveProfileKey)})}else if(adjustAllowanceRange){var msg=S.alertLeaveProfileChangedMsg1+"<br/>"+S.alertLeaveProfileChangedMsg3;appogee.alert(S.alertLeaveProfileChangedTitle,msg,S.alertLeaveProfileChangedMsg3,function(){location.href="/admin/adjust-allowance-range?aduKey={0}&teamKey={1}&leaveProfileKey={2}".format(_this133.employee.adu.key,_this133.employee.team.key,leaveProfileKey)})}else{appogee.alert(S.alertLeaveProfileChangedTitle,S.alertLeaveProfileChangedMsg1)}},{artificialDelay:true})};Dialog.prototype.close=function(){this.dlg.hide()};return Dialog});define("hbs!admin/dialogs/tmpl/ChangeEmail",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t\t<div class="help-block">\n\t\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This will effect how the user logs in to {app_name}.",{name:"s",hash:{app_name:depth0!=null?depth0.appName:depth0},data:data}))+"</p>\n\t\t</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Email Address",{name:"s",hash:{},data:data}))+'</h4>\n<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enter the new email address below:",{name:"s",hash:{},data:data}))+'</label>\n\t<input type="text" class="form-control input-sm" id="txtChangeEmail" value="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.email:stack1,depth0))+'" />\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.loginStatus:stack1,"active",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"</div>"},useData:true});Handlebars.registerPartial("admin/dialogs/tmpl/ChangeEmail",t);return t});define("admin/dialogs/ChangeEmailDialog",["jquery","appogee","hbs!admin/dialogs/tmpl/ChangeEmail"],function($,appogee,tmpl){"use strict";var S,R={btnChangeEmail:"Change Email Address",errorNoEmail:"Please enter the employees new email address.",errorInvalidEmail:"Please enter a valid email address.",errorSameEmail:"Please enter the employees new email address.",nfyChangeEmail:"Changing Email Address ...",alertEmailChangedTitle:"Email Address Changed",alertEmailChangedMsg:"The Employees Email Address has been updated.",errorChangeEmail:"Unable to change Email Address"};var $dlg=null;var Dialog=function(employee){S=appogee.getStrings("ChangeEmailDialog",R);this.employee=employee;this.onChangeHandler=null;if($dlg===null){$dlg=$("<div />").addClass("dialog")}var me=this;this.dlg=new appogee.Dialog($dlg,{okCallback:function(){me.changeEmail()},okText:S.btnChangeEmail})};Dialog.prototype.onChange=function(handler){this.onChangeHandler=handler};Dialog.prototype.show=function(){var me=this;var data={employee:this.employee,appName:appogee.getAppName()};$dlg.html(tmpl(data));this.dlg.show()};Dialog.prototype.changeEmail=function(){var me=this;var email=$dlg.find("#txtChangeEmail").val();email=email.trim();if(!email){appogee.valert(S.errorNoEmail);return}else if(!appogee.validation.validateEmail(email)){appogee.valert(S.errorInvalidEmail);return}else if(email==this.employee.email){appogee.valert(S.errorSameEmail);return}var url="/admin/org/employees/change_email";var data={key:this.employee.key,email:email};var notifier=appogee.notify(S.nfyChangeEmail);this.dlg.hide();appogee.xhr.post(url,data,function(response){notifier.success();if(response.success){appogee.alert(S.alertEmailChanged);if(me.onChangeHandler){me.onChangeHandler(response.employee.email)}}else{appogee.valert(S.errorChangeEmail,response.reason)}},{artificialDelay:true})};return Dialog});define("hbs!admin/dialogs/tmpl/Archive",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Archive Employee?",{name:"s",hash:{},data:data}))+'</h4>\n<div class="alert alert-warning alert-flat">\n\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"\n\t\tArchiving an Employee will remove them from {app_name}.\n\t\tArchived Employees can be viewed from the Archived Employees page.\n\t\tArchiving an Employee does not delete their data, and any archived Employee can be restored at any time.\n\t\tArchived Employees can not log in, and do not contribute to your license count.\n\t\t",{name:"s",hash:{app_name:depth0!=null?depth0.appName:depth0},data:data}))+"\n\t</p>\n</div>\n\n<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The following information about this employee will be available to HR Managers.",{name:"s",hash:{},data:data}))+'</p>\n\n<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Job Title",{name:"s",hash:{},data:data}))+'</label>\n\t<input type="text" class="form-control input-sm" id="txtArchiveJobTitle" />\n</div>\n\n<div class="form-group row">\n\t<div class="col-xs-6">\n\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee Start Date (Continuous)",{name:"s",hash:{},data:data}))+'</label>\n\t\t<input type="text" class="form-control input-sm" id="txtArchiveStartDate" />\n\t</div>\n\t<div class="col-xs-6">\n\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee End Date",{name:"s",hash:{},data:data}))+'</label>\n\t\t<input type="text" class="form-control input-sm" id="txtArchiveEndDate" />\n\t</div>\n</div>\n\n<div class="form-group row">\n\t<div class="col-xs-6">\n\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Salary (include currency if applicable)",{name:"s",hash:{},data:data}))+'</label>\n\t\t<input type="text" class="form-control input-sm" id="txtArchiveSalary" />\n\t</div>\n\t<div class="col-xs-6" id="lengthOfServiceContainer">\n\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Length of Service",{name:"s",hash:{},data:data}))+'</label>\n\t\t<p class="form-control-static"></p>\n\t</div>\n</div>'},useData:true});Handlebars.registerPartial("admin/dialogs/tmpl/Archive",t);return t});define("admin/dialogs/ArchiveDialog",["jquery","appogee","hbs!admin/dialogs/tmpl/Archive","jquery.appogee.datePicker"],function($,appogee,tmpl){"use strict";return{initDatePicker:function($field,strDate){var me=this;$field.appogeeDatePicker({onSelect:function(){me.setLengthOfService()}});if(strDate){var date=new Date(strDate);$field.datepicker("setDate",date)}},setLengthOfService:function(){var start=this.$start.datepicker("getDate");var end=this.$end.datepicker("getDate");if(start&&end&&start<=end){var months=0;while(start<end){start.setMonth(start.getMonth()+1);months++}var years=Math.floor(months/12);months%=12;var lengthOfService="";if(years>0){lengthOfService=years+" year";lengthOfService+=years==1?"":"s";lengthOfService+=months>0?", ":""}if(months>0){lengthOfService+=months+" month";lengthOfService+=months==1?"":"s"}$("#lengthOfServiceContainer").find("p").html(lengthOfService)}},show:function(employee,callback){this.employee=employee;var data={employee:this.employee,appName:appogee.getAppName()};var $divDiv=$("<div />").html(tmpl(data)).addClass("dialog");var year=(new Date).getFullYear();var range="{0}:{1}".format(year-100,year);this.$jobTitle=$divDiv.find("#txtArchiveJobTitle");this.$salary=$divDiv.find("#txtArchiveSalary");this.$start=$divDiv.find("#txtArchiveStartDate");this.$end=$divDiv.find("#txtArchiveEndDate");this.$jobTitle.val(employee.jobTitle);this.initDatePicker(this.$start,employee.continuousStartDate,range);this.initDatePicker(this.$end,employee.endDate,range);var me=this;var dlg=new appogee.Dialog($divDiv,{width:600,okText:"Archive Employee",okClass:"btn-danger",okCallback:function(){var start=me.$start.datepicker("getDate");var end=me.$end.datepicker("getDate");var jobTitle=me.$jobTitle.val();var salary=me.$salary.val();if(start){start=start.toISOString()}if(end){end=end.toISOString()}if(callback){callback(start,end,jobTitle,salary)}dlg.hide()}});dlg.show();this.setLengthOfService()}}});define("hbs!admin/dialogs/tmpl/SyncExtTemplate",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return"<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This will update the Employees Name and Email Address with {ext_service}.",{name:"s",hash:{ext_service:depth0!=null?depth0.extService:depth0},data:data}))+'</p>\n\n<div class="form-group">\n\t<div class="checkbox">\n\t\t<label>\n\t\t\t<input type="checkbox" id="chbSyncPhoto" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.syncPhoto:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"/>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sync Photo",{name:"s",hash:{},data:data}))+"\n\t\t</label>\n\t</div>\n</div>\n\n"},2:function(depth0,helpers,partials,data){return'checked="checked"'},4:function(depth0,helpers,partials,data){return"\n<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This will update the Employees Name, Email Address and Photo with {ext_service}.",{name:"s",hash:{ext_service:depth0!=null?depth0.extService:depth0},data:data}))+"</p>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sync with {ext_service}?",{name:"s",hash:{ext_service:depth0!=null?depth0.extService:depth0},data:data}))+"</h4>\n\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.imageUrl:stack1,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.program(4,data,0),data:data}))!=null?stack1:"")+"\n<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Do you wish to continue?",{name:"s",hash:{},data:data}))+"</p>\n"},useData:true});Handlebars.registerPartial("admin/dialogs/tmpl/SyncExtTemplate",t);return t});define("admin/dialogs/SyncExtDialog",["jquery","underscore","appogee","hbs!admin/dialogs/tmpl/SyncExtTemplate"],function($,_,appogee,tmpl){"use strict";var S,R={dlgTitle:"Sync with {extService}?",nfySyncing:"Syncing with {extService} ...",nfySynced:"Synced with {extService}."};var $dlg=null;var EXT_SERVICE_LABELS={gapps:"G Suite",o365:"Office 365"};var Dialog=function(employee,extService){var _this134=this;S=appogee.getStrings("SyncExt",R);this.employee=employee;this.extService=extService;this.syncPhoto=!employee.imageUrl;this.onChangeHandler=null;if($dlg===null){$dlg=$("<div />").addClass("dialog")}var extServiceLabel=EXT_SERVICE_LABELS[this.extService];this.dlg=new appogee.Dialog($dlg,{title:S.get("dlgTitle",{extService:extServiceLabel}),okCallback:function(){_this134.sync()}})};Dialog.prototype.onChange=function(handler){this.onChangeHandler=handler};Dialog.prototype.show=function(){this.render();this.dlg.show()};Dialog.prototype.render=function(){var _this135=this;var data={employee:this.employee,extService:EXT_SERVICE_LABELS[this.extService],syncPhoto:this.syncPhoto};$dlg.html(tmpl(data));$dlg.find("#chbSyncPhoto").change(function(){_this135.syncPhoto=!_this135.syncPhoto})};Dialog.prototype.sync=function(){var _this136=this;var url="/admin/org/employees/sync_{0}".format(this.extService);var data={key:this.employee.key,forcePhotoUpdate:this.syncPhoto};this.close();var extServiceLabel=EXT_SERVICE_LABELS[this.extService];var notifier=appogee.notify(S.get("nfySyncing",{extService:extServiceLabel}));appogee.xhr.post(url,data,function(response){var extServiceLabel=EXT_SERVICE_LABELS[_this136.extService];notifier.success(S.get("nfySynced",{extService:extServiceLabel}));if(_this136.onChangeHandler){_this136.onChangeHandler(response)}},{artificialDelay:true})};Dialog.prototype.close=function(){this.dlg.hide()};return Dialog});define("admin/org/employee_util",["jquery","appogee","admin/dialogs/ChangeStatusDialog","admin/dialogs/ChangeTeamDialog","admin/dialogs/ChangeVirtualTeamDialog","admin/dialogs/ChangeLeaveProfileDialog","admin/dialogs/ChangeEmailDialog","admin/dialogs/ArchiveDialog","admin/dialogs/SyncExtDialog"],function($,appogee,ChangeStatusDialog,ChangeTeamDialog,ChangeVirtualTeamDialog,ChangeLeaveProfileDialog,ChangeEmailDialog,ArchiveDialog,SyncExtDialog){"use strict";var S,R={
confirmSendWelcomeTitle:"Re-Send Welcome Email?",confirmSendWelcomeMsg1:"This will resend the welcome email to {employee_name}",confirmSendWelcomeMsg2:"Do you wish to continue?",notifySendingWelcome:"Sending Welcome Email ...",notifyWelcomeSent:"Email Sent Successfully",notifySyncingGapps:"Syncing with G Suite ...",notifySyncingO365:"Syncing with Office 365 ...",notifySyncComplete:"Sync Complete",alertWelcomeSentTitle:"Email Sent",alertWelcomeSentMsg:"The welcome email has been sent to {employee_name}",alertWelcomeNotSentTitle:"Email Not Sent",alertWelcomeNotSentMsg:"It was not possible to send the welcome email",confirmResetPasswordTitle:"Send Pasword Reset Email?",confirmResetPasswordMsg1:"The password cannot be reset directly. To perform a password reset, an email will be sent to {employee_email} with a link which will allow them to change the password themselves.",confirmResetPasswordMsg2:"Do you wish to continue?",notifySendingReset:"Sending Password Reset Email ...",notifyResetSent:"Email Sent Successfully",alertResetSentTitle:"Email Sent",alertResetSentMsg:"The Password Reset email has been sent to {employee_email}",alertResetNotSentTitle:"Email Not Sent",alertResetNotSentMsg:"It was not possible to send the password reset email",errorChangeAduNoAccessTitle:"Insuficient Access",errorChangeAduNoAccessMsg:"You do not have access to change this employees Division",alertChangeDivisionTitle:"Change Division",alertChangeDivisionMsg1:"To move an Employee to a different Division, please use the ADU Management tool.",alertChangeDivisionMsg2:"Would you like to be redirected there now?",alertTeamChangedTitle:"Team Changed",alertTeamChangedMsg:"The team for this employee has been changed to <strong>{team_name}</strong>.",alertVirtualTeamChangedTitle:"Virtual Team Changed",alertVirtualTeamChangedMsg:"The Virtual Team for this employee has been changed to <strong>{virtual_team_name}</strong>.",alertLeaveProfileChangedTitle:"Leave Profile changed",alertLeaveProfileChangedMsg:"The Leave Profile for this Employee has been changed to <strong>{leave_profile_name}</strong>.",alertEmailAddressChangedTitle:"Email Address changed",alertEmailAddressChangedMsg:"The Email Address for this Employee has been changed to <strong>{email}</strong>.",errorArchiveSelfTitle:"Invalid Action",errorArchiveSelfMsg:"You cannot archive yourself.",errorArchiveRolesTitle:"Invalid Action",errorArchiveRolesMsg:"Please remove all roles from the Employee before archiving.",notifyArchiving:"Archiving Employee ...",notifyArchived:"Employee Archived Successfully",alertArchivedTitle:"Employee Archived",alertArchivedMsg1:"The employee has been archived.",alertArchivedMsg2:"You will now be redirected to Archived Employees page.",alertEmployeeUpdatedTitle:"Employee Updated",alertEmployeeUpdatedMsg1:"The Employees Name, Email and Photo has been updated to {changes}.",alertEmployeeUpdatedMsg2:"The Employees Name and Email has been updated to {changes}.",alertEmployeeUpdatedMsg3:"The Employees Name and Photo has been updated to {changes}.",alertEmployeeUpdatedMsg4:"The Employees Email and Photo has been updated to {changes}.",alertEmployeeUpdatedMsg5:"The Employees Name has been updated to {changes}.",alertEmployeeUpdatedMsg6:"The Employees Email has been updated to {changes}.",alertEmployeeUpdatedMsg7:"The Employees Photo has been updated.",alertEmployeeNotUpdatedTitle:"Employee Not Updated",alertEmployeeNotUpdatedMsg:"No changes were found.",alertUnableToUpdateTitle:"Unable to update Employee",alertUnableToUpdateMsg:"It was not possible to update the Employee. Please check your G Suite integration settings and try again. If the problem persists please contact Appogee HR support."};return{initStrings:function(){if(!S){S=appogee.getStrings("employee_util",R)}},changeAdu:function(employee){this.initStrings();var currentUser=appogee.getCurrentUser();if(!currentUser.isAduManager()){appogee.valert(S.errorChangeAduNoAccess);return}appogee.confirm(S.alertChangeDivision,function(){var url="/admin/organisation/adu-manager?aduKey={0}&teamKey={1}&employeeKey={2}".format(employee.adu.key,employee.team.key,employee.key);location.href=url})},changeTeam:function(employee,callback){this.initStrings();var dlg=new ChangeTeamDialog(employee);dlg.show();dlg.onChange(function(team){appogee.alert(S.get("alertTeamChanged",{team_name:team.name}));employee.team=team;if(callback){callback(team)}})},changeVirtualTeam:function(employee,callback){this.initStrings();var dlg=new ChangeVirtualTeamDialog(employee);dlg.show();dlg.onChange(function(virtualTeam){employee.virtualTeam=virtualTeam;appogee.alert(S.get("alertVirtualTeamChanged",{virtual_team_name:virtualTeam.name}));if(callback){callback(virtualTeam)}})},changeLeaveProfile:function(employee,callback){this.initStrings();var dlg=new ChangeLeaveProfileDialog(employee);dlg.show();dlg.onChange(function(leaveProfile){employee.leaveProfile=leaveProfile;appogee.alert(S.get("alertLeaveProfileChanged",{leave_profile_name:leaveProfile.name}));if(callback){callback(leaveProfile)}})},changeEmail:function(employee,callback){this.initStrings();var dlg=new ChangeEmailDialog(employee);dlg.show();dlg.onChange(function(email){appogee.alert(S.get("alertEmailAddressChanged",{email:email}));if(callback){callback(email)}})},renderSyncResponse:function(employee,response,callback){if(response.success){var nameUpdated=response.employee.name!=employee.name;var emailUpdated=response.employee.email!=employee.email;var imageUrlUpdated=response.employee.imageUrl!=employee.imageUrl;var changedMsg=null;if(nameUpdated||emailUpdated||imageUrlUpdated){if(nameUpdated&&emailUpdated&&imageUrlUpdated){changedMsg=[response.employee.name,response.employee.email,"New Photo"].join(", ");appogee.alert(S.alertEmployeeUpdatedTitle,S.get("alertEmployeeUpdatedMsg1",{changes:changedMsg}))}else if(nameUpdated&&emailUpdated){changedMsg=[response.employee.name,response.employee.email].join(", ");appogee.alert(S.alertEmployeeUpdatedTitle,S.get("alertEmployeeUpdatedMsg2",{changes:changedMsg}))}else if(nameUpdated&&imageUrlUpdated){changedMsg=[response.employee.name,"New Photo"].join(", ");appogee.alert(S.alertEmployeeUpdatedTitle,S.get("alertEmployeeUpdatedMsg3",{changes:changedMsg}))}else if(emailUpdated&&imageUrlUpdated){changedMsg=[response.employee.email,"New Photo"].join(", ");appogee.alert(S.alertEmployeeUpdatedTitle,S.get("alertEmployeeUpdatedMsg4",{changes:changedMsg}))}else if(nameUpdated){changedMsg=response.employee.name;appogee.alert(S.alertEmployeeUpdatedTitle,S.get("alertEmployeeUpdatedMsg5",{changes:changedMsg}))}else if(emailUpdated){changedMsg=response.employee.email;appogee.alert(S.alertEmployeeUpdatedTitle,S.get("alertEmployeeUpdatedMsg6",{changes:changedMsg}))}else if(imageUrlUpdated){appogee.alert(S.alertEmployeeUpdatedTitle,S.get("alertEmployeeUpdatedMsg7"))}callback(response)}else{appogee.alert(S.alertEmployeeNotUpdated)}}else{appogee.valert(S.alertUnableToUpdate)}},syncGapps:function(employee,callback){this.initStrings();var dlg=new SyncExtDialog(employee,"gapps");dlg.show();var me=this;dlg.onChange(function(response){if(callback){me.renderSyncResponse(employee,response,callback)}})},syncO365:function(employee,callback){this.initStrings();var dlg=new SyncExtDialog(employee,"o365");dlg.show();var me=this;dlg.onChange(function(response){if(callback){me.renderSyncResponse(employee,response,callback)}})},resetPassword:function(employee,callback){var _this137=this;this.initStrings();var confirmResetPasswordMsg1=S.confirmResetPasswordMsg1.replace("{employee_email}","<strong>{employee_email}</strong>").format({employee_email:employee.email});var msg=appogee.util.joinWithPs(confirmResetPasswordMsg1,S.confirmResetPasswordMsg2);appogee.yesNo(S.confirmResetPasswordTitle,msg,function(btn){if(btn=="yes"){_this137.sendPwReset(employee,callback)}})},sendPwReset:function(employee,callback){this.initStrings();var notifier=appogee.notify(S.notifySendingReset);var url="/admin/org/employees/send_password_reset";var body={key:employee.key};appogee.xhr.post(url,body,function(response){notifier.success(S.notifyResetSent);if(response.success){var alertResetSentMsg=S.alertResetSentMsg.replace("{employee_email}","<strong>{employee_email}</strong>").format({employee_email:employee.email});appogee.alert(S.alertResetSentTitle,alertResetSentMsg)}else if(response.reason){appogee.alert(S.alertResetNotSentTitle,response.reason)}else{appogee.alert(S.alertResetNotSentTitle,S.alertResetNotSentMsg)}if(callback){callback(response)}},{artificialDelay:true})},sendWelcomeEmail:function(employee,callback){this.initStrings();var msg=appogee.util.joinWithPs(S.confirmSendWelcomeMsg1,S.confirmSendWelcomeMsg2).format({employee_name:employee.name});appogee.yesNo(S.confirmSendWelcomeTitle,msg,function(btn){if(btn=="yes"){var notifier=appogee.notify(S.notifySendingWelcome);var url="/admin/org/employees/send_welcome";var body={key:employee.key};appogee.xhr.post(url,body,function(response){notifier.success(S.notifyWelcomeSent);if(response.success){var alertWelcomeSentMsg=S.alertWelcomeSentMsg.format({employee_name:employee.name});appogee.alert(S.alertWelcomeSentTitle,alertWelcomeSentMsg)}else if(response.reason){appogee.alert(S.alertWelcomeNotSentTitle,response.reason)}else{appogee.alert(S.alertWelcomeNotSentTitle,S.alertWelcomeNotSentMsg)}if(callback){callback(response)}},{artificialDelay:true})}})},archiveEmployee:function(employee){this.initStrings();var currentUser=appogee.getCurrentUser();if(employee.key==currentUser.key){appogee.valert(S.errorArchiveSelf);return}if(employee.roles&&employee.roles.length>0){appogee.valert(S.errorArchiveRoles);return}ArchiveDialog.show(employee,function(start,end,jobTitle,salary){var url="/employees/{0}/archive".format(employee.key);var data={startDate:start,endDate:end,jobTitle:jobTitle,salary:salary};var notifier=appogee.notify(S.notifyArchiving);appogee.api.post(url,data,function(){notifier.success(S.notifyArchived);appogee.alert(S.alertArchived,function(){location.href="/admin/organisation/archived"})})})},changeStatus:function(employee,callback,options){this.initStrings();var dlg=new ChangeStatusDialog(employee,options);dlg.show();dlg.onChange(function(response){if(callback){callback(response)}})}}});define("hbs!admin/org/tmpl/RolesView",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'checked="checked"'},3:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The Team Manager role cannot be removed as the employee is a manager of 1 or more teams.",{name:"s",hash:{},data:data}))+"\n"},5:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The Team Manager role is automatically granted when an Employee is made a manager of a team.",{name:"s",hash:{},data:data}))+"\n\t\t"},7:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Managers with the edit role can also edit this data, although Employee Profile access is further refined via field level security.",{name:"s",hash:{},data:data}))+"\n"},9:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Managers with the edit role can also edit this data.",{name:"s",hash:{},data:data}))+"\n"},11:function(depth0,helpers,partials,data){return'disabled="disabled"'},13:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This gives them access to manage employee data for the ADU they are a member of, or any descendents.",{name:"s",hash:{},data:data}))+"\n"},15:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This gives them access to manage all employee data.",{name:"s",hash:{},data:data}))+"\n"},17:function(depth0,helpers,partials,data){return'\t\t\t<p class="text-danger">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Note: This role can only be managed by users with the ADU Manager role.",{name:"s",hash:{},data:data}))+"</p>\n"},19:function(depth0,helpers,partials,data){var stack1;return'<tr>\n\t<td class="text-center">\n\t\t<input type="checkbox" id="chkRoleAdu" '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.isCurrentUserAduManager:depth0,{name:"unless",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hasAdu:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+' />\n\t</td>\n\t<td><label for="chkRoleAdu">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"ADU Manager",{name:"s",hash:{},data:data}))+'</label></td>\n\t<td>\n\t\t<p><label for="chkRoleAdu">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The ADU Manager role gives users access to manage ADUs, as well as all employee data, regardless of ADU.",{name:"s",hash:{},data:data}))+"\n\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This is a powerful role and should be assigned to as few users as possible.",{name:"s",hash:{},data:data}))+"\n\t\t</label></p>\n\t\t\n"+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.isCurrentUserAduManager:depth0,{name:"unless",hash:{},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return"<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Configure which roles this employee has below:",{name:"s",hash:{},data:data}))+'</p>\n\n<table class="table table-condensed table-shaded table-bordered">\n<thead>\n<tr>\n\t<th class="w32">&nbsp;</th>\n\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Role",{name:"s",hash:{},data:data}))+"</th>\n\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Description",{name:"s",hash:{},data:data}))+'</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n\t<td class="text-center"><input type="checkbox" id="chkRoleManager" disabled="disabled" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hasManager:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+' /></td>\n\t<td>\n\t\t<label for="chkRoleManager" class="appogee-tooltip" data-tooltip-style="warning"\n\t\tdata-tooltip="\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hasManager:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.program(5,data,0),data:data}))!=null?stack1:"")+'">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team Manager",{name:"s",hash:{},data:data}))+'</label></td>\n\t<td>\n\t\t<label for="chkRoleManager">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Users with the Team Manager role have access to the Team Manager and Reporting sections of the application.",{name:"s",hash:{},data:data}))+"\n\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This gives them access to employee data for the teams they can manage.",{name:"s",hash:{},data:data}))+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCustomerAccessHr:depth0,{name:"if",hash:{},fn:this.program(7,data,0),inverse:this.program(9,data,0),data:data}))!=null?stack1:"")+"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The Manager role cannot be assigned directly, but is automatically assigned when added as a manager to a team.",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t</td>\n</tr>\n<tr>\n\t<td class="text-center"><input type="checkbox" id="chkRoleHr" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.aduRestricted:depth0,{name:"if",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" "+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hasHr:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+' /></td>\n\t<td><label for="chkRoleHr">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"HR Manager",{name:"s",hash:{},data:data}))+'</label></td>\n\t<td>\n\t\t<p><label for="chkRoleHr">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The HR Manager role gives users access to the Reporting, HR Manager and Org Admin sections of the application.",{name:"s",hash:{},data:data}))+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adusEnabled:depth0,{name:"if",hash:{},fn:this.program(13,data,0),inverse:this.program(15,data,0),data:data}))!=null?stack1:"")+"\t\t</label></p>\n\t\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.aduRestricted:depth0,{name:"if",hash:{},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n</tr>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adusEnabled:depth0,{name:"if",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'<tr>\n\t<td class="text-center"><input type="checkbox" id="chkRoleAdmin" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hasAdmin:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+' /></td>\n\t<td><label for="chkRoleAdmin">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Administrator",{name:"s",hash:{},data:data}))+'</label></td>\n\t<td>\n\t\t<label for="chkRoleAdmin">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Administrators have access to the Org Admin and Configuration section of the application.",{name:"s",hash:{},data:data}))+"\n\t\t</label>\n\t</td>\n</tr>\n</tbody>\n</table>"},useData:true});Handlebars.registerPartial("admin/org/tmpl/RolesView",t);return t});define("admin/org/views/RolesView",["jquery","appogee","hbs!admin/org/tmpl/RolesView","jquery.appogee.tooltip"],function($,appogee,tmpl){"use strict";var S,R={confirmRemoveHrTitle:"Remove HR Manager Role?",confirmRemoveHrMsg1:"Removing the HR Manager role will also remove the ADU Manager role.",confirmRemoveHrMsg2:"Do you wish to continue?",confirmGrantAduTitle:"Grant ADU Manager Role?",confirmGrantAduMsg1:"Granting the ADU Manager role will also grant the HR Manager role",confirmGrantAduMsg2:"Do you wish to continue?",errorInvalidRoles:"Invalid Roles",errorAduNoHr:"Users with the ADU Manager role must also have the HR Manager role. Please make this adjustment and try again.",errorRemoveSelfAdmin:"You cannot remove the Administrator role from your own account.",errorRemoveSelfAdu:"You cannot remove the ADU Manager role from your own account."};var View=function($container,employee){S=appogee.getStrings("RolesView",R);this.$container=$container;this.employee=employee;this.currentUser=appogee.getCurrentUser()};View.prototype.render=function(){var hasManager=this.employee.roles&&this.employee.roles.indexOf("manager")>-1;var hasHr=this.employee.roles&&this.employee.roles.indexOf("hr")>-1;var hasAdu=this.employee.roles&&this.employee.roles.indexOf("adu")>-1;var hasAdmin=this.employee.roles&&this.employee.roles.indexOf("admin")>-1;var adusEnabled=appogee.isAdusEnabled();var aduRestricted=adusEnabled&&hasAdu&&!this.currentUser.isAduManager();var data={employee:this.employee,hasManager:hasManager,hasHr:hasHr,hasAdu:hasAdu,hasAdmin:hasAdmin,adusEnabled:adusEnabled,aduRestricted:aduRestricted,isCurrentUserAduManager:this.currentUser.isAduManager(),canCustomerAccessHr:appogee.canCustomerAccessHr()};this.$container.html(tmpl(data));this.$container.find(".appogee-tooltip").appogeeTooltip();$("#chkRoleHr").click(function(e){if(!e.currentTarget.checked&&$("#chkRoleAdu").prop("checked")){appogee.confirm(S.confirmRemoveHr,function(){$("#chkRoleHr").prop("checked",false);$("#chkRoleAdu").prop("checked",false)});return false}});$("#chkRoleAdu").click(function(e){if(e.currentTarget.checked&&!$("#chkRoleHr").prop("checked")){appogee.confirm(S.confirmGrantAdu,function(){$("#chkRoleHr").prop("checked",true);$("#chkRoleAdu").prop("checked",true)});return false}})};View.prototype.validate=function(){var roles=this.getRoles();if(roles.indexOf("adu")>-1&&roles.indexOf("hr")==-1){appogee.valert(S.errorInvalidRoles,S.errorAduNoHr);return false}if(this.employee.key==this.currentUser.key){if(this.currentUser.isAdmin()&&roles.indexOf("admin")==-1){appogee.valert(S.errorInvalidRoles,S.errorRemoveSelfAdmin);return false}if(this.currentUser.isAduManager()&&roles.indexOf("adu")==-1){appogee.valert(S.errorInvalidRoles,S.errorRemiveSelfAdu);return false}}return true};View.prototype.getRoles=function(){var roles=[];if($("#chkRoleManager").prop("checked")){roles.push("manager")}if($("#chkRoleHr").prop("checked")){roles.push("hr")}if($("#chkRoleAdu").prop("checked")){roles.push("adu")}if($("#chkRoleAdmin").prop("checked")){roles.push("admin")}return roles};return View});define("templates/helpers/propercase",["hbs/handlebars","appogee"],function(Handlebars,appogee){"use strict";function propercase(word){return appogee.util.properCase(word)}Handlebars.registerHelper("propercase",propercase);return propercase});define("hbs!admin/templates/ManagedTeams",["hbs/handlebars","templates/helpers/s","templates/helpers/propercase"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1,helper;return'<tr>\n\t<td><a href="/admin/organisation/team?key='+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</a></td>\n\t<td>"+this.escapeExpression((helpers.propercase||depth0&&depth0.propercase||helpers.helperMissing).call(depth0,depth0!=null?depth0.role:depth0,{name:"propercase",hash:{},data:data}))+"</td>\n\t<td>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.primary:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n</tr>\n"},2:function(depth0,helpers,partials,data){return'\t\t\t<i class="glyphicon glyphicon-ok"></i>\n'},4:function(depth0,helpers,partials,data){return'<tr>\n\t<td colspan="3" class="no_results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This user is not a manager for any Teams.",{name:"s",hash:{},data:data}))+"</td>\n</tr>\n"},6:function(depth0,helpers,partials,data){var stack1,helper;return'<tr>\n\t<td><a href="/admin/organisation/vteam?key='+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</a></td>\n\t<td>"+this.escapeExpression((helpers.propercase||depth0&&depth0.propercase||helpers.helperMissing).call(depth0,depth0!=null?depth0.role:depth0,{name:"propercase",hash:{},data:data}))+"</td>\n\t<td>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.primary:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n</tr>\n"},8:function(depth0,helpers,partials,data){return'<tr>\n\t<td colspan="3" class="no_results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This user is not a manager for any Virtual Teams.",{name:"s",hash:{},data:data}))+"</td>\n</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return"<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This employee is a manager of the following teams:",{name:"s",hash:{},data:data}))+'</p>\n\n<table class="table table-condensed table-shaded table-bordered">\n<thead>\n<tr>\n\t<th>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</th>\n\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Role",{name:"s",hash:{},data:data}))+'</th>\n\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Primary?",{name:"s",hash:{},data:data}))+"</th>\n</tr>\n</thead>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.teams:depth0,{name:"each",hash:{},fn:this.program(1,data,0),inverse:this.program(4,data,0),data:data}))!=null?stack1:"")+"</table>\n\n<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This employee is a manager of the following Virtual Teams:",{name:"s",hash:{},data:data}))+'</p>\n\n<table class="table table-condensed table-shaded table-bordered">\n<thead>\n<tr>\n\t<th>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Virtual Team",{name:"s",hash:{},data:data}))+'</th>\n\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Role",{name:"s",hash:{},data:data}))+'</th>\n\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Primary?",{name:"s",hash:{},data:data}))+"</th>\n</tr>\n</thead>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.vteams:depth0,{name:"each",hash:{},fn:this.program(6,data,0),inverse:this.program(8,data,0),data:data}))!=null?stack1:"")+"</table>"},useData:true});Handlebars.registerPartial("admin/templates/ManagedTeams",t);return t});define("admin/org/employee",["jquery","underscore","appogee","leave/models/Allowance","leave/models/Employee","admin/org/employee_util","admin/org/views/RolesView","admin/org/views/EmployeeStatusView","hbs!admin/templates/ManagedTeams","views/audit/EmbeddedAuditView","jquery.appogee.tabs","jquery.appogee.datePicker"],function($,_,appogee,Allowance,Employee,employeeUtil,RolesView,EmployeeStatusView,tmplManagedTeams,AuditView){"use strict";var S,R={formInvalid:"Form Invalid",noFirstName:"Please enter the Employees First Name",noLastName:"Please enter the Employees Last Name",noLeaveStartDateTitle:"Missing Leave Start Date",noLeaveStartDateMsg:"Please enter the custom Leave Start Date on the Employee Profile tab."};return{defaultStrings:R,contextHelp:true,views:{},getLoadUrls:function(){var employeeUrl="/employees/{0}?projection=hr".format(this.employeeKey);return{api:[employeeUrl]}},initialize:function(){var _this138=this;S=this.S;this.employeeKey=$("#txtKey").val();this.initOptionsMenu();$("#btnSave").click(function(){_this138.save()});$("#ddlLeaveStartDateField").change(function(e){var val=e.currentTarget.value;$("#panLeaveStartDateField").toggle(val=="custom")}).change();$("#txtLeaveStartDate").appogeeDatePicker();this.views.audit=new AuditView($("#auditContainer"),this.employeeKey);this.views.audit.render();this.views.audit.fetch()},initOptionsMenu:function(){var _this139=this;$(".btnChangeAdu").click(function(){employeeUtil.changeAdu(_this139.employee)});$(".btnChangeTeam").click(function(){employeeUtil.changeTeam(_this139.employee,function(team){var url="/admin/organisation/team?key={0}".format(team.key);$("#aTeam").attr("href",url).html(team.name);_this139.views.audit.fetch()})});$(".btnChangeVirtualTeam").click(function(){employeeUtil.changeVirtualTeam(_this139.employee,function(vteam){var url="/admin/organisation/vteam?key={0}".format(vteam.key);$("#aVirtualTeam").attr("href",url).html(vteam.name);_this139.views.audit.fetch()})});$(".btnChangeLeaveProfile").click(function(){employeeUtil.changeLeaveProfile(_this139.employee,function(leaveProfile){var url="/admin/leave-profile?key={0}".format(leaveProfile.key);$("#aLeaveProfile").attr("href",url).html(leaveProfile.name);_this139.views.audit.fetch()})});$(".btnChangeEmail").click(function(){employeeUtil.changeEmail(_this139.employee,function(email){_this139.employee.email=email;$("#employeeEmail").html(email);_this139.views.audit.fetch();_this139.views.audit.fetch()})});$(".btnSyncGapps").click(function(){employeeUtil.syncGapps(_this139.employee,function(response){if(response.employee){var n=appogee.util.splitName(response.employee.name);$("#txtFirstName").val(n[0]);$("#txtLastName").val(n[1]);$("#fullName").html(response.employee.name);$("#h1Title").html(response.employee.name);$("#employeeEmail").html(response.employee.email);_this139.views.audit.fetch();_this139.employee.firstName=n[0];_this139.employee.lastName=n[1];_this139.employee.name=response.employee.name;_this139.employee.email=response.employee.email;_this139.employee.imageUrl=response.employee.imageUrl}})});$(".btnSyncO365").click(function(){employeeUtil.syncO365(_this139.employee,function(response){if(response.employee){var n=appogee.util.splitName(response.employee.name);$("#txtFirstName").val(n[0]);$("#txtLastName").val(n[1]);$("#fullName").html(response.employee.name);$("#h1Title").html(response.employee.name);$("#employeeEmail").html(response.employee.email);_this139.views.audit.fetch();_this139.employee.firstName=n[0];_this139.employee.lastName=n[1];_this139.employee.name=response.employee.name;_this139.employee.email=response.employee.email;_this139.employee.imageUrl=response.employee.imageUrl}})});$(".btnResetPassword").click(function(){employeeUtil.resetPassword(_this139.employee)});$(".btnResendWelcome").click(function(){employeeUtil.sendWelcomeEmail(_this139.employee)});$(".btnArchive").click(function(){employeeUtil.archiveEmployee(_this139.employee)})},onLoad:function(employee){this.employee=employee;this.views.status=new EmployeeStatusView($("#employeeStatusView"),this.employee,{layoutHorizontal:true});this.views.status.render();if(this.employee.leaveStartDateField=="custom"){var leaveStartDate=this.currentUser.formatDate(this.employee.leaveStartDateCustom);$("#txtLeaveStartDate").val(leaveStartDate)}this.views.roles=new RolesView($("#rolesView"),this.employee);this.views.roles.render();var managedTeams=_.sortBy(_.where(this.employee.managedTeams,{type:"team"}),"name");var managedVirtualTeams=_.sortBy(_.where(this.employee.managedTeams,{type:"vteam"}),"name");$("#managedTeamsContainer").html(tmplManagedTeams({teams:managedTeams,vteams:managedVirtualTeams}))},resetPassword:function(){},save:function(){var _this140=this;if(!this.views.status.validate()){return}if(!this.views.roles.validate()){return}var status=this.views.status.getStatus(true);var roles=this.views.roles.getRoles();var firstName=null;var lastName=null;if($("#txtFirstName").length>0){firstName=$("#txtFirstName").val();lastName=$("#txtLastName").val();if(!firstName){appogee.valert(S.formInvalid,S.noFirstName);return}if(!lastName){appogee.valert(S.formInvalid,S.noLastName);return}firstName=firstName.trim();lastName=lastName.trim();$("#txtFirstName").val(firstName);$("#txtLastName").val(lastName)}var jobTitle=$("#txtJobTitle").val();var payrollNo=$("#txtPayrollNo").val();var workTel=$("#txtPhoneNumber").val();var leaveStartDateField=$("#ddlLeaveStartDateField").val()
;var leaveStartDate=$("#txtLeaveStartDate").datepicker("getDate");var logins=[];if($("#chkLoginHr").prop("checked")){logins.push("hr")}if($("#chkLoginLeave").prop("checked")){logins.push("leave")}if(leaveStartDateField=="custom"){if(!leaveStartDate){appogee.valert(S.noLeaveStartDateTitle,S.noLeaveStartDateMsg);return}leaveStartDate=appogee.util.date.toISOString(leaveStartDate)}var employee={continuousStartDate:status.continuousStartDate,startDate:status.startDate,endDate:status.endDate,status:status.status,workTel:workTel,payrollNo:payrollNo,jobTitle:jobTitle,leaveStartDateField:leaveStartDateField,leaveStartDate:leaveStartDate,roles:roles,logins:logins};var name=null;if(firstName&&lastName){employee.firstName=firstName;employee.lastName=lastName;name=name="{0} {1}".format(firstName,lastName)}var notifier=appogee.notifier.saving();var url="/employees/{0}".format(this.employee.key);appogee.api.put(url,employee,function(){notifier.success();_this140.views.audit.fetch();if(name){$("#h1Title").html(name)}},{artificialDelay:true})}}});define("admin/org/employee_archived",["jquery","underscore","appogee","admin/org/employee_util"],function($,_,appogee,employeeUtil){"use strict";return{getLoadUrls:function(){var employeeUrl="/employees/{0}?projection=hr".format(this.employeeKey);return{api:[employeeUrl]}},onLoad:function(employee){},initialize:function(){this.employeeKey=$("#txtKey").val()}}});define("hbs!admin/dialogs/tmpl/Restore",["hbs/handlebars","templates/helpers/s","templates/helpers/if_gt"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division",{name:"s",hash:{},data:data}))+'</label>\n\t<select class="form-control input-sm" id="ddlAdu">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.adus:depth0,{name:"each",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</select>\n</div>\n"},2:function(depth0,helpers,partials,data){var helper;return'\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Restore Employee",{name:"s",hash:{},data:data}))+'</h4>\n\n<div class="alert alert-info alert-flat">\n\t<p>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Restoring an Employee from the archive will return them to the Employee Directory, and their data will be made available for access by those users who have access to do so.",{name:"s",hash:{},data:data}))+"\n\t</p>\n\t<p>\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"To restore the Employee, please complete the form below. Further data can be configured later.",{name:"s",hash:{},data:data}))+'\n\t</p>\n</div>\n\n<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Confirm Email Address",{name:"s",hash:{},data:data}))+'</label>\n\t<input type="text" class="form-control input-sm" value="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.email:stack1,depth0))+'" id="txtEmail" />\n\t<div class="help-block">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please confirm the Employees Email Address",{name:"s",hash:{},data:data}))+"</div>\n</div>\n\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.adus:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:1},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</label>\n\t<select class="form-control input-sm" id="ddlTeam"></select>\n</div>\n\n<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile",{name:"s",hash:{},data:data}))+'</label>\n\t<select class="form-control input-sm" id="ddlLeaveProfile"></select>\n</div>'},useData:true});Handlebars.registerPartial("admin/dialogs/tmpl/Restore",t);return t});define("admin/dialogs/RestoreDialog",["jquery","appogee","hbs!admin/dialogs/tmpl/Restore"],function($,appogee,tmpl){"use strict";var S,R={btnRestoreEmployee:"Restore Employee",loading:"Loading ...",errorNoEmail:"Please enter the Employees Email Address.",errorInvalidEmail:"Please enter a valid Email Address.",errorNoTeam:"Please select which Team the Employee should be added to.",errorNoLeaveProfile:"Please select which Leave Profile should be assigned to the Employee.",alertEmployeeRestoredTitle:"Employee Restored",alertEmployeeRestoredMsg:"The Employee has been restored. Would you like to view their profile now?",alertAdjustEmployeeAllowancesTitle:"Employee Restored - Review Allowances",alertAdjustEmployeeAllowancesMsg:"The Employee has been restored. We have detected an inconsistency with his allowances ranges. To Adjust the employee's allowances please visit the Adjust Allowance tool.<p>Would you like to visit the Adjust Allowance tool now?</p>"};var $dlg=null;var Dialog=function(employee){S=appogee.getStrings("RestoreDialog",R);this.employee=employee;this.adus=appogee.getAdus();this.onRestoreHandlers=[];if($dlg===null){$dlg=$("<div />").addClass("dialog")}};Dialog.prototype.onRestore=function(handler){this.onRestoreHandlers.push(handler)};Dialog.prototype.render=function(){var _this141=this;var data={adus:this.adus,employee:this.employee};$dlg.html(tmpl(data));var $adu=$dlg.find("#ddlAdu");var $team=$dlg.find("#ddlTeam");var $leaveProfile=$dlg.find("#ddlLeaveProfile");var aduKey=$adu.val();if(!aduKey){aduKey=this.adus[0].key}this.populateTeams($team,aduKey);this.populateLeaveProfiles($leaveProfile,aduKey);$adu.change(function(){_this141.populateTeams($team,$adu.val());_this141.populateLeaveProfiles($leaveProfile,$adu.val())})};Dialog.prototype.show=function(){var _this142=this;this.dlg=new appogee.Dialog($dlg,{width:600,okText:S.btnRestoreEmployee,okCallback:function(){_this142.restore()}});this.render();this.dlg.show()};Dialog.prototype.populateTeams=function($ddl,aduKey,teams){var _this143=this;if(!teams){$ddl.html('<option value="">'+S.loading+"</option>");var url="/teams?aduKey={0}".format(aduKey);appogee.api.get(url,function(response){teams=response.items;_this143.populateTeams($ddl,aduKey,response.items)});return}appogee.ui.populateDropdown($ddl,teams,{valueName:"name"})};Dialog.prototype.populateLeaveProfiles=function($ddl,aduKey,leaveProfiles){var _this144=this;if(!leaveProfiles){$ddl.html('<option value="">'+S.loading+"</option>");var url="/leave-profiles?aduKey={0}&aduTraverse=both".format(aduKey);appogee.api.get(url,function(response){_this144.populateLeaveProfiles($ddl,aduKey,response.items)});return}appogee.ui.populateDropdown($ddl,leaveProfiles,{valueName:"name"})};Dialog.prototype.restore=function(){var _this145=this;var email=$dlg.find("#txtEmail").val();var teamKey=$dlg.find("#ddlTeam").val();var leaveProfileKey=$dlg.find("#ddlLeaveProfile").val();var aduKey=$dlg.find("#ddlAdu").val();if(!email){appogee.valert(S.errorNoEmail);return}else if(!appogee.validation.validateEmail(email)){appogee.valert(S.errorInvalidEmail);return}if(!teamKey){appogee.valert(S.errorNoTeam);return}if(!leaveProfileKey){appogee.valert(S.errorNoLeaveProfile);return}var body={email:email,team:{key:teamKey},leaveProfile:{key:leaveProfileKey}};var uri="/employees/{0}/restore".format(this.employee.key);appogee.api.post(uri,body,function(response){var url="/admin/adjust-allowance-range/xhr/check_employee_allowances?key={0}".format(_this145.employee.key);appogee.xhr.get(url,function(response){_this145.onRestoreHandlers.forEach(function(h){return h()});if(response.updateAllowances){appogee.yesNo(S.alertAdjustEmployeeAllowances,function(button){if(button=="yes"){var url="/admin/adjust-allowance-range?aduKey={0}&teamKey={1}&leaveProfileKey={2}";url=url.format(aduKey,teamKey,leaveProfileKey);location.href=url}})}else{appogee.yesNo(S.alertEmployeeRestored,function(button){if(button=="yes"){location.href="/admin/organisation/employee?key={0}".format(_this145.employee.key)}})}})});this.dlg.hide()};return Dialog});define("admin/org/archived",["jquery","appogee","admin/dialogs/RestoreDialog"],function($,appogee,RestoreDialog){"use strict";var S,R={colEmployee:"Employee",colJobTitle:"Job Title",colStartDate:"Job Start Date",colEndDate:"Job End Date",colLengthOfService:"Length of Service",colSalary:"Salary",colArchivedOn:"Archived By / On",errorInsifficientLicensesTitle:"Insufficient Licenses",errorInsifficientLicensesMsg1:"Unfortunately you do not have sufficient licenses to activate any more Employees.",errorInsifficientLicensesMsg2:'Please visit the <a href="/config/licensing">Licensing Page</a> to update your license.',year:"year",years:"years",month:"month",months:"months"};return{defaultStrings:R,view:{},loadUrls:{api:["/license"]},initialize:function(){S=this.S;this.showSalaries=false},onLoad:function(license){this.license=license;var me=this;this.view=new appogee.View($("#viewContainer"),"archived",{showSearch:false});this.view.addFormatter("archivedOn","datetime",this.currentUser.dateTimeFormatString);this.view.addColumn({type:"custom",label:S.colEmployee,render:function(employee){if(employee.name===null){return"<div>{0}</div>".format(employee.email)}else{return"<div>{0} {1}</div><div>{2}</div>".format(employee.name.first,employee.name.last,employee.email)}}});this.view.addColumn({type:"text",label:S.colJobTitle,field:"[jobTitle]"});this.view.addColumn({type:"custom",label:S.colStartDate,render:function(employee){if(employee.continuousStartDate){return appogee.util.date.toString(employee.continuousStartDate)}return""}});this.view.addColumn({type:"custom",label:S.colEndDate,render:function(employee){if(employee.endDate){return appogee.util.date.toString(employee.endDate)}return""}});this.view.addColumn({type:"custom",label:S.colLengthOfService,render:function(employee){if(employee.continuousStartDate&&employee.endDate){var start=new Date(employee.continuousStartDate);var end=new Date(employee.endDate);return me.getLengthOfService(start,end)}return""}});this.view.addColumn({type:"custom",label:S.colSalary,render:function(profile){if(me.showSalaries){return profile.salary===null?"":profile.salary}return"******"}});this.view.addColumn({type:"custom",label:S.colArchivedOn,render:function(employee){var archivedBy=employee.archivedBy?employee.archivedBy.name:"";return"<div>{0}</div><div>{1}</div>".format(archivedBy,employee.archivedOn)}});this.view.addColumn({type:"js",label:"",field:"Restore",cssClass:"js_restore",onClick:function(employee){if(me.license.licenseType=="licensed"&&me.license.activeEmployees>=me.license.licenses){appogee.valert(S.errorInsifficientLicenses);return}var dlg=new RestoreDialog(employee);dlg.show();dlg.onRestore(function(){if(me.license.licenseType=="licensed"){me.license.activeEmployees++}me.view.fetch()});return""}});this.view.fetch();$("#chkShowSalaries").click(function(){me.showSalaries=this.checked;me.view.render()})},getLengthOfService:function(start,end){if(start&&end&&start<=end){var months=0;while(start<end){start.setMonth(start.getMonth()+1);months++}var years=Math.floor(months/12);months%=12;var lengthOfService="";if(years>0){lengthOfService=years==1?S.year:S.years;lengthOfService+=months>0?", ":""}if(months>0){lengthOfService=months==1?S.month:S.months}return lengthOfService}return""}}});define("hbs!admin/reg/templates/BusinessCard",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"\n"},3:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Employee",{name:"s",hash:{},data:data}))+"\n"},5:function(depth0,helpers,partials,data){return"\t\t\t\t<li>"+this.escapeExpression(this.lambda(depth0,depth0))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="business_card">\n\t<div>\n\t\n\t\t<h4>\n\t\t\t<i class="glyphicon glyphicon-user"></i>\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.name:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.program(3,data,0),data:data}))!=null?stack1:"")+"\t\t</h4>\n\t\t\n\t\t<ul>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.detail:depth0,{name:"each",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</ul>\n\t\t\n\t</div>\n</div>"},useData:true});Handlebars.registerPartial("admin/reg/templates/BusinessCard",t);return t});define("admin/reg/views/BusinessCardView",["jquery","hbs!admin/reg/templates/BusinessCard"],function($,tmpl){"use strict";var View=function($container){this.$container=$container};View.prototype.render=function(name,detail){detail=detail||[];for(var i=detail.length;i<3;i++){detail.push("--------------------------------")}var data={name:name,detail:detail};this.$container.html(tmpl(data))};return View});define("hbs!admin/reg/templates/Manual",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/s","templates/helpers/if_gt"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<div class="alert alert-danger">\n\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Insufficient Licenses",{name:"s",hash:{},data:data}))+"</h4>\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Unfortunately you do not have sufficient licenses to add any more Employees.",{name:"s",hash:{},data:data}))+"</p>\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please visit the <a href='/config/licensing'>Licensing Page</a> to update your license.",{name:"s",hash:{},data:data}))+"</p>\n\t</div>\n"},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,0,{name:"ifequal",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.program(18,data,0,blockParams,depths),data:data}))!=null?stack1:""},4:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<div class="alert alert-info">\n\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"To add a new Employee in Appogee HR please complete the form below.",{name:"s",hash:{},data:data}))+"</p>\n\t\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.license:depth0)!=null?stack1.licenseType:stack1,"trial",{name:"ifequal",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.program(7,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t</div>\n\t\n\t<form class="form-horizontal">\n\t\n\t<div class="form-group mandatory">\n\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Full Name",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t<input type="text" class="form-control input-sm txtName" />\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group mandatory">\n\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email Address",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t<input type="text" class="form-control input-sm txtEmail" />\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block" hidden id="checkEmailContainer"></div>\n\t</div>\n\t\n'+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.adus:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:1},fn:this.program(10,data,0,blockParams,depths),inverse:this.program(14,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\n\t<div class="form-group mandatory">\n\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t<select class="form-control input-sm ddlEmp">\n\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Leave Profile should be assigned to the User.\n\t\t\tThe Leave Profile defines the employees Working Rota, Entitlement Settings and more.",{name:"s",hash:{},data:data}))+' \n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group mandatory">\n\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Job Title",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t<input type="text" class="form-control input-sm txtJobTitle" />\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group mandatory">\n\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee Status",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t<div class="radio-inline">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="radStatus" value="joining" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Joining",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class="radio-inline">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="radStatus" value="active" checked="checked" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Active",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class="radio-inline">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="radStatus" value="former" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Former",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-joining">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"An employee who is due to start at the company.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-active">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"A active employee who is already employed at the company.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-former">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"A former employee who was previously employed at the company.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group mandatory">\n\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start Date",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t<input type="text" class="form-control input-sm datepicker txtStartDate" />\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-joining">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enter the employee start date. Their status will change to Active on this date.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-active">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enter the date the employee started at the company.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-former">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enter the date the employee started at the company.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group show-former mandatory">\n\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"End Date",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t<input type="text" class="form-control input-sm datepicker txtEndDate" />\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enter the employees leaving date",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t</div>\n\t\n\t<h4 class="show-joining show-active">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee Login Options",{name:"s",hash:{},data:data}))+"</h4>\n\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.hasHr:depth0,{name:"if",hash:{},fn:this.program(16,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\n\t<div class="form-group show-joining show-active">\n\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Activate Appogee Leave?",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t<div class="radio-inline">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="radLeaveLogin" value="1" checked="checked" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enabled",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class="radio-inline">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="radLeaveLogin" value="0" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disabled",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-leave-login-enabled">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee will be able to log in to Appogee Leave and submit Leave Requests to their team manager.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-leave-login-disabled">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee will not be able to log in to Appogee Leave. This can be enabled later.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group show-joining show-active send-welcome-container">\n\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Send Welcome Email?",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t<div class="radio-inline">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="radSendWelcome" value="1" checked="checked" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Yes",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class="radio-inline">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="radSendWelcome" value="0" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-welcome-yes">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"A Welcome Email will be sent to the Employee after registration, which includes a brief overview of Appogee HR and a link to log in.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-welcome-no">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"NOTE: Without the Welcome Email, the employee may not be able to log in. For security reasons, the employee may still be sent a Verification Email.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t</div>\n\t\n\t</form>\n\t\n\t<div class="col-sm-offset-3 col-md-offset-4 col-lg-offset-3">\n\t\t<button type="button" class="btn btn-sm btn-primary btnCreate">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Register Employee",{name:"s",hash:{},data:data}))+"\n\t\t</button>\n\t</div>\n\t\n"},5:function(depth0,helpers,partials,data){return""},7:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.license:depth0)!=null?stack1.licenseType:stack1,"licensed",{name:"ifequal",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:""},8:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<p>\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Your current license allows you to activate up to {count} employees.",{name:"s",hash:{count:(stack1=depth0!=null?depth0.license:depth0)!=null?stack1.licenses:stack1},data:data}))+"\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You are able to add a further {remaining_licenses} employees.",{name:"s",hash:{remaining_licenses:depth0!=null?depth0.remainingLicenses:depth0},data:data}))+"\n\t\t\t</p>\n\t\t"},10:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t<div class="form-group show-joining show-active mandatory">\n\t\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t\t<select class="form-control input-sm ddlAdu">\n\t\t\t\t\t<option value="">- Select -</option>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.adus:depth0,{name:"each",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Division to create the employee in",{name:"s",hash:{},data:data}))+'\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="form-group show-joining show-active mandatory">\n\t\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t\t<select class="form-control input-sm ddlTeam">\n\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Division ...",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Team this employee works in",{name:"s",hash:{},data:data}))+"\n\t\t\t</div>\n\t\t</div>\n"},11:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.key:depth0,(stack1=depths[1]!=null?depths[1].adu:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(12,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},12:function(depth0,helpers,partials,data){return'selected="selected"'},14:function(depth0,helpers,partials,data){return'\t\t<div class="form-group show-joining show-active mandatory">\n\t\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t\t<select class="form-control input-sm ddlTeam">\n\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select which Team this employee works in",{name:"s",hash:{},data:data}))+"\n\t\t\t</div>\n\t\t</div>\n"},16:function(depth0,helpers,partials,data){
return'\t<div class="form-group show-joining show-active">\n\t\t<label class="control-label col-sm-3 col-md-4 col-lg-3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Appogee HR Self Service",{name:"s",hash:{},data:data}))+'</label>\n\t\t<div class="controls col-sm-6 col-md-7 col-lg-5">\n\t\t\t<div class="radio-inline">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="radHrLogin" value="1" checked="checked" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enabled",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class="radio-inline">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="radHrLogin" value="0" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disabled",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-login-enabled">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee will be able to log in to Appogee HR and access Self Service functionality.",{name:"s",hash:{},data:data}))+'</em>\n\t\t</div>\n\t\t<div class="col-sm-offset-3 col-sm-9 col-md-offset-4 col-md-9 col-lg-offset-3 col-lg-8 help-block show-login-disabled">\n\t\t\t<em>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee will not be able to log in, or have access to Appogee HR Self Service functionality.",{name:"s",hash:{},data:data}))+"</em>\n\t\t</div>\n\t</div>\n"},18:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,1,{name:"ifequal",hash:{},fn:this.program(19,data,0),inverse:this.program(21,data,0),data:data}))!=null?stack1:""},19:function(depth0,helpers,partials,data){return'\t<div class="alert alert-info">\n\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Registering Employee",{name:"s",hash:{},data:data}))+'</h4>\n\t\t<p class="working">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please wait ...",{name:"s",hash:{},data:data}))+"\n\t\t</p>\n\t</div>\n"},21:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,2,{name:"ifequal",hash:{},fn:this.program(22,data,0),inverse:this.noop,data:data}))!=null?stack1:""},22:function(depth0,helpers,partials,data){var stack1;return'\t<div class="alert alert-success">\n\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Registration Successful",{name:"s",hash:{},data:data}))+"</h4>\n\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The employee was registered successfully.",{name:"s",hash:{},data:data}))+'</p>\n\t\t\n\t\t<p>\n\t\t\t<a href="/admin/organisation/employee?key='+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.key:stack1,depth0))+'" class="btn btn-sm btn-default">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Open Profile",{name:"s",hash:{},data:data}))+'\n\t\t\t</a>\n\t\t\t\n\t\t\t<button type="button" class="btn btn-sm btn-default btnCreateAnother">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Register Another",{name:"s",hash:{},data:data}))+"\n\t\t\t</button>\n\t\t</p>\n\t</div>\n\t"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.insufficentLicenses:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.program(3,data,0,blockParams,depths),data:data}))!=null?stack1:""},useData:true,useDepths:true});Handlebars.registerPartial("admin/reg/templates/Manual",t);return t});define("admin/reg/registration",["jquery","appogee","admin/reg/views/BusinessCardView","admin/reg/views/ManualView","hbs!admin/reg/templates/Manual"],function($,appogee,BusinessCardView,ManualView,tmpl){"use strict";var Step={Form:0,Working:1,Complete:2};return{businessCardView:null,regView:null,getLoadUrls:function(){return{api:["/license"]}},onLoad:function(license){var _this146=this;this.license=license;if(this.license.licenseType=="licensed"){var remainingLicenses=this.license.licenses-this.license.activeEmployees;if(remainingLicenses<=0){return}}this.businessCardView=new BusinessCardView($("#businessCardContainer"));this.businessCardView.render();var $container=$("#registrationContainer");this.regView=new ManualView($container,tmpl,this.businessCardView,license);this.regView.render();this.regView.onPreSave(function(){var data={step:Step.Working};$container.html(tmpl(data))});this.regView.onPostSave(function(employee){var data={step:Step.Complete,employee:employee};$container.html(tmpl(data));$container.find(".btnCreateAnother").click(function(){_this146.regView.render()})})}}});define("templates/helpers/perc",["hbs/handlebars"],function(Handlebars){"use strict";function perc(num,total,dp){if(arguments.length==3){dp=1}var p=(num/total*100).toFixed(dp);return p+"%"}Handlebars.registerHelper("perc",perc);return perc});define("hbs!admin/reg/templates/CSVRegistrationView",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/s","templates/helpers/if_gteq","templates/helpers/perc","templates/helpers/ifany"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'<div id="alert_warning_container" class="hidden alert alert-warning">\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Warning",{name:"s",hash:{},data:data}))+'</h4>\n\t<p id="alert_warning"></p>\n</div>\n\n<div class="alert alert-info">\n\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This page allows you to import new Employees into {app_name} via a CSV file.",{name:"s",hash:{app_name:depth0!=null?depth0.appName:depth0},data:data}))+"</p>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,'Please refer to our <a href="https://help.appogeehr.com/support/solutions/articles/22000222900" target="_FRESHDESK">CSV Upload Guide</a> for full instructions on how to use this import tool.',{name:"s",hash:{},data:data}))+'</p>\n</div>\n\t\n<form id="frm_upload_csv" method="POST" enctype="multipart/form-data">\n\t<div class="row">\n\t\t<div class="col-sm-6">\n\t\t\t<div class="well">\n\t\t\t\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select CSV",{name:"s",hash:{},data:data}))+'</h4>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,'To download a template CSV file, <a href="/admin/import/csv/download-sample.csv">click here</a>.',{name:"s",hash:{},data:data}))+'</p>\n\t\t\t\t\t<div class="input-group input-group-sm">\n\t\t\t\t\t\t<span class="btn btn-sm btn-default btn-file input-group-addon">\n\t\t\t\t\t\t    '+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Browse",{name:"s",hash:{},data:data}))+'&hellip; <input type="file" name="csv" id="csv" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<input type="text" class="form-control" readonly="readonly" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group text-right">\n\t\t\t\t\t<a href="https://help.appogeehr.com/support/solutions/articles/22000222900" target="_FRESHDESK" class="btn btn-default btn-sm">\n\t\t\t\t\t\t<i class="glyphicon glyphicon-question-sign"></i>\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"View CSV Upload Guide",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t</a>\n\t\t\t\t\t<button type="button" class="btn btn-sm btn-primary" id="btnSubmit">\n\t\t\t\t\t\t<i class="glyphicon glyphicon-upload"></i>\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Upload &amp; Import",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6">\n\t\t\t<h4>Options</h4>\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canAccessHR:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="can_login_leave" class="can_login" name="can_login_leave" value="1" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allow Login to Appogee Leave?",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t<div class="help-block">\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"If selected, login will be enabled for any newly created Employee to Appogee Leave.\n\t\t\t\t\t\t\t This opens up features such as Booking Leave.\n\t\t\t\t\t\t\t This may result in verification emails being sent.",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="send_welcome" name="send_welcome" disabled="disabled" value="1" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Send Welcome Email?",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t<div class="help-block">\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"If selected, a welcome email will be sent to new employees created during the import process.\n\t\t\t\t\t\t\t The welcome email contains introductory information for new users.",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="blanks_delete" name="blanks_delete" value="1" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Overwrite with blanks?",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t<div class="help-block">\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"If selected, data will be overwritten with blank values from the CSV file.",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="create_missing_kws" name="create_missing_kws" value="1" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Automatically create keywords?",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t<div class="help-block">\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"If selected, new keywords will be automatically created if they do not already exist. Keywords are values found in dropdown boxes on the Employee Profile.",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="overwrite_lists"  name="overwrite_lists" value="1" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Overwrite List Values?",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t<div class="help-block">\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"If selected, list values (such as Telephone numbers, Assets, Dependents, etc.) will be overwritten. Leave unchecked to append to existing values.",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</form>\n"},2:function(depth0,helpers,partials,data){return'\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="can_login_hr" class="can_login" name="can_login_hr" value="1" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allow Login to Appogee HR?",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t<div class="help-block">\n\t\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"If selected, login will be enabled for any newly created Employee to Appogee HR.\n\t\t\t\t\t\t\t This opens up features such as Employee Self Service.\n\t\t\t\t\t\t\t This may result in verification emails being sent.",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t</div>\n"},4:function(depth0,helpers,partials,data){var stack1;return"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.status:stack1,1,{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.program(21,data,0),data:data}))!=null?stack1:"")+"\n\n"+((stack1=(helpers.ifany||depth0&&depth0.ifany||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.errors:stack1,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.failureReason:stack1,{name:"ifany",hash:{},fn:this.program(28,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"},5:function(depth0,helpers,partials,data){var stack1;return((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.step:stack1,0,{name:"ifequal",hash:{},fn:this.program(6,data,0),inverse:this.program(8,data,0),data:data}))!=null?stack1:"")+"\n\n"},6:function(depth0,helpers,partials,data){return'\t\t<div class="alert alert-info">\n\t\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Validating CSV ...",{name:"s",hash:{},data:data}))+"</p>\n\t\t</div>\n\t"},8:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.step:stack1,1,{name:"ifequal",hash:{},fn:this.program(9,data,0),inverse:this.program(11,data,0),data:data}))!=null?stack1:""},9:function(depth0,helpers,partials,data){return'\n\t\t<div class="alert alert-info">\n\t\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Validating Data ...",{name:"s",hash:{},data:data}))+"</p>\n\t\t</div>\n\t"},11:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.if_gteq||depth0&&depth0.if_gteq||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.step:stack1,{name:"if_gteq",hash:{compare:2},fn:this.program(12,data,0),inverse:this.noop,data:data}))!=null?stack1:""},12:function(depth0,helpers,partials,data){var stack1;return'\n\t\t<div class="alert alert-info">\n\t\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Importing Data ...",{name:"s",hash:{},data:data}))+'</p>\n\t\t</div>\n\t\t\n\t\t<form class="form-horizontal read">\n\t\t\t<div class="control-group">\n\t\t\t\t<label for="progress_group" class="control-label">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Progress",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t<div id="progress_group">\n\t\t\t\t\t<div class="progress_container">\n\t\t\t\t\t\t<div id="overall_progress_bar" class="overall"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="progress_container">\n\t\t\t\t\t\t<div class="success" style="width: '+this.escapeExpression((helpers.perc||depth0&&depth0.perc||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.successCount:stack1,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.totalCount:stack1,{name:"perc",hash:{},data:data}))+';"></div>\n\t\t\t\t\t\t<div class="failure" style="width: '+this.escapeExpression((helpers.perc||depth0&&depth0.perc||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.failureCount:stack1,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.totalCount:stack1,{name:"perc",hash:{},data:data}))+';"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<p>'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.successCount:stack1,depth0))+" / "+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.totalCount:stack1,depth0))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Profiles Imported Successfully",{name:"s",hash:{},data:data}))+"</p>\n\t\t\t<p>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.status:stack1,2,{name:"ifequal",hash:{},fn:this.program(13,data,0),inverse:this.program(15,data,0),data:data}))!=null?stack1:"")+"\n\t\t\t</p>\n\t\t</form>\n\t"},13:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"System Updating ...",{name:"s",hash:{},data:data}))+"\n\t\t\t"},15:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.status:stack1,3,{name:"ifequal",hash:{},fn:this.program(16,data,0),inverse:this.program(18,data,0),data:data}))!=null?stack1:""},16:function(depth0,helpers,partials,data){return"\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import Failed",{name:"s",hash:{},data:data}))+"\n\t\t\t"},18:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.status:stack1,4,{name:"ifequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:""},19:function(depth0,helpers,partials,data){return"\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import Canceled By User",{name:"s",hash:{},data:data}))+"\n\t\t\t"},21:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.status:stack1,2,{name:"ifequal",hash:{},fn:this.program(22,data,0),inverse:this.program(25,data,0),data:data}))!=null?stack1:""},22:function(depth0,helpers,partials,data){var stack1;return'\n<div class="alert alert-success">\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import Complete",{name:"s",hash:{},data:data}))+"</h4>\n\t<p>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.successCount:stack1,depth0))+" / "+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.totalCount:stack1,depth0))+" employees have been imported successfully.</p>\n\t<p>"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.errors:stack1,{name:"if",hash:{},fn:this.program(23,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'</p>\n\t\n\t<div class="form-actions" id="directoryContainer">\n\t\t<a href="/admin/organisation/employees" class="btn btn-primary btn-large">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Open Employee Directory",{name:"s",hash:{},data:data}))+"</a>\n\t</div>\n</div>\n"},23:function(depth0,helpers,partials,data){return"Please see the Error Log for details."},25:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.status:stack1,3,{name:"ifequal",hash:{},fn:this.program(26,data,0),inverse:this.noop,data:data}))!=null?stack1:""},26:function(depth0,helpers,partials,data){return'\n<div class="alert alert-danger">\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import Unsuccessful",{name:"s",hash:{},data:data}))+"</h4>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The CSV Import was unsuccessful. Please see the Error Log for details.",{name:"s",hash:{},data:data}))+"</p>\n</div>\n"},28:function(depth0,helpers,partials,data){var stack1;return'<div class="control-group">\n\t<label class="control-label"><b>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Error log:",{name:"s",hash:{},data:data}))+'</b></label>\n\t<div id="errorLog">\n\t\t'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.failureReason:stack1,depth0))+"\n\n"+((stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.importData:depth0)!=null?stack1.errors:stack1,{name:"each",hash:{},fn:this.program(29,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</div>\n</div>\n"},29:function(depth0,helpers,partials,data){return"\t\t\t<div>"+this.escapeExpression(this.lambda(depth0,depth0))+"</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,0,{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.step:depth0,1,{name:"ifequal",hash:{},fn:this.program(4,data,0),inverse:this.noop,data:data}))!=null?stack1:"")},useData:true});Handlebars.registerPartial("admin/reg/templates/CSVRegistrationView",t);return t});define("admin/reg/views/CsvView",["jquery","appogee","hbs!admin/reg/templates/CSVRegistrationView"],function($,appogee,tmpl){"use strict";var S,R={warningTitle:"Confirm Import",warningMsg1:"The options you selected may have the following outcome:",warningMsg2:"Deleting blanks and/or overwriting list values has the potential to overrwite existing data.",warningMsg3:"Enabling login, but not sending a welcome email may result in users being unable to log in.",warningMsg4:"Do you wish to continue?"};var POLL_INTERVAL=1e3;var STEP_FORM=0;var STEP_WORKING=1;var STATUS_NOT_STARTED=0;var STATUS_IN_PROGRESS=1;var STATUS_SUCCESS=2;var STATUS_FAILURE=3;var STATUS_ABORTED=4;var CsvView=function($container){S=appogee.getStrings("CsvView",R);this.$container=$container;this.step=STEP_FORM;this.importData=null;this.currentUser=appogee.getCurrentUser()};CsvView.prototype.render=function(){var me=this;var data={appName:appogee.getAppName(),step:this.step,importData:this.importData,canAccessHR:this.currentUser.canAccessHr()};this.$container.html(tmpl(data));if(this.step==STEP_FORM){this.initFilePicker();$("#csv").change(function(){var fileName=$(this).val();if(fileName){$("#btnSubmit").removeAttr("disabled")}else{$("#btnSubmit").attr("disabled","disabled")}}).change();$(".can_login").change(function(){if($(".can_login").is(":checked")){$("#send_welcome").removeAttr("disabled").prop("checked",true)}else{$("#send_welcome").attr("disabled","disabled").prop("checked",false)}});$("#btnSubmit").click(function(){me.submit()})}};CsvView.prototype.submit=function(){var me=this;var blanksDelete=$("#blanks_delete").is(":checked");var overwriteLists=$("#overwrite_lists").is(":checked");var leaveLogin=$("#can_login_leave").is(":checked");var hrLogin=$("#can_login_hr").is(":checked");var sendWelcome=$("#send_welcome").is(":checked");var warnings=[];if(blanksDelete&&overwriteLists){warnings.push(S.warningMsg2)}if((leaveLogin||hrLogin)&&!sendWelcome){warnings.push(S.warningMsg3)}if(warnings.length){var msg="<p>"+S.warningMsg1+"</p><ul><li>"+warnings.join("</li><li>")+"</li></ul>";msg+="<p>"+S.warningMsg4+"</p>";appogee.confirm(S.warningTitle,msg,function(){me._submit()})}else{this._submit()}};CsvView.prototype._submit=function(){var me=this;$("#alert_error_container").addClass("hidden");appogee.ajax.get("/admin/import/csv/upload-url",function(response){var formData=new FormData(document.getElementById("frm_upload_csv"));appogee.ajax.post(response.uploadUrl,formData,function(response){me.step=STEP_WORKING;me.render();me.poller=setInterval(function(){var url="/admin/import/csv/progress?key="+response.key;appogee.ajax.get(url,function(importData){me.importData=importData;me.render();if(importData.status!=STATUS_IN_PROGRESS){setTimeout(function(){clearInterval(me.poller)},POLL_INTERVAL*3)}})},POLL_INTERVAL);return},{cache:false,processData:false,contentType:false})})};CsvView.prototype.initFilePicker=function(){this.$container.find(".btn-file :file").change(function(){var numFiles=$(this).get(0).files?$(this).get(0).files.length:1;var label=$(this).val().replace(/\\/g,"/").replace(/.*\//,"");$(this).trigger("fileselect",[numFiles,label])});$(".btn-file :file").on("fileselect",function(event,numFiles,label){var input=$(this).parents(".input-group").find(":text");var log=numFiles>1?numFiles+" files selected":label;if(input.length){input.val(log)}})};return CsvView});define("admin/reg/import-csv",["jquery","appogee","admin/reg/views/CsvView"],function($,appogee,CsvView){"use strict";return{initialize:function(){var view=new CsvView($("#registrationView"));view.render()}}});define("leave/allowanceCalculator",["appogee","leave/enums"],function(appogee,enums){"use strict";var MS_IN_DAY=864e5;var ProRataFormula=enums.ProRataFormula;var AccrualFrequency=enums.AccrualFrequency;var AccrualWeekday=enums.AccrualWeekday;var AccrualDay=enums.AccrualDay;function calculateAnnualHours(entitlementHours,allowanceStart,allowanceEnd,employeeStart,proRataFormula){var nextAllowanceStartDate=new Date(allowanceEnd.getTime());nextAllowanceStartDate.setDate(nextAllowanceStartDate.getDate()+1);var allowanceMonths=appogee.util.getDiffMonths(nextAllowanceStartDate,allowanceStart);var allowanceHours=entitlementHours/12*allowanceMonths;if(employeeStart&&employeeStart>=allowanceStart&&employeeStart<=allowanceEnd){var months=null;if(proRataFormula==ProRataFormula.Disabled){}else if(proRataFormula==ProRataFormula.Months){months=appogee.util.getDiffMonths(allowanceEnd,employeeStart);if(employeeStart.getDate()==1){months++}allowanceHours=allowanceHours/allowanceMonths*months}else if(proRataFormula==ProRataFormula.MonthsInclusive){months=appogee.util.getDiffMonths(allowanceEnd,employeeStart)+1;allowanceHours=allowanceHours/allowanceMonths*months}else if(proRataFormula==ProRataFormula.Days){var d1=Date.UTC(nextAllowanceStartDate.getFullYear(),nextAllowanceStartDate.getMonth(),nextAllowanceStartDate.getDate());var d2=Date.UTC(allowanceStart.getFullYear(),allowanceStart.getMonth(),allowanceStart.getDate());var d3=Date.UTC(employeeStart.getFullYear(),employeeStart.getMonth(),employeeStart.getDate());var allowanceDays=(d1-d2)/MS_IN_DAY;var daysRemaining=(d1-d3)/MS_IN_DAY;allowanceHours=allowanceHours/allowanceDays*daysRemaining}}return allowanceHours}function calculateAccruedHours(entitlement,allowanceStart,allowanceEnd,employeeStart,accrueUntil){if(!entitlement.accrual){return 0}var startDate=allowanceStart;if(employeeStart&&employeeStart>allowanceStart){startDate=employeeStart}var endDate=accrueUntil?accrueUntil:appogee.today();if(endDate>allowanceEnd){endDate=allowanceEnd}var accruedHours=0;var isOtherWeek=true;var d=new Date(startDate.getTime());while(d<=endDate){var pythonWeekday=appogee.util.getPythonWeekday(d);if(entitlement.accrual.frequency==AccrualFrequency.Monthly){if(entitlement.accrual.day==d.getDate()){accruedHours+=entitlement.accrual.hours}}else if(entitlement.accrual.frequency==AccrualFrequency.Bimonthly){if(entitlement.accrual.day==d.getDate()||entitlement.accrual.day2==d.getDate()){accruedHours+=entitlement.accrual.hours}}else if(entitlement.accrual.weekday==pythonWeekday){if(entitlement.accrual.frequency==AccrualFrequency.Weekly||isOtherWeek){accruedHours+=entitlement.accrual.hours}isOtherWeek=!isOtherWeek}d.setDate(d.getDate()+1)}return accruedHours}return{calculateAnnualHours:calculateAnnualHours,calculateAccruedHours:calculateAccruedHours}});define("leave/models/LeaveProfile",["jquery","appogee","leave/allowanceCalculator"],function($,appogee,allowanceCalculator){"use strict";var LeaveProfile=function(leaveProfile){$.extend(true,this,leaveProfile);this._startDate=this.startDate;this._endDate=this.endDate;this.startDate=null;this.endDate=null;if(this._startDate){this.startDate=appogee.util.date.fromISOString(this._startDate)}if(this._endDate){this.endDate=appogee.util.date.fromISOString(this._endDate)}this.raw=leaveProfile};LeaveProfile.prototype.getEntitlement=function(employeeStartDate,allowanceStartDate){if(!employeeStartDate){return this.entitlements[0]}var yearsInService=appogee.util.calculateFullYearsBetween(employeeStartDate,allowanceStartDate);for(var i=this.entitlements.length-1;i>=0;i--){var entitlement=this.entitlements[i];if(yearsInService>=entitlement.years){return entitlement}}};LeaveProfile.prototype.calculateLeaveAnnualHours=function(employeeStartDate,allowanceStartDate,allowanceEndDate){return this._calculateAnnualHours("leave",employeeStartDate,allowanceStartDate,allowanceEndDate)};LeaveProfile.prototype.calculateSickAnnualHours=function(employeeStartDate,allowanceStartDate,allowanceEndDate){return this._calculateAnnualHours("sick",employeeStartDate,allowanceStartDate,allowanceEndDate)};LeaveProfile.prototype.calculateCustom1AnnualHours=function(employeeStartDate,allowanceStartDate,allowanceEndDate){return this._calculateAnnualHours("custom1",employeeStartDate,allowanceStartDate,allowanceEndDate)};LeaveProfile.prototype.calculateCustom2AnnualHours=function(employeeStartDate,allowanceStartDate,allowanceEndDate){return this._calculateAnnualHours("custom2",employeeStartDate,allowanceStartDate,allowanceEndDate)};LeaveProfile.prototype._calculateAnnualHours=function(type,employeeStartDate,allowanceStartDate,allowanceEndDate){var entitlement=this.getEntitlement(employeeStartDate,allowanceStartDate);if(!entitlement.hasOwnProperty(type)){return 0}if(!entitlement[type]){return 0}return allowanceCalculator.calculateAnnualHours(entitlement[type].hours,allowanceStartDate,allowanceEndDate,employeeStartDate,this.proRataFormula)};LeaveProfile.prototype.calculateLeaveAccruedHours=function(employeeStartDate,allowanceStartDate,allowanceEndDate){return this._calculateAccruedHours("leave",employeeStartDate,allowanceStartDate,allowanceEndDate)};LeaveProfile.prototype.calculateSickAccruedHours=function(employeeStartDate,allowanceStartDate,allowanceEndDate){return this._calculateAccruedHours("sick",employeeStartDate,allowanceStartDate,allowanceEndDate)};LeaveProfile.prototype.calculateCustom1AccruedHours=function(employeeStartDate,allowanceStartDate,allowanceEndDate){return this._calculateAccruedHours("custom1",employeeStartDate,allowanceStartDate,allowanceEndDate)};LeaveProfile.prototype.calculateCustom2AccruedHours=function(employeeStartDate,allowanceStartDate,allowanceEndDate){return this._calculateAccruedHours("custom2",employeeStartDate,allowanceStartDate,allowanceEndDate)};LeaveProfile.prototype._calculateAccruedHours=function(type,employeeStartDate,allowanceStartDate,allowanceEndDate,accrueUntil){
var entitlement=this.getEntitlement(employeeStartDate,allowanceStartDate);if(!entitlement.hasOwnProperty(type)){return 0}if(!entitlement[type]){return 0}return allowanceCalculator.calculateAccruedHours(entitlement[type],allowanceStartDate,allowanceEndDate,employeeStartDate,accrueUntil)};return LeaveProfile});define("hbs!admin/org/dlg/OrgSelectorTemplate",["hbs/handlebars","templates/helpers/s","templates/helpers/if_gt"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return'<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Division",{name:"s",hash:{},data:data}))+'</label>\n\t<div>\n\t\t<select class="form-control input-sm ddlAdu">\n\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select Division -",{name:"s",hash:{},data:data}))+"</option>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.adus:depth0,{name:"each",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</select>\n\t</div>\n</div>\n"},2:function(depth0,helpers,partials,data){var helper;return'\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Multi Select",{name:"s",hash:{},data:data}))+'</h4>\n<div class="alert alert-info alert-flat">\n\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select a Team and Leave Profile to assign to the selected employees.",{name:"s",hash:{},data:data}))+"</p>\n</div>\n\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.adus:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:1},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Team",{name:"s",hash:{},data:data}))+'</label>\n\t<div>\n\t\t<select class="form-control input-sm ddlTeam">\n\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select Team -",{name:"s",hash:{},data:data}))+'</option>\n\t\t</select>\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Leave Profile",{name:"s",hash:{},data:data}))+'</label>\n\t<div>\n\t\t<select class="form-control input-sm ddlLeaveProfile">\n\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select Leave Profile -",{name:"s",hash:{},data:data}))+'</option>\n\t\t</select>\n\t</div>\n</div>\n\n<div class="text-right">\n\t<button type="button" class="btn btn-sm btn-default w100 btnClose">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t</button>\n\t<button type="button" class="btn btn-sm btn-primary w100 btnOk">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"OK",{name:"s",hash:{},data:data}))+"\n\t</button>\n</div>"},useData:true});Handlebars.registerPartial("admin/org/dlg/OrgSelectorTemplate",t);return t});define("admin/org/dlg/OrgSelectorDialog",["jquery","underscore","appogee","admin/reg/util","hbs!admin/org/dlg/OrgSelectorTemplate"],function($,_,appogee,util,tmpl){"use strict";var S,R={errorNoDivision:"Please select a Division.",errorNoTeam:"Please select a Team.",errorNoLeaveProfile:"Please select a Leave Profile."};var $dlg=null;var Dialog=function(){S=appogee.getStrings("OrgSelectorDialog",R);if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.adus=appogee.getAdus({root:"self"});this.onSelectHandlers=[]};Dialog.prototype.onSelect=function(handler){this.onSelectHandlers.push(handler)};Dialog.prototype.render=function(){var _this147=this;var data={adus:this.adus};if($dlg===null){$dlg=$("<div />").addClass("dialog")}$dlg.html(tmpl(data));var $ddlTeam=$dlg.find(".ddlTeam");var $ddlLeaveProfile=$dlg.find(".ddlLeaveProfile");if(this.adus.length==1){util.populateTeams($ddlTeam,this.adus[0].key);util.populateLeaveProfiles($ddlLeaveProfile,this.adus[0].key)}else{$dlg.find(".ddlAdu").change(function(){util.populateTeams($ddlTeam,this.value);util.populateLeaveProfiles($ddlLeaveProfile,this.value)})}$dlg.find(".btnClose").click(function(){_this147.close()});$dlg.find(".btnOk").click(function(){_this147.doOk()})};Dialog.prototype.show=function(){this.dlg=new appogee.Dialog($dlg);this.dlg.clearButtons();this.render();this.dlg.show()};Dialog.prototype.doOk=function(){var teamKey=$dlg.find(".ddlTeam").val();var leaveProfileKey=$dlg.find(".ddlLeaveProfile").val();var adu=this.adus[0];if(this.adus.length>1){var aduKey=$dlg.find(".ddlAdu").val();if(!aduKey){appogee.valert(S.errorNoDivision);return}adu=_.findWhere(this.adus,{key:aduKey})}if(!teamKey){appogee.valert(S.errorNoTeam);return}if(!leaveProfileKey){appogee.valert(S.errorNoLeaveProfile);return}var team=util.getTeamByKey(teamKey);var leaveProfile=util.getLeaveProfileByKey(leaveProfileKey);this.onSelectHandlers.forEach(function(h){return h(adu,team,leaveProfile)});this.close()};Dialog.prototype.close=function(){this.dlg.hide()};return Dialog});define("templates/helpers/h2d",["hbs/handlebars","appogee"],function(Handlebars,appogee){"use strict";function h2d(hours,hoursInDay){return appogee.util.h2d(hours,hoursInDay)}Handlebars.registerHelper("h2d",h2d);return h2d});define("hbs!admin/reg/templates/ImportUsersView",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/if_gt","templates/helpers/s","templates/helpers/ifanyequal","templates/helpers/if_gteq","templates/helpers/ifany","templates/helpers/trans","templates/helpers/formatDate","templates/helpers/h2d","templates/helpers/round","templates/helpers/ifin"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'<div class="alert alert-info">\n\t<h4 class="working">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Importing Employees ...",{name:"s",hash:{},data:data}))+"</h4>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Your Employees are being imported from {vendor}. Please wait ...",{name:"s",hash:{vendor:depth0!=null?depth0.vendorName:depth0},data:data}))+"</p>\n</div>\n"},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,6,{name:"ifequal",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.program(6,data,0,blockParams,depths),data:data}))!=null?stack1:""},4:function(depth0,helpers,partials,data){return'<div class="alert alert-success">\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import Complete",{name:"s",hash:{},data:data}))+"</h4>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The import has completed.",{name:"s",hash:{},data:data}))+"</p>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{success_count} Employees have been created.",{name:"s",hash:{success_count:depth0!=null?depth0.successCount:depth0},data:data}))+'</p>\n\t<br /><br />\n\t<a href="/admin/organisation/employees" class="btn btn-sm btn-success">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"View Employees",{name:"s",hash:{},data:data}))+"\n\t</a>\n</div>\n"},6:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<div class="wizard_header hidden-xs">\n\t<div class="tab col-sm-3 '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,1,{name:"ifequal",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,{name:"if_gt",hash:{compare:1},fn:this.program(9,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">1</span>\n\t\t<span class="title">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Users",{name:"s",hash:{},data:data}))+'</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t\t<i class="glyphicon glyphicon-play"></i>\n\t</div>\n\t<div class="tab col-sm-3 '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,2,{name:"ifequal",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,{name:"if_gt",hash:{compare:2},fn:this.program(9,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">2</span>\n\t\t<span class="title">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Assign Team",{name:"s",hash:{},data:data}))+'</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t\t<i class="glyphicon glyphicon-play"></i>\n\t</div>\n\t<div class="tab col-sm-3 '+((stack1=(helpers.ifanyequal||depth0&&depth0.ifanyequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,3,depth0!=null?depth0.page:depth0,4,{name:"ifanyequal",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gteq||depth0&&depth0.if_gteq||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,{name:"if_gteq",hash:{compare:4},fn:this.program(11,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">3</span>\n\t\t<span class="title">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Profile",{name:"s",hash:{},data:data}))+'</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t\t<i class="glyphicon glyphicon-play"></i>\n\t</div>\n\t<div class="tab last col-sm-3 '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,5,{name:"ifequal",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,6,{name:"ifequal",hash:{},fn:this.program(9,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">4</span>\n\t\t<span class="title">\n\t\t\t<span class="hidden-xs hidden-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Configure Login",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t<span class="hidden-md hidden-lg">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Login",{name:"s",hash:{},data:data}))+'</span>\n\t\t</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t</div>\n\t<div class="clearfix"></div>\n</div>\n\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,1,{name:"ifequal",hash:{},fn:this.program(13,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,2,{name:"ifequal",hash:{},fn:this.program(41,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,3,{name:"ifequal",hash:{},fn:this.program(54,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,4,{name:"ifequal",hash:{},fn:this.program(62,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"},7:function(depth0,helpers,partials,data){return"selected"},9:function(depth0,helpers,partials,data){return"completed"},11:function(depth0,helpers,partials,data){return" completed"},13:function(depth0,helpers,partials,data){var stack1;return'\t<div class="alert alert-info">\n\t\t<p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select the users you wish to import from {vendor} below.",{name:"s",hash:{vendor:depth0!=null?depth0.vendorName:depth0},data:data}))+"</p>\n\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.license:depth0)!=null?stack1.licenseType:stack1,"trial",{name:"ifequal",hash:{},fn:this.program(14,data,0),inverse:this.program(16,data,0),data:data}))!=null?stack1:"")+"\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.selectedUsers:depth0)!=null?stack1.length:stack1,{name:"if",hash:{},fn:this.program(19,data,0),inverse:this.program(23,data,0),data:data}))!=null?stack1:"")+'\n\t\t<div class="text-right">\n\t\t\t<button type="button" class="btn btn-sm btn-primary btnNext">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+'\n\t\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\t\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select {vendor} users to import",{name:"s",hash:{vendor:depth0!=null?depth0.vendorName:depth0},data:data}))+'</h4>\n\n\t<div class="clearfix"></div>\n\n'+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.loading:depth0,{name:"unless",hash:{},fn:this.program(25,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\n\t<table class="view table table-bordered table-shaded">\n\t<thead>\n\t\t<tr>\n\t\t<th><input type="checkbox" id="checkAll" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.allSelected:depth0,{name:"if",hash:{},fn:this.program(32,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" /></th>\n\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Name",{name:"s",hash:{},data:data}))+"</th>\n\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email",{name:"s",hash:{},data:data}))+"</th>\n\t</tr>\n\t</thead>\n\t<tbody>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loading:depth0,{name:"if",hash:{},fn:this.program(34,data,0),inverse:this.program(36,data,0),data:data}))!=null?stack1:"")+'\t</tbody>\n\t</table>\n\t\n\t<div class="wizard_buttons">\n\t\t<button type="button" class="btn btn-primary btn-sm btnNext">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+'\n\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t</button>\n\t</div>\n'},14:function(depth0,helpers,partials,data){return""},16:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.license:depth0)!=null?stack1.licenseType:stack1,"licensed",{name:"ifequal",hash:{},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:""},17:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<p>\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Your current license allows you to activate up to {count} employees.",{name:"s",hash:{count:(stack1=depth0!=null?depth0.license:depth0)!=null?stack1.licenses:stack1},data:data}))+"\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You are able to add a further {remaining_licenses} employees.",{name:"s",hash:{remaining_licenses:depth0!=null?depth0.remainingLicenses:depth0},data:data}))+"\n\t\t\t</p>\n\t\t"},19:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<p>\n\t\t\t\t<a href="javascript: void(0);" id="btnShowSelectedUsers">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{count} users selected.",{name:"s",hash:{count:(stack1=depth0!=null?depth0.selectedUsers:depth0)!=null?stack1.length:stack1},data:data}))+"</a>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.license:depth0)!=null?stack1.licenseType:stack1,"licensed",{name:"ifequal",hash:{},fn:this.program(20,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</p>\n"},20:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.selectedUsers:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:depth0!=null?depth0.remainingLicenses:depth0},fn:this.program(21,data,0),inverse:this.noop,data:data}))!=null?stack1:""},21:function(depth0,helpers,partials,data){return'\t\t\t\t\t\t<span class="text-danger"><strong>License Exceeded.</strong></span>\n'},23:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{count} users selected.",{name:"s",hash:{count:(stack1=depth0!=null?depth0.selectedUsers:depth0)!=null?stack1.length:stack1},data:data}))+"</p>\n"},25:function(depth0,helpers,partials,data){var stack1,helper;return'\t\t<div class="pull-left">\n\t\t\t<div class="form-inline">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<input type="text" class="form-control input-sm" id="txtSearch" value="'+this.escapeExpression((helper=(helper=helpers.search||(depth0!=null?depth0.search:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"search",hash:{},data:data}):helper))+'" />\n\t\t\t\t\t\t<span class="input-group-btn">\n\t\t\t\t\t\t\t<button class="btn btn-sm btn-default" id="btnSearch">\n\t\t\t\t\t\t\t\tSearch\n\t\t\t\t\t\t\t</button>\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.search:depth0,{name:"if",hash:{},fn:this.program(26,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.search:depth0,{name:"if",hash:{},fn:this.program(28,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t<div class="clearfix"></div>\n\t\t<br />\n'},26:function(depth0,helpers,partials,data){return'\t\t\t\t\t\t\t\t<button class="btn btn-sm btn-default" id="btnClearSearch">\n\t\t\t\t\t\t\t\t\tClear\n\t\t\t\t\t\t\t\t</button>\n'},28:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="pull-right">\n'+((stack1=(helpers.ifany||depth0&&depth0.ifany||helpers.helperMissing).call(depth0,depth0!=null?depth0.nextPageToken:depth0,depth0!=null?depth0.prevPageToken:depth0,{name:"ifany",hash:{},fn:this.program(29,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</div>\n"},29:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t<div class="pull-right">\n\t\t\t\t\t<a href="javascript: void(0);" id="btnNextPage" class="btn btn-link" '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.nextPageToken:depth0,{name:"unless",hash:{},fn:this.program(30,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next Page",{name:"s",hash:{},data:data}))+'</a>\n\t\t\t\t</div>\n\t\t\t\t<div class="pull-right">\n\t\t\t\t\t<a href="javascript: void(0);" id="btnPrevPage" class="btn btn-link" '+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.prevPageToken:depth0,{name:"unless",hash:{},fn:this.program(30,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Previous Page",{name:"s",hash:{},data:data}))+"</a>\n\t\t\t\t</div>\n"},30:function(depth0,helpers,partials,data){return'disabled="disabled"'},32:function(depth0,helpers,partials,data){return'checked="checked"'},34:function(depth0,helpers,partials,data){return'\t\t\t<tr>\n\t\t\t\t<td colspan="3" class="no-results">\n\t\t\t\t\t<img src="/img/spinners/working_16.gif" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading data from {vendor}. Please wait ...",{name:"s",hash:{vendor:depth0!=null?depth0.vendorName:depth0},data:data}))+"\n\t\t\t\t</td>\n\t\t\t</tr>\n"},36:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.users:depth0,{name:"each",hash:{},fn:this.program(37,data,0),inverse:this.program(39,data,0),data:data}))!=null?stack1:""},37:function(depth0,helpers,partials,data){var helper;return'\t\t\t<tr>\n\t\t\t\t<td><input type="checkbox" id="chk'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'" value="'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'" class="userSelection" /></td>\n\t\t\t\t<td>'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</td>\n\t\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</td>\n\t\t\t</tr>\n"},39:function(depth0,helpers,partials,data){return'\t\t\t<tr>\n\t\t\t\t<td colspan="6" class="no_results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No new users found in G Suite domain",{name:"s",hash:{},data:data}))+"</td>\n\t\t\t</tr>\n"},41:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<div class="alert alert-info">\n\t<p>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You've selected {num} Employees.",{name:"s",hash:{num:(stack1=depth0!=null?depth0.selectedUsers:depth0)!=null?stack1.length:stack1},data:data}))+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adusEnabled:depth0,{name:"if",hash:{},fn:this.program(42,data,0,blockParams,depths),inverse:this.program(44,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You can configure multiple Employees by selecting them, then clicking the Assign Multiple button.",{name:"s",hash:{},data:data}))+'\n\t</p>\n\t<div class="text-right">\n\t\t<button type="button" class="btn btn-default btn-sm btnAssignMultiple">\n\t\t\t<i class="glyphicon glyphicon-hand-right"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Assign Multiple",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t\t<button type="button" class="btn btn-primary btn-sm btnNext">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+'\n\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t</button>\n\t</div>\n</div>\n\n<table class="view table table-bordered table-shaded">\n\t<thead>\n\t\t<tr>\n\t\t\t<th><input type="checkbox" id="checkAll" /></th>\n\t\t\t<th>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Name / Email",{name:"s",hash:{},data:data}))+"</th>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adusEnabled:depth0,{name:"if",hash:{},fn:this.program(46,data,0,blockParams,depths),inverse:this.program(48,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t</tr>\n\t</thead>\n\t<tbody>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.selectedUsers:depth0,{name:"each",hash:{},fn:this.program(50,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t</tbody>\n</table>\n\t\n<div class="wizard_buttons">\n\t<button type="button" class="btn btn-default btn-sm btnBack">\n\t\t<i class="glyphicon glyphicon-chevron-left"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Back",{name:"s",hash:{},data:data}))+'\n\t</button>\n\t<button type="button" class="btn btn-primary btn-sm btnNext">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+'\n\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t</button>\n</div>\n\n'},42:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The next step is to add each Employee to a Division and Team, and assign them a Leave Profile.",{name:"s",hash:{},data:data}))+"\n"},44:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The next step is to add each Employee to a Team, and assign them a Leave Profile.",{name:"s",hash:{},data:data}))+"\n"},46:function(depth0,helpers,partials,data){return'\t\t\t\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile",{name:"s",hash:{},data:data}))+"</th>\n"},48:function(depth0,helpers,partials,data){return'\t\t\t\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile",{name:"s",hash:{},data:data}))+"</th>\n"},50:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t<tr>\n\t\t\t<td><input type="checkbox" id="chk'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'" value="'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'" class="userSelection" /></td>\n\t\t\t<td>\n\t\t\t\t<label for="chk'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'">\n\t\t\t\t\t<div>'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</div>\n\t\t\t\t\t<div>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</div>\n\t\t\t\t</label>\n\t\t\t</td>\n"+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].adusEnabled:depths[1],{name:"if",hash:{},fn:this.program(51,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t<td>\n\t\t\t\t<select class="form-control input-sm ddlTeam" id="ddlTeam'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'">\n\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select Team -",{name:"s",hash:{},data:data}))+'</option>\n\t\t\t\t</select>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<select class="form-control input-sm ddlLeaveProfile" id="ddlLeaveProfile'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'">\n\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select Leave Profile -",{name:"s",hash:{},data:data}))+"</option>\n\t\t\t\t</select>\n\t\t\t</td>\n\t\t</tr>\n"},51:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t\t<td>\n\t\t\t\t<select class="form-control input-sm ddlAdu" id="ddlAdu'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'">\n\t\t\t\t\t<option value="">'+this.escapeExpression((helpers.trans||depth0&&depth0.trans||helpers.helperMissing).call(depth0,"- Select Division -",{name:"trans",hash:{},data:data}))+"</option>\n"+((stack1=helpers.each.call(depth0,depths[2]!=null?depths[2].adus:depths[2],{name:"each",hash:{},fn:this.program(52,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t\t</select>\n\t\t\t</td>\n"},52:function(depth0,helpers,partials,data){var helper;return'\t\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},54:function(depth0,helpers,partials,data){var stack1;return'<div class="alert alert-info">\n\t<p>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Optionally, specify some basic profile data for each employee. This step can be skipped and completed later.",{name:"s",hash:{},data:data}))+"\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"If a Pro Rata Formula has been defined on the selected Leave Profile, the Employees starting Leave Allowance will be adjusted accordingly.",{name:"s",hash:{},data:data
}))+'\n\t</p>\n\t<div class="text-right">\n\t\t<button type="button" class="btn btn-primary btn-sm btnNext">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+'\n\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t</button>\n\t</div>\n</div>\n\n<table class="view table table-bordered table-shaded">\n\t<thead>\n\t\t<tr>\n\t\t\t<th>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Name / Email",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Job Title",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start Date",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th class="w250">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowance",{name:"s",hash:{},data:data}))+"</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.selectedUsers:depth0,{name:"each",hash:{},fn:this.program(55,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t</tbody>\n</table>\n\t\n<div class="wizard_buttons">\n\t<button type="button" class="btn btn-default btn-sm btnBack">\n\t\t<i class="glyphicon glyphicon-chevron-left"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Back",{name:"s",hash:{},data:data}))+'\n\t</button>\n\t<button type="button" class="btn btn-primary btn-sm btnNext">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+'\n\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t</button>\n</div>\n'},55:function(depth0,helpers,partials,data){var stack1,helper;return'\t\t<tr data-id="'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'">\n\t\t\t<td>\n\t\t\t\t<label for="chk'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'">\n\t\t\t\t\t<div>'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</div>\n\t\t\t\t\t<div>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+'</div>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td><input type="text" class="form-control input-sm txtJobTitle" value="'+this.escapeExpression((helper=(helper=helpers.jobTitle||(depth0!=null?depth0.jobTitle:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"jobTitle",hash:{},data:data}):helper))+'" /></td>\n\t\t\t<td><input type="text" class="form-control input-sm txtStartDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,depth0!=null?depth0.startDate:depth0,{name:"formatDate",hash:{},data:data}))+'" /></td>\n\t\t\t<td>\n\t\t\t\t<div>\n\t\t\t\t\t<div class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave",{name:"s",hash:{},data:data}))+'</div>\n\t\t\t\t\t<div class="pull-right"> \n\t\t\t\t\t\t'+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.totalHours:stack1,(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+" / "+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.totalHours:stack1,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div>\n'+((stack1=helpers["if"].call(depth0,(stack1=(stack1=(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.entitlements:stack1)!=null?stack1["1"]:stack1)!=null?stack1.sick:stack1,{name:"if",hash:{},fn:this.program(56,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div>\n'+((stack1=helpers["if"].call(depth0,(stack1=(stack1=(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.entitlements:stack1)!=null?stack1["1"]:stack1)!=null?stack1.custom1:stack1,{name:"if",hash:{},fn:this.program(58,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div>\n'+((stack1=helpers["if"].call(depth0,(stack1=(stack1=(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.entitlements:stack1)!=null?stack1["1"]:stack1)!=null?stack1.custom2:stack1,{name:"if",hash:{},fn:this.program(60,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n'},56:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t\t<div class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sick",{name:"s",hash:{},data:data}))+'</div>\n\t\t\t\t\t<div class="pull-right">\n\t\t\t\t\t\t'+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.totalHours:stack1,(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+" / "+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.totalHours:stack1,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t</div>\n"},58:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t\t<div class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Custom 1",{name:"s",hash:{},data:data}))+'</div>\n\t\t\t\t\t<div class="pull-right"> \n\t\t\t\t\t\t'+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.totalHours:stack1,(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+" / "+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.totalHours:stack1,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t</div>\n"},60:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t\t<div class="pull-left">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Custom 2",{name:"s",hash:{},data:data}))+'</div>\n\t\t\t\t\t<div class="pull-right">\n\t\t\t\t\t\t'+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.totalHours:stack1,(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+" / "+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.totalHours:stack1,{name:"round",hash:{},data:data}))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"\n\t\t\t\t\t</div>\n"},62:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<div class="alert alert-info">\n\t<p>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The final step is to configure login for the new Employees.",{name:"s",hash:{},data:data}))+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCustomerAccessHr:depth0,{name:"if",hash:{},fn:this.program(63,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You can also choose to send a Welcome Email to new Employees, which includes a link for them to set their password.",{name:"s",hash:{},data:data}))+"\n\t</p>\n\t<p>\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"These settings can be changed later.",{name:"s",hash:{},data:data}))+'\n\t</p>\n\t<div class="text-right">\n\t\t<button type="button" class="btn btn-primary btn-sm btnNext">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+'\n\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t</button>\n\t</div>\n</div>\n\n\x3c!-- \n<div class="alert alert-warning">\n\t<p>Employees with a start date in the future will not be able to log in until their start date.</p>\n</div>\n --\x3e\n\n<div class="checkbox">\n\t<label>\n\t\t<input type="checkbox" id="chkSendWelcome" checked="checked" />\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Send Welcome Email to new users?",{name:"s",hash:{},data:data}))+'\n\t</label>\n</div>\n\n<table class="view table table-bordered table-shaded">\n\t<thead>\n\t\t<tr>\n\t\t\t<th rowspan="2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Name / Email",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th rowspan="2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th rowspan="2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th rowspan="2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Job Title",{name:"s",hash:{},data:data}))+'</th>\n\t\t\t<th rowspan="2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start Date",{name:"s",hash:{},data:data}))+"</th>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCustomerAccessHr:depth0,{name:"if",hash:{},fn:this.program(65,data,0,blockParams,depths),inverse:this.program(67,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t</tr>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCustomerAccessHr:depth0,{name:"if",hash:{},fn:this.program(69,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</thead>\n\t<tbody>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.selectedUsers:depth0,{name:"each",hash:{},fn:this.program(71,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t</tbody>\n</table>\n\t\n<div class="wizard_buttons">\n\t<button type="button" class="btn btn-default btn-sm btnBack">\n\t\t<i class="glyphicon glyphicon-chevron-left"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Back",{name:"s",hash:{},data:data}))+'\n\t</button>\n\t<button type="button" class="btn btn-primary btn-sm btnNext">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Next",{name:"s",hash:{},data:data}))+'\n\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t</button>\n</div>\n'},63:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Login can be enabled for HR and Leave separately, or disabled altogether.",{name:"s",hash:{},data:data}))+"\n"},65:function(depth0,helpers,partials,data){return'\t\t\t\t<th colspan="2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enable Login?",{name:"s",hash:{},data:data}))+"</th>\n"},67:function(depth0,helpers,partials,data){return'\t\t\t\t<th>\n\t\t\t\t\t<div class="pull-left">\n\t\t\t\t\t\t<div class="checkbox-inline">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type="checkbox" id="chkLeaveLoginAll" />\n\t\t\t\t\t\t\t\tEnable Login?\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="pull-right">\n\t\t\t\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="login_leave"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t</th>\n'},69:function(depth0,helpers,partials,data){return'\t\t<tr>\n\t\t\t<th class="w100">\n\t\t\t\t<div class="pull-left">\n\t\t\t\t\t<div class="checkbox-inline">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="checkbox" id="chkHrLoginAll" />\n\t\t\t\t\t\t\tHR\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="pull-right">\n\t\t\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="login_hr"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="clearfix"></div>\n\t\t\t</th>\n\t\t\t<th class="w100">\n\t\t\t\t<div class="pull-left">\n\t\t\t\t\t<div class="checkbox-inline">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="checkbox" id="chkLeaveLoginAll" />\n\t\t\t\t\t\t\tLeave\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="pull-right">\n\t\t\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="login_leave"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="clearfix"></div>\n\t\t\t</th>\n\t\t</tr>\n'},71:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t<tr data-id="'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'">\n\t\t\t<td>\n\t\t\t\t<label for="chk'+this.escapeExpression((helper=(helper=helpers.id||(depth0!=null?depth0.id:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"id",hash:{},data:data}):helper))+'">\n\t\t\t\t\t<div>'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</div>\n\t\t\t\t\t<div>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</div>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.team:depth0)!=null?stack1.name:stack1,depth0))+"</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.name:stack1,depth0))+"</td>\n\t\t\t<td>"+this.escapeExpression((helper=(helper=helpers.jobTitle||(depth0!=null?depth0.jobTitle:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"jobTitle",hash:{},data:data}):helper))+"</td>\n\t\t\t<td>"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,depth0!=null?depth0.startDate:depth0,{name:"formatDate",hash:{},data:data}))+"</td>\n"+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].canCustomerAccessHr:depths[1],{name:"if",hash:{},fn:this.program(72,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t<td><input type="checkbox" class="chkLoginLeave" '+((stack1=(helpers.ifin||depth0&&depth0.ifin||helpers.helperMissing).call(depth0,"leave",depth0!=null?depth0.logins:depth0,{name:"ifin",hash:{},fn:this.program(32,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" /></td>\n\t\t</tr>\n"},72:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t<td><input type="checkbox" class="chkLoginHr" '+((stack1=(helpers.ifin||depth0&&depth0.ifin||helpers.helperMissing).call(depth0,"hr",depth0!=null?depth0.logins:depth0,{name:"ifin",hash:{},fn:this.program(32,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" /></td>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,5,{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.program(3,data,0,blockParams,depths),data:data}))!=null?stack1:""},useData:true,useDepths:true});Handlebars.registerPartial("admin/reg/templates/ImportUsersView",t);return t});define("admin/reg/views/ImportUsersView",["jquery","underscore","appogee","leave/models/LeaveProfile","leave/allowanceCalculator","leave/enums","admin/reg/util","admin/org/dlg/OrgSelectorDialog","hbs!admin/reg/templates/ImportUsersView","jquery.appogee.datePicker","jquery.appogee.contextHelp"],function($,_,appogee,LeaveProfile,allowanceCalculator,enums,util,OrgSelectorDialog,tmpl){"use strict";var S,R={errorNoUsersSelectedTitle:"No Users Selected",errorNoUsersSelectedMsg:"Please select at least 1 Employee to continue.",errorTooManyTitle:"Too many users",errorTooManyMsg:"Please import up to 100 users at a time.",errorInsufficientLicencesTitle:"Insufficient Licenses",errorInsufficientLicencesMsg1:"Unfortunately you do not have sufficient licenses to register {selected_users} Employees.",errorInsufficientLicencesMsg2:"Your current license allows you to license another {available_licences} Employees.",errorInsufficientLicencesMsg3:"Please deselect some users and try again.",errorNoAdu:"Please select a Division for {employee_name}.",errorNoTeam:"Please select a Team for {employee_name}.",errorNoLeaveProfile:"Please select a Leave Profile for {employee_name}.",confirmImportTitle:"Confirm Import",confirmImportMsg1:"This will import the {user_count} selected employees into {app_name}.",confirmImportMsg2:"After this process you will have used {used_licenses} of your {total_licenses} available user licenses.",confirmImportMsg3:"Do you wish to continue?"};var IntegrationStatus={Enabled:10};var Vendor={Gapps:"gapps",O365:"o365"};var LicenseType={Trial:"trial",Licenced:"licensed"};var Page={SelectUsers:1,Configure:2,Profile:3,Login:4,Importing:5,Complete:6};var GAPPS_USER_FORMATTER=function(user){return{id:user.id,gappsId:user.id,name:user.name.fullName,email:user.primaryEmail,logins:["hr","leave"]}};var O365_USER_FORMATTER=function(user){return{id:user.objectId,o365Id:user.objectId,name:user.displayName,email:user.mail,logins:["hr","leave"]}};var FIVE_MINUTES=300;var View=function($container,vendor,license){S=appogee.getStrings("ImportUsersView",R);this.$container=$container;this.vendor=vendor;this.license=license;this.page=Page.SelectUsers;this.userPage=0;this.pageTokens=[];this.nextPageToken=null;this.users=null;this.selectedUsers=[];if(this.vendor==Vendor.Gapps){this.getUsersUrl="/admin/registration/import/xhr/list_gapps_users?excludeExisting=true";this.vendorName="G Suite";this.userFormatter=GAPPS_USER_FORMATTER}else if(this.vendor==Vendor.O365){this.getUsersUrl="/admin/registration/import/xhr/list_o365_users?excludeExisting=true";this.vendorName="Office 365";this.userFormatter=O365_USER_FORMATTER}else{throw"Unknown Vendor: "+vendor}this.cachePolicies={};this.cachePolicies[this.getUsersUrl]={type:"session",expirySeconds:FIVE_MINUTES};this.currentUser=appogee.getCurrentUser();this.adus=appogee.getAdus({root:"self"})};View.prototype.reset=function(){this.page=Page.SelectUsers;this.users=null;this.selectedUsers=[]};View.prototype.fetch=function(useCache,urlParams){var _this148=this;var cachePolicies=useCache?this.cachePolicies:{};cachePolicies={};this.loading=true;var url=this.getUsersUrl;if(urlParams){var xx=_.pairs(urlParams).map(function(x){return x[0]+"="+x[1]}).join("&");if(url.indexOf("?")>-1){url+="&"+xx}else{url+="?"+xx}}appogee.load([url],function(responses){var response=responses[0];_this148.loading=false;_this148.users=[];_this148.nextPageToken=null;if(response&&response.status==IntegrationStatus.Enabled){if(response.users&&response.users.length>0){_this148.users=response.users.map(_this148.userFormatter);_this148.nextPageToken=response.nextPageToken;if(_this148.nextPageToken){_this148.pageTokens.push(_this148.nextPageToken)}}}_this148.render()},{cachePolicies:cachePolicies})};View.prototype.fetchPrevPage=function(){if(this.nextPageToken){this.pageTokens.pop()}this.pageTokens.pop();if(--this.userPage===0){this.fetch(false)}else{var token=this.pageTokens[this.userPage-1];this.fetch(false,{token:token})}this.render()};View.prototype.fetchNextPage=function(){this.userPage++;this.fetch(false,{token:this.nextPageToken});this.render()};View.prototype.render=function(args){var _this149=this;var me=this;if(this.users===null){this.fetch(true)}var adu=this.currentUser.getActiveAdu();var remainingLicenses=this.license.licenses-this.license.activeEmployees;var prevPageToken=null;if(this.userPage>0){prevPageToken=this.pageTokens[this.userPage-1]}var allSelected=false;if(this.users&&!this.loading){allSelected=true;this.users.forEach(function(user){var i=_.findIndex(_this149.selectedUsers,function(u){return u.id==user.id});if(i==-1){allSelected=false}})}var data={page:this.page,license:this.license,remainingLicenses:remainingLicenses,loading:this.loading,vendorName:this.vendorName,adus:this.adus,adu:adu,adusEnabled:this.adus.length>1,users:this.users,selectedUsers:this.selectedUsers,selectedUserIds:this.selectedUsers.map(function(u){return u.id}),canCustomerAccessHr:appogee.canCustomerAccessHr(),prevPageToken:prevPageToken,nextPageToken:this.nextPageToken,allSelected:allSelected,search:this.searchString};if(args){$.extend(data,args)}this.$container.html(tmpl(data));this.$container.find(".userSelection").change(function(){if(_this149.page==Page.SelectUsers){_this149.updateUserSelection()}});this.$container.find("#btnShowSelectedUsers").click(function(){var users=_this149.selectedUsers.map(function(u){return"<div>{0} ({1})</div>".format(u.name,u.email)}).join("");appogee.alert("Selected Users","<p>The following users have been selected:</p>"+users)});this.$container.find("#btnPrevPage").click(function(){_this149.fetchPrevPage()});this.$container.find("#btnNextPage").click(function(){_this149.fetchNextPage()});this.$container.find(".btnNext").click(function(){_this149.next()});this.$container.find(".btnBack").click(function(){_this149.previous()});this.$container.find("#btnSearch").click(function(){var searchString=$("#txtSearch").val();_this149.search(searchString)});this.$container.find("#btnClearSearch").click(function(){_this149.search("")});if(this.page==Page.SelectUsers){this.selectedUsers.forEach(function(user){$("#chk"+user.id).prop("checked",true)})}else if(this.page==Page.Configure){if(this.adus.length==1){util.populateTeams(this.$container.find(".ddlTeam"),this.adus[0].key);util.populateLeaveProfiles(this.$container.find(".ddlLeaveProfile"),this.adus[0].key)}else{this.$container.find(".ddlAdu").change(function(){var $ddlTeam=$(this).closest("tr").find(".ddlTeam");var $ddlLeaveProfile=$(this).closest("tr").find(".ddlLeaveProfile");util.populateTeams($ddlTeam,this.value);util.populateLeaveProfiles($ddlLeaveProfile,this.value)})}this.selectedUsers.forEach(function(user){if(user.adu){$("#ddlAdu"+user.id).val(user.adu.key).change()}if(user.team){$("#ddlTeam"+user.id).val(user.team.key)}if(user.leaveProfile){$("#ddlLeaveProfile"+user.id).val(user.leaveProfile.key)}});this.$container.find(".btnAssignMultiple").click(function(){_this149.assignMultiple()})}else if(this.page==Page.Profile){this.$container.find(".txtJobTitle").blur(function(){var userId=$(this).closest("tr").data("id");var user=_.findWhere(me.selectedUsers,{id:userId});user.jobTitle=$(this).val()});this.$container.find(".txtStartDate").appogeeDatePicker({yearRange:[-50,50],onSelect:function(){var d=$(this).datepicker("getDate");var userId=$(this).closest("tr").data("id");var user=_.findWhere(me.selectedUsers,{id:userId});user.startDate=d;me.calculateAllowances();me.render()}})}else if(this.page==Page.Login){this.$container.find("input#chkHrLoginAll").change(function(){if($(this).is(":checked")){me.addRoleToAll("hr");me.$container.find("input.chkLoginHr").prop("checked",true)}else{me.removeRoleFromAll("hr");me.$container.find("input.chkLoginHr").prop("checked",false)}});this.$container.find("input#chkLeaveLoginAll").change(function(){if($(this).is(":checked")){me.addRoleToAll("leave");me.$container.find("input.chkLoginLeave").prop("checked",true)}else{me.removeRoleFromAll("leave");me.$container.find("input.chkLoginLeave").prop("checked",false)}})}this.$container.find("input#checkAll").change(function(){if($(this).is(":checked")){me.$container.find("input.userSelection").prop("checked",true)}else{me.$container.find("input.userSelection").prop("checked",false)}if(me.page==Page.SelectUsers){me.updateUserSelection()}});this.$container.find("#chkLogin").change(function(){if($(this).is(":checked")){$("#chkSendWelcome").removeAttr("disabled").prop("checked",true)}else{$("#chkSendWelcome").attr("disabled","disabled").prop("checked",false)}});this.$container.find("#gappsImport").click(function(){me.save()});this.$container.find(".context-help").contextHelp()};View.prototype.updateUserSelection=function(){var _this150=this;this.$container.find(".userSelection").each(function(i,chk){var userId=chk.value;var index=_.findIndex(_this150.selectedUsers,function(u){return u.id==userId});var user=_.findWhere(_this150.users,{id:userId});if(chk.checked){if(index===-1){_this150.selectedUsers.push(user)}}else{if(index>-1){_this150.selectedUsers.splice(index,1)}}});this.render()};View.prototype.addRoleToAll=function(role){this.selectedUsers.forEach(function(user){if(user.logins.indexOf(role)==-1){user.logins.push(role)}})};View.prototype.removeRoleFromAll=function(role){this.selectedUsers.forEach(function(user){var i=user.logins.indexOf(role);if(i>-1){user.logins.splice(i,1)}})};View.prototype.assignMultiple=function(){var _this151=this;var me=this;var selectedUsers=[];this.$container.find("input.userSelection:checked").each(function(){var userId=$(this).val();var user=_.findWhere(me.selectedUsers,{id:userId});selectedUsers.push(user)});if(selectedUsers.length===0){appogee.valert(S.errorNoUsersSelected);return false}var dlg=new OrgSelectorDialog;dlg.onSelect(function(adu,team,leaveProfile){_this151.$container.find("input.userSelection:checked").each(function(){var $ddlAdu=$(this).closest("tr").find(".ddlAdu");var $ddlTeam=$(this).closest("tr").find(".ddlTeam");var $ddlLeaveProfile=$(this).closest("tr").find(".ddlLeaveProfile");$ddlAdu.val(adu.key);util.populateTeams($ddlTeam,adu.key,team.key);util.populateLeaveProfiles($ddlLeaveProfile,adu.key,leaveProfile.key)})});dlg.show()};View.prototype.next=function(){var me=this;if(this.page==Page.SelectUsers){if(this.validateSelectUsers()){this.page=Page.Configure;this.render()}}else if(this.page==Page.Configure){if(this.validateConfigure()){this.page=Page.Profile;this.calculateAllowances();this.render()}}else if(this.page==Page.Profile){this.page=Page.Login;this.render()}else if(this.page==Page.Login){var sendWelcome=$("#chkSendWelcome").prop("checked");this.$container.find(".chkLoginHr").each(function(){var userId=$(this).closest("tr").data("id");var user=_.findWhere(me.selectedUsers,{id:userId});var i=user.logins.indexOf("hr");if(this.checked&&i==-1){user.logins.push("hr")}else if(!this.checked&&i>-1){user.logins.splice(i,1)}});this.$container.find(".chkLoginLeave").each(function(){var userId=$(this).closest("tr").data("id");var user=_.findWhere(me.selectedUsers,{id:userId});var i=user.logins.indexOf("leave");if(this.checked&&i==-1){user.logins.push("leave")}else if(!this.checked&&i>-1){user.logins.splice(i,1)}});this.selectedUsers.forEach(function(user){user.sendWelcome=sendWelcome&&user.logins.length>0});this.doImport()}};View.prototype.previous=function(){if(this.page==Page.Configure){this.page=Page.SelectUsers}else if(this.page==Page.Profile){this.page=Page.Configure}else if(this.page==Page.Login){this.page=Page.Profile}this.render()};View.prototype.search=function(searchString){this.searchString=searchString;this.fetch(false,{search:searchString});this.render()};View.prototype.calculateAllowances=function(){var today=appogee.today();this.selectedUsers.forEach(function(user){var allowanceStart=null;var allowanceEnd=null;if(user.leaveProfile.startMonth-1<today.getMonth()){allowanceStart=new Date(today.getFullYear(),user.leaveProfile.startMonth-1,1);allowanceEnd=new Date(today.getFullYear()+1,user.leaveProfile.startMonth-1,1)}else{allowanceStart=new Date(today.getFullYear()-1,user.leaveProfile.startMonth-1,1);allowanceEnd=new Date(today.getFullYear(),user.leaveProfile.startMonth-1,1)}allowanceEnd.setDate(allowanceEnd.getDate()-1);var p=new LeaveProfile(user.leaveProfile);var leaveAnnualHours=p.calculateLeaveAnnualHours(user.startDate,allowanceStart,allowanceEnd);var sickAnnualHours=p.calculateSickAnnualHours(user.startDate,allowanceStart,allowanceEnd);var custom1AnnualHours=p.calculateCustom1AnnualHours(user.startDate,allowanceStart,allowanceEnd);var custom2AnnualHours=p.calculateCustom2AnnualHours(user.startDate,allowanceStart,allowanceEnd);var leaveAccrualHours=p.calculateLeaveAccruedHours(user.startDate,allowanceStart,allowanceEnd);var sickAccrualHours=p.calculateSickAccruedHours(user.startDate,allowanceStart,allowanceEnd);var custom1AccrualHours=p.calculateCustom1AccruedHours(user.startDate,allowanceStart,allowanceEnd);var custom2AccrualHours=p.calculateCustom2AccruedHours(user.startDate,allowanceStart,allowanceEnd);user.allowance={leave:{annualHours:leaveAnnualHours,accrualHours:leaveAccrualHours,totalHours:leaveAnnualHours+leaveAccrualHours},sick:{annualHours:sickAnnualHours,accrualHours:sickAccrualHours,totalHours:sickAnnualHours+sickAccrualHours},custom1:{annualHours:custom1AnnualHours,accrualHours:custom1AccrualHours,totalHours:custom1AnnualHours+custom1AccrualHours},custom2:{annualHours:custom2AnnualHours,accrualHours:custom2AccrualHours,totalHours:custom2AnnualHours+custom2AccrualHours}}})};View.prototype.validateSelectUsers=function(){if(this.selectedUsers.length===0){appogee.valert(S.errorNoUsersSelected);return false}if(this.selectedUsers.length>100){appogee.valert(S.errorTooMany);return false}if(this.license.licenseType==LicenseType.Licenced){
var availableLicences=this.license.licenses-this.license.activeEmployees;if(this.selectedUsers.length>availableLicences){appogee.valert(S.get("errorInsufficientLicences",{selected_users:this.selectedUsers.length,available_licences:availableLicences}));return false}}return true};View.prototype.validateConfigure=function(){var me=this;var $chks=this.$container.find("input.userSelection");for(var i=0;i<$chks.length;i++){var $tr=$($chks[i]).closest("tr");var userId=$chks[i].value;var user=_.findWhere(me.selectedUsers,{id:userId});var adu=me.adus[0];if(me.adus.length>1){var aduKey=$tr.find(".ddlAdu").val();if(!aduKey){appogee.valert(S.errorNoAdu.format({employee_name:user.name}));return false}adu=_.findWhere(this.adus,{key:aduKey})}var teamKey=$tr.find(".ddlTeam").val();var leaveProfileKey=$tr.find(".ddlLeaveProfile").val();if(!teamKey){appogee.valert(S.errorNoTeam.format({employee_name:user.name}));return false}if(!leaveProfileKey){appogee.valert(S.errorNoLeaveProfile.format({employee_name:user.name}));return false}var team=util.getTeamByKey(teamKey);var leaveProfile=util.getLeaveProfileByKey(leaveProfileKey);user.adu=adu;user.team=team;user.leaveProfile=leaveProfile}return true};View.prototype.doImport=function(){var _this152=this;var licenseMessage="";if(this.license.licenseType==LicenseType.Licenced){licenseMessage=S.confirmImportMsg2.format({used_licenses:this.license.activeEmployees+this.selectedUsers.length,total_licenses:this.license.licenses})}var msg=appogee.util.joinWithPs(S.confirmImportMsg1,licenseMessage,S.confirmImportMsg3);msg=msg.format({user_count:this.selectedUsers.length,app_name:appogee.getAppName()});appogee.confirm(S.confirmImportTitle,msg,function(){_this152._doImport();_this152.page=Page.Importing;_this152.render()})};View.prototype._doImport=function(){var _this153=this;var users=this.selectedUsers.map(function(user){var startDate=null;if(user.startDate){startDate=appogee.util.date.toISOString(user.startDate)}return{gappsId:user.gappsId,o365Id:user.o365Id,name:user.name,email:user.email,team:{key:user.team.key},leaveProfile:{key:user.leaveProfile.key},jobTitle:user.jobTitle,startDate:startDate,logins:user.logins,sendWelcome:user.sendWelcome}});var body={users:users};var url="/admin/registration/import/xhr/do_import";appogee.xhr.post(url,body,function(response){_this153.page=Page.Complete;_this153.render({successCount:response.count});var userCacheType=_this153.cachePolicies[_this153.getUsersUrl].type;if(userCacheType=="session"&&window.sessionStorage){window.sessionStorage.removeItem(_this153.getUsersUrl)}else if(userCacheType=="local"&&window.localStorage){window.localStorage.removeItem(_this153.getUsersUrl)}})};return View});define("admin/reg/import-gapps",["jquery","appogee","admin/reg/views/ImportUsersView"],function($,appogee,ImportUsersView){"use strict";return{contextHelp:true,getLoadUrls:function(){return{api:["/license"]}},onLoad:function(license){var view=new ImportUsersView($("#registrationView"),"gapps",license);view.render()}}});define("admin/reg/import-o365",["jquery","appogee","admin/reg/views/ImportUsersView"],function($,appogee,ImportUsersView){"use strict";return{getLoadUrls:function(){return{api:["/license"]}},onLoad:function(license){var view=new ImportUsersView($("#registrationView"),"o365",license);view.render()}}});define("admin/reg/import-xero",["jquery","appogee","admin/reg/views/ImportUsersView"],function($,appogee,ImportUsersView){"use strict";return{initialize:function(){var view=new ImportUsersView($("#registrationView"),"xero");view.render()}}});define("templates/helpers/getSecurityViewClass",["hbs/handlebars","appogee"],function(Handlebars){"use strict";function getSecurityViewClass(oldState,newState){if(!oldState&&newState){return"edited-on"}else if(oldState&!newState){return"edited-off"}return""}Handlebars.registerHelper("getSecurityViewClass",getSecurityViewClass);return getSecurityViewClass});define("hbs!admin/security/tmpl/SecurityView",["hbs/handlebars","templates/helpers/s","templates/helpers/propercase","templates/helpers/getSecurityViewClass","templates/helpers/ifall"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<th colspan="3" class="text-center">\n\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="login_modes"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Login",{name:"s",hash:{},data:data}))+"\n\t</th>\n"},3:function(depth0,helpers,partials,data){return'\t\t<th colspan="2" class="text-center">\n\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="login"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Self Service",{name:"s",hash:{},data:data}))+"\n\t\t</th>\n"},5:function(depth0,helpers,partials,data){return'\t\t<th class="text-center w100 leave-login" rowspan="2">\n\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="leave_login"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enable Login?",{name:"s",hash:{},data:data}))+"\n\t\t</th>\n"},7:function(depth0,helpers,partials,data){return"4"},9:function(depth0,helpers,partials,data){return"3"},11:function(depth0,helpers,partials,data){return'\t<th class="w75 text-center">PW</th>\n\t<th class="w75 text-center">Gapps</th>\n\t<th class="w75 text-center">O365</th>\n'},13:function(depth0,helpers,partials,data){return'\t\t<th class="w75 text-center">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th class="w75 text-center">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"HR",{name:"s",hash:{},data:data}))+"</th>\n"},15:function(depth0,helpers,partials,data){return'\t<th class="w75 text-center">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"ADU Manager",{name:"s",hash:{},data:data}))+"</th>\n"},17:function(depth0,helpers,partials,data){return'<tr>\n\t<td class="no-results" colspan="100">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading ...",{name:"s",hash:{},data:data}))+"</td>\n</tr>\n"},19:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.employees:depth0,{name:"each",hash:{},fn:this.program(20,data,0,blockParams,depths),inverse:this.program(48,data,0,blockParams,depths),data:data}))!=null?stack1:""},20:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'<tr data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" class="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSelf:depth0,{name:"if",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" "+((stack1=helpers.unless.call(depth0,depths[1]!=null?depths[1].isCurrentUserAduManager:depths[1],{name:"unless",hash:{},fn:this.program(24,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t<td>\n\t\t<a href="/admin/organisation/employee?key='+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.fullName||(depth0!=null?depth0.fullName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"fullName",hash:{},data:data}):helper))+'</a>\n\t\t<div class="visible-xs visible-sm">'+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+'</div>\n\t</td>\n\t<td class="hidden-xs hidden-sm">'+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+'</td>\n\t<td class="hidden-xs hidden-sm">'+this.escapeExpression((helpers.propercase||depth0&&depth0.propercase||helpers.helperMissing).call(depth0,depth0!=null?depth0.status:depth0,{name:"propercase",hash:{},data:data}))+"</td>\n"+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].showLogin:depths[1],{name:"if",hash:{},fn:this.program(26,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\n\t<td class="text-center login login-leave '+this.escapeExpression((helpers.getSecurityViewClass||depth0&&depth0.getSecurityViewClass||helpers.helperMissing).call(depth0,depth0!=null?depth0._loginLeave:depth0,depth0!=null?depth0.loginLeave:depth0,{name:"getSecurityViewClass",hash:{},data:data}))+'" data-attr="loginLeave">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loginLeave:depth0,{name:"if",hash:{},fn:this.program(28,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n"+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].canCustomerAccessHr:depths[1],{name:"if",hash:{},fn:this.program(30,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\n\t<td class="text-center role-mgr appogee-tooltip" data-tooltip="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.roleMgr:depth0,{name:"if",hash:{},fn:this.program(32,data,0,blockParams,depths),inverse:this.program(34,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'" data-tooltip-position="left" data-tooltip-style="warning">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.roleMgr:depth0,{name:"if",hash:{},fn:this.program(28,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t</td>\n\t<td class="text-center role role-hr '+this.escapeExpression((helpers.getSecurityViewClass||depth0&&depth0.getSecurityViewClass||helpers.helperMissing).call(depth0,depth0!=null?depth0._roleHr:depth0,depth0!=null?depth0.roleHr:depth0,{name:"getSecurityViewClass",hash:{},data:data}))+" appogee-tooltip\n\t\t\t"+((stack1=(helpers.ifall||depth0&&depth0.ifall||helpers.helperMissing).call(depth0,depths[2]!=null?depths[2].adusEnabled:depths[2],depth0!=null?depth0.roleHr:depth0,depth0!=null?depth0.roleAdu:depth0,{name:"ifall",hash:{},fn:this.program(36,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'"\n\t\tdata-attr="roleHr"\n\t\t\t'+((stack1=(helpers.ifall||depth0&&depth0.ifall||helpers.helperMissing).call(depth0,depths[2]!=null?depths[2].adusEnabled:depths[2],depth0!=null?depth0.roleHr:depth0,depth0!=null?depth0.roleAdu:depth0,{name:"ifall",hash:{},fn:this.program(39,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\n\t\t>\n\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.roleHr:depth0,{name:"if",hash:{},fn:this.program(28,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n"+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].adusEnabled:depths[1],{name:"if",hash:{},fn:this.program(42,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t<td class="text-center role role-admin '+this.escapeExpression((helpers.getSecurityViewClass||depth0&&depth0.getSecurityViewClass||helpers.helperMissing).call(depth0,depth0!=null?depth0._roleAdmin:depth0,depth0!=null?depth0.roleAdmin:depth0,{name:"getSecurityViewClass",hash:{},data:data}))+' appogee-tooltip" data-attr="roleAdmin" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSelf:depth0,{name:"if",hash:{},fn:this.program(45,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" >\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.roleAdmin:depth0,{name:"if",hash:{},fn:this.program(28,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n</tr>\n"},21:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"self "+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].isCurrentUserAdmin:depths[1],{name:"if",hash:{},fn:this.program(22,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")},22:function(depth0,helpers,partials,data){return"self-admin"},24:function(depth0,helpers,partials,data){return"adu-no"},26:function(depth0,helpers,partials,data){return'\t<td class="text-center"><i class="glyphicon glyphicon-ok"></i></td>\n\t<td class="text-center"><i class="glyphicon glyphicon-ok"></i></td>\n\t<td class="text-center"></td>\n'},28:function(depth0,helpers,partials,data){return'\t\t\t<i class="glyphicon glyphicon-ok"></i>\n'},30:function(depth0,helpers,partials,data){var stack1;return'\t<td class="text-center login login-hr '+this.escapeExpression((helpers.getSecurityViewClass||depth0&&depth0.getSecurityViewClass||helpers.helperMissing).call(depth0,depth0!=null?depth0._loginHr:depth0,depth0!=null?depth0.loginHr:depth0,{name:"getSecurityViewClass",hash:{},data:data}))+'" data-attr="loginHr">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loginHr:depth0,{name:"if",hash:{},fn:this.program(28,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n"},32:function(depth0,helpers,partials,data){return this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The Team Manager role cannot be removed as the employee is a manager of 1 or more teams.",{name:"s",hash:{},data:data}))},34:function(depth0,helpers,partials,data){return this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The Team Manager role is automatically granted when an Employee is made a manager of a team.",{name:"s",hash:{},data:data}))},36:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.unless.call(depth0,depths[2]!=null?depths[2].isCurrentUserAduManager:depths[2],{name:"unless",hash:{},fn:this.program(37,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},37:function(depth0,helpers,partials,data){return"\n\t\t\t\tnot-allowed\n\t\t\t"},39:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.unless.call(depth0,depths[2]!=null?depths[2].isCurrentUserAduManager:depths[2],{name:"unless",hash:{},fn:this.program(40,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},40:function(depth0,helpers,partials,data){return'\n\t\t\t\tdata-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You cannot remove the HR Manager role from a user who also has the ADU Manager role",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left" data-tooltip-style="warning"\n\t\t\t'},42:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t<td class="text-center role role-adu '+this.escapeExpression((helpers.getSecurityViewClass||depth0&&depth0.getSecurityViewClass||helpers.helperMissing).call(depth0,depth0!=null?depth0._roleAdu:depth0,depth0!=null?depth0.roleAdu:depth0,{name:"getSecurityViewClass",hash:{},data:data}))+' appogee-tooltip" data-attr="roleAdu" '+((stack1=helpers.unless.call(depth0,depths[2]!=null?depths[2].isCurrentUserAduManager:depths[2],{name:"unless",hash:{},fn:this.program(43,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.roleAdu:depth0,{name:"if",hash:{},fn:this.program(28,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n"},43:function(depth0,helpers,partials,data){return'data-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Only ADU Managers can change the ADU Manager role",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left" data-tooltip-style="warning"'},45:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers["if"].call(depth0,depths[2]!=null?depths[2].isCurrentUserAdmin:depths[2],{name:"if",hash:{},fn:this.program(46,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},46:function(depth0,helpers,partials,data){return'data-tooltip="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"You cannot remove the Administrator role from your own account",{name:"s",hash:{},data:data}))+'" data-tooltip-position="left" data-tooltip-style="danger"'},48:function(depth0,helpers,partials,data){return'<tr>\n\t<td class="no-results" colspan="100">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No Employees Found",{name:"s",hash:{},data:data}))+"</td>\n</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<table class="table table-condensed table-shaded table-bordered table-no-hover">\n<thead>\n<tr>\n\t<th rowspan="2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Name",{name:"s",hash:{},data:data}))+'</th>\n\t<th rowspan="2" class="hidden-xs hidden-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Email",{name:"s",hash:{},data:data}))+'</th>\n\t<th rowspan="2" class="hidden-xs hidden-sm w100">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Status",{name:"s",hash:{},data:data}))+"</th>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showLogin:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCustomerAccessHr:depth0,{name:"if",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.program(5,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t<th colspan="'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adusEnabled:depth0,{name:"if",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.program(9,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'" class="text-center">\n\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="roles"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Roles",{name:"s",hash:{},data:data}))+"\n\t</th>\n</tr>\n<tr>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showLogin:depth0,{name:"if",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canCustomerAccessHr:depth0,{name:"if",hash:{},fn:this.program(13,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\n\t<th class="w75 text-center">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team Manager",{name:"s",hash:{},data:data}))+'</th>\n\t<th class="w75 text-center">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"HR Manager",{name:"s",hash:{},data:data}))+"</th>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adusEnabled:depth0,{name:"if",hash:{},fn:this.program(15,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t<th class="w75 text-center">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Admin",{name:"s",hash:{},data:data}))+"</th>\n</tr>\n</thead>\n<tbody>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loading:depth0,{name:"if",hash:{},fn:this.program(17,data,0,blockParams,depths),inverse:this.program(19,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"</tbody>\n</table>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/security/tmpl/SecurityView",t);return t});define("admin/security/views/SecurityView",["jquery","underscore","appogee","hbs!admin/security/tmpl/SecurityView","jquery.appogee.tooltip","jquery.appogee.contextHelp"],function($,_,appogee,tmpl){"use strict";var ATTRS=["loginLeave","loginHr","roleHr","roleAdu","roleAdmin"];var S,R={alertOperationNotAllowedTitle:"Operation Not Allowed",alertSelfRevokeAdminMsg:"You cannot remove the Administrator role from your own account.",alertAduRoleRestrictedMsg:"Only ADU Managers can change the ADU Manager role",alertSelfRevokeAccessMsg:"You cannot remove login access from your own account.",alertRevokeAduMsg:"Only ADU Managers can remove the HR Manager role for Divisional Managers"};var View=function($container){S=appogee.getStrings("SecurityView",R);this.$container=$container;this.dirty=false;this.loading=false;this.currentUser=appogee.getCurrentUser();this.dirtyHandlers=[]};View.prototype.setLoading=function(loading){this.loading=loading;this.render()};View.prototype.setEmployees=function(employees){this.employees=employees;this.stampEmployees();this.checkDirt()};View.prototype.onDirtyChange=function(handler){this.dirtyHandlers.push(handler)};View.prototype.stampEmployees=function(){var _this154=this;this.employees.forEach(function(employee){if(!employee.logins){employee.logins=[]}if(!employee.roles){employee.roles=[]}employee.isSelf=employee.key==_this154.currentUser.key;employee._loginLeave=employee.logins.indexOf("leave")>-1;employee._loginHr=employee.logins.indexOf("hr")>-1;employee._roleMgr=employee.roles.indexOf("manager")>-1;employee._roleHr=employee.roles.indexOf("hr")>-1;employee._roleAdu=employee.roles.indexOf("adu")>-1;employee._roleAdmin=employee.roles.indexOf("admin")>-1;employee.loginLeave=employee.logins.indexOf("leave")>-1;employee.loginHr=employee.logins.indexOf("hr")>-1;employee.roleMgr=employee.roles.indexOf("manager")>-1;employee.roleHr=employee.roles.indexOf("hr")>-1;employee.roleAdu=employee.roles.indexOf("adu")>-1;employee.roleAdmin=employee.roles.indexOf("admin")>-1})};View.prototype.render=function(){var _this155=this;var isCurrentUserAduManager=this.currentUser.isAduManager();var isCurrentUserAdmin=this.currentUser.isAdmin();var adusEnabled=appogee.isAdusEnabled();var data={loading:this.loading,employees:this.employees,isCurrentUserAduManager:isCurrentUserAduManager,isCurrentUserAdmin:isCurrentUserAdmin,showLogin:false,adusEnabled:adusEnabled,canCustomerAccessHr:appogee.canCustomerAccessHr()};this.$container.html(tmpl(data));this.$container.find(".appogee-tooltip").appogeeTooltip();this.$container.find("td.login,td.role").click(function(e){var key=$(e.currentTarget).closest("tr").data("key");var attr=$(e.currentTarget).data("attr");var employee=_.findWhere(_this155.employees,{key:key});if(_this155.currentUser.isAdmin()&&employee.isSelf&&attr=="roleAdmin"&&employee[attr]){appogee.valert(S.alertOperationNotAllowedTitle,S.alertSelfRevokeAdminMsg);return}if(attr=="roleAdu"&&!isCurrentUserAduManager){appogee.valert(S.alertOperationNotAllowedTitle,S.alertAduRoleRestrictedMsg);return}employee[attr]=!employee[attr];if(employee.isSelf&&!employee.loginLeave&&!employee.loginHr){employee[attr]=!employee[attr];appogee.valert(S.alertOperationNotAllowedTitle,S.alertSelfRevokeAccessMsg);return}if(adusEnabled){if(attr=="roleHr"&&!employee.roleHr&&employee.roleAdu&&!isCurrentUserAduManager){employee[attr]=!employee[attr];appogee.valert(S.alertOperationNotAllowedTitle,S.alertRevokeAduMsg);return}if(attr=="roleAdu"&&employee.roleAdu){employee.roleHr=true}else if(attr=="roleHr"&&!employee.roleHr){employee.roleAdu=false}}_this155.render();_this155.checkDirt()});this.$container.find(".reset").click(function(e){var key=$(e.currentTarget).closest("tr").data("key");var employee=_.findWhere(_this155.employees,{key:key});ATTRS.forEach(function(attr){employee[attr]=employee["_"+attr]});_this155.render();_this155.checkDirt()});this.$container.find(".context-help").contextHelp()};View.prototype.checkDirt=function(){var _this156=this;var dirty=false;this.employees.forEach(function(employee){if(_this156.isEmployeeDirty(employee)){dirty=true}});if(dirty!=this.dirty){this.dirtyHandlers.forEach(function(h){return h(dirty)})}this.dirty=dirty};View.prototype.isEmployeeDirty=function(employee){var dirty=false;ATTRS.forEach(function(attr){var a=employee[attr];var b=employee["_"+attr];if(a!=b){dirty=true}});return dirty};View.prototype.getDirtyEmployees=function(){var _this157=this;return _.filter(this.employees,function(e){return _this157.isEmployeeDirty(e)})};return View});define("hbs!admin/security/dlg/ConfirmSecurityChanges",["hbs/handlebars","templates/helpers/s","templates/helpers/ifany","templates/helpers/if_gt"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Optionally select whether to send a welcome email to any new users.",{name:"s",hash:{},data:data}))+"\n"},3:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enabled HR and Leave Login",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginBoth:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},5:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enabled HR Login",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginHr:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},7:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enabled Leave Login",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginLeave:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},9:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disabled Login",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.disableLogin:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},11:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disabled HR Login",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.disableLoginHr:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},13:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Disabled Leave Login",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.disableLoginLeave:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},15:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Granted HR Manager Role",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.grantHr:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},17:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Granted Divisional Manager Role",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.grantAdu:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},19:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Granted Administrator Role",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.grantAdmin:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},21:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Removed HR Manager Role",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.removeHr:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},23:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Removed Divisional Manager Role",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.removeAdu:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},25:function(depth0,helpers,partials,data){var stack1;return"\t<tr>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Removed Administrator Role",{name:"s",hash:{},data:data}))+"</td>\n\t\t<td>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"{num} Users",{name:"s",hash:{num:(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.removeAdmin:stack1)!=null?stack1.length:stack1},data:data}))+"</td>\n\t</tr>\n"},27:function(depth0,helpers,partials,data){return'\t<div class="form-group">\n\t\t<label>\n\t\t\t<input type="checkbox" checked="checked" id="chkSendWelcome"/>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Send Welcome Email to employees with new Login?",{name:"s",hash:{},data:data}))+"\n\t\t</label>\n\t</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<h3>Confirm Security Changes</h3>\n\n<div class="alert alert-info alert-flat">\n\t<p>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please check and confirm the following changes to user login and security.",{name:"s",hash:{},data:data
}))+"\n"+((stack1=(helpers.ifany||depth0&&depth0.ifany||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginBoth:stack1)!=null?stack1.length:stack1,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginHr:stack1)!=null?stack1.length:stack1,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginLeave:stack1)!=null?stack1.length:stack1,{name:"ifany",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t<p>\n</div>\n\n<div class="table-container">\n\t<table class="table table-condensed table-borderless">\n'+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginBoth:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginHr:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginLeave:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(7,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.disableLogin:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(9,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.disableLoginHr:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.disableLoginLeave:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(13,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.grantHr:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(15,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.grantAdu:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(17,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.grantAdmin:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\n"+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.removeHr:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(21,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.removeAdu:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(23,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.removeAdmin:stack1)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(25,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</table>\n</div>\n\n"+((stack1=(helpers.ifany||depth0&&depth0.ifany||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginBoth:stack1)!=null?stack1.length:stack1,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginHr:stack1)!=null?stack1.length:stack1,(stack1=(stack1=depth0!=null?depth0.summary:depth0)!=null?stack1.loginLeave:stack1)!=null?stack1.length:stack1,{name:"ifany",hash:{},fn:this.program(27,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="buttons">\n\t<div class="text-center">\n\t\t<button class="btn btn-default btn-sm btnCancel w150">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancel",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t\t<button class="btn btn-primary btn-sm btnConfirm w150">\n\t\t\t<i class="glyphicon glyphicon-ok"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Commit Changes",{name:"s",hash:{},data:data}))+'\n\t\t</button>\n\t</div>\n\t<div class="clearfix"></div>\n</div>'},useData:true});Handlebars.registerPartial("admin/security/dlg/ConfirmSecurityChanges",t);return t});define("admin/security/dlg/ConfirmSecurityChanges",["jquery","underscore","appogee","hbs!admin/security/dlg/ConfirmSecurityChanges"],function($,_,appogee,tmpl){"use strict";var $dlg=null;var Dialog=function(users){if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.users=users;this.onConfirmHandlers=[]};Dialog.prototype.onConfirm=function(handler){this.onConfirmHandlers.push(handler)};Dialog.prototype.generateSummary=function(){var summary={loginBoth:[],loginHr:[],loginLeave:[],disableLogin:[],disableLoginHr:[],disableLoginLeave:[],grantHr:[],grantAdu:[],grantAdmin:[],removeHr:[],removeAdu:[],removeAdmin:[]};this.users.forEach(function(user){if(!user._loginLeave&&!user._loginHr&&user.loginLeave&&user.loginHr){summary.loginBoth.push(user)}else if(!user._loginHr&&user.loginHr){summary.loginHr.push(user)}else if(!user._loginLeave&&user.loginLeave){summary.loginLeave.push(user)}if((user._loginLeave||user._loginHr)&&!user.loginLeave&&!user.loginHr){summary.disableLogin.push(user)}else if(user._loginLeave&&!user.loginLeave){summary.disableLoginLeave.push(user)}else if(user._loginHr&&!user.loginHr){summary.disableLoginHr.push(user)}if(!user._roleHr&&user.roleHr){summary.grantHr.push(user)}if(!user._roleAdu&&user.roleAdu){summary.grantAdu.push(user)}if(!user._roleAdmin&&user.roleAdmin){summary.grantAdmin.push(user)}if(user._roleHr&&!user.roleHr){summary.removeHr.push(user)}if(user._roleAdu&&!user.roleAdu){summary.removeAdu.push(user)}if(user._roleAdmin&&!user.roleAdmin){summary.removeAdmin.push(user)}});return summary};Dialog.prototype.render=function(){var _this158=this;var data={summary:this.generateSummary()};$dlg.html(tmpl(data));$dlg.find(".btnConfirm").click(function(){_this158.onConfirmHandlers.forEach(function(h){return h()});_this158.close()});$dlg.find(".btnCancel").click(function(){_this158.close()})};Dialog.prototype.show=function(){this.dlg=new appogee.Dialog($dlg,{dialogClass:"dlg-confirm-security"});this.dlg.clearButtons();this.render();this.dlg.show()};Dialog.prototype.close=function(){this.dlg.hide()};return Dialog});define("admin/security/security",["jquery","appogee","admin/org/views/OrgSelector","admin/security/views/SecurityView","admin/security/dlg/ConfirmSecurityChanges"],function($,appogee,OrgSelector,SecurityView,ConfirmSecurityChangesDialog){"use strict";var S,R={alertSaveSecuritySuccessTitle:"Changes Saved Successfully",alertSaveSecuritySuccessMsg:"The changes were saved successfully"};return{defaultStrings:R,views:{},contextHelp:true,getLoadUrls:function(){var aduKey=this.currentUser.getActiveAduKey();var teamsUrl="/teams?aduKey={0}".format(aduKey);return{api:[teamsUrl]}},initialize:function(){var _this159=this;S=this.S;this.views.security=new SecurityView($("#viewContainer"));this.views.security.render();$("#ddlTeam").change(function(){_this159.fetchEmployees()});$("#btnSave").attr("disabled",true);this.views.security.onDirtyChange(function(dirty){$("#btnSave").attr("disabled",!dirty)});$("#btnSave").click(function(){_this159.save()})},onLoad:function(teams){var _this160=this;this.teams=teams.items;this.views.orgSelector=new OrgSelector($("#orgContainer"),{teams:this.teams,showTeamAll:true});this.views.orgSelector.render();this.views.orgSelector.onTeamChange(function(){_this160.fetchEmployees()});this.fetchEmployees()},fetchEmployees:function(){var _this161=this;var adu=this.views.orgSelector.getSelectedAdu();var team=this.views.orgSelector.getSelectedTeam();var url="/employees?projection=security&limit=1000";if(team){url+="&teamKey={0}".format(team.key)}else{url+="&aduKey={0}".format(adu.key)}this.views.orgSelector.disableControls();this.views.security.setLoading(true);appogee.api.get(url,function(response){_this161.views.orgSelector.enableControls();_this161.views.security.setLoading(false);_this161.employees=response.items;_this161.views.security.setEmployees(_this161.employees);_this161.views.security.render()})},save:function(){var _this162=this;var employees=this.views.security.getDirtyEmployees();var configmDlg=new ConfirmSecurityChangesDialog(employees);configmDlg.show();configmDlg.onConfirm(function(){var url="/admin/security/xhr/save";employees=employees.map(function(employee){var logins=[];if(employee.loginLeave){logins.push("leave")}if(employee.loginHr){logins.push("hr")}var roles=[];if(employee.roleHr){roles.push("hr")}if(employee.roleAdu){roles.push("adu")}if(employee.roleAdmin){roles.push("admin")}return{key:employee.key,logins:logins,roles:roles}});var data={employees:employees,sendWelcome:$("#chkSendWelcome").is(":checked")};appogee.xhr.post(url,data,function(){_this162.fetchEmployees();appogee.alert(S.alertSaveSecuritySuccessTitle,S.alertSaveSecuritySuccessMsg)},{artificialDelay:true})})}}});if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function($){"use strict";var version=$.fn.jquery.split(" ")[0].split(".");if(version[0]<2&&version[1]<9||version[0]==1&&version[1]==9&&version[2]<1){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}}(jQuery);+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap");var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}return false}$.fn.emulateTransitionEnd=function(duration){var called=false;var $el=this;$(this).one("bsTransitionEnd",function(){called=true});var callback=function(){if(!called)$($el).trigger($.support.transition.end)};setTimeout(callback,duration);return this};$(function(){$.support.transition=transitionEnd();if(!$.support.transition)return;$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function($){"use strict";var dismiss='[data-dismiss="alert"]';var Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.5";Alert.TRANSITION_DURATION=150;Alert.prototype.close=function(e){var $this=$(this);var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=$(selector);if(e)e.preventDefault();if(!$parent.length){$parent=$this.closest(".alert")}$parent.trigger(e=$.Event("close.bs.alert"));if(e.isDefaultPrevented())return;$parent.removeClass("in");function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement()};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.alert");if(!data)$this.data("bs.alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.alert;$.fn.alert=Plugin;$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this};$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery);+function($){"use strict";var Button=function(element,options){this.$element=$(element);this.options=$.extend({},Button.DEFAULTS,options);this.isLoading=false};Button.VERSION="3.3.5";Button.DEFAULTS={loadingText:"loading..."};Button.prototype.setState=function(state){var d="disabled";var $el=this.$element;var val=$el.is("input")?"val":"html";var data=$el.data();state+="Text";if(data.resetText==null)$el.data("resetText",$el[val]());setTimeout($.proxy(function(){$el[val](data[state]==null?this.options[state]:data[state]);if(state=="loadingText"){this.isLoading=true;$el.addClass(d).attr(d,d)}else if(this.isLoading){this.isLoading=false;$el.removeClass(d).removeAttr(d)}},this),0)};Button.prototype.toggle=function(){var changed=true;var $parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");if($input.prop("type")=="radio"){if($input.prop("checked"))changed=false;$parent.find(".active").removeClass("active");this.$element.addClass("active")}else if($input.prop("type")=="checkbox"){if($input.prop("checked")!==this.$element.hasClass("active"))changed=false;this.$element.toggleClass("active")}$input.prop("checked",this.$element.hasClass("active"));if(changed)$input.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.button");var options=typeof option=="object"&&option;if(!data)$this.data("bs.button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})}var old=$.fn.button;$.fn.button=Plugin;$.fn.button.Constructor=Button;$.fn.button.noConflict=function(){$.fn.button=old;return this};$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var $btn=$(e.target);if(!$btn.hasClass("btn"))$btn=$btn.closest(".btn");Plugin.call($btn,"toggle");if(!($(e.target).is('input[type="radio"]')||$(e.target).is('input[type="checkbox"]')))e.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){$(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery);+function($){"use strict";var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",$.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",$.proxy(this.pause,this)).on("mouseleave.bs.carousel",$.proxy(this.cycle,this))};Carousel.VERSION="3.3.5";Carousel.TRANSITION_DURATION=600;Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:true,keyboard:true};Carousel.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()};Carousel.prototype.cycle=function(e){e||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this};Carousel.prototype.getItemIndex=function(item){this.$items=item.parent().children(".item");return this.$items.index(item||this.$active)};Carousel.prototype.getItemForDirection=function(direction,active){var activeIndex=this.getItemIndex(active);var willWrap=direction=="prev"&&activeIndex===0||direction=="next"&&activeIndex==this.$items.length-1;if(willWrap&&!this.options.wrap)return active;var delta=direction=="prev"?-1:1;var itemIndex=(activeIndex+delta)%this.$items.length;return this.$items.eq(itemIndex)};Carousel.prototype.to=function(pos){var that=this;var activeIndex=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(pos>this.$items.length-1||pos<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){that.to(pos)});if(activeIndex==pos)return this.pause().cycle();return this.slide(pos>activeIndex?"next":"prev",this.$items.eq(pos))};Carousel.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find(".next, .prev").length&&$.support.transition){this.$element.trigger($.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};Carousel.prototype.next=function(){if(this.sliding)return;return this.slide("next")};Carousel.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active");var $next=next||this.getItemForDirection(type,$active);var isCycling=this.interval;var direction=type=="next"?"left":"right";var that=this;if($next.hasClass("active"))return this.sliding=false;var relatedTarget=$next[0];var slideEvent=$.Event("slide.bs.carousel",{relatedTarget:relatedTarget,direction:direction});this.$element.trigger(slideEvent);if(slideEvent.isDefaultPrevented())return;this.sliding=true;isCycling&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var $nextIndicator=$(this.$indicators.children()[this.getItemIndex($next)]);$nextIndicator&&$nextIndicator.addClass("active")}var slidEvent=$.Event("slid.bs.carousel",{relatedTarget:relatedTarget,direction:direction});if($.support.transition&&this.$element.hasClass("slide")){$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);$active.one("bsTransitionEnd",function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger(slidEvent)},0)}).emulateTransitionEnd(Carousel.TRANSITION_DURATION)}else{$active.removeClass("active");$next.addClass("active");this.sliding=false;this.$element.trigger(slidEvent)}isCycling&&this.cycle();return this};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.carousel");var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=="object"&&option);var action=typeof option=="string"?option:options.slide;if(!data)$this.data("bs.carousel",data=new Carousel(this,options));if(typeof option=="number")data.to(option);else if(action)data[action]();else if(options.interval)data.pause().cycle()})}var old=$.fn.carousel;$.fn.carousel=Plugin;$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this};var clickHandler=function(e){var href;var $this=$(this);var $target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));if(!$target.hasClass("carousel"))return;var options=$.extend({},$target.data(),$this.data());var slideIndex=$this.attr("data-slide-to");if(slideIndex)options.interval=false;Plugin.call($target,options);if(slideIndex){$target.data("bs.carousel").to(slideIndex)}e.preventDefault()};$(document).on("click.bs.carousel.data-api","[data-slide]",clickHandler).on("click.bs.carousel.data-api","[data-slide-to]",clickHandler);$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);Plugin.call($carousel,$carousel.data())})})}(jQuery);+function($){"use strict";var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},Collapse.DEFAULTS,options);this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],'+'[data-toggle="collapse"][data-target="#'+element.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};Collapse.VERSION="3.3.5";Collapse.TRANSITION_DURATION=350;Collapse.DEFAULTS={toggle:true};Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"};Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var activesData;var actives=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(actives&&actives.length){activesData=actives.data("bs.collapse");if(activesData&&activesData.transitioning)return}var startEvent=$.Event("show.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;if(actives&&actives.length){Plugin.call(actives,"hide");activesData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])};Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var startEvent=$.Event("hide.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var complete=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!$.support.transition)return complete.call(this);this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)};Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()};Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen);$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};function getTargetFromTrigger($trigger){var href;var target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.collapse");var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data&&options.toggle&&/show|hide/.test(option))options.toggle=false;if(!data)$this.data("bs.collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.collapse;$.fn.collapse=Plugin;$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var $this=$(this);if(!$this.attr("data-target"))e.preventDefault();var $target=getTargetFromTrigger($this);var data=$target.data("bs.collapse");var option=data?"toggle":$this.data();Plugin.call($target,option)})}(jQuery);+function($){"use strict";var backdrop=".dropdown-backdrop";var toggle='[data-toggle="dropdown"]';var Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.5";function getParent($this){var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){if(e&&e.which===3)return;$(backdrop).remove();$(toggle).each(function(){var $this=$(this);var $parent=getParent($this);var relatedTarget={relatedTarget:this};if(!$parent.hasClass("open"))return;if(e&&e.type=="click"&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target))return;$parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.attr("aria-expanded","false");$parent.removeClass("open").trigger("hidden.bs.dropdown",relatedTarget)})}Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length){$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus)}var relatedTarget={relatedTarget:this};$parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true");$parent.toggleClass("open").trigger("shown.bs.dropdown",relatedTarget)}return false};Dropdown.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return;var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");if(!isActive&&e.which!=27||isActive&&e.which==27){if(e.which==27)$parent.find(toggle).trigger("focus");return $this.trigger("click")}var desc=" li:not(.disabled):visible a";var $items=$parent.find(".dropdown-menu"+desc);if(!$items.length)return;var index=$items.index(e.target);if(e.which==38&&index>0)index--;if(e.which==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).trigger("focus")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.dropdown");if(!data)$this.data("bs.dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.dropdown;$.fn.dropdown=Plugin;$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown)}(jQuery);+function($){"use strict";var Modal=function(element,options){this.options=options;this.$body=$(document.body);this.$element=$(element);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};Modal.VERSION="3.3.5";Modal.TRANSITION_DURATION=300;Modal.BACKDROP_TRANSITION_DURATION=150;Modal.DEFAULTS={backdrop:true,keyboard:true,show:true};Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)};Modal.prototype.show=function(_relatedTarget){var that=this;var e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){that.$element.one("mouseup.dismiss.bs.modal",function(e){if($(e.target).is(that.$element))that.ignoreBackdropClick=true})});this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length){that.$element.appendTo(that.$body)}that.$element.show().scrollTop(0);that.adjustDialog();if(transition){that.$element[0].offsetWidth}that.$element.addClass("in");that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$dialog.one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)})};Modal.prototype.hide=function(e){if(e)e.preventDefault();e=$.Event("hide.bs.modal");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();$(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal()};Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};Modal.prototype.resize=function(){if(this.isShown){$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this))}else{$(window).off("resize.bs.modal")}};Modal.prototype.hideModal=function(){var that=this;this.$element.hide();this.backdrop(function(){that.$body.removeClass("modal-open");that.resetAdjustments();that.resetScrollbar();that.$element.trigger("hidden.bs.modal")})};Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};Modal.prototype.backdrop=function(callback){var that=this;var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$(document.createElement("div")).addClass("modal-backdrop "+animate).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop();callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else if(callback){callback()}};Modal.prototype.handleUpdate=function(){this.adjustDialog()};Modal.prototype.adjustDialog=function(){
var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:""})};Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth;this.scrollbarWidth=this.measureScrollbar()};Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",bodyPad+this.scrollbarWidth)};Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure";this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;this.$body[0].removeChild(scrollDiv);return scrollbarWidth};function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this);var data=$this.data("bs.modal");var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data)$this.data("bs.modal",data=new Modal(this,options));if(typeof option=="string")data[option](_relatedTarget);else if(options.show)data.show(_relatedTarget)})}var old=$.fn.modal;$.fn.modal=Plugin;$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this);var href=$this.attr("href");var $target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,""));var option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());if($this.is("a"))e.preventDefault();$target.one("show.bs.modal",function(showEvent){if(showEvent.isDefaultPrevented())return;$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})});Plugin.call($target,option,this)})}(jQuery);+function($){"use strict";var Tooltip=function(element,options){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",element,options)};Tooltip.VERSION="3.3.5";Tooltip.TRANSITION_DURATION=150;Tooltip.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};Tooltip.prototype.init=function(type,element,options){this.enabled=true;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.$viewport=this.options.viewport&&$($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var triggers=this.options.trigger.split(" ");for(var i=triggers.length;i--;){var trigger=triggers[i];if(trigger=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!="manual"){var eventIn=trigger=="hover"?"mouseenter":"focusin";var eventOut=trigger=="hover"?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS};Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options);if(options.delay&&typeof options.delay=="number"){options.delay={show:options.delay,hide:options.delay}}return options};Tooltip.prototype.getDelegateOptions=function(){var options={};var defaults=this.getDefaults();this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value});return options};Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}if(obj instanceof $.Event){self.inState[obj.type=="focusin"?"focus":"hover"]=true}if(self.tip().hasClass("in")||self.hoverState=="in"){self.hoverState="in";return}clearTimeout(self.timeout);self.hoverState="in";if(!self.options.delay||!self.options.delay.show)return self.show();self.timeout=setTimeout(function(){if(self.hoverState=="in")self.show()},self.options.delay.show)};Tooltip.prototype.isInStateTrue=function(){for(var key in this.inState){if(this.inState[key])return true}return false};Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}if(obj instanceof $.Event){self.inState[obj.type=="focusout"?"focus":"hover"]=false}if(self.isInStateTrue())return;clearTimeout(self.timeout);self.hoverState="out";if(!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)};Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this;var $tip=this.tip();var tipId=this.getUID(this.type);this.setContent();$tip.attr("id",tipId);this.$element.attr("aria-describedby",tipId);if(this.options.animation)$tip.addClass("fade");var placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var autoToken=/\s?auto?\s?/i;var autoPlace=autoToken.test(placement);if(autoPlace)placement=placement.replace(autoToken,"")||"top";$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement;var viewportDim=this.getPosition(this.$viewport);placement=placement=="bottom"&&pos.bottom+actualHeight>viewportDim.bottom?"top":placement=="top"&&pos.top-actualHeight<viewportDim.top?"bottom":placement=="right"&&pos.right+actualWidth>viewportDim.width?"left":placement=="left"&&pos.left-actualWidth<viewportDim.left?"right":placement;$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type);that.hoverState=null;if(prevHoverState=="out")that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}};Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip();var width=$tip[0].offsetWidth;var height=$tip[0].offsetHeight;var marginTop=parseInt($tip.css("margin-top"),10);var marginLeft=parseInt($tip.css("margin-left"),10);if(isNaN(marginTop))marginTop=0;if(isNaN(marginLeft))marginLeft=0;offset.top+=marginTop;offset.left+=marginLeft;$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0);$tip.addClass("in");var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight}var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);if(delta.left)offset.left+=delta.left;else offset.top+=delta.top;var isVertical=/top|bottom/.test(placement);var arrowDelta=isVertical?delta.left*2-width+actualWidth:delta.top*2-height+actualHeight;var arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset);this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)};Tooltip.prototype.replaceArrow=function(delta,dimension,isVertical){this.arrow().css(isVertical?"left":"top",50*(1-delta/dimension)+"%").css(isVertical?"top":"left","")};Tooltip.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")};Tooltip.prototype.hide=function(callback){var that=this;var $tip=$(this.$tip);var e=$.Event("hide.bs."+this.type);function complete(){if(that.hoverState!="in")$tip.detach();that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type);callback&&callback()}this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip.removeClass("in");$.support.transition&&$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete();this.hoverState=null;return this};Tooltip.prototype.fixTitle=function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string"){$e.attr("data-original-title",$e.attr("title")||"").attr("title","")}};Tooltip.prototype.hasContent=function(){return this.getTitle()};Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0];var isBody=el.tagName=="BODY";var elRect=el.getBoundingClientRect();if(elRect.width==null){elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top})}var elOffset=isBody?{top:0,left:0}:$element.offset();var scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()};var outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)};Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=="bottom"?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=="top"?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=="left"?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}};Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0;var viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll;var bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;if(topEdgeOffset<viewportDimensions.top){delta.top=viewportDimensions.top-topEdgeOffset}else if(bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height){delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset}}else{var leftEdgeOffset=pos.left-viewportPadding;var rightEdgeOffset=pos.left+viewportPadding+actualWidth;if(leftEdgeOffset<viewportDimensions.left){delta.left=viewportDimensions.left-leftEdgeOffset}else if(rightEdgeOffset>viewportDimensions.right){delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset}}return delta};Tooltip.prototype.getTitle=function(){var title;var $e=this.$element;var o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title};Tooltip.prototype.getUID=function(prefix){do{prefix+=~~(Math.random()*1e6)}while(document.getElementById(prefix));return prefix};Tooltip.prototype.tip=function(){if(!this.$tip){this.$tip=$(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};Tooltip.prototype.enable=function(){this.enabled=true};Tooltip.prototype.disable=function(){this.enabled=false};Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled};Tooltip.prototype.toggle=function(e){var self=this;if(e){self=$(e.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(e.currentTarget,this.getDelegateOptions());$(e.currentTarget).data("bs."+this.type,self)}}if(e){self.inState.click=!self.inState.click;if(self.isInStateTrue())self.enter(self);else self.leave(self)}else{self.tip().hasClass("in")?self.leave(self):self.enter(self)}};Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout);this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type);if(that.$tip){that.$tip.detach()}that.$tip=null;that.$arrow=null;that.$viewport=null})};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tooltip");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.tooltip;$.fn.tooltip=Plugin;$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(jQuery);+function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.VERSION="3.3.5";Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype);Popover.prototype.constructor=Popover;Popover.prototype.getDefaults=function(){return Popover.DEFAULTS};Popover.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();var content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content").children().detach().end()[this.options.html?typeof content=="string"?"html":"append":"text"](content);$tip.removeClass("fade top bottom left right in");if(!$tip.find(".popover-title").html())$tip.find(".popover-title").hide()};Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()};Popover.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content)};Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.popover");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.popover;$.fn.popover=Plugin;$.fn.popover.Constructor=Popover;$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(jQuery);+function($){"use strict";function ScrollSpy(element,options){this.$body=$(document.body);this.$scrollElement=$(element).is(document.body)?$(window):$(element);this.options=$.extend({},ScrollSpy.DEFAULTS,options);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",$.proxy(this.process,this));this.refresh();this.process()}ScrollSpy.VERSION="3.3.5";ScrollSpy.DEFAULTS={offset:10};ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};ScrollSpy.prototype.refresh=function(){var that=this;var offsetMethod="offset";var offsetBase=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!$.isWindow(this.$scrollElement[0])){offsetMethod="position";offsetBase=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var $el=$(this);var href=$el.data("target")||$el.attr("href");var $href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+offsetBase,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){that.offsets.push(this[0]);that.targets.push(this[1])})};ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset;var scrollHeight=this.getScrollHeight();var maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height();var offsets=this.offsets;var targets=this.targets;var activeTarget=this.activeTarget;var i;if(this.scrollHeight!=scrollHeight){this.refresh()}if(scrollTop>=maxScroll){return activeTarget!=(i=targets[targets.length-1])&&this.activate(i)}if(activeTarget&&scrollTop<offsets[0]){this.activeTarget=null;return this.clear()}for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(offsets[i+1]===undefined||scrollTop<offsets[i+1])&&this.activate(targets[i])}};ScrollSpy.prototype.activate=function(target){this.activeTarget=target;this.clear();var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';var active=$(selector).parents("li").addClass("active");if(active.parent(".dropdown-menu").length){active=active.closest("li.dropdown").addClass("active")}active.trigger("activate.bs.scrollspy")};ScrollSpy.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.scrollspy");var options=typeof option=="object"&&option;if(!data)$this.data("bs.scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.scrollspy;$.fn.scrollspy=Plugin;$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this};$(window).on("load.bs.scrollspy.data-api",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);Plugin.call($spy,$spy.data())})})}(jQuery);+function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.VERSION="3.3.5";Tab.TRANSITION_DURATION=150;Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest("ul:not(.dropdown-menu)");var selector=$this.data("target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;var $previous=$ul.find(".active:last a");var hideEvent=$.Event("hide.bs.tab",{relatedTarget:$this[0]});var showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});$previous.trigger(hideEvent);$this.trigger(showEvent);if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return;var $target=$(selector);this.activate($this.closest("li"),$ul);this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]});$this.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})};Tab.prototype.activate=function(element,container,callback){var $active=container.find("> .active");var transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(transition){element[0].offsetWidth;element.addClass("in")}else{element.removeClass("fade")}if(element.parent(".dropdown-menu").length){element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}callback&&callback()}$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next();$active.removeClass("in")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tab");if(!data)$this.data("bs.tab",data=new Tab(this));if(typeof option=="string")data[option]()})}var old=$.fn.tab;$.fn.tab=Plugin;$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this};var clickHandler=function(e){e.preventDefault();Plugin.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',clickHandler).on("click.bs.tab.data-api",'[data-toggle="pill"]',clickHandler)}(jQuery);+function($){"use strict";var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options);this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this));this.$element=$(element);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};Affix.VERSION="3.3.5";Affix.RESET="affix affix-top affix-bottom";Affix.DEFAULTS={offset:0,target:window};Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop();var position=this.$element.offset();var targetHeight=this.$target.height();if(offsetTop!=null&&this.affixed=="top")return scrollTop<offsetTop?"top":false;if(this.affixed=="bottom"){if(offsetTop!=null)return scrollTop+this.unpin<=position.top?false:"bottom";return scrollTop+targetHeight<=scrollHeight-offsetBottom?false:"bottom"}var initializing=this.affixed==null;var colliderTop=initializing?scrollTop:position.top;var colliderHeight=initializing?targetHeight:height;if(offsetTop!=null&&scrollTop<=offsetTop)return"top";if(offsetBottom!=null&&colliderTop+colliderHeight>=scrollHeight-offsetBottom)return"bottom";return false};Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");var scrollTop=this.$target.scrollTop();var position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop};Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var height=this.$element.height();var offset=this.options.offset;var offsetTop=offset.top;var offsetBottom=offset.bottom;var scrollHeight=Math.max($(document).height(),$(document.body).height());if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top(this.$element);if(typeof offsetBottom=="function")offsetBottom=offset.bottom(this.$element);var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom);if(this.affixed!=affix){if(this.unpin!=null)this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:"");var e=$.Event(affixType+".bs.affix");this.$element.trigger(e);if(e.isDefaultPrevented())return;this.affixed=affix;this.unpin=affix=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace("affix","affixed")+".bs.affix")}if(affix=="bottom"){this.$element.offset({top:scrollHeight-height-offsetBottom})}};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.affix");var options=typeof option=="object"&&option;if(!data)$this.data("bs.affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.affix;$.fn.affix=Plugin;$.fn.affix.Constructor=Affix;$.fn.affix.noConflict=function(){$.fn.affix=old;return this};$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this);var data=$spy.data();data.offset=data.offset||{};if(data.offsetBottom!=null)data.offset.bottom=data.offsetBottom;if(data.offsetTop!=null)data.offset.top=data.offsetTop;Plugin.call($spy,data)})})}(jQuery);define("bootstrap",["jquery"],function(){});define("admin/leave/leave_profiles",["jquery","bootstrap","appogee","admin/org/views/OrgSelector"],function($,bootstrap,appogee,OrgSelector){"use strict";var COLUMN_CONFIG_KEY="epck";var COLUMNS=["sick","custom1","custom2"];var DEFAULT_COLUMNS=[0,0,0];var S,R={colName:"Name",colLeaveEntitlement:"Leave Entitlement",colSickEntitlement:"Sick Entitlement",colCustom1Entitlement:"Custom 1 Entitlement",colCustom2Entitlement:"Custom 2 Entitlement",colHoursInDay:"Hours in Day",annualSummary:"{days} days / {hours} hours"};return{defaultStrings:R,initialize:function(){S=this.S;this.initView();this.initOrgSelector()},initOrgSelector:function(){this.orgSelector=new OrgSelector($("#orgSelector"),{showTeams:false,view:this.view});this.orgSelector.render()},initView:function(){this.view=new appogee.View($("#viewContainer"),"leave-profiles",{showSearch:false});this.view.addDefaultKeyFilter("adu_key",this.currentUser.getActiveAduKey());this.view.initColumnConfig(COLUMN_CONFIG_KEY,COLUMNS,DEFAULT_COLUMNS,$("#ddlColumns"));this.view.addColumn({type:"link",label:S.colName,field:"[name]",link:"/admin/leave-profile?key=[key]",width:300});this.view.addColumn({type:"custom",label:S.colLeaveEntitlement,render:function(emp){var html="";if(emp.entitlements&&emp.entitlements.length>0){var e=emp.entitlements[0].leave;if(e.type!="accrual"){var days=appogee.util.round(e.hours/emp.hoursInDay);html+="<div>"+S.annualSummary.format({days:appogee.util.round(days,2),hours:appogee.util.round(e.hours)})+"</div>"}if(e.type!="annual"){html+="<div>{0}</div>".format(e.accrual.summary)}}return html}});this.view.addColumn({id:"sick",type:"custom",label:S.colSickEntitlement,render:function(emp){var html="";if(emp.entitlements&&emp.entitlements.length>0&&emp.entitlements[0].sick){var e=emp.entitlements[0].sick;if(e.type!="accrual"){var days=appogee.util.round(e.hours/emp.hoursInDay);html+="<div>"+S.annualSummary.format({days:days,hours:e.hours})+"</div>"}if(e.type!="annual"){html+="<div>{0}</div>".format(e.accrual.summary)}}return html}});this.view.addColumn({id:"custom1",type:"custom",label:S.colCustom1Entitlement,render:function(emp){var html="";if(emp.entitlements&&emp.entitlements.length>0&&emp.entitlements[0].custom1){var e=emp.entitlements[0].custom1;if(e.type!="accrual"){var days=appogee.util.round(e.hours/emp.hoursInDay);html+="<div>"+S.annualSummary.format({days:days,hours:e.hours})+"</div>"}if(e.type!="annual"){html+="<div>{0}</div>".format(e.accrual.summary)}}return html}});this.view.addColumn({id:"custom2",type:"custom",label:S.colCustom2Entitlement,render:function(emp){var html="";if(emp.entitlements&&emp.entitlements.length>0&&emp.entitlements[0].custom2){var e=emp.entitlements[0].custom2;if(e.type!="accrual"){var days=appogee.util.round(e.hours/emp.hoursInDay);html+="<div>"+S.annualSummary.format({days:days,hours:e.hours})+"</div>"}if(e.type!="annual"){html+="<div>{0}</div>".format(e.accrual.summary)}}return html}});this.view.addColumn({type:"text",label:S.colHoursInDay,field:"[hoursInDay]"});this.view.fetch()}}});define("hbs!admin/dialogs/tmpl/RotaQuickFill",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){return"<h4>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Working Rota Quick Fill",{name:"s",hash:{},data:data}))+"</h4>\n\n<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"To add the same hours on multiple days you can use this quick fill dialog to complete the form quickly.",{name:"s",hash:{},data:data}))+'</p>\n\n<form class="form-horizontal">\n\n<div class="form-group">\n\t<label class="control-label col-custom col-1">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Morning Working Hours",{name:"s",hash:{},data:data}))+'</label>\n\t<div class="col-custom col-2">\n\t\t<input type="text" class="form-control input-sm time" id="txtQuickFillMorningStart" value="09:00" />\n\t</div>\n\t<div class="col-custom col-3">\n\t\t<input type="text" class="form-control input-sm time" id="txtQuickFillMorningEnd" value="12:45" />\n\t</div>\n\t<div class="col-custom col-4">\n\t\t<p class="form-control-static" id="quickFillMorningHours"></p>\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label class="control-label col-custom col-1">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Afternoon Working Hours",{name:"s",hash:{},data:data}))+'</label>\n\t<div class="col-custom col-2">\n\t\t<input type="text" class="form-control input-sm time" id="txtQuickFillAfternoonStart" value="13:45" />\n\t</div>\n\t<div class="col-custom col-3">\n\t\t<input type="text" class="form-control input-sm time" id="txtQuickFillAfternoonEnd" value="17:30" />\n\t</div>\n\t<div class="col-custom col-4">\n\t\t<p class="form-control-static" id="quickFillAfternoonHours"></p>\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label class="control-label col-custom col-1">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Working Days",{name:"s",hash:{},data:data}))+'</label>\n\t<div class="col-sm-6" style="width: 290px;">\n\t\t<div class="checkbox">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" id="chkQuickFillMon" checked="checked" />\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Monday",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t</div>\n\t\t<div class="checkbox">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" id="chkQuickFillTue" checked="checked" />\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Tuesday",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t</div>\n\t\t<div class="checkbox">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" id="chkQuickFillWed" checked="checked" />\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Wednesday",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t</div>\n\t\t<div class="checkbox">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" id="chkQuickFillThu" checked="checked" />\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Thursday",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t</div>\n\t\t<div class="checkbox">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" id="chkQuickFillFri" checked="checked" />\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Friday",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t</div>\n\t\t<div class="checkbox">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" id="chkQuickFillSat" />\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Saturday",{name:"s",hash:{},data:data
}))+'\n\t\t\t</label>\n\t\t</div>\n\t\t<div class="checkbox">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" id="chkQuickFillSun" />\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sunday",{name:"s",hash:{},data:data}))+"\n\t\t\t</label>\n\t\t</div>\n\t</div>\n</div>\n\n</form>"},useData:true});Handlebars.registerPartial("admin/dialogs/tmpl/RotaQuickFill",t);return t});define("admin/dialogs/RotaQuickFill",["jquery","underscore","appogee","hbs!admin/dialogs/tmpl/RotaQuickFill","jquery.appogee.timePicker"],function($,_,appogee,tmpl){"use strict";var S,R={errorNegativeMorning:"Morning Working Hours cannot be negative!",errorNegativeAfternoon:"Afternoon Working Hours cannot be negative!",errorQuickFillNoHours:"The times you selected do not amount to any hours.",hours:"Hours"};var ONE_HOUR=1e3*60*60;var $dlg=null;var Dialog=function(){S=appogee.getStrings("RotaQuickFill",R);if($dlg===null){$dlg=$("<div />").addClass("dialog")}this.onSubmitHandler=null};Dialog.prototype.onSubmit=function(handler){this.onSubmitHandler=handler};Dialog.prototype.render=function(){$dlg.html(tmpl());this.setHours();var me=this;$dlg.find(".time").appogeeTimePicker({onChange:function(){me.setHours()}})};Dialog.prototype.getData=function(){var ms=$dlg.find("#txtQuickFillMorningStart").val();var me=$dlg.find("#txtQuickFillMorningEnd").val();var as=$dlg.find("#txtQuickFillAfternoonStart").val();var ae=$dlg.find("#txtQuickFillAfternoonEnd").val();var mh=this.calculateTime(ms,me);var ah=this.calculateTime(as,ae);var days=[$dlg.find("#chkQuickFillMon").prop("checked"),$dlg.find("#chkQuickFillTue").prop("checked"),$dlg.find("#chkQuickFillWed").prop("checked"),$dlg.find("#chkQuickFillThu").prop("checked"),$dlg.find("#chkQuickFillFri").prop("checked"),$dlg.find("#chkQuickFillSat").prop("checked"),$dlg.find("#chkQuickFillSun").prop("checked")];return{ms:ms,me:me,as:as,ae:ae,mh:mh,ah:ah,days:days}};Dialog.prototype.setHours=function(){var data=this.getData();$dlg.find("#quickFillMorningHours").html("{0} {1}".format(data.mh,S.hours)).toggleClass("text-danger",data.mh<0);$dlg.find("#quickFillAfternoonHours").html("{0} {1}".format(data.ah,S.hours)).toggleClass("text-danger",data.ah<0)};Dialog.prototype.calculateTime=function(s,e){s=new Date(2e3,1,1,s.split(":")[0],s.split(":")[1],0);e=new Date(2e3,1,1,e.split(":")[0],e.split(":")[1],0);var x=appogee.util.round((e.getTime()-s.getTime())/ONE_HOUR,2);return isNaN(x)?0:x};Dialog.prototype.show=function(){var me=this;this.dlg=new appogee.Dialog($dlg,{dialogClass:"dlg-rota-quick-fill",okCallback:function(){me.submit()}});this.render();this.dlg.show()};Dialog.prototype.submit=function(){var data=this.getData();if(data.mh<0){appogee.alert(S.errorNegativeMorning);return}else if(data.ah<0){appogee.alert(S.errorNegativeAfternoon);return}var anyDays=_.some(data.days,function(day){return day});if(!anyDays||data.mh===0&&data.ah===0){appogee.valert(S.errorQuickFillNoHours);return}if(this.onSubmitHandler){this.onSubmitHandler(data)}this.dlg.hide()};return Dialog});define("templates/helpers/ifmathlt",["hbs/handlebars"],function(Handlebars){Handlebars.registerHelper("ifmathlt",function(lvalue,operator,rvalue,value,options){if(arguments.length<4){options=rvalue;rvalue=operator;operator="+"}lvalue=parseFloat(lvalue);rvalue=parseFloat(rvalue);var val={"+":lvalue+rvalue,"-":lvalue-rvalue,"*":lvalue*rvalue,"/":lvalue/rvalue,"%":lvalue%rvalue}[operator];if(val<value)return options.fn(this);return options.inverse(this)})});define("hbs!admin/templates/leave/RotaTemplate",["hbs/handlebars","templates/helpers/s","templates/helpers/if_lt","templates/helpers/ifmathlt","templates/helpers/math","templates/helpers/round"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1,helper;return'\t<tr data-index="'+this.escapeExpression((helper=(helper=helpers.index||data&&data.index)!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"index",hash:{},data:data}):helper))+'">\n\t\t<td>'+this.escapeExpression((helper=(helper=helpers.weekday||(depth0!=null?depth0.weekday:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"weekday",hash:{},data:data}):helper))+'</td>\n\t\t\n\t\t<td><input type="text" class="form-control input-sm time ms" value="'+this.escapeExpression((helper=(helper=helpers.ms||(depth0!=null?depth0.ms:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"ms",hash:{},data:data}):helper))+'" /></td>\n\t\t<td><input type="text" class="form-control input-sm time me" value="'+this.escapeExpression((helper=(helper=helpers.me||(depth0!=null?depth0.me:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"me",hash:{},data:data}):helper))+'" /></td>\n\t\t<td><span class="mh '+((stack1=(helpers.if_lt||depth0&&depth0.if_lt||helpers.helperMissing).call(depth0,depth0!=null?depth0.mh:depth0,{name:"if_lt",hash:{compare:0},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">'+this.escapeExpression((helper=(helper=helpers.mh||(depth0!=null?depth0.mh:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"mh",hash:{},data:data}):helper))+'</span></td>\n\t\t\n\t\t<td><input type="text" class="form-control input-sm time as" value="'+this.escapeExpression((helper=(helper=helpers.as||(depth0!=null?depth0.as:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"as",hash:{},data:data}):helper))+'" /></td>\n\t\t<td><input type="text" class="form-control input-sm time ae" value="'+this.escapeExpression((helper=(helper=helpers.ae||(depth0!=null?depth0.ae:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"ae",hash:{},data:data}):helper))+'" /></td>\n\t\t<td><span class="ah '+((stack1=(helpers.if_lt||depth0&&depth0.if_lt||helpers.helperMissing).call(depth0,depth0!=null?depth0.ah:depth0,{name:"if_lt",hash:{compare:0},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">'+this.escapeExpression((helper=(helper=helpers.ah||(depth0!=null?depth0.ah:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"ah",hash:{},data:data}):helper))+'</span></td>\n\t\t\n\t\t<td><span class="hours '+((stack1=(helpers.ifmathlt||depth0&&depth0.ifmathlt||helpers.helperMissing).call(depth0,depth0!=null?depth0.mh:depth0,"+",depth0!=null?depth0.ah:depth0,0,{name:"ifmathlt",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">'+this.escapeExpression((helpers.math||depth0&&depth0.math||helpers.helperMissing).call(depth0,depth0!=null?depth0.mh:depth0,"+",depth0!=null?depth0.ah:depth0,{name:"math",hash:{},data:data}))+"</span></td>\n\t</tr>\n"},2:function(depth0,helpers,partials,data){return"text-danger"},4:function(depth0,helpers,partials,data){return'\t\t\t<div class="pull-left text-warning">\n\t\t\t\t<i class="glyphicon glyphicon-warning-sign"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Warning: Irregular Working Hours Detected",{name:"s",hash:{},data:data}))+"\n\t\t\t</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper;return'<div class="pulll-left">\n\t<button class="btn btn-primary btn-sm" id="btnQuickFill">\n\t\t<i class="fa fa-level-down"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Quick Fill",{name:"s",hash:{},data:data}))+'\n\t</button>\n</div>\n\n<div class="clearfix"></div>\n\n<div class="rota-view">\n\t<table class="table table-bordered table-shaded">\n\t<thead>\n\t<tr>\n\t\t<th rowspan="2" class="w100">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Day",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th colspan="3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Morning",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th colspan="3">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Afternoon",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th rowspan="2" class="w50">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+'</th>\n\t</tr>\n\t<tr>\n\t\t<th class="w100">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th class="w100">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"End",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th class="w50">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th class="w100">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Start",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th class="w100">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"End",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th class="w50">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"</th>\n\t</tr>\n\t</thead>\n\t<tbody>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.rota:depth0,{name:"each",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t</tbody>\n\t<tfoot>\n\t<tr>\n\t\t<td colspan="7" class="text-right">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Total Hours",{name:"s",hash:{},data:data}))+"</td>\n\t\t<th>"+this.escapeExpression((helper=(helper=helpers.totalHours||(depth0!=null?depth0.totalHours:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"totalHours",hash:{},data:data}):helper))+'</th>\n\t</tr>\n\t<tr>\n\t\t<td colspan="7">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isIrregular:depth0,{name:"if",hash:{},fn:this.program(4,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t<div class="pull-right">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Average Hours per Working Day",{name:"s",hash:{},data:data}))+"\n\t\t\t</div>\n\t\t</td>\n\t\t<th>"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.avHours:depth0,{name:"round",hash:{},data:data}))+"</th>\n\t</tr>\n\t</tfoot>\n\t</table>\n</div>"},useData:true});Handlebars.registerPartial("admin/templates/leave/RotaTemplate",t);return t});define("admin/views/leave/RotaView",["jquery","underscore","appogee","enums/Weekday","admin/dialogs/RotaQuickFill","hbs!admin/templates/leave/RotaTemplate","jquery.appogee.timePicker"],function($,_,appogee,Weekday,RotaQuickFill,tmpl){"use strict";var S,R={errorStartTimeBeforeEndTimeTitle:"Invalid Rota",errorStartTimeBeforeEndTimeMsg:"Please ensure all Start Times are before the End Times on the Working Rota tab.",errorMorningBeforeAfternoonTitle:"Invalid Rota",errorMorningBeforeAfternoonMsg:"Please ensure all Mornings End Times are before the Afternoon Start Times on the Working Rota tab."};var ONE_HOUR=1e3*60*60;var View=function($container,rota){S=appogee.getStrings("RotaView",R);this.$container=$container;this.rota=rota;this.onChangeHandler=null};View.prototype.onChange=function(handler){this.onChangeHandler=handler};View.prototype.getRota=function(){return this.rota};View.prototype.getHoursInDay=function(){return this.getAvHours()};View.prototype.getAvHours=function(){var hours=[];this.rota.forEach(function(day){var h=day.mh+day.ah;if(h>0){hours.push(h)}});if(hours.length===0){return 0}var av=hours.reduce(function(x,y){return x+y})/hours.length;av=appogee.util.round(av,2);return av};View.prototype.isIrregular=function(){var hours=[];this.rota.forEach(function(day){var h=day.mh+day.ah;if(h>0){hours.push(h)}});return _.uniq(hours).length>1};View.prototype.render=function(){var me=this;var totalHours=0;this.rota.forEach(function(x,i){x.weekday=Weekday.toString(i);totalHours+=x.mh+x.ah});var data={rota:this.rota,totalHours:totalHours,avHours:this.getAvHours(),isIrregular:this.isIrregular()};this.$container.html(tmpl(data));this.$container.find(".time").appogeeTimePicker({onChange:function(){me.updateFromUI();me.render();if(me.onChangeHandler){me.onChangeHandler()}}});this.$container.find("#btnQuickFill").click(function(){me.quickFill()})};View.prototype.quickFill=function(){var dlg=new RotaQuickFill;dlg.show();var me=this;dlg.onSubmit(function(data){data.days.forEach(function(day,i){if(day){me.rota[i].ms=data.ms;me.rota[i].me=data.me;me.rota[i].mh=data.mh;me.rota[i].as=data.as;me.rota[i].ae=data.ae;me.rota[i].ah=data.ah}else{me.rota[i].ms="00:00";me.rota[i].me="00:00";me.rota[i].mh=0;me.rota[i].as="00:00";me.rota[i].ae="00:00";me.rota[i].ah=0}});me.render();if(me.onChangeHandler){me.onChangeHandler()}})};View.prototype.updateFromUI=function(){var self=this;this.$container.find("tbody tr").each(function(i){var $tr=$(this);var ms=$tr.find(".ms").val();var me=$tr.find(".me").val();var mh=self.calculateTime(ms,me);var as=$tr.find(".as").val();var ae=$tr.find(".ae").val();var ah=self.calculateTime(as,ae);self.rota[i].ms=ms;self.rota[i].me=me;self.rota[i].mh=mh;self.rota[i].as=as;self.rota[i].ae=ae;self.rota[i].ah=ah})};View.prototype.calculateTime=function(s,e){s=new Date(2e3,1,1,s.split(":")[0],s.split(":")[1],0);e=new Date(2e3,1,1,e.split(":")[0],e.split(":")[1],0);var x=appogee.util.round((e.getTime()-s.getTime())/ONE_HOUR,2);return isNaN(x)?0:x};View.prototype.validate=function(){for(var i=0;i<this.rota.length;i++){if(this.rota[i].mh<0||this.rota[i].ah<0){appogee.valert(S.errorStartTimeBeforeEndTime);return false}var t=this.calculateTime(this.rota[i].me,this.rota[i].as);if(this.rota[i].ah>0&&t<0){appogee.valert(S.errorMorningBeforeAfternoon);return false}}return true};return View});define("hbs!admin/templates/leave/LengthOfService",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var helper;return'<div class="form-group" data-index="'+this.escapeExpression((helper=(helper=helpers.index||data&&data.index)!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"index",hash:{},data:data}):helper))+'" data-year="'+this.escapeExpression(this.lambda(depth0,depth0))+'">\n\t<div class="col-sm-2">\n\t\t<select class="form-control input-sm" data-index="'+this.escapeExpression((helper=(helper=helpers.index||data&&data.index)!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"index",hash:{},data:data}):helper))+'" data-year="'+this.escapeExpression(this.lambda(depth0,depth0))+'">\n\t\t\t<option>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"1 Year",{name:"s",hash:{},data:data}))+'</option>\n\t\t</select>\n\t</div>\n\t<div class="col-sm-2">\n\t\t<button class="btn btn-sm btn-default btn-delete">\n\t\t\t<i class="glyphicon glyphicon-remove"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Remove",{name:"s",hash:{},data:data}))+"\n\t\t</button>\n\t</div>\n</div>\n"},3:function(depth0,helpers,partials,data){return"\t\t\t<option>"+this.escapeExpression(this.lambda(depth0,depth0))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return((stack1=helpers.each.call(depth0,depth0!=null?depth0.years:depth0,{name:"each",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="form-group">\n\t<div class="col-sm-2">\n\t\t<select class="form-control input-sm" id="ddlLengthInServiceYear">\n\t\t\t<option>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.newYears:depth0,{name:"each",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</select>\n\t</div>\n</div>"},useData:true});Handlebars.registerPartial("admin/templates/leave/LengthOfService",t);return t});define("admin/views/leave/LengthOfService",["jquery","underscore","appogee","hbs!admin/templates/leave/LengthOfService"],function($,_,appogee,tmpl){"use strict";var S,R={confirmRemoveLosTitle:"Remove Length in Service Year?",confirmRemoveLosMsg1:"This will also remove all entitlement settings related to the {year} Length in Service Year",confirmRemoveLosMsg2:"Do you wish to continue?"};var View=function($container,entitlements){S=appogee.getStrings("LengthOfService",R);this.$container=$container;this.entitlements=entitlements;this.onChangeHandler=null;this.onDeleteHandler=null};View.prototype.onChange=function(handler){this.onChangeHandler=handler};View.prototype.onDelete=function(handler){this.onDeleteHandler=handler};View.prototype.render=function(){var me=this;var years=_.pluck(this.entitlements,"years");years=years.splice(1);var maxYear=years.length>0?_.max(years):0;var newYears=_.range(maxYear+1,101);var data={years:years,newYears:newYears};this.$container.html(tmpl(data));var lastYear=0;for(var i=0;i<years.length;i++){var year=years[i];var nextYear=101;if(i<years.length-1){nextYear=years[i+1]}var $ddl=this.$container.find('select[data-year="'+year+'"]');var optYears=_.range(lastYear+1,nextYear).map(function(y){return{key:y,value:y==1?"1 Year":"{0} Years".format(y)}});appogee.ui.populateDropdown($ddl,optYears,{default:year});lastYear=year}this.$container.find("select").change(function(){var index=$(this).data("index");if(index===undefined){var year=parseInt($(this).val());me.entitlements.push(me.createEntitlement(year))}else{index=parseInt(index);me.entitlements[index+1].years=parseInt($(this).val())}me.render();if(me.onChangeHandler){me.onChangeHandler()}});this.$container.find(".btn-delete").click(function(){var index=parseInt($(this).closest(".form-group").data("index"));var year=me.entitlements[index+1].years;appogee.confirm(S.get("confirmRemoveLos",{year:year}),function(){var deletedKey=me.entitlements[index].key;me.entitlements.splice(index+1,1);me.render();if(me.onDeleteHandler){me.onDeleteHandler(deletedKey,index)}})})};View.prototype.createEntitlement=function(years){var key=appogee.util.randomString(16);var keys=_.pluck(this.entitlements,"key");while(keys.indexOf(key)>-1){key=appogee.util.randomString(16)}var defaultEntitlement=this.entitlements[0];var lastEntitlement=this.entitlements[this.entitlements.length-1];return{key:key,years:years,leave:{type:defaultEntitlement.leave.type,hours:lastEntitlement.leave.hours,accrual:{hours:lastEntitlement.leave.accrual.hours,frequency:lastEntitlement.leave.accrual.frequency,day:lastEntitlement.leave.accrual.day,day2:lastEntitlement.leave.accrual.day2}},sick:{enabled:defaultEntitlement.sick.enabled,type:defaultEntitlement.sick.type,hours:lastEntitlement.sick.hours,accrual:{hours:lastEntitlement.sick.accrual.hours,frequency:lastEntitlement.sick.accrual.frequency,day:lastEntitlement.sick.accrual.day,day2:lastEntitlement.sick.accrual.day2}},custom1:{enabled:defaultEntitlement.custom1.enabled,type:defaultEntitlement.custom1.type,hours:lastEntitlement.custom1.hours,accrual:{hours:lastEntitlement.custom1.accrual.hours,frequency:lastEntitlement.custom1.accrual.frequency,day:lastEntitlement.custom1.accrual.day,day2:lastEntitlement.custom1.accrual.day2}},custom2:{enabled:defaultEntitlement.custom2.enabled,type:defaultEntitlement.custom2.type,hours:lastEntitlement.custom2.hours,accrual:{hours:lastEntitlement.custom2.accrual.hours,frequency:lastEntitlement.custom2.accrual.frequency,day:lastEntitlement.custom2.accrual.day,day2:lastEntitlement.custom2.accrual.day2}}}};return View});define("hbs!admin/templates/leave/EntitlementTemplate",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal","templates/helpers/round","templates/helpers/h2d"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.custom1LeaveType:depth0,{name:"if",hash:{},fn:this.program(2,data,0),inverse:this.noop,data:data}))!=null?stack1:""},2:function(depth0,helpers,partials,data){var stack1;return"\t\t\t - "+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.custom1LeaveType:depth0)!=null?stack1.name:stack1,depth0))+"\n"},4:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.alias:depth0,"custom2",{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:""},5:function(depth0,helpers,partials,data){var stack1;return((stack1=helpers["if"].call(depth0,depth0!=null?depth0.custom2LeaveType:depth0,{name:"if",hash:{},fn:this.program(6,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t"},6:function(depth0,helpers,partials,data){var stack1;return"\t\t\t - "+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.custom2LeaveType:depth0)!=null?stack1.name:stack1,depth0))+"\n"},8:function(depth0,helpers,partials,data){return'checked="checked"'},10:function(depth0,helpers,partials,data){var stack1;return'value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.accrual:stack1)!=null?stack1.hours:stack1,{name:"round",hash:{},data:data}))+'"'},12:function(depth0,helpers,partials,data){return'value="0.0"'},14:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="form-group">\n\t\t    <label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t        <i class="glyphicon glyphicon-question-sign context-help" data-context-help="carry_over_toil"></i>\n\t\t    </label>\n\t\t    <div class="controls col-sm-5 col-md-4">\n\t\t        <div class="checkbox">\n\t\t        \t<label>\n\t\t\t            <input type="checkbox" class="chkCarryOverToil" '+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.carryOverToil:stack1,{name:"if",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t            "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Include {toil_term} in annual carry over?",{name:"s",hash:{toil_term:depth0!=null?depth0.toilTerm:depth0},data:data}))+"\n\t\t\t        </label>\n\t\t        </div>\n\t\t    </div>\n\t\t</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper;return'<div class="entitlement-view-'+this.escapeExpression((helper=(helper=helpers.alias||(depth0!=null?depth0.alias:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"alias",hash:{},data:data}):helper))+'">\n\t<h4 class="entitlement">\n\t\t'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Settings",{name:"s",hash:{},data:data}))+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.alias:depth0,"custom1",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.program(4,data,0),data:data}))!=null?stack1:"")+'\t</h4>\n\t\n\t\n\t<div class="entitlement-settings">\n\t\t<div class="form-group">\n\t\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="annual_leave_type"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowance Type",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<div class="controls col-sm-5 col-md-4">\n\t\t\t\t<label class="radio-inline">\n\t\t\t\t\t<input type="radio" name="'+this.escapeExpression((helper=(helper=helpers.alias||(depth0!=null?depth0.alias:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"alias",hash:{},data:data}):helper))+'_allowance_type" value="annual" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.type:stack1,"annual",{name:"ifequal",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Annual",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline">\n\t\t\t\t\t<input type="radio" name="'+this.escapeExpression((helper=(helper=helpers.alias||(depth0!=null?depth0.alias:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"alias",hash:{},data:data}):helper))+'_allowance_type" value="accrual" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.type:stack1,"accrual",{name:"ifequal",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Accrual",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline">\n\t\t\t\t\t<input type="radio" name="'+this.escapeExpression((helper=(helper=helpers.alias||(depth0!=null?depth0.alias:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"alias",hash:{},data:data}):helper))+'_allowance_type" value="both" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.type:stack1,"both",{name:"ifequal",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Both",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="form-group annual-entitlement">\n\t\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="annual_entitlement"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Annual Entitlement",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<div class="controls col-sm-6 col-md-5 col-lg-4">\n\t\t\t\t<div class="form-inline">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<div class="col-xs-6 col-sm-6 col-lg-6">\n\t\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t\t<input type="text" class="form-control input-sm hd hour txtHours" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.hours:stack1,1,1,{name:"round",hash:{},data:data}))+'" />\n\t\t\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"hours",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-xs-6 col-sm-6 col-lg-6">\n\t\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t\t<input type="text" class="form-control input-sm hd day" value="'+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.hours:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+'" />\n\t\t\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"days",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="accrual-entitlement">\n\t\t\t<div class="form-group">\n\t\t\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="accrued_entitlement"></i>\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Accrued Entitlement",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t\t<div class="controls col-sm-6 col-md-5 col-lg-4">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<div class="col-xs-6 col-sm-6 col-lg-6">\n\t\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t\t<input type="text" class="form-control input-sm txtAccrualHours" '+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.accrual:stack1,{name:"if",hash:{},fn:this.program(10,data,0),inverse:this.program(12,data,0),data:data}))!=null?stack1:"")+' />\n\t\t\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"hours",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="accrual_schedule"></i>\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Accrual Schedule",{name:"s",hash:{},data:data}))+'\n\t\t\t\t</label>\n\t\t\t\t<div class="col-sm-8 col-md-9 col-lg-10 controls">\n\t\t\t\t\t<div class="form-inline">\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<div class="col-sm-12">\n\t\t\t\t\t\t\t\t<select class="form-control input-sm accrual ddlAccrualFrequency"></select>\n\t\t\t\t\t\t\t\t<span class="accrual accrualOn">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"on",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t\t\t\t<select class="form-control input-sm accrual ddlAccrualWeekday"></select>\n\t\t\t\t\t\t\t\t<select class="form-control input-sm accrual ddlAccrualDay"></select>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<span class="accrual accrualAnd">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"and",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t\t\t\t<select class="form-control input-sm accrual ddlAccrualDay2"></select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<hr />\n\t\t\n\t\t<div class="form-group">\n\t\t    <label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t    \t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="max_exceed"></i>\n\t\t        '+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Max Allowance Exceed",{name:"s",hash:{},data:data
}))+'\n\t\t    </label>\n\t\t    <div class="controls col-sm-5 col-md-4">\n\t\t        <div class="form-inline">\n\t\t            <div class="form-group">\n\t\t                <div class="col-xs-6 col-sm-6 col-lg-6">\n\t\t                    <div class="input-group">\n\t\t                        <input type="text" class="form-control input-sm hd hour txtMaxExceed" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.maxExceed:stack1,{name:"round",hash:{},data:data}))+'" />\n\t\t                        <span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"hours",{name:"s",hash:{},data:data}))+'</span>\n\t\t                    </div>\n\t\t                </div>\n\t\t                <div class="col-xs-6 col-sm-6 col-lg-6">\n\t\t                    <div class="input-group">\n\t\t                        <input type="text" class="form-control input-sm hd day" value="'+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.maxExceed:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+'" />\n\t\t                        <span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"days",{name:"s",hash:{},data:data}))+'</span>\n\t\t                    </div>\n\t\t                </div>\n\t\t            </div>\n\t\t        </div>\n\t\t    </div>\n\t\t</div>\n\t\t\n\t\t<hr />\n\t\t\n\t\t<div class="form-group">\n\t\t    <label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t    \t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="max_carry_over"></i>\n\t\t        '+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Max Carry Over",{name:"s",hash:{},data:data}))+'\n\t\t    </label>\n\t\t    <div class="controls col-sm-5 col-md-4">\n\t\t        <div class="form-inline">\n\t\t            <div class="form-group">\n\t\t                <div class="col-xs-6 col-sm-6 col-lg-6">\n\t\t                    <div class="input-group">\n\t\t                        <input type="text" class="form-control input-sm hd hour txtCarryOver" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.carryOver:stack1,{name:"round",hash:{},data:data}))+'" />\n\t\t                        <span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"hours",{name:"s",hash:{},data:data}))+'</span>\n\t\t                    </div>\n\t\t                </div>\n\t\t                <div class="col-xs-6 col-sm-6 col-lg-6">\n\t\t                    <div class="input-group">\n\t\t                        <input type="text" class="form-control input-sm hd day" value="'+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.carryOver:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+'" />\n\t\t                        <span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"days",{name:"s",hash:{},data:data}))+'</span>\n\t\t                    </div>\n\t\t                </div>\n\t\t            </div>\n\t\t        </div>\n\t\t    </div>\n\t\t</div>\n\t\t\n\t\t<div class="form-group">\n\t\t    <label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t        <i class="glyphicon glyphicon-question-sign context-help" data-context-help="carry_over_debt"></i>\n\t\t    </label>\n\t\t    <div class="controls col-sm-5 col-md-4">\n\t\t    \t<div class="checkbox">\n\t\t\t        <label>\n\t\t\t            <input type="checkbox" class="chkCarryOverDebt" '+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.carryOverDebt:stack1,{name:"if",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t            "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Carry Over Debt?",{name:"s",hash:{},data:data}))+'\n\t\t\t        </label>\n\t\t        </div>\n\t\t    </div>\n\t\t</div>\n\t\t\n\t\t<div class="form-group">\n\t\t    <label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t        <i class="glyphicon glyphicon-question-sign context-help" data-context-help="carry_over_expiry"></i>\n\t\t    </label>\n\t\t    <div class="controls col-sm-5 col-md-4">\n\t\t    \t<div class="checkbox">\n\t\t\t        <label>\n\t\t\t            <input type="checkbox" class="chkCarryOverExpiry" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.carryOverExpiryEnabled:depth0,{name:"if",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t            "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Carry Over Expiry?",{name:"s",hash:{},data:data}))+'\n\t\t\t        </label>\n\t\t        </div>\n\t\t    </div>\n\t\t</div>\n\t\t\n\t\t<div class="carry-over-expiry">\n\t\t\t<div class="form-group">\n\t\t\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2"></label>\n\t\t\t\t<div class="controls col-sm-6 col-md-5 col-lg-4">\n\t\t\t\t\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Use Carry Over within",{name:"s",hash:{},data:data}))+'</label>\n\t\t\t\t\t<select class="form-control input-sm ddlExpiryMonths"></select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.alias:depth0,"leave",{name:"ifequal",hash:{},fn:this.program(14,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\n\t\t<hr />\n\t\n\t</div>\n</div>"},useData:true});Handlebars.registerPartial("admin/templates/leave/EntitlementTemplate",t);return t});define("hbs!admin/templates/leave/EntitlementSubTemplate",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal","templates/helpers/round","templates/helpers/h2d"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'checked="checked"'},3:function(depth0,helpers,partials,data){var stack1;return'value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.accrual:stack1)!=null?stack1.hours:stack1,{name:"round",hash:{},data:data}))+'"'},5:function(depth0,helpers,partials,data){return'value="0.0"'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper;return'<div class="entitlement-settings">\n\t<h4 class="entitlement">'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Settings",{name:"s",hash:{},data:data}))+'</h4>\n\t\n\t<div class="form-group">\n\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="annual_leave_type"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowance Type",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t\t<div class="controls col-sm-5 col-md-4">\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" disabled="disabled" name="'+this.escapeExpression((helper=(helper=helpers.alias||(depth0!=null?depth0.alias:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"alias",hash:{},data:data}):helper))+'_allowance_type" value="annual" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.type:stack1,"annual",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Annual",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" disabled="disabled" name="'+this.escapeExpression((helper=(helper=helpers.alias||(depth0!=null?depth0.alias:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"alias",hash:{},data:data}):helper))+'_allowance_type" value="accrual" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.type:stack1,"accrual",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Accrual",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" disabled="disabled" name="'+this.escapeExpression((helper=(helper=helpers.alias||(depth0!=null?depth0.alias:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"alias",hash:{},data:data}):helper))+'_allowance_type" value="both" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.type:stack1,"both",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Both",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group annual-entitlement">\n\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="annual_entitlement"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Annual Entitlement",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t\t<div class="controls col-sm-6 col-md-5 col-lg-4">\n\t\t\t<div class="form-inline">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="col-xs-6 col-sm-6 col-lg-6">\n\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t<input type="text" class="form-control input-sm hd hour txtHours" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.hours:stack1,1,1,{name:"round",hash:{},data:data}))+'" />\n\t\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"hours",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-6 col-sm-6 col-lg-6">\n\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t<input type="text" class="form-control input-sm hd day" value="'+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.hours:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+'" />\n\t\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"days",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="accrual-entitlement">\n\t\t<div class="form-group">\n\t\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="accrued_entitlement"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Accrued Entitlement",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<div class="controls col-sm-6 col-md-5 col-lg-4">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="col-xs-6 col-sm-6 col-lg-6">\n\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t<input type="text" class="form-control input-sm txtAccrualHours" '+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.entitlement:depth0)!=null?stack1.accrual:stack1,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.program(5,data,0),data:data}))!=null?stack1:"")+' />\n\t\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"hours",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="form-group">\n\t\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="accrual_schedule"></i>\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Accrual Schedule",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<div class="col-sm-8 col-md-9 col-lg-10 controls">\n\t\t\t\t<div class="form-inline">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<div class="col-sm-12">\n\t\t\t\t\t\t\t<select class="form-control input-sm accrual ddlAccrualFrequency" disabled="disabled"></select>\n\t\t\t\t\t\t\t<span class="accrual accrualOn">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"on",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t\t\t<select class="form-control input-sm accrual ddlAccrualWeekday" disabled="disabled"></select>\n\t\t\t\t\t\t\t<select class="form-control input-sm accrual ddlAccrualDay" disabled="disabled"></select>\n\t\t\t\t\t\n\t\t\t\t\t\t\t<span class="accrual accrualAnd">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"and",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t\t\t<select class="form-control input-sm accrual ddlAccrualDay2" disabled="disabled"></select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<hr />\n\n</div>'},useData:true});Handlebars.registerPartial("admin/templates/leave/EntitlementSubTemplate",t);return t});define("admin/views/leave/EntitlementView",["jquery","underscore","appogee","leave/enums","enums/MonthEnum","hbs!admin/templates/leave/EntitlementTemplate","hbs!admin/templates/leave/EntitlementSubTemplate","jquery.appogee.hd","jquery.appogee.contextHelp"],function($,_,appogee,enums,MonthEnum,tmpl,tmplSub){"use strict";var S,R={losNote:"These entitlement settings will be applied to employees whose start date is at least {years} years before the first day of the allowance start date",lblCarryOverExpiryMonth:"1 Month",lblCarryOverExpiryMonths:"{no_of_months} Months",selectOne:"- Select Month -"};var View=function($container,entitlement,hoursInDay,startMonth){S=appogee.getStrings("EntitlementView",R);this.$container=$container;this.entitlement=entitlement;this.hoursInDay=hoursInDay;this.startMonth=startMonth;this.isDefault=entitlement.years===0;this.tmpl=this.isDefault?tmpl:tmplSub;this.carryOverExpiryEnabled={leave:false,sick:false,custom1:false,custom2:false};if(this.isDefault){this.carryOverExpiryEnabled.leave=entitlement.leave.carryOverExpiryMonths>0;this.carryOverExpiryEnabled.sick=entitlement.sick.carryOverExpiryMonths>0;this.carryOverExpiryEnabled.custom1=entitlement.custom1.carryOverExpiryMonths>0;this.carryOverExpiryEnabled.custom2=entitlement.custom2.carryOverExpiryMonths>0}this.custom1LeaveType=null;this.custom2LeaveType=null;this.onDefaultChangedHandler=null};View.prototype.onDefaultChanged=function(handler){this.onDefaultChangedHandler=handler};View.prototype.setCustom1LeaveType=function(leaveType){this.custom1LeaveType=leaveType};View.prototype.setCustom2LeaveType=function(leaveType){this.custom2LeaveType=leaveType};View.prototype.setStartMonth=function(startMonth){this.startMonth=startMonth;this.render()};View.prototype.setHoursInDay=function(hoursInDay){if(!hoursInDay){return}if(this.hoursInDay){this.entitlement.leave.hours=this.entitlement.leave.hours/this.hoursInDay*hoursInDay}this.hoursInDay=hoursInDay;this.render()};View.prototype.render=function(){var me=this;var datas=[{alias:"leave",name:"Leave",entitlement:this.entitlement.leave,years:this.entitlement.years,carryOverExpiryEnabled:this.carryOverExpiryEnabled.leave}];if(this.entitlement.sick.enabled){datas.push({alias:"sick",name:"Sickness",entitlement:this.entitlement.sick,years:this.entitlement.years,carryOverExpiryEnabled:this.carryOverExpiryEnabled.sick})}if(this.entitlement.custom1.enabled){datas.push({alias:"custom1",name:"Custom 1",entitlement:this.entitlement.custom1,years:this.entitlement.years,carryOverExpiryEnabled:this.carryOverExpiryEnabled.custom1})}if(this.entitlement.custom2.enabled){datas.push({alias:"custom2",name:"Custom 2",entitlement:this.entitlement.custom2,years:this.entitlement.years,carryOverExpiryEnabled:this.carryOverExpiryEnabled.custom2})}this.$container.html("");if(this.entitlement.years>0){var msg=S.losNote.format({years:this.entitlement.years});var html='<div class="alert alert-info">{0}</div>'.format(msg);this.$container.html(html)}datas.forEach(function(data){data.hoursInDay=me.hoursInDay;data.custom1LeaveType=me.custom1LeaveType;data.custom2LeaveType=me.custom2LeaveType;data.toilTerm=appogee.getToilTerm();var $div=$("<div />").html(me.tmpl(data));$div.find(".hd").data("hoursInDay",me.hoursInDay).hd();me.toggle($div,data.entitlement,data.alias);var $ddlAccrualFrequency=$div.find(".ddlAccrualFrequency");var $ddlAccrualWeekday=$div.find(".ddlAccrualWeekday");var $ddlAccrualDay=$div.find(".ddlAccrualDay");var $ddlAccrualDay2=$div.find(".ddlAccrualDay2");var $ddlExpiryMonths=$div.find(".ddlExpiryMonths");appogee.ui.populateDropdown($ddlAccrualFrequency,enums.AccrualFrequency.asList(),{default:data.entitlement.accrual.frequency,defaultValue:""});appogee.ui.populateDropdown($ddlAccrualWeekday,enums.AccrualWeekday.asList(),{default:data.entitlement.accrual.weekday,defaultValue:""});appogee.ui.populateDropdown($ddlAccrualDay,enums.AccrualDay.asList(),{default:data.entitlement.accrual.day,defaultValue:""});appogee.ui.populateDropdown($ddlAccrualDay2,enums.AccrualDay.asList(),{default:data.entitlement.accrual.day2,defaultValue:""});var expiryMonths=me.getExpiryMonths(me.startMonth);appogee.ui.populateDropdown($ddlExpiryMonths,expiryMonths,{default:data.entitlement.carryOverExpiryMonths,defaultValue:""});$div.find("input,select").change(function(){me.handleOnChange($div,data.entitlement,data.alias)});me.$container.append($div)});me.$container.find(".context-help").contextHelp()};View.prototype.handleOnChange=function($div,entitlement,alias){if(this.isDefault){if(alias=="leave"){entitlement.enabled=true;entitlement.carryOverToil=$div.find(".chkCarryOverToil").prop("checked")}entitlement.type=$div.find('input[type="radio"][name="'+alias+'_allowance_type"]:checked').val();entitlement.accrual.frequency=$div.find(".ddlAccrualFrequency").val();entitlement.accrual.weekday=parseInt($div.find(".ddlAccrualWeekday").val());entitlement.accrual.day=parseInt($div.find(".ddlAccrualDay").val());entitlement.accrual.day2=parseInt($div.find(".ddlAccrualDay2").val());entitlement.carryOverDebt=$div.find(".chkCarryOverDebt").prop("checked");entitlement.carryOverMonths=0;this.carryOverExpiryEnabled[alias]=$div.find(".chkCarryOverExpiry").prop("checked");if(this.carryOverExpiryEnabled[alias]){entitlement.carryOverMonths=parseInt($div.find(".ddlExpiryMonths").val())}var maxExceed=$div.find(".txtMaxExceed").val();if(appogee.validation.validateFloat(maxExceed)){entitlement.maxExceed=parseFloat(maxExceed)}var carryOver=$div.find(".txtCarryOver").val();if(appogee.validation.validateFloat(carryOver)){entitlement.carryOver=parseFloat(carryOver)}}entitlement.carryOverExpiryMonths=0;var carryOverExpiry=$div.find(".chkCarryOverExpiry").prop("checked");if(carryOverExpiry){entitlement.carryOverExpiryMonths=parseInt($div.find(".ddlExpiryMonths").val())}var hours=$div.find(".txtHours").val();if(appogee.validation.validateFloat(hours)){entitlement.hours=parseFloat(hours)}else{$div.find(".txtHours").val(entitlement.hours).change()}var accrualHours=$div.find(".txtAccrualHours").val();if(appogee.validation.validateFloat(accrualHours)){entitlement.accrual.hours=parseFloat(accrualHours)}else{$div.find(".txtAccrualHours").val(entitlement.accrual.hours).change()}if(this.isDefault&&this.onDefaultChangedHandler){this.onDefaultChangedHandler()}this.toggle($div,entitlement,alias)};View.prototype.toggle=function($div,entitlement,alias){$div.find(".annual-entitlement").toggle(entitlement.type!="accrual");$div.find(".accrual-entitlement").toggle(entitlement.type!="annual");$div.find(".carry-over-expiry").toggle(this.carryOverExpiryEnabled[alias]);var freq=entitlement.accrual.frequency;$div.find(".ddlAccrualWeekday").toggle(freq=="weekly"||freq=="fortnightly");$div.find(".ddlAccrualDay").toggle(freq=="monthly"||freq=="bimonthly");$div.find(".ddlAccrualDay2").toggle(freq=="bimonthly");$div.find(".accrualAnd").toggle(freq=="bimonthly");$div.find(".accrualOn").toggle(freq!=="")};View.prototype.getExpiryMonths=function(startMonth){var array=[{key:-1,value:S.selectOne}];var months=MonthEnum.asList().splice(startMonth,12).concat(MonthEnum.asList().splice(0,startMonth-1));months.forEach(function(val,month){if(month===0){val.value=S.lblCarryOverExpiryMonth.format({});val.key=parseInt(month)+1;array.push(val)}else{val.value=S.lblCarryOverExpiryMonths.format({no_of_months:parseInt(month)+1});val.key=parseInt(month)+1;array.push(val)}});return array};return View});define("admin/leave/leave_profile",["jquery","underscore","appogee","enums/MonthEnum","admin/views/leave/RotaView","admin/views/leave/LengthOfService","admin/views/leave/EntitlementView","hbs!leave/templates/AllowanceBarMini","views/audit/EmbeddedAuditView","jquery.appogee.tabs"],function($,_,appogee,Month,RotaView,LengthOfServiceView,EntitlementView,tmplAllowanceBar,AuditView){"use strict";var S,R={colName:"Name",colTeam:"Team",colAllowance:"Current Allowance",errorChangeDivisionNoAccessTitle:"Insuficient Access",errorChangeDivisionNoAccessMsg:"You do not have access to change the Division for this Leave Profile.",confirmChangeAduTitle:"Change Division",confirmChangeAduMsg1:"To move a LeaveProfile to a different Division, please use the ADU Management tool.",confirmChangeAduMsg2:"Would you like to be redirected there now?",tabOptions:"Options",tabDefaultEntitlement:"Default Entitlement",tabCustomEntitlement:"{years} Years",help:"Help",errorNoName:"Please enter a <strong>Name</strong> for this profile on the Main Details tab.",errorNoHours:"Please enter a value for Number of Hours in Working Day",errorNoWorkingHours:"You have not defined any working hours on the Working Rota tab.",errorInvalidWorkingHours:"Number of Hours in Working Day must be greater than 0",errorNoCustom1LeaveType1:"Please select a <strong>Leave Type</strong> for Custom 1 Allowance.",errorNoCustom1LeaveType2:"This can be found on the Entitlement Settings -> Options tab.",errorNoCustom2LeaveType1:"Please select a <strong>Leave Type</strong> for Custom 2 Allowance.",errorNoCustom2LeaveType2:"This can be found on the Entitlement Settings -> Options tab.",errorSaveCustomLeaveType1:"Please select different Leave Types for Custom 1 Allowance and Custom 2 Allowance.",errorSaveCustomLeaveType2:"This can be found on the Entitlement Settings -> Options tab.",errorSaveCarryOverExpiry:"Please select a Carry Over Expiry Month.",alertStartMonthChangedTitle:"Leave Profile Changed Successfully",alertStartMonthChangedMsg:"The Leave Profile start month was changed successfully. You will now be redirected to the Adjust Allowance Range tool where you can review and realign Employees Allowances ranges."};var FRESHDESK_LOS="https://help.appogeehr.com/support/solutions/articles/22000122270-appogee-hr-length-of-service";var DEFAULT_EMP={autoCalculate:true,allowOverride:true,startMonth:1,proRataFormula:"disabled",lengthOfServiceProRataFormula:"disabled",hoursInDay:7.5,rota:[{ah:3.75,ae:"17:30",ms:"09:00",mh:3.75,me:"12:45",as:"13:45"},{ah:3.75,ae:"17:30",ms:"09:00",mh:3.75,me:"12:45",as:"13:45"},{ah:3.75,ae:"17:30",ms:"09:00",mh:3.75,me:"12:45",as:"13:45"},{ah:3.75,ae:"17:30",ms:"09:00",mh:3.75,me:"12:45",as:"13:45"},{ah:3.75,ae:"17:30",ms:"09:00",mh:3.75,me:"12:45",as:"13:45"},{ah:0,ae:"00:00",ms:"00:00",mh:0,me:"00:00",as:"00:00"},{ah:0,ae:"00:00",ms:"00:00",mh:0,me:"00:00",as:"00:00"}],entitlements:[{key:"default",years:0}]};return{defaultStrings:R,contextHelp:true,views:{rota:null,lengthOfService:null,employees:null,entitlements:{}},getLoadUrls:function(){var loadUrls={api:["/public-holiday-profiles","/leave-types?deducted=true"]};if(this.key){var url="/leave-profiles/{0}?projection=full".format(this.key);loadUrls.api.push(url)}return loadUrls},initialize:function(){var _this163=this;S=this.S;var me=this;this.key=$("#txtKey").val();$("#txtHoursInDay").blur(function(){$(this).removeClass("error");if(appogee.validation.validateFloat(this.value)){if(parseFloat(this.value)>24){$(this).addClass("error")}me.triggerHoursInDayChange()}else{$(this).addClass("error")}});$("#chkAutoCalculate").change(function(){$("#tabRota").toggle(this.checked);$("#hoursInDayHelpAuto").toggle(this.checked);$("#hoursInDayHelpManual").toggle(!this.checked);$("#txtHoursInDay").attr("disabled",this.checked).val(me.getHoursInDay());if(this.checked){$("#txtHoursInDay").removeClass("error")}});$("#chkSick").change(function(){me.emp.entitlements[0].sick.enabled=this.checked;me.updateSecondaryEntitlements()});$("#chkCustom1").change(function(){if(this.checked){$("#custom1LeaveType").slideDown("fast")}else{$("#custom1LeaveType").slideUp("fast")}me.emp.entitlements[0].custom1.enabled=this.checked;me.updateSecondaryEntitlements()});$("#ddlCustom1LeaveType").change(function(){var leaveType=_.findWhere(me.leaveTypes,{key:$(this).val()});for(var key in me.views.entitlements){if(me.views.entitlements.hasOwnProperty(key)){me.views.entitlements[key].setCustom1LeaveType(leaveType)}}});$("#chkCustom2").change(function(){if(this.checked){$("#custom2LeaveType").slideDown("fast")}else{$("#custom2LeaveType").slideUp("fast")}me.emp.entitlements[0].custom2.enabled=this.checked;me.updateSecondaryEntitlements()});$("#ddlCustom2LeaveType").change(function(){var leaveType=_.findWhere(me.leaveTypes,{key:$(this).val()});for(var key in me.views.entitlements){if(me.views.entitlements.hasOwnProperty(key)){me.views.entitlements[key].setCustom2LeaveType(leaveType)}}});if(this.key){this.views.employees=new appogee.View($("#employeesContainer"),"employees",{showSearch:false});this.views.employees.addKeyFilter("leave_profile_key",this.key,true);this.views.employees.addColumn({type:"custom",label:S.colName,width:300,render:function(employee){var html="";var url="/admin/organisation/employee?key="+employee.key;if(employee.displayName){html+='<div><a href="{0}">{1}</a></div>'.format(url,employee.displayName);html+="<div>{0}</div>".format(employee.email)}else{html+='<div><a href="{0}">{1}</a></div>'.format(url,employee.email)}return html}});this.views.employees.addColumn({type:"link",label:S.colTeam,field:"[team.name]",link:"/admin/organisation/team?key=[team.key]",width:300});this.views.employees.addColumn({type:"custom",label:S.colAllowance,width:200,render:function(employee){var html="";if(employee.allowance){html=tmplAllowanceBar({xs:true,allowance:employee.allowance.leave})}return html}});this.views.employees.fetch();this.views.audit=new AuditView($("#auditContainer"),this.key);this.views.audit.render();this.views.audit.fetch()}$("#btnSave").click(function(){_this163.validate()});$("#btnChangeAdu").click(function(){if(!_this163.currentUser.isAduManager()){appogee.valert(S.errorChangeDivisionNoAccess);return}appogee.confirm(S.confirmChangeAdu,function(){var url="/admin/organisation/adu-manager?aduKey={0}&leaveProfileKey={1}".format(_this163.emp.adu.key,_this163.emp.key);location.href=url})});$("#btnDelete").click(function(){me.doDelete()})},showWarningDialog:function(callback){var me=this;me.$dlg=new appogee.Dialog($("#dlgRedirect"),{title:S.dlgWarning,okCallback:function(){me.$dlg.hide();if(callback){callback()}}});me.$dlg.show()},_createEntitlementStruct:function(isLeave){var e={enabled:false,type:"annual",hours:0,carryOver:0,maxExceed:0,carryOverDebt:false,carryOverExpiryMonths:0,accrual:this._createAccrualStruct()};if(isLeave){e.enabled=true;e.carryOverToil=true}return e},_createAccrualStruct:function(){return{hours:0,frequency:"monthly",weekday:0,day:1,day2:1}},formatEmp:function(emp){var me=this;emp.entitlements.forEach(function(entitlement){if(!entitlement.leave){entitlement.leave=me._createEntitlementStruct(true)}else if(!entitlement.leave.accrual){entitlement.leave.accrual=me._createAccrualStruct()}if(!entitlement.sick){entitlement.sick=me._createEntitlementStruct(false)}else if(!entitlement.sick.accrual){entitlement.sick.accrual=me._createAccrualStruct()}if(!entitlement.custom1){entitlement.custom1=me._createEntitlementStruct(false)}else if(!entitlement.custom1.accrual){entitlement.custom1.accrual=me._createAccrualStruct()}if(!entitlement.custom2){entitlement.custom2=me._createEntitlementStruct(false)}else if(!entitlement.custom2.accrual){entitlement.custom2.accrual=me._createAccrualStruct()}})},onLoad:function(holProfiles,leaveTypes,emp){this.holProfiles=holProfiles.items;this.leaveTypes=leaveTypes.items;this.leaveTypes=_.filter(this.leaveTypes,function(t){return!t.system});this.redirectToAdjustAllowanceTool=false;if(this.key){this.emp=emp}else{this.emp=DEFAULT_EMP}this.formatEmp(this.emp);var me=this;appogee.ui.populateDropdown($("#ddlStartMonth"),Month.asList(),{defaultValue:""});appogee.ui.populateDropdown($("#ddlHolProfile"),this.holProfiles,{valueName:"name",defaultValue:""});$(".no-leave-types-msg").toggle(this.leaveTypes.length==0);appogee.ui.populateDropdown($("#ddlCustom1LeaveType"),this.leaveTypes,{valueName:"name",defaultValue:"- Select Custom 1 Leave Type -"});appogee.ui.populateDropdown($("#ddlCustom2LeaveType"),this.leaveTypes,{valueName:"name",defaultValue:"- Select Custom 2 Leave Type -"});$("#ddlStartMonth").change(function(e){var startMonth=parseInt(e.currentTarget.value);me.views.entitlements["default"].setStartMonth(startMonth)});this.views.rota=new RotaView($("#rotaContainer"),this.emp.rota);this.views.rota.onChange(function(){me.triggerHoursInDayChange()});this.views.rota.render();this.populate();var defaultEntitlement=this.emp.entitlements[0];this.emp.entitlements.forEach(function(entitlement){me.views.entitlements[entitlement.key]=new EntitlementView($("#entitlementContainer"),entitlement,me.getHoursInDay(),me.emp.startMonth)});this.views.entitlements[defaultEntitlement.key].render();this.views.entitlements[defaultEntitlement.key].onDefaultChanged(function(){me.updateSecondaryEntitlements()});this.views.lengthOfService=new LengthOfServiceView($("#lengthOfServiceContainer"),this.emp.entitlements);this.views.lengthOfService.render();this.views.lengthOfService.onChange(function(){me.emp.entitlements.forEach(function(entitlement){if(!me.views.entitlements.hasOwnProperty(entitlement.key)){me.views.entitlements[entitlement.key]=new EntitlementView($("#entitlementContainer"),entitlement,me.getHoursInDay(),me.emp.startMonth)}});me.setEntitlementSubtabs(0)});this.views.lengthOfService.onDelete(function(deletedKey){
if(!me.views.entitlements.hasOwnProperty(deletedKey)){delete me.views.entitlement[deletedKey]}me.setEntitlementSubtabs(0)})},updateSecondaryEntitlements:function(){var fields=["type","enabled","carryOver","maxExceed","carryOverToil","carryOverDebt"];var accrualFields=["frequency","weekday","day","day2"];var f=0;var defaultEntitlement=this.emp.entitlements[0];for(var i=1;i<this.emp.entitlements.length;i++){this.emp.entitlements[i].sick.enabled=defaultEntitlement.sick.enabled;this.emp.entitlements[i].custom1.enabled=defaultEntitlement.custom1.enabled;this.emp.entitlements[i].custom2.enabled=defaultEntitlement.custom2.enabled;for(f=0;f<accrualFields.length;f++){this.emp.entitlements[i].leave.accrual[accrualFields[f]]=defaultEntitlement.leave.accrual[accrualFields[f]];this.emp.entitlements[i].sick.accrual[accrualFields[f]]=defaultEntitlement.sick.accrual[accrualFields[f]];this.emp.entitlements[i].custom1.accrual[accrualFields[f]]=defaultEntitlement.custom1.accrual[accrualFields[f]];this.emp.entitlements[i].custom2.accrual[accrualFields[f]]=defaultEntitlement.custom2.accrual[accrualFields[f]]}for(f=0;f<fields.length;f++){this.emp.entitlements[i].leave[fields[f]]=defaultEntitlement.leave[fields[f]];this.emp.entitlements[i].sick[fields[f]]=defaultEntitlement.sick[fields[f]];this.emp.entitlements[i].custom1[fields[f]]=defaultEntitlement.custom1[fields[f]];this.emp.entitlements[i].custom2[fields[f]]=defaultEntitlement.custom2[fields[f]]}}},getHoursInDay:function(){var hoursInDay=null;if($("#chkAutoCalculate").prop("checked")){hoursInDay=this.views.rota.getHoursInDay()}else{hoursInDay=$("#txtHoursInDay").val()}return parseFloat(hoursInDay)},triggerHoursInDayChange:function(){var hoursInDay=this.getHoursInDay();$("#txtHoursInDay").val(hoursInDay);for(var key in this.views.entitlements){if(this.views.entitlements.hasOwnProperty(key)){this.views.entitlements[key].setHoursInDay(hoursInDay)}}},setEntitlementSubtabs:function(selectedIndex){var me=this;var html="";html+='<a href="#tab_options" class="subtab">'+S.tabOptions+"</a>";me.emp.entitlements.forEach(function(entitlement,i){html+='<a href="#tab_entitlement_settings" class="subtab" data-key={0}>'.format(entitlement.key);if(i===0){html+=S.tabDefaultEntitlement}else{html+=S.tabCustomEntitlement.format({years:entitlement.years})}html+="</a>"});html+='<a href="'+FRESHDESK_LOS+'" target="_FRESHDESK" class="subtab pull-right"><i class="glyphicon glyphicon-question-sign"></i> '+S.help+"</a>";$("#tabEntitlements .subtab-header").html(html);if(selectedIndex!==undefined){var subTab=$("#tabEntitlements .subtab-header .subtab").get(selectedIndex);$(subTab).addClass("selected")}$("#tabEntitlements").appogeeTabs({afterChange:function($oldTab,$newTab){var key=$newTab.data("key");if(key!==undefined){me.views.entitlements[key].render()}}})},populate:function(){$("#txtName").val(this.emp.name);$("#txtDescription").val(this.emp.description);$("#ddlStartMonth").val(this.emp.startMonth);var holProfile=null;if(this.emp.holProfile){holProfile=_.findWhere(this.holProfiles,{key:this.emp.holProfile.key})}if(!holProfile){holProfile=_.findWhere(this.holProfiles,{alias:"default"})}$("#ddlHolProfile").val(holProfile.key);$("#ddlProRataFormula").val(this.emp.proRataFormula);$("#chkAutoCalculate").prop("checked",this.emp.autoCalculate).change();$("#txtHoursInDay").val(this.emp.hoursInDay);$("#chkOverride").prop("checked",this.emp.allowOverride);$("#chkSick").prop("checked",this.emp.entitlements[0].sick.enabled).change();$("#chkCustom1").prop("checked",this.emp.entitlements[0].custom1.enabled).change();$("#chkCustom2").prop("checked",this.emp.entitlements[0].custom2.enabled).change();if(this.emp.custom1LeaveType){$("#ddlCustom1LeaveType").val(this.emp.custom1LeaveType.key)}if(this.emp.custom2LeaveType){$("#ddlCustom2LeaveType").val(this.emp.custom2LeaveType.key)}$("#ddlLengthOfServiceProRataFormula").val(this.emp.lengthOfServiceProRataFormula);if(this.emp.key){this.setEntitlementSubtabs(1)}else{this.setEntitlementSubtabs(0)}},validate:function(){var _this164=this;var aduKey=$("#ddlAdu").val();var name=$("#txtName").val();var description=$("#txtDescription").val();var holProfileKey=$("#ddlHolProfile").val();var proRataFormula=$("#ddlProRataFormula").val();var autoCalculate=$("#chkAutoCalculate").prop("checked");var hoursInDay=$("#txtHoursInDay").val();var allowOverride=$("#chkOverride").prop("checked");var custom1LeaveTypeKey=$("#ddlCustom1LeaveType").val();var custom2LeaveTypeKey=$("#ddlCustom2LeaveType").val();var lengthOfServiceProRataFormula=$("#ddlLengthOfServiceProRataFormula").val();var startMonth=this.emp.startMonth;if($("#ddlStartMonth").val()){startMonth=$("#ddlStartMonth").val()}if(!name){appogee.valert(S.errorNoName);return}if(!appogee.validation.validateFloat(hoursInDay)){appogee.valert(S.errorNoHours);return}else{hoursInDay=parseFloat(hoursInDay);if(hoursInDay<=0){if(autoCalculate){appogee.valert(S.errorNoWorkingHours);return}else{appogee.valert(S.errorInvalidWorkingHours);return}}}if(this.emp.holProfile&&holProfileKey!=this.emp.holProfile.key){}if(!this.views.rota.validate()){return}if(this.emp.entitlements[0].custom1.enabled&&!custom1LeaveTypeKey){appogee.valert(S.errorNoCustom1LeaveType);return}if(this.emp.entitlements[0].leave.carryOverExpiryMonths==-1){appogee.valert(S.errorSaveCarryOverExpiry);return}if(this.emp.entitlements[0].sick.carryOverExpiryMonths==-1){appogee.valert(S.errorSaveCarryOverExpiry);return}if(this.emp.entitlements[0].custom1.carryOverExpiryMonths==-1){appogee.valert(S.errorSaveCarryOverExpiry);return}if(this.emp.entitlements[0].custom2.carryOverExpiryMonths==-1){appogee.valert(S.errorSaveCarryOverExpiry);return}if(this.emp.entitlements[0].custom2.enabled&&!custom2LeaveTypeKey){appogee.valert(S.errorNoCustom2LeaveType);return}if(custom1LeaveTypeKey&&custom2LeaveTypeKey&&custom1LeaveTypeKey==custom2LeaveTypeKey){appogee.valert(S.errorSaveCustomLeaveType);return}if(this.emp.startMonth!=startMonth){var hasEmployees=this.views.employees&&this.views.employees.total>0;if(this.emp.key&&hasEmployees){this.showWarningDialog(function(){var redirect=$(".chkAdjustAllowanceRange").is(":checked");if(redirect&&_this164.emp.key){_this164.redirectToAdjustAllowanceTool=true}_this164.save()})}else{this.save()}}this.save()},save:function(){var me=this;var aduKey=$("#ddlAdu").val();var name=$("#txtName").val();var description=$("#txtDescription").val();var startMonth=parseInt($("#ddlStartMonth").val());var holProfileKey=$("#ddlHolProfile").val();var proRataFormula=$("#ddlProRataFormula").val();var autoCalculate=$("#chkAutoCalculate").prop("checked");var hoursInDay=$("#txtHoursInDay").val();var allowOverride=$("#chkOverride").prop("checked");var custom1LeaveTypeKey=$("#ddlCustom1LeaveType").val();var custom2LeaveTypeKey=$("#ddlCustom2LeaveType").val();var lengthOfServiceProRataFormula=$("#ddlLengthOfServiceProRataFormula").val();this.emp.name=name;this.emp.description=description;this.emp.startMonth=startMonth;this.emp.holProfile={key:holProfileKey};this.emp.proRataFormula=proRataFormula;this.emp.autoCalculate=autoCalculate;this.emp.hoursInDay=parseFloat(hoursInDay);this.emp.allowOverride=allowOverride;this.emp.rota=this.views.rota.getRota();if(this.emp.entitlements[0].custom1.enabled&&custom1LeaveTypeKey){this.emp.custom1LeaveType={key:custom1LeaveTypeKey}}else{this.emp.custom1LeaveType={key:null}}if(this.emp.entitlements[0].custom2.enabled&&custom2LeaveTypeKey){this.emp.custom2LeaveType={key:custom2LeaveTypeKey}}else{this.emp.custom2LeaveType={key:null}}this.emp.lengthOfServiceProRataFormula=lengthOfServiceProRataFormula;var notifier=appogee.notifier.saving();var url=null;if(!this.key){if(!aduKey){aduKey=this.currentUser.adu.key}this.emp.adu={key:aduKey};url="/leave-profiles";appogee.api.post(url,this.emp,function(response){notifier.success();location.href="/admin/leave-profile?key={0}".format(response.key)},{artificialDelay:true})}else{url="/leave-profiles/{0}".format(this.key);appogee.api.put(url,this.emp,function(){notifier.success();$("#h1Title").html(name);setTimeout(function(){if(me.redirectToAdjustAllowanceTool){appogee.alert(S.alertStartMonthChanged,function(){location.href="/admin/adjust-allowance-range?aduKey={0}&leaveProfileKey={1}".format(me.emp.adu.key,me.emp.key)})}else{me.views.audit.fetch()}},1e3)},{artificialDelay:true})}},doDelete:function(){}}});define("admin/dialogs/AboutDialog",["jquery","underscore","appogee"],function($,_,appogee){"use strict";var $dlg=null;var Dialog=function(tmpl,cookie){this.tmpl=tmpl;this.cookie=cookie;if($dlg===null){$dlg=$("<div />").addClass("dialog")}};Dialog.prototype.render=function(){var _this165=this;$dlg.html(this.tmpl());$dlg.find("button").click(function(){var dontShowAgain=$dlg.find('input[type="checkbox"]').prop("checked");if(dontShowAgain){appogee.cookies.set(_this165.cookie,1,365)}_this165.dlg.hide()})};Dialog.prototype.show=function(){this.dlg=new appogee.Dialog($dlg);this.dlg.clearButtons();this.render();this.dlg.show()};return Dialog});define("hbs!admin/templates/leave/AllowanceCalculator",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal","templates/helpers/h2d","templates/helpers/round","templates/helpers/ifnotequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'checked="checked"'},3:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.custom1LeaveTypeName||(depth0!=null?depth0.custom1LeaveTypeName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"custom1LeaveTypeName",hash:{},data:data}):helper))+"\n"},5:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Custom 1 Allowance",{name:"s",hash:{},data:data}))+"\n"},7:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.custom2LeaveTypeName||(depth0!=null?depth0.custom2LeaveTypeName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"custom2LeaveTypeName",hash:{},data:data}):helper))+"\n"},9:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Custom 2 Allowance",{name:"s",hash:{},data:data}))+"\n"},11:function(depth0,helpers,partials,data){return'<tr>\n\t<td colspan="11" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading, please wait ...",{name:"s",hash:{},data:data}))+"</td>\n</tr>\n"},13:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.employees:depth0,{name:"each",hash:{},fn:this.program(14,data,0,blockParams,depths),inverse:this.program(84,data,0,blockParams,depths),data:data}))!=null?stack1:""},14:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t<tr class="employee">\n\t\t<td>\n\t\t\t<div><a href="/admin/organisation/employee?key='+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</a></div>\n\t\t\t<div>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+'</div>\n\t\t</td>\n\t\t<td colspan="9"></td>\n\t</tr>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.allowances:depth0,{name:"each",hash:{},fn:this.program(15,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")},15:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'\t\t<tr data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">\n\t\t\t<td>'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[2]!=null?depths[2].metric:depths[2],"annual",{name:"ifequal",hash:{},fn:this.program(16,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[2]!=null?depths[2].metric:depths[2],"accrual",{name:"ifequal",hash:{},fn:this.program(51,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t<td>\n\t\t\t\t<a href="javascript: void(0);" class="btnSave">Save</a>\n\t\t\t</td>\n\t\t</tr>\n'},16:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t\t<td class="hours">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(17,data,0,blockParams,depths),inverse:this.program(19,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours '+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.annualHours:stack1,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.annualHoursComputed:stack1,{name:"ifnotequal",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(23,data,0,blockParams,depths),inverse:this.program(25,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(27,data,0,blockParams,depths),inverse:this.program(29,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours '+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.annualHours:stack1,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.annualHoursComputed:stack1,{name:"ifnotequal",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(31,data,0,blockParams,depths),inverse:this.program(33,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(35,data,0,blockParams,depths),inverse:this.program(37,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours '+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.annualHours:stack1,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.annualHoursComputed:stack1,{name:"ifnotequal",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(39,data,0,blockParams,depths),inverse:this.program(41,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(43,data,0,blockParams,depths),inverse:this.program(45,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours '+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.annualHours:stack1,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.annualHoursComputed:stack1,{name:"ifnotequal",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(47,data,0,blockParams,depths),inverse:this.program(49,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t\t</td>\n"},17:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.annualHours:stack1,{name:"round",hash:{},data:data}))+"\n"},19:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.annualHours:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},21:function(depth0,helpers,partials,data){return"change"},23:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.annualHoursComputed:stack1,{name:"round",hash:{},data:data}))+"\n"},25:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.annualHoursComputed:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},27:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.annualHours:stack1,{name:"round",hash:{},data:data}))+"\n"},29:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.annualHours:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},31:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.annualHoursComputed:stack1,{name:"round",hash:{},data:data}))+"\n"},33:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.annualHoursComputed:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},35:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.annualHours:stack1,{name:"round",hash:{},data:data}))+"\n"},37:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.annualHours:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},39:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.annualHoursComputed:stack1,{name:"round",hash:{},data:data}))+"\n"},41:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.annualHoursComputed:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},43:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.annualHours:stack1,{name:"round",hash:{},data:data}))+"\n"},45:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.annualHours:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},47:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.annualHoursComputed:stack1,{name:"round",hash:{},data:data}))+"\n"},49:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.annualHoursComputed:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},51:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t\t<td class="hours">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(52,data,0,blockParams,depths),inverse:this.program(54,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours '+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.accruedHours:stack1,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.accruedHoursComputed:stack1,{name:"ifnotequal",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(56,data,0,blockParams,depths),inverse:this.program(58,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(60,data,0,blockParams,depths),inverse:this.program(62,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours '+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.accruedHours:stack1,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.accruedHoursComputed:stack1,{name:"ifnotequal",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(64,data,0,blockParams,depths),inverse:this.program(66,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(68,data,0,blockParams,depths),inverse:this.program(70,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours '+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.accruedHours:stack1,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.accruedHoursComputed:stack1,{name:"ifnotequal",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(72,data,0,blockParams,depths),inverse:this.program(74,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(76,data,0,blockParams,depths),inverse:this.program(78,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t\t</td>\n\t\t\t\t<td class="hours '+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.accruedHours:stack1,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.accruedHoursComputed:stack1,{name:"ifnotequal",hash:{},fn:this.program(21,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depths[3]!=null?depths[3].unit:depths[3],"hours",{name:"ifequal",hash:{},fn:this.program(80,data,0,blockParams,depths),inverse:this.program(82,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t\t</td>\n"},52:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.accruedHours:stack1,{name:"round",hash:{},data:data}))+"\n"},54:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.accruedHours:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},56:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.accruedHoursComputed:stack1,{name:"round",hash:{},data:data}))+"\n"},58:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.leave:depth0)!=null?stack1.accruedHoursComputed:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},60:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.accruedHours:stack1,{name:"round",hash:{},data:data}))+"\n"},62:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.accruedHours:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},64:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.accruedHoursComputed:stack1,{name:"round",hash:{},data:data}))+"\n"},66:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sick:depth0)!=null?stack1.accruedHoursComputed:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},68:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.accruedHours:stack1,{name:"round",hash:{},data:data}))+"\n"},70:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.accruedHours:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},72:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.accruedHoursComputed:stack1,{name:"round",hash:{},data:data}))+"\n"},74:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom1:depth0)!=null?stack1.accruedHoursComputed:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},76:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.accruedHours:stack1,{name:"round",hash:{},data:data}))+"\n"},78:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.accruedHours:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},80:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.accruedHoursComputed:stack1,{name:"round",hash:{},data:data}))+"\n"},82:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.custom2:depth0)!=null?stack1.accruedHoursComputed:stack1,depth0!=null?depth0.hoursInDay:depth0,{name:"h2d",hash:{},data:data}))+"\n"},84:function(depth0,helpers,partials,data){var stack1;return"<tr>\n"+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.team:depth0,{name:"unless",hash:{},fn:this.program(85,data,0),inverse:this.program(87,data,0),data:data}))!=null?stack1:"")+"</tr>\n"},85:function(depth0,helpers,partials,data){return'\t\t<td colspan="11" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please select a Team.",{name:"s",hash:{},data:data}))+"</td>\n"},
87:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0!=null?depth0.leaveProfile:depth0,{name:"unless",hash:{},fn:this.program(88,data,0),inverse:this.program(90,data,0),data:data}))!=null?stack1:""},88:function(depth0,helpers,partials,data){return'\t\t<td colspan="11" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please select a Leave Profile.",{name:"s",hash:{},data:data}))+"</td>\n"},90:function(depth0,helpers,partials,data){var stack1;return'\t\t<td colspan="11" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No employees were found in the <strong>{team_name}</strong> Team with the <strong>{leave_profile_name}</strong> Leave Profile.",{name:"s",hash:{leave_profile_name:(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.name:stack1,team_name:(stack1=depth0!=null?depth0.team:depth0)!=null?stack1.name:stack1},data:data}))+"</td>\n\t"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'<div class="allowance-calculator-view">\n\n<div class="pull-right">\n\t<div class="options">\n\t\t<div class="form-group">\n\t\t\t<label class="radio-inline">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Show in",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" name="unit" id="radUnit" value="hours" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" name="unit" id="radUnit" value="days" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"days",{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<label class="radio-inline">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Calculate",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" name="metric" id="radCalculateAnnual" value="annual" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.metric:depth0,"annual",{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Annual Entitlement",{name:"s",hash:{},data:data}))+" ("+this.escapeExpression((helper=(helper=helpers.annualChanges||(depth0!=null?depth0.annualChanges:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"annualChanges",hash:{},data:data}):helper))+')\n\t\t\t</label>\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" name="metric" id="radCalculateAccrual" value="accrual" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.metric:depth0,"accrual",{name:"ifequal",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Accrued Entitlement",{name:"s",hash:{},data:data}))+" ("+this.escapeExpression((helper=(helper=helpers.accrualChanges||(depth0!=null?depth0.accrualChanges:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"accrualChanges",hash:{},data:data}):helper))+')\n\t\t\t</label>\n\t\t</div>\n\t</div>\n</div>\n<div class="clearfix"></div>\n\n<table class="table table-bordered table-shaded table-condensed">\n<thead>\n\t<tr>\n\t\t<th rowspan="2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee / Allowance",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th colspan="2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Allowance",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th colspan="2">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sick Allowance",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th colspan="2">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.custom1LeaveTypeName:depth0,{name:"if",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.program(5,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t</th>\n\t\t<th colspan="2">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.custom2LeaveTypeName:depth0,{name:"if",hash:{},fn:this.program(7,data,0,blockParams,depths),inverse:this.program(9,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t</th>\n\t\t<th rowspan="2">&nbsp;</th>\n\t</tr>\n\t<tr>\n\t\t<th>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Current",{name:"s",hash:{},data:data}))+"</th>\n\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New",{name:"s",hash:{},data:data}))+"</th>\n\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Current",{name:"s",hash:{},data:data}))+"</th>\n\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New",{name:"s",hash:{},data:data}))+"</th>\n\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Current",{name:"s",hash:{},data:data}))+"</th>\n\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New",{name:"s",hash:{},data:data}))+"</th>\n\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Current",{name:"s",hash:{},data:data}))+"</th>\n\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New",{name:"s",hash:{},data:data}))+"</th>\n\t</tr>\n</thead>\n<tbody>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loading:depth0,{name:"if",hash:{},fn:this.program(11,data,0,blockParams,depths),inverse:this.program(13,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\n</tbody>\n</table>\n\n</div>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/templates/leave/AllowanceCalculator",t);return t});define("admin/views/leave/AllowanceCalculator",["jquery","appogee","hbs!admin/templates/leave/AllowanceCalculator"],function($,appogee,tmpl){"use strict";var S,R={nfySaving:"Saving ...",nfySaved:"Save Successful",errorNoTeamTitle:"No Team Selected",errorNoTeamMsg:"Please select a Team.",errorNoLeaveProfileTitle:"No Leave Profile Selected",errorNoLeaveProfileMsg:"Please select a Leave Profile."};var Metric={Annual:"annual",Accrual:"accrual"};var Unit={Days:"days",Hours:"hours"};var TYPES=["leave","sick","custom1","custom2"];var View=function($container){S=appogee.getStrings("AllowanceCalculator",R);this.$container=$container;this.metric=Metric.Annual;this.unit=Unit.Hours;this.team=null;this.leaveProfile=null;this.loading=false;this.onSavingHandlers=[];this.onSaveCompleteHandlers=[]};View.prototype.onSave=function(handler){this.onSavingHandlers.push(handler)};View.prototype.onSaveComplete=function(handler){this.onSaveCompleteHandlers.push(handler)};View.prototype.setTeam=function(team){this.team=team};View.prototype.setLeaveProfile=function(leaveProfile){this.leaveProfile=leaveProfile};View.prototype.fetch=function(){var _this166=this;if(!this.team||!this.leaveProfile){this.render();return}this.loading=true;this.render();var url="/admin/allowance-calculator/xhr/fetch?teamKey={0}&leaveProfileKey={1}".format(this.team.key,this.leaveProfile.key);appogee.xhr.get(url,function(response){_this166.loading=true;_this166.loading=false;_this166.employees=response.employees;_this166.render()})};View.prototype.render=function(){var _this167=this;var custom1LeaveTypeName=null;var custom2LeaveTypeName=null;if(this.employees&&this.employees.length>0){var leaveType=null;if(this.employees[0].allowances[0].custom1){leaveType=this.employees[0].allowances[0].custom1.leaveType;if(leaveType){custom1LeaveTypeName=leaveType.name}}if(this.employees[0].allowances[0].custom2){leaveType=this.employees[0].allowances[0].custom2.leaveType;if(leaveType){custom2LeaveTypeName=leaveType.name}}}var annualChanges=this.getAnnualChanges();var accrualChanges=this.getAccrualChanges();var data={metric:this.metric,unit:this.unit,team:this.team,leaveProfile:this.leaveProfile,employees:this.employees,custom1LeaveTypeName:custom1LeaveTypeName,custom2LeaveTypeName:custom2LeaveTypeName,loading:this.loading,annualChanges:annualChanges,accrualChanges:accrualChanges};this.$container.html(tmpl(data));this.$container.find('input[type="radio"][name="metric"]').change(function(){_this167.metric=_this167.$container.find('input[type="radio"][name="metric"]:checked').val();_this167.render()});this.$container.find('input[type="radio"][name="unit"]').change(function(){_this167.unit=_this167.$container.find('input[type="radio"][name="unit"]:checked').val();_this167.render()});this.$container.find(".btnSave").click(function(e){var $this=$(e.currentTarget);var key=$this.closest("tr").data("key");var allowance=_this167.getAllowance(key);_this167.saveAllowance(allowance)})};View.prototype.getAllowance=function(key){for(var e=0;e<this.employees.length;e++){for(var a=0;a<this.employees[e].allowances.length;a++){var allowance=this.employees[e].allowances[a];if(allowance.key==key){return allowance}}}};View.prototype.saveAllowance=function(allowance){var _this168=this;var url="/admin/allowance-calculator/xhr/save";var body={allowanceKey:allowance.key,metric:this.metric};var notifier=appogee.notify(S.nfySaving);this.onSavingHandlers.forEach(function(h){return h()});appogee.xhr.post(url,body,function(){_this168.onSaveCompleteHandlers.forEach(function(h){return h()});notifier.success(S.nfySaved);TYPES.forEach(function(type){if(_this168.metric==Metric.Annual){allowance[type].annualHours=allowance[type].annualHoursComputed}else if(_this168.metric==Metric.Accrual){allowance[type].accruedHours=allowance[type].accruedHoursComputed}});_this168.render()},{artificialDelay:true})};View.prototype.saveAll=function(){var _this169=this;if(!this.team){appogee.valert(S.errorNoTeam);return}if(!this.leaveProfile){appogee.valert(S.errorNoLeaveProfile);return}var url="/admin/allowance-calculator/xhr/save";var body={teamKey:this.team.key,leaveProfileKey:this.leaveProfile.key,metric:this.metric};var notifier=appogee.notify(S.nfySaving);this.onSavingHandlers.forEach(function(h){return h()});appogee.xhr.post(url,body,function(){_this169.onSaveCompleteHandlers.forEach(function(h){return h()});notifier.success(S.nfySaved);_this169.employees.forEach(function(employee){employee.allowances.forEach(function(allowance){TYPES.forEach(function(type){if(_this169.metric==Metric.Annual){allowance[type].annualHours=allowance[type].annualHoursComputed}else if(_this169.metric==Metric.Accrual){allowance[type].accruedHours=allowance[type].accruedHoursComputed}})})});_this169.render()},{artificialDelay:true})};View.prototype.getAnnualChanges=function(){if(!this.employees){return 0}var count=0;this.employees.forEach(function(employee){employee.allowances.forEach(function(allowance){TYPES.some(function(type){if(allowance[type].annualHours!=allowance[type].annualHoursComputed){count+=1;return true}})})});return count};View.prototype.getAccrualChanges=function(){if(!this.employees){return 0}var count=0;this.employees.forEach(function(employee){employee.allowances.forEach(function(allowance){TYPES.some(function(type){if(allowance[type].accruedHours!=allowance[type].accruedHoursComputed){count+=1;return true}})})});return count};return View});define("hbs!admin/dialogs/tmpl/AboutAllowanceCalculator",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){return'<div class="dlg-about">\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowance Calculator",{name:"s",hash:{},data:data}))+"</h4>\n\t\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This tool allows you to re-calculate allocated allowances for a specific Team and Leave Profile.\n\t\t\tThis may be useful after changing the entitlement values on a Leave Profile, moving a user to another Leave Profile, or changing a users start date.",{name:"s",hash:{},data:data}))+"\n\t</p>\n\t\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"To use this tool, select a Team from the drop down.\n\t\t\tThe page will update with the current, and re-calculated allowances for the employees in the selected team.\n\t\t\tThe page will show the current allowances, and the re-calculated allowances.\n\t\t\tIf an employee has a Start Date, the allowance can be pro-rated for the starting allowance year.\n\t\t\tChanges are marked in red.\n\t\t\tClick save to commit the changes.",{name:"s",hash:{},data:data}))+'\n\t</p>\n\t\n\t<div class="buttons">\n\t\t<label>\n\t\t\t<input type="checkbox" checked="checked" />\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Don't show me this message again",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t\t\n\t\t<div style="padding: 10px;">\n\t\t\t<button class="btn btn-sm btn-default">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Close",{name:"s",hash:{},data:data}))+"\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n</div>"},useData:true});Handlebars.registerPartial("admin/dialogs/tmpl/AboutAllowanceCalculator",t);return t});define("admin/leave/calculator",["jquery","appogee","admin/org/views/OrgSelector","admin/dialogs/AboutDialog","admin/views/leave/AllowanceCalculator","hbs!admin/dialogs/tmpl/AboutAllowanceCalculator"],function($,appogee,OrgSelector,AboutDialog,AllowanceCalculator,tmplAbout){"use strict";var COOKIE_ABOUT="acam";return{getLoadUrls:function(){var teamsUrl="/teams?aduKey={0}".format(this.defaultAduKey);var leaveProfilesUrl="/leave-profiles?projection=summary&aduKey={0}&aduTraverse=up".format(this.defaultAduKey);return{api:[teamsUrl,leaveProfilesUrl]}},initialize:function(){var _this170=this;this.defaultAduKey=appogee.util.getUrlParam("aduKey");this.defaultTeamKey=appogee.util.getUrlParam("teamKey");this.defaultLeaveProfileKey=appogee.util.getUrlParam("leaveProfileKey");if(!this.defaultAduKey){this.defaultAduKey=this.currentUser.getActiveAduKey()}this.calc=new AllowanceCalculator($("#calcContainer"));this.calc.render();this.calc.onSave(function(){_this170.orgSelector.disableControls();$("#btnSaveAll").attr("disabled",true)});this.calc.onSaveComplete(function(){_this170.orgSelector.enableControls();$("#btnSaveAll").attr("disabled",false)});if(!appogee.cookies.get(COOKIE_ABOUT)){this.showAbout()}$("#btnAbout").click(function(){_this170.showAbout()});$("#btnSaveAll").click(function(){_this170.calc.saveAll()})},onLoad:function(teams,leaveProfiles){var _this171=this;this.teams=teams.items;this.leaveProfiles=leaveProfiles.items;this.orgSelector=new OrgSelector($("#orgSelector"),{teams:this.teams,leaveProfiles:this.leaveProfiles,showLabels:true,showLeaveProfiles:true,useCookies:false,leaveProfileAutoSelect:false,teamAutoSelect:false,aduDefaultKey:this.defaultAduKey,teamDefaultKey:this.defaultTeamKey,leaveProfileDefaultKey:this.defaultLeaveProfileKey});this.orgSelector.onTeamChange(function(){return _this171.fetch()});this.orgSelector.onLeaveProfileChange(function(){return _this171.fetch()});this.orgSelector.render()},fetch:function(){var team=this.orgSelector.getSelectedTeam();var leaveProfile=this.orgSelector.getSelectedLeaveProfile();this.calc.setTeam(team);this.calc.setLeaveProfile(leaveProfile);this.calc.fetch()},showAbout:function(){var dlg=new AboutDialog(tmplAbout,COOKIE_ABOUT);dlg.show()}}});define("hbs!admin/dialogs/tmpl/AdjustRangePreview",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal","templates/helpers/ifnotequal","templates/helpers/h2d","templates/helpers/round"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t\t<option value="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.key:stack1,depth0))+'"'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.key:stack1,(stack1=depths[1]!=null?depths[1].allowance:depths[1])!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t\t\t\t"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.name:stack1,depth0))+"\n\t\t\t\t</option>\n"},2:function(depth0,helpers,partials,data){return'selected="selected"'},4:function(depth0,helpers,partials,data){return'checked="checked"'},6:function(depth0,helpers,partials,data){return"text-danger"},8:function(depth0,helpers,partials,data){return"\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Pending",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Taken",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No. Requests",{name:"s",hash:{},data:data}))+" *</th>\n"},10:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.pending:stack1,{name:"round",hash:{},data:data}))+"\n"},12:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.pending:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},14:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.approved:stack1,{name:"round",hash:{},data:data}))+"\n"},16:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.approved:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},18:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.pending:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.pending:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(21,data,0),inverse:this.program(23,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.approved:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.approved:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(25,data,0),inverse:this.program(27,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.requests:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.requests:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t\t\t"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.requests:stack1,depth0))+"\n\t\t\t</td>\n"},19:function(depth0,helpers,partials,data){return'class="text-danger"'},21:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.pending:stack1,{name:"round",hash:{},data:data}))+"\n"},23:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.pending:stack1,(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},25:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.approved:stack1,{name:"round",hash:{},data:data}))+"\n"},27:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.approved:stack1,(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},29:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.pending:stack1,{name:"round",hash:{},data:data}))+"\n"},31:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.pending:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},33:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.approved:stack1,{name:"round",hash:{},data:data}))+"\n"},35:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.approved:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},37:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.pending:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.pending:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(38,data,0),inverse:this.program(40,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.approved:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.approved:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(42,data,0),inverse:this.program(44,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.requests:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.requests:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t\t\t"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.requests:stack1,depth0))+"\n\t\t\t</td>\n"},38:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.pending:stack1,{name:"round",hash:{},data:data}))+"\n"},40:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.pending:stack1,(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},42:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.approved:stack1,{name:"round",hash:{},data:data}))+"\n"},44:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.approved:stack1,(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},46:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.custom1LeaveTypeName||(depth0!=null?depth0.custom1LeaveTypeName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"custom1LeaveTypeName",hash:{},data:data}):helper))+"\n"},48:function(depth0,helpers,partials,data){return"\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Custom 1",{name:"s",hash:{},data:data}))+"\n"},50:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.pending:stack1,{name:"round",hash:{},data:data}))+"\n"},52:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.pending:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},54:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.approved:stack1,{name:"round",hash:{},data:data}))+"\n"},56:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.approved:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},58:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.pending:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.pending:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(59,data,0),inverse:this.program(61,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.approved:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.approved:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(63,data,0),inverse:this.program(65,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.requests:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.requests:stack1,{
name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t\t\t"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.requests:stack1,depth0))+"\n\t\t\t</td>\n"},59:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.pending:stack1,{name:"round",hash:{},data:data}))+"\n"},61:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.pending:stack1,(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},63:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.approved:stack1,{name:"round",hash:{},data:data}))+"\n"},65:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.approved:stack1,(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},67:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.custom2LeaveTypeName||(depth0!=null?depth0.custom2LeaveTypeName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"custom2LeaveTypeName",hash:{},data:data}):helper))+"\n"},69:function(depth0,helpers,partials,data){return"\t\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Custom 2",{name:"s",hash:{},data:data}))+"\n"},71:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.pending:stack1,{name:"round",hash:{},data:data}))+"\n"},73:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.pending:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},75:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.approved:stack1,{name:"round",hash:{},data:data}))+"\n"},77:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.approved:stack1,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},79:function(depth0,helpers,partials,data){var stack1;return"\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.pending:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.pending:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(80,data,0),inverse:this.program(82,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.approved:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.approved:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(84,data,0),inverse:this.program(86,data,0),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td "+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.requests:stack1,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.requests:stack1,{name:"ifnotequal",hash:{},fn:this.program(19,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t\t\t"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.requests:stack1,depth0))+"\n\t\t\t</td>\n"},80:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.pending:stack1,{name:"round",hash:{},data:data}))+"\n"},82:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.pending:stack1,(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},84:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.approved:stack1,{name:"round",hash:{},data:data}))+"\n"},86:function(depth0,helpers,partials,data){var stack1;return"\t\t\t\t\t"+this.escapeExpression((helpers.h2d||depth0&&depth0.h2d||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.approved:stack1,(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.hoursInDay:stack1,{name:"h2d",hash:{},data:data}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<div class="dlg-adjust-range">\n\t<h4>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowance Changes Preview for {first_name} {last_name}",{name:"s",hash:{last_name:(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.lastName:stack1,first_name:(stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.firstName:stack1},data:data}))+'\n\t</h4>\n\t\n\t<div class="pull-left">\n\t\t<div class="form-group">\n\t\t\t<select class="form-control input-sm" id="ddlAllowance">\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.previewAllowances:depth0,{name:"each",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t\t\t</select>\n\t\t</div>\n\t</div>\n\t<div class="pull-right">\n\t\t<div class="form-group">\n\t\t\t<label class="radio-inline">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Show in",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" name="unit" value="hours" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<label class="radio-inline">\n\t\t\t\t<input type="radio" name="unit" value="days" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"days",{name:"ifequal",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t</div>\n\t</div>\n\t<div class="clearfix"></div>\n\t\n\t<table class="table table-bordered table-shaded table-condensed">\n\t<thead>\n\t\t<tr>\n\t\t\t<th rowspan="2"></th>\n\t\t\t<th colspan="3" class="text-center">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.name:stack1,depth0))+'</th>\n\t\t\t<th colspan="3" class="text-center '+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.name:stack1,(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.name:stack1,{name:"ifnotequal",hash:{},fn:this.program(6,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.name:stack1,depth0))+"</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Pending",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Taken",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No. Requests",{name:"s",hash:{},data:data}))+" *</th>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.newAllowance:depth0,{name:"if",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t<td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(10,data,0,blockParams,depths),inverse:this.program(12,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(14,data,0,blockParams,depths),inverse:this.program(16,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.leave:stack1)!=null?stack1.requests:stack1,depth0))+"</td>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.newAllowance:depth0,{name:"if",hash:{},fn:this.program(18,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tr>\n\t\t<tr>\n\t\t\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sick",{name:"s",hash:{},data:data}))+"</th>\n\t\t\t<td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(29,data,0,blockParams,depths),inverse:this.program(31,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(33,data,0,blockParams,depths),inverse:this.program(35,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.sick:stack1)!=null?stack1.requests:stack1,depth0))+"</td>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.newAllowance:depth0,{name:"if",hash:{},fn:this.program(37,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tr>\n\t\t<tr>\t\n\t\t\t<th>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.custom1LeaveTypeName:depth0,{name:"if",hash:{},fn:this.program(46,data,0,blockParams,depths),inverse:this.program(48,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</th>\n\t\t\t<td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(50,data,0,blockParams,depths),inverse:this.program(52,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(54,data,0,blockParams,depths),inverse:this.program(56,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom1:stack1)!=null?stack1.requests:stack1,depth0))+"</td>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.newAllowance:depth0,{name:"if",hash:{},fn:this.program(58,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t</tr>\n\t\t<tr>\n\t\t\t<th>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.custom2LeaveTypeName:depth0,{name:"if",hash:{},fn:this.program(67,data,0,blockParams,depths),inverse:this.program(69,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</th>\n\t\t\t<td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(71,data,0,blockParams,depths),inverse:this.program(73,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.unit:depth0,"hours",{name:"ifequal",hash:{},fn:this.program(75,data,0,blockParams,depths),inverse:this.program(77,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t\t\t</td>\n\t\t\t<td>"+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.custom2:stack1)!=null?stack1.requests:stack1,depth0))+"</td>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.newAllowance:depth0,{name:"if",hash:{},fn:this.program(79,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</tr>\n\t</tbody>\n\t</table>\n\t<p><i>* "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Includes pending, approved, cancelled and rejected requests.",{name:"s",hash:{},data:data}))+"</i></p>\n</div>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/dialogs/tmpl/AdjustRangePreview",t);return t});define("admin/dialogs/AdjustRangePreviewDialog",["jquery","appogee","hbs!admin/dialogs/tmpl/AdjustRangePreview"],function($,appogee,tmpl){"use strict";var S,R={btnCommitChanges:"Confirm Changes"};var Unit={Days:"days",Hours:"hours"};var TYPES=["leave","sick","custom1","custom2"];var $dlg=null;var Dialog=function(employee,computeFromYear){S=appogee.getStrings("AdjustRangePreview",R);this.unit=Unit.Hours;this.employee=employee;this.computeFromYear=computeFromYear;var computeFromAllowance=_.find(employee.allowances,function(allowanceDiff){var startDate=new Date(allowanceDiff.allowance.startDate);return startDate.getFullYear()==computeFromYear});this.allowanceKey=computeFromAllowance.allowance.key;this.onCommitChangesHandler=null;if($dlg===null){$dlg=$("<div />").addClass("dialog")}};Dialog.prototype.onCommitChanges=function(handler){this.onCommitChangesHandler=handler};Dialog.prototype.render=function(){var _this172=this;var allowanceDiff=_.findWhere(this.employee.allowances,{key:this.allowanceKey});var data={unit:this.unit,employee:this.employee,previewAllowances:_.filter(this.employee.allowances,function(allowanceDiff){return!_.isEmpty(allowanceDiff.newAllowance)}),allowance:allowanceDiff.allowance,newAllowance:allowanceDiff.newAllowance};$dlg.html(tmpl(data));$dlg.find('input[type="radio"][name="unit"]').change(function(){_this172.unit=$dlg.find('input[type="radio"][name="unit"]:checked').val();_this172.render()});$dlg.find("#ddlAllowance").change(function(e){var $this=$(e.currentTarget);_this172.allowanceKey=$this.val();_this172.render()})};Dialog.prototype.show=function(){var me=this;this.dlg=new appogee.Dialog($dlg,{okCallback:function(){me.dlg.hide();me.onCommitChangesHandler()},okText:S.btnCommitChanges});this.render();this.dlg.show()};return Dialog});define("hbs!admin/templates/leave/AdjustAllowanceRange",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal","templates/helpers/ifall"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'<div class="pull-left">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Profile Start Month:",{name:"s",hash:{},data:data}))+'</label>\n\t<div class="form-inline">\n\t\t<div class="form-group">\n\t\t\t<strong>'+this.escapeExpression((helper=(helper=helpers.startMonth||(depth0!=null?depth0.startMonth:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"startMonth",hash:{},data:data}):helper))+'</strong>\n\t\t</div>\n\t</div>\n</div>\n<div class="pull-right text-right">\n\t<label>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Adjust From Year",{name:"s",hash:{},data:data}))+'</label>\n\t<div class="form-inline">\n\t\t<div class="form-group">\n\t\t\t<select class="form-control input-sm" id="computeFromYearDdl">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.team:depth0,{name:"if",hash:{},fn:this.program(2,data,0,blockParams,depths),inverse:this.program(6,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t\t\t</select>\n\t\t</div>\n\t</div>\n</div>\n<div class="clearfix"></div>\n'},2:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,(stack1=depth0!=null?depth0.team:depth0)!=null?stack1.activeLeaveYears:stack1,{name:"each",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:""},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t\t\t<option value="'+this.escapeExpression(this.lambda(depth0,depth0))+'" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0,depths[1]!=null?depths[1].computeFromYear:depths[1],{name:"ifequal",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression(this.lambda(depth0,depth0))+"</option>\n"},4:function(depth0,helpers,partials,data){return'selected="selected"'},6:function(depth0,helpers,partials,data){return"\t\t\t\t<option>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"- Select -",{name:"s",hash:{},data:data}))+"</option>\n"},8:function(depth0,helpers,partials,data){return"disabled"},10:function(depth0,helpers,partials,data){return'<tr>\n\t<td colspan="4" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Loading, please wait ...",{name:"s",hash:{},data:data}))+"</td>\n</tr>\n"},12:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return(stack1=helpers.each.call(depth0,depth0!=null?depth0.employees:depth0,{name:"each",hash:{},fn:this.program(13,data,0,blockParams,depths),inverse:this.program(28,data,0,blockParams,depths),data:data}))!=null?stack1:""},13:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'<tr class="employee" data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">\n\t<td colspan="3">\n\t\t<label class="checkbox-inline">\n\t\t\t<input type="checkbox" value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" name="employee"\n\t\t\t'+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.canPreview:depth0,{name:"unless",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+' />\n\t\t\t<div><a href="/admin/organisation/employee?key='+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.firstName||(depth0!=null?depth0.firstName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"firstName",hash:{},data:data}):helper))+" "+this.escapeExpression((helper=(helper=helpers.lastName||(depth0!=null?depth0.lastName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"lastName",hash:{},data:data}):helper))+"</a></div>\n\t\t\t<div>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+'</div>\n\t\t</label>\n\t</td>\n\t<td class="text-warning">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.canPreview:depth0,{name:"if",hash:{},fn:this.program(14,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</td>\n</tr>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.allowances:depth0,{name:"each",hash:{},fn:this.program(16,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")},14:function(depth0,helpers,partials,data){return'\t\t<a href="javascript:void(0)" class="btn-sm btnPreview">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Preview Balance Changes",{name:"s",hash:{},data:data}))+"</a>\n"},16:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'<tr data-key="'+this.escapeExpression((helper=(helper=helpers.key||data&&data.key)!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'" '+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.computeFromHere:stack1,{name:"if",hash:{},fn:this.program(17,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t<td>\n"+((stack1=(helpers.ifall||depth0&&depth0.ifall||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.computeFromHere:stack1,depths[1]!=null?depths[1].canPreview:depths[1],{name:"ifall",hash:{},fn:this.program(19,data,0,blockParams,depths),inverse:this.program(21,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t</td>\n\t<td>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.name:stack1,depth0))+"</td>\n\t<td>"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.newAllowance:depth0,{name:"if",hash:{},fn:this.program(23,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t</td>\n\t<td class="text-danger">&nbsp;</td>\n</tr>\n'},17:function(depth0,helpers,partials,data){return'class="trComputeFromHere"'},19:function(depth0,helpers,partials,data){return'\t\t<div class="pull-right">\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Adjust from",{name:"s",hash:{},data:data}))+'&nbsp;\n\t\t\t<i class="glyphicon glyphicon-chevron-right"></i>\n\t\t</div>\n\t\t<div class="clearfix"></div>\n'},21:function(depth0,helpers,partials,data){return"\t\t\t&nbsp;\n"},23:function(depth0,helpers,partials,data){var stack1;return"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.allowance:depth0)!=null?stack1.name:stack1,(stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.name:stack1,{name:"ifequal",hash:{},fn:this.program(24,data,0),inverse:this.program(26,data,0),data:data}))!=null?stack1:"")},24:function(depth0,helpers,partials,data){return""},26:function(depth0,helpers,partials,data){var stack1;return'\t\t\t<p class="text-danger">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.newAllowance:depth0)!=null?stack1.name:stack1,depth0))+"</p>\n"},28:function(depth0,helpers,partials,data){var stack1;return"<tr>\n"+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.team:depth0,{name:"unless",hash:{},fn:this.program(29,data,0),inverse:this.program(31,data,0),data:data}))!=null?stack1:"")+"</tr>\n"},29:function(depth0,helpers,partials,data){return'\t\t<td colspan="4" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please select a Team.",{name:"s",hash:{},data:data}))+"</td>\n"},31:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0!=null?depth0.leaveProfile:depth0,{name:"unless",hash:{},fn:this.program(32,data,0),inverse:this.program(34,data,0),data:data}))!=null?stack1:""},32:function(depth0,helpers,partials,data){return'\t\t<td colspan="4" class="no-results">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Please select a Leave Profile.",{name:"s",hash:{},data:data}))+"</td>\n"},34:function(depth0,helpers,partials,data){var stack1;return'\t<td colspan="4" class="no-results">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No allowances in the <strong>{team_name}</strong> Team for the <strong>{leave_profile_name}</strong> Leave Profile require adjustments.",{name:"s",hash:{leave_profile_name:(stack1=depth0!=null?depth0.leaveProfile:depth0)!=null?stack1.name:stack1,team_name:(stack1=depth0!=null?depth0.team:depth0)!=null?stack1.name:stack1},data:data}))+"\n\t</td>\n\t"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<div class="adjust-allowance-range-view">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.leaveProfile:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<table class="table table-bordered table-shaded table-condensed">\n<thead>\n\t<tr>\n\t\t<th class="w300">\n\t\t\t<label class="checkbox-inline">\n\t\t\t\t<input type="checkbox" name="allEmployees"\n\t\t\t\t'+((stack1=helpers.unless.call(depth0,depth0!=null?depth0.employees:depth0,{name:"unless",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t</th>\n\t\t<th class="w250">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Current Allowance Range",{name:"s",hash:{},data:data}))+'</th>\n\t\t<th class="w250">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"New Allowance Range",{name:"s",hash:{},data:data}))+"</th>\n\t\t<th>&nbsp;</th>\n\t</tr>\n</thead>\n<tbody>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.loading:depth0,{name:"if",hash:{},fn:this.program(10,data,0,blockParams,depths),inverse:this.program(12,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\n</tbody>\n</table>\n\n</div>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/templates/leave/AdjustAllowanceRange",t);return t});define("admin/views/leave/AdjustAllowanceRange",["jquery","appogee","enums/MonthEnum","admin/dialogs/AdjustRangePreviewDialog","hbs!admin/templates/leave/AdjustAllowanceRange"],function($,appogee,Month,AdjustRangePreviewDialog,tmpl){"use strict";var S,R={nfySaving:"Saving ...",nfySaved:"Save Successful",errorNoTeamTitle:"No Team Selected",errorNoTeamMsg:"Please select a Team.",errorNoLeaveProfileTitle:"No Leave Profile Selected",errorNoLeaveProfileMsg:"Please select a Leave Profile.",errorNoComputedFromYearTitle:"No Year To Adjust From Selected",errorNoComputedFromYearMsg:"Please select from which year you wish to start adjusting the allowance range.",errorNoEmployeeSelectedTitle:"No Employee Selected",errorNoEmployeeSelectedMsg:"Please select the employee you wish to adjust allowance range for."};var View=function($container){S=appogee.getStrings("AdjustAllowanceRange",R);this.$container=$container;this.computeFromYear=null;this.team=null;this.leaveProfile=null;this.loading=false;this.onSavingHandlers=[];this.onSaveCompleteHandlers=[]};View.prototype.onSave=function(handler){this.onSavingHandlers.push(handler)};View.prototype.onSaveComplete=function(handler){this.onSaveCompleteHandlers.push(handler)};View.prototype.setTeam=function(team){this.team=team;if(this.team){this.team.activeLeaveYears=_.sortBy(this.team.activeLeaveYears,function(year){return Math.min(year)})}};View.prototype.setLeaveProfile=function(leaveProfile){this.leaveProfile=leaveProfile};View.prototype.fetch=function(){var _this173=this;if(!this.team||!this.leaveProfile){this.render();return}this.loading=true;this.render();var url="/admin/adjust-allowance-range/xhr/fetch?";url+="teamKey={0}&leaveProfileKey={1}&";url+="computeFromYear={2}";url=url.format(this.team.key,this.leaveProfile.key,this.computeFromYear);appogee.xhr.get(url,function(response){_this173.loading=false;_this173.employees=response.employees;if(_this173.employees){_this173.employees.forEach(function(employee){employee.canPreview=false;employee.allowances.forEach(function(allowanceDiff){var start=new Date(allowanceDiff.allowance.startDate);var end=new Date(allowanceDiff.allowance.endDate);if(start.getFullYear()==_this173.computeFromYear){allowanceDiff.allowance.computeFromHere=true}if(!_.isEmpty(allowanceDiff.newAllowance)){var newStart=new Date(allowanceDiff.newAllowance.startDate);var newEnd=new Date(allowanceDiff.newAllowance.endDate);if(newEnd.getMonth()!=end.getMonth()){employee.canPreview=true}}})})}_this173.render()})};View.prototype.render=function(){var _this174=this;if(this.team){var currentYear=(new Date).getFullYear();if(this.team.activeLeaveYears.indexOf(currentYear)<0){this.team.activeLeaveYears.push(currentYear);this.team.activeLeaveYears=_.sortBy(this.team.activeLeaveYears,function(year){return Math.min(year)})}
if(!this.computeFromYear||this.team.activeLeaveYears.indexOf(parseInt(this.computeFromYear))<0){this.computeFromYear=currentYear}}var startMonth="";if(this.leaveProfile){startMonth=Month.toString(this.leaveProfile.startMonth)}var data={computeFromYear:this.computeFromYear,team:this.team,leaveProfile:this.leaveProfile,startMonth:startMonth,employees:this.employees,loading:this.loading};this.$container.html(tmpl(data));this.$container.find('input[type="checkbox"][name="allEmployees"]').change(function(e){var $this=$(e.currentTarget);if($this.is(":checked")){_this174.employees.forEach(function(employee){if(employee.canPreview){var $tableRow=_this174.$container.find('tr[data-key="'+employee.key+'"]');$tableRow.find('input[type="checkbox"][name="employee"]').prop("checked","checked")}})}else{_this174.$container.find('input[type="checkbox"][name="employee"]').prop("checked",false)}});this.$container.find(".btnPreview").click(function(e){var $this=$(e.currentTarget);var employeeKey=$this.closest("tr").data("key");_this174.showPreview(employeeKey)});this.$container.find("#computeFromYearDdl").change(function(e){var $this=$(e.currentTarget);_this174.computeFromYear=$this.val();_this174.fetch()})};View.prototype.getAllowance=function(key){for(var e=0;e<this.employees.length;e++){for(var a=0;a<this.employees[e].allowances.length;a++){var allowance=this.employees[e].allowances[a];if(allowance.key==key){return allowance}}}};View.prototype.showPreview=function(employeeKey){var _this175=this;var url="/admin/adjust-allowance-range/xhr/preview?";url+="employeeKey={0}&";url+="teamKey={1}&leaveProfileKey={2}&";url+="computeFromYear={3}";url=url.format(employeeKey,this.team.key,this.leaveProfile.key,this.computeFromYear);var notifier=appogee.notify(S.nfyLoadingPreview);appogee.xhr.get(url,function(response){var dlg=new AdjustRangePreviewDialog(response.employee,_this175.computeFromYear);dlg.show();dlg.onCommitChanges(function(){_this175.save(employeeKey)})})};View.prototype.save=function(employeeKey){var _this176=this;if(!this.computeFromYear){appogee.valert(S.errorNoComputeFromYear);return}if(!this.leaveProfile){appogee.valert(S.errorNoLeaveProfile);return}if(!employeeKey){appogee.valert(S.errorNoEmployeeSelected);return}var url="/admin/adjust-allowance-range/xhr/save";var body={teamKey:this.team.key,leaveProfileKey:this.leaveProfile.key,employeesKeys:[employeeKey],computeFromYear:this.computeFromYear};var notifier=appogee.notify(S.nfySaving);this.onSavingHandlers.forEach(function(h){return h()});appogee.xhr.post(url,body,function(){_this176.onSaveCompleteHandlers.forEach(function(h){return h()});notifier.success(S.nfySaved)},{artificialDelay:true})};View.prototype.saveAll=function(){var _this177=this;if(!this.computeFromYear){appogee.valert(S.errorNoComputeFromYear);return}if(!this.team){appogee.valert(S.errorNoTeam);return}if(!this.leaveProfile){appogee.valert(S.errorNoLeaveProfile);return}var selectedEmployeesKeys=[];this.$container.find('input[type="checkbox"][name="employee"]:checked').each(function(){selectedEmployeesKeys.push($(this).val())});if(selectedEmployeesKeys.length<1){appogee.valert(S.errorNoEmployeeSelected);return}var url="/admin/adjust-allowance-range/xhr/save";var body={teamKey:this.team.key,leaveProfileKey:this.leaveProfile.key,employeesKeys:selectedEmployeesKeys,computeFromYear:this.computeFromYear};var notifier=appogee.notify(S.nfySaving);this.onSavingHandlers.forEach(function(h){return h()});appogee.xhr.post(url,body,function(response){_this177.onSaveCompleteHandlers.forEach(function(h){return h()});notifier.success(S.nfySaved)},{artificialDelay:true})};return View});define("hbs!admin/dialogs/tmpl/AboutAdjustAllowanceRange",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){return'<div class="dlg-about">\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Adjust Allowance Range",{name:"s",hash:{},data:data}))+"</h4>\n\t\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This tool is intended for use by an administrator managing a change to the start month of a Leave allowance year by either extending or shrinking an existing allowance year.\n\t\tThere are 2 steps involved in this, confirming the changes to the allowance period for impacted staff and then adjusting the allowance for the period change.\n\t\tThis tool covers the first part, after which you will move to the Allowance Calculator to revise staff allowances appropriately.",{name:"s",hash:{},data:data}))+"\n\t</p>\n\t\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,'To use this tool, select a Team and Leave Profile from the drop down list at the top.\n\t\tReview the potential changes and use the checkbox selectors in the first column to indicate which staff you want updated\n\t\t(the top left checkbox selects all staff) and then click the button labelled "Confirm Changes" to action them.\n\t\tOnce clicked the changed periods will be committed for the specified users and a pop up will appear asking you to select what\n\t\tyou want to do next with a choice between "Adjust another team/leave profile" and "Proceed to allowance calculator".\n\t\tYou will need to repeat this process for each Team/Leave profile impacted by the leave allowance period change and then process to the\n\t\tAllowance Calculator tool which will help you pro-rate allowances for these revised periods.',{name:"s",hash:{},data:data}))+'\n\t</p>\n\t\n\t<div class="buttons">\n\t\t<label>\n\t\t\t<input type="checkbox" checked="checked" />\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Don't show me this message again",{name:"s",hash:{},data:data}))+'\n\t\t</label>\n\t\t\n\t\t<div style="padding: 10px;">\n\t\t\t<button class="btn btn-sm btn-default">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Close",{name:"s",hash:{},data:data}))+"\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n</div>"},useData:true});Handlebars.registerPartial("admin/dialogs/tmpl/AboutAdjustAllowanceRange",t);return t});define("admin/leave/adjust_allowance_range",["jquery","appogee","admin/org/views/OrgSelector","admin/dialogs/AboutDialog","admin/views/leave/AdjustAllowanceRange","hbs!admin/dialogs/tmpl/AboutAdjustAllowanceRange"],function($,appogee,OrgSelector,AboutDialog,AdjustAllowanceRange,tmplAbout){"use strict";var COOKIE_ABOUT="aaram";return{getLoadUrls:function(){var teamsUrl="/teams?aduKey={0}".format(this.defaultAduKey);var leaveProfilesUrl="/leave-profiles?projection=summary&aduKey={0}&aduTraverse=up".format(this.defaultAduKey);return{api:[teamsUrl,leaveProfilesUrl]}},initialize:function(){var _this178=this;this.defaultAduKey=appogee.util.getUrlParam("aduKey");this.defaultTeamKey=appogee.util.getUrlParam("teamKey");this.defaultLeaveProfileKey=appogee.util.getUrlParam("leaveProfileKey");if(!this.defaultAduKey){this.defaultAduKey=this.currentUser.getActiveAduKey()}this.view=new AdjustAllowanceRange($("#adjustAllowanceRangeContainer"));this.view.render();this.view.onSave(function(){_this178.orgSelector.disableControls();$("#btnSaveAll").attr("disabled",true)});this.view.onSaveComplete(function(){_this178.orgSelector.enableControls();$("#btnSaveAll").attr("disabled",false);var $dlg=$("#dlgSaveCallback");_this178.saveCallbackDlg=new appogee.Dialog($dlg);_this178.saveCallbackDlg.clearButtons();_this178.saveCallbackDlg.show();$dlg.find("#btnClose").click(function(){_this178.saveCallbackDlg.hide();_this178.view.fetch()});$dlg.find("#btnRedirectToCalculator").click(function(){var url="/admin/allowance-calculator?aduKey={0}&teamKey={1}&leaveProfileKey={2}";url=url.format(_this178.orgSelector.getSelectedAdu().key,_this178.orgSelector.getSelectedTeam().key,_this178.orgSelector.getSelectedLeaveProfile().key);location.href=url})});if(!appogee.cookies.get(COOKIE_ABOUT)){this.showAbout()}$("#btnAbout").click(function(){_this178.showAbout()});$("#btnSaveAll").click(function(){_this178.view.saveAll()})},onLoad:function(teams,leaveProfiles){var _this179=this;this.teams=teams.items;this.leaveProfiles=leaveProfiles.items;this.orgSelector=new OrgSelector($("#orgSelector"),{teamsProjection:"default",teams:this.teams,showVTeams:false,leaveProfiles:this.leaveProfiles,showLabels:true,showLeaveProfiles:true,useCookies:false,leaveProfileAutoSelect:false,teamAutoSelect:false,aduDefaultKey:this.defaultAduKey,teamDefaultKey:this.defaultTeamKey,leaveProfileDefaultKey:this.defaultLeaveProfileKey});this.orgSelector.onTeamChange(function(){return _this179.fetch()});this.orgSelector.onLeaveProfileChange(function(){return _this179.fetch()});this.orgSelector.render()},fetch:function(){var team=this.orgSelector.getSelectedTeam();var leaveProfile=this.orgSelector.getSelectedLeaveProfile();this.view.setTeam(team);this.view.setLeaveProfile(leaveProfile);this.view.fetch()},showAbout:function(){var dlg=new AboutDialog(tmplAbout,COOKIE_ABOUT);dlg.show()}}});define("hbs!admin/templates/leave/BulkAdjustAllowanceWizard",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/if_gt","templates/helpers/s","templates/helpers/formatDate"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return"selected"},3:function(depth0,helpers,partials,data){return"completed"},5:function(depth0,helpers,partials,data){var stack1;return'<div class="alert alert-info">\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Export Employee Allowances",{name:"s",hash:{},data:data}))+"</h4>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Use the form below to select which Employees allowances you wish to change.\n\tOnce done, click Export and you will be taken to the next step where you can download a CSV and proceed with the Wizard.",{name:"s",hash:{},data:data}))+"</p>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Note: Any exports that are not imported within 7 days will automatically expire.",{name:"s",hash:{},data:data}))+"</p>\n</div>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adus:depth0,{name:"if",hash:{},fn:this.program(6,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t <i class="glyphicon glyphicon-question-sign context-help" data-context-help="team"></i>\n\t\t '+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Team",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<select id="ddlTeam" class="form-control input-sm"></select>\n\t</div>\n</div>\n\n<div class="wizard_buttons">\n\t<button type="button" class="btn btn-primary btn btnNext" id="btnExport" disabled>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Export",{name:"s",hash:{},data:data}))+' <i class="glyphicon glyphicon-circle-arrow-down"></i>\n\t</button>\n</div>\n'},6:function(depth0,helpers,partials,data){return'\n<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="division"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Division",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<select id="ddlAdu" class="form-control input-sm"></select>\n\t\t\n\t\t<div id="teamFilterNote">\n\t\t\t<div class="checkbox">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="chkIncludeLowerAdus" />\n\t\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Include lower divisions employees in export?",{name:"s",hash:{},data:data}))+"\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n"},8:function(depth0,helpers,partials,data){var stack1;return'<div class="alert alert-info">\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import Employee Allowances",{name:"s",hash:{},data:data}))+"</h4>\n\t<p>\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"On this step you can download the allowances that where exported in step 1.\n\t\t\t If this data is no longer relevant then you can restart this Wizard by clicking restart.",{name:"s",hash:{},data:data}))+"\n\t</p>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Note: The provided Audit Comments will appear in the Audit logs for any Employees that will be affected by this Adjustment.",{name:"s",hash:{},data:data}))+"</p>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Note: If an employees allowance has changed since being exported in step 1, then you will need to reset this process.",{name:"s",hash:{},data:data}))+'</p>\n</div>\n\n<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t <i class="glyphicon glyphicon-question-sign context-help" data-context-help="download"></i>\n\t\t '+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Download CSV",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<a href="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.bulkExport:depth0)!=null?stack1.url:stack1,depth0))+'" class="btn btn-sm btn-primary" id="btnDownload">Download Allowances</a>\n\t\t<p>Export initiated on '+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.bulkExport:depth0)!=null?stack1.created:stack1,{name:"formatDate",hash:{},data:data}))+'</p>\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t <i class="glyphicon glyphicon-question-sign context-help" data-context-help="upload"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select File",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<div class="input-group">\n\t\t\t<span class="btn btn-default btn-sm btn-file input-group-addon">\n    \t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Browse",{name:"s",hash:{},data:data}))+'&hellip; <input type="file" name="file" id="fileInput" />\n\t\t\t</span>\t\n\t\t\t<input type="text" class="form-control input-sm" readonly="readonly" />\n\t\t</div>\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t<i class="glyphicon glyphicon-question-sign context-help" data-context-help="comments"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Audit Comments",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<textarea class="form-control input-sm" id="txtComments"></textarea>\n\t</div>\n</div>\n\n<div class="wizard_buttons">\n\t<button type="button" class="btn btn-danger btnBack" id="btnReset">\n\t\t<i class="glyphicon glyphicon-refresh"></i>\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reset",{name:"s",hash:{},data:data}))+'\n\t</button>\n\t<button type="button" class="btn btn-primary btn btnNext" id="btnImport">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import",{name:"s",hash:{},data:data}))+' <i class="glyphicon glyphicon-circle-arrow-up"></i>\n\t</button>\n</div>\n'},10:function(depth0,helpers,partials,data){return' <div class="alert alert-success">\n \t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowances Imported Successfully",{name:"s",hash:{},data:data}))+"</h4>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"The allowances have now been updated.",{name:"s",hash:{},data:data}))+'</p>\n\t<div class="text-right">\n\t\t</div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<div class="form-horizontal">\n\n<div class="wizard_header hidden-xs">\n\t<div class="tab col-sm-4 '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,1,{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,{name:"if_gt",hash:{compare:1},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">1</span>\n\t\t<span class="title">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Export Allowances",{name:"s",hash:{},data:data}))+'</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t\t<i class="glyphicon glyphicon-play"></i>\n\t</div>\n\t<div class="tab col-sm-4 '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,2,{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,{name:"if_gt",hash:{compare:2},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">2</span>\n\t\t<span class="title">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Import Allowances",{name:"s",hash:{},data:data}))+'</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t\t<i class="glyphicon glyphicon-play"></i>\n\t</div>\n\t<div class="tab last col-sm-4 '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,3,{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,{name:"if_gt",hash:{compare:3},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'">\n\t\t<span class="num">3</span>\n\t\t<span class="title">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Complete",{name:"s",hash:{},data:data}))+'</span>\n\t\t<i class="glyphicon glyphicon-ok-sign"></i>\n\t</div>\n\t<div class="clearfix"></div>\n</div>\n\n'+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,1,{name:"ifequal",hash:{},fn:this.program(5,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,2,{name:"ifequal",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.page:depth0,3,{name:"ifequal",hash:{},fn:this.program(10,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n</div>"},useData:true});Handlebars.registerPartial("admin/templates/leave/BulkAdjustAllowanceWizard",t);return t});define("admin/views/leave/BulkAdjustAllowanceWizard",["jquery","underscore","appogee","hbs!admin/templates/leave/BulkAdjustAllowanceWizard","jquery.appogee.contextHelp"],function($,_,appogee,tmpl){"use strict";var S,R={virtualTeams:"Virtual Teams",teams:"Teams",selectTeam:"- Select Team -",allTeams:"All Teams",nfyExporting:"Performing Export ...",nfyImporting:"Performing Import ...",nfyImported:"Imported",alertExportFailedTitle:"Export Failed",alertImportFailedTitle:"Import Failed",alertNoFiles:"Please Select a File",alertInvalidFile:"Please select a valid CSV file",noComments:"Please provide Audit Comments to support the changes.",confirmResetTitle:"Reset Process",confirmResetMsg1:"This will revert this process to the first page. Any existing downloaded files will be invalid.",confirmResetMsg2:"Do you wish to continue?",errDuplicateImport:"Export Already Processing",errHeader:"incorrect_header",errBalanceChanged:"Employee Allowance has changed since export; please reset and try again.",errNegativeBalance:"This change would result in this employee having a negative balance.",errTeamKey:"The Team  provided was invalid, please reset and try again.",errInvalidInput:"One or more values in the CSV provided where invalid.",errEmployeeNotFound:"The Employee was not found in the original export.",errAllowanceNotFound:"The allowance for the employee was not found.",errNothingChanged:"No changes have been detected on the CSV, please see the About section for more details on how to use this tool.",errCannotEdit:"You do not ave the correct accsess rights for editing this employee.",errNoExport:"No valid Export was found. Please note if an export fails you need to reset before trying again."};var Status={New:"new",Exporting:"exporting",PendingImport:"pending_import",Importing:"importing",Complete:"complete",Aborted:"aborted",Failed:"failed"};var Wizard=function($container,bulkExport,teams){S=appogee.getStrings("AdjustAllowanceWizard",R);this.$container=$container;this.bulkExport=bulkExport;this.adus=appogee.getAdus({root:"self"});this.teams=teams;this.currentUser=appogee.getCurrentUser();this.adu=_.findWhere(this.adus,{key:this.currentUser.getActiveAduKey()});this.page=1;if(this.bulkExport){this.page=2}this.failureErrorMessageMap={incorrect_header:S.errHeader,balance_changed:S.errBalanceChanged,negitive_balance:S.errNegativeBalance,invalid_team_key:S.errTeamKey,type_error:S.errInvalidInput,nothing_changed:S.errNothingChanged,employee_not_found:S.errAllowanceNotFound,allowance_not_found:S.errAllowanceNotFound,cannot_edit_employee_403:S.errCannotEdit,import_already_processing:S.errDuplicateImport}};Wizard.prototype.render=function(){var adus=this.adus.length>1;var data={page:this.page,adus:adus,bulkExport:this.bulkExport};this.$container.html(tmpl(data));this.$container.find(".context-help").contextHelp();if(this.page==1){this.initializePage1()}if(this.page==2){this.initializePage2()}if(this.page==3){this.initializePage3()}};Wizard.prototype.initializePage1=function(){var _this180=this;$("#ddlAdu").change(function(e){_this180.adu=_.findWhere(_this180.adus,{key:e.currentTarget.value});_this180.fetchTeams()});$("#ddlTeam").change(function(){_this180.toggleCheckBox();_this180.enableExportBtn()});$("#btnExport").click(function(){_this180.doExport()});this.toggleCheckBox()};Wizard.prototype.initializePage2=function(){var _this181=this;this.initFileUpload();$("#btnImport").click(function(){_this181.doImport()});$("#btnReset").click(function(){_this181.resetExport()})};Wizard.prototype.initializePage3=function(){var _this182=this;$("#btnStartOver").click(function(){_this182.goToPage(1)})};Wizard.prototype.toggleCheckBox=function(){var team=$("#ddlTeam").val();$("#teamFilterNote").toggle(team=="all")};Wizard.prototype.enableExportBtn=function(){var disable=true;var teamKey=$("#ddlTeam").val();if(teamKey){disable=false}$("#btnExport").prop("disabled",disable)};Wizard.prototype.fetchTeams=function(){var _this183=this;var aduKey=$("#ddlAdu").val();var url="/teams?aduKey={0}&projection=basic&includeVirtualTeams=true".format(aduKey);appogee.api.get(url,function(response){_this183.teams=response.items;_this183.populateTeams()})};Wizard.prototype.getExport=function(page){var _this184=this;var url="/admin/adjust-allowances/xhr/get_current_export";appogee.xhr.get(url,function(response){_this184.bulkExport=response.bulkExport;_this184.goToPage(page)})};Wizard.prototype.getErrMsg=function(bulkExport){var msg=bulkExport.failureReason;if(this.failureErrorMessageMap.hasOwnProperty(bulkExport.failureReason)){msg=this.failureErrorMessageMap[bulkExport.failureReason]}if(bulkExport.failureEmail){msg="{0}: {1}".format(bulkExport.failureEmail,msg)}return msg};Wizard.prototype.populateAdus=function(){var options={keyName:"key",valueName:"path",defaultValue:"",default:this.adu.key};appogee.ui.populateDropdown($("#ddlAdu"),this.adus,options)};Wizard.prototype.populateTeams=function(){this.teams.forEach(function(t){if(t.type=="vteam"){t.typeString=S.virtualTeams}else{t.typeString=S.teams}});var options={keyName:"key",valueName:"name",defaultValue:S.selectTeam,groupBy:"typeString",groupBySingle:false};appogee.ui.populateDropdown($("#ddlTeam"),this.teams,options);if(this.currentUser.isHrManager()){var newOption=$('<option value="all">'+S.allTeams+"</option>");newOption.insertAfter('#ddlTeam option[value=""]')}};Wizard.prototype.doExport=function(){var _this185=this;var me=this;var aduKey=$("#ddlAdu").val();var includeLowerAdus=$("#chkIncludeLowerAdus").is(":checked");var teamKey=$("#ddlTeam").val();if(!aduKey){aduKey=null}var body={aduKey:aduKey,teamKey:teamKey,includeLowerAdus:includeLowerAdus};var notifier=appogee.notify(S.nfyExporting);appogee.xhr.post("/admin/adjust-allowances/xhr/do_export",body,function(response){if(response.success){$("#btnExport").prop("disabled",true);_this185.pollForUpdate(response.key,"export",[Status.PendingImport],function(bulkExport){notifier.hide();me.bulkExport=bulkExport;me.goToPage(2)})}else{notifier.hide();var message=me.getErrMsg(response);appogee.valert(S.alertExportFailedTitle,message)}},{artificialDelay:true})};Wizard.prototype.initFileUpload=function(){$(document).on("change",".btn-file :file",function(){var numFiles=$(this).get(0).files?$(this).get(0).files.length:1;var label=$(this).val().replace(/\\/g,"/").replace(/.*\//,"");$(this).trigger("fileselect",[numFiles,label])});$(function(){$(".btn-file :file").on("fileselect",function(event,numFiles,label){var input=$(this).parents(".input-group").find(":text");var log=numFiles>1?numFiles+" files selected":label;if(input.length){input.val(log)}})})};Wizard.prototype.resetExport=function(){var _this186=this;appogee.confirm(S.confirmReset,function(){var key=_this186.bulkExport.key;var url="/admin/adjust-allowances/xhr/abort_export?key={0}".format(key);appogee.xhr.get(url,function(){_this186.bulkExport.key=null;_this186.goToPage(1)})})};Wizard.prototype.doImport=function(){var _this187=this;var me=this;var file=null;var fileInput=document.getElementById("fileInput");var comments=$("#txtComments").val();if(fileInput.files&&fileInput.files.length==1){file=fileInput.files[0]}else{appogee.valert(S.alertNoFiles);return}if(!appogee.validation.validateCSVFilename(file.name)){appogee.valert(S.alertInvalidFile);return}if(!comments){appogee.valert(S.noComments);return}$("#btnImport").attr("disabled",true);$("#btnReset").attr("disabled",true);var fd=new FormData;fd.append("file",file);fd.append("comments",comments);fd.append("filename",file.name);fd.append("key",this.bulkExport.key);fd.append("_csrf_token",appogee.getCsrfToken());var notifier=appogee.notify(S.nfyImporting);var xhr=new XMLHttpRequest;var url="/admin/adjust-allowances/xhr/do_import";xhr.onload=function(){var response=JSON.parse(xhr.responseText);if(response.success){var statuses=[Status.Complete,Status.Failed,Status.PendingImport];setTimeout(_this187.pollForUpdate(response.key,"import",statuses,function(bulkExport){if(bulkExport.status==Status.Complete){notifier.success(S.nfyImported);_this187.goToPage(3)}else if(bulkExport.status==Status.Failed){notifier.hide();var message=me.getErrMsg(bulkExport);appogee.valert(S.alertImportFailedTitle,message)}else if(bulkExport.status==Status.PendingImport){notifier.hide();var message=me.getErrMsg(bulkExport);appogee.valert(S.alertImportFailedTitle,message);$("#btnImport").attr("disabled",false);$("#btnReset").attr("disabled",false)}}),1e3)}else{notifier.hide();var message=me.getErrMsg(response);appogee.valert(S.alertExportFailedTitle,message)}};xhr.open("POST",url);xhr.send(fd)};Wizard.prototype.pollForUpdate=function(key,use,statuses,callback){(function doPoll(){var url="/admin/adjust-allowances/xhr/get_export?key={0}".format(key);$.get(url,function(response){if(statuses.indexOf(response.bulkExport.status)>-1){if(use=="import"){if(response.bulkExport.status=="pending_import"){if(response.bulkExport.failureReason!=null){callback(response.bulkExport);return}}else{callback(response.bulkExport);return}}else{callback(response.bulkExport);return}}setTimeout(doPoll,2e3)})})()};Wizard.prototype.goToPage=function(page){this.page=page;this.render();if(page==1){this.populateTeams();this.populateAdus()}};return Wizard});define("hbs!admin/dialogs/tmpl/AboutBulkAllowanceEditor",["hbs/handlebars","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){return'<div class="dlg-about">\n\t<h4>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Bulk Adjust Allowances",{name:"s",hash:{},data:data}))+"</h4>\n\t\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee allowances can be found and adjusted individually under",{name:"s",hash:{},data:data}))+'</p>\n\t<div class="text-center"><p>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Org Admin",{name:"s",hash:{},data:data}))+" > "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee",{name:"s",hash:{},data:data}))+" > "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Select Employee",{name:"s",hash:{},data:data}))+" > "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave",{name:"s",hash:{},data:data}))+" > "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Allowances.",{name:"s",hash:{},data:data}))+"</p></div>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Users with the HR Manager role can edit the allowances computed in the system to manually adjust allowances for each of Leave, Sick, Custom 1 and Custom 2 allowances, where appropriate.\n\tAn audit trail is kept of all changes made to ensure there is a track of who made such changes, when and why.",{name:"s",hash:{},data:data}))+"</p>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"There are various scenarios where a bulk adjustment of these allowances needs to be made as they may be time consuming if undertaken on an individual basis.\n\tAn example would be when onboarding a whole new team part way through a leave year, or applying a one time change in allowances\n\teg for an impromptu company holiday declared for one office location. ",{name:"s",hash:{},data:data}))+"</p>\n\t<p>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"This tool allows users with the HR Manager role to make such manual allowance adjustments for selected users filtered (eg)\n\tby Team if desired in bulk via a csv upload, using a downloadable template as a start point. A required column in the CSV must\n\tcover the reason for change which will be shown in the audit log.",{name:"s",hash:{},data:data}))+'</p>\n\n\t<div class="buttons">\n\t\t<label>\n\t\t\t<input type="checkbox" checked="checked" />\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Don't show me this message again",{name:"s",hash:{},data:data
}))+'\n\t\t</label>\n\t\t\n\t\t<div style="padding: 10px;">\n\t\t\t<button class="btn btn-sm btn-default">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Close",{name:"s",hash:{},data:data}))+"\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>"},useData:true});Handlebars.registerPartial("admin/dialogs/tmpl/AboutBulkAllowanceEditor",t);return t});define("admin/dialogs/AboutBulkAllowanceEditor",["jquery","underscore","appogee","hbs!admin/dialogs/tmpl/AboutBulkAllowanceEditor"],function($,_,appogee,tmpl){"use strict";var COOKIE_ABOUT="abae";var $dlg=null;var Dialog=function(){if($dlg===null){$dlg=$("<div />").addClass("dialog")}};Dialog.prototype.render=function(){var _this188=this;$dlg.html(tmpl());$dlg.find("button").click(function(){var dontShowAgain=$dlg.find('input[type="checkbox"]').prop("checked");if(dontShowAgain){appogee.cookies.set(COOKIE_ABOUT,1,365)}else{appogee.cookies.set(COOKIE_ABOUT,1,0)}_this188.dlg.hide()})};Dialog.prototype.show=function(){this.dlg=new appogee.Dialog($dlg);this.dlg.clearButtons();this.render();this.dlg.show()};return Dialog});define("admin/leave/bulk_adjust_allowances",["jquery","underscore","bootstrap","appogee","admin/views/leave/BulkAdjustAllowanceWizard","admin/dialogs/AboutBulkAllowanceEditor"],function($,_,bootstrap,appogee,BulkAdjustAllowanceWizard,AboutBulkAllowanceEditor){"use strict";var COOKIE_ABOUT="abae";return{contextHelp:true,getLoadUrls:function(){var teamsUrl="/teams?aduKey={0}&projection=basic&includeVirtualTeams=true".format(this.adu.key);var bulkExport="/admin/adjust-allowances/xhr/get_current_export";return{api:[teamsUrl],app:[bulkExport]}},onLoad:function(bulkExport,teams){this.bulkExport=bulkExport.bulkExport;this.teams=teams.items;this.view=new BulkAdjustAllowanceWizard($("#wizardContainer"),this.bulkExport,this.teams);this.view.render();this.view.populateTeams();this.view.populateAdus()},initialize:function(){var _this189=this;this.adus=appogee.getAdus({root:"self"});this.adu=_.findWhere(this.adus,{key:this.currentUser.getActiveAduKey()});if(!appogee.cookies.get(COOKIE_ABOUT)){this.showAbout()}$("#btnAbout").click(function(){_this189.showAbout()})},showAbout:function(){var dlg=new AboutBulkAllowanceEditor;dlg.show()}}});define("hbs!mgmt/leave/tmpl/Backfill",["hbs/handlebars","templates/helpers/s","templates/helpers/ifany","templates/helpers/ifanyequal","templates/helpers/ifequal","templates/helpers/if_gt","templates/helpers/formatDate","templates/helpers/round","templates/helpers/ifnotequal"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'disabled="disabled"'},3:function(depth0,helpers,partials,data){return'\t\t\t\t\t<button class="btn btn-sm btn-default" type="button" id="btnChangeEmployee">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Change Employee",{name:"s",hash:{},data:data}))+"</button>\n"},5:function(depth0,helpers,partials,data){return'\t\t\t\t\t<button class="btn btn-sm btn-default" type="button" id="btnSetEmployee">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"GO",{name:"s",hash:{},data:data}))+"</button>\n"},7:function(depth0,helpers,partials,data){var stack1;return"\n"+((stack1=(helpers.ifany||depth0&&depth0.ifany||helpers.helperMissing).call(depth0,(stack1=(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.sick:stack1)!=null?stack1.enabled:stack1,(stack1=(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.toil:stack1)!=null?stack1.enabled:stack1,{name:"ifany",hash:{},fn:this.program(8,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.type:stack1,"sick",{name:"ifequal",hash:{},fn:this.program(15,data,0),inverse:this.program(18,data,0),data:data}))!=null?stack1:"")+'\n<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Date Range",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<div class="form-inline">\n\t\t\t<input type="text" class="form-control input-sm txtStartDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.startDate:stack1,{name:"formatDate",hash:{},data:data}))+'" /> - \n\t\t\t<input type="text" class="form-control input-sm txtEndDate" value="'+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.endDate:stack1,{name:"formatDate",hash:{},data:data}))+'" />\n\t\t</div>\n\t\t\n\t\t<div class="help-block">\n\t\t\t<a href="javascript: void(0);" id="btnToggleRequetsCalendar">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Advanced Options",{name:"s",hash:{},data:data}))+"</a>\n\t\t</div>\n\t</div>\n</div>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showRequestCalendar:depth0,{name:"if",hash:{},fn:this.program(23,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Working Days / Hours",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<div class="form-inline">\n\t\t\t<div class="form-group">\n\t\t\t\t<div class="col-xs-3 col-sm-6 col-lg-5">\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<input type="text" class="form-control input-sm hd hour txtHours" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedHours:depth0,{name:"round",hash:{},data:data}))+'" />\n\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-3 col-sm-6 col-lg-5">\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<input type="text" class="form-control input-sm hd day txtDays" value="'+this.escapeExpression((helpers.round||depth0&&depth0.round||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestedDays:depth0,{name:"round",hash:{},data:data}))+'" />\n\t\t\t\t\t\t<span class="input-group-addon input-sm">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+'</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Reason for Leave",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<textarea id="txtReason" class="form-control input-sm">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.request:depth0)!=null?stack1.reason:stack1,depth0))+"</textarea>\n\t</div>\n</div>\n\n"+((stack1=(helpers.ifnotequal||depth0&&depth0.ifnotequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.type:stack1,"toil",{name:"ifnotequal",hash:{},fn:this.program(25,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showXero:depth0,{name:"if",hash:{},fn:this.program(30,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n<div class="row">\n\t<div class="controls col-sm-offset-4 col-md-offset-3 col-lg-offset-2  col-sm-5 col-md-4 text-right">\n\t\t<button type="button" class="btn btn-sm btn-primary" id="btnSave">\n\t\t\t<i class="glyphicon glyphicon-ok"></i>\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Create Request",{name:"s",hash:{},data:data}))+"\n\t\t</button>\n\t</div>\n</div>\n\n"},8:function(depth0,helpers,partials,data){var stack1;return'<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Request Type",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<div class="radio-inline">\n\t\t\t<label>\n\t\t\t\t<input type="radio" name="radRequestType" value="leave" '+((stack1=(helpers.ifanyequal||depth0&&depth0.ifanyequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.type:stack1,"leave",(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.type:stack1,"custom1",(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.type:stack1,"custom2",{name:"ifanyequal",hash:{},fn:this.program(9,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave",{name:"s",hash:{},data:data}))+"\n\t\t\t</label>\n\t\t</div>\n"+((stack1=helpers["if"].call(depth0,(stack1=(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.sick:stack1)!=null?stack1.enabled:stack1,{name:"if",hash:{},fn:this.program(11,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(depth0,(stack1=(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.toil:stack1)!=null?stack1.enabled:stack1,{name:"if",hash:{},fn:this.program(13,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\t</div>\n</div>\n"},9:function(depth0,helpers,partials,data){return'checked="checked"'},11:function(depth0,helpers,partials,data){var stack1;return'\t\t<div class="radio-inline">\n\t\t\t<label>\n\t\t\t\t<input type="radio" name="radRequestType" value="sick" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.type:stack1,"sick",{name:"ifequal",hash:{},fn:this.program(9,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sick",{name:"s",hash:{},data:data}))+"\n\t\t\t</label>\n\t\t</div>\n"},13:function(depth0,helpers,partials,data){var stack1,helper;return'\t\t<div class="radio-inline">\n\t\t\t<label>\n\t\t\t\t<input type="radio" name="radRequestType" value="toil" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.type:stack1,"toil",{name:"ifequal",hash:{},fn:this.program(9,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.toilTerm||(depth0!=null?depth0.toilTerm:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"toilTerm",hash:{},data:data}):helper))+"\n\t\t\t</label>\n\t\t</div>\n"},15:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.if_gt||depth0&&depth0.if_gt||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.sickTypes:depth0)!=null?stack1.length:stack1,{name:"if_gt",hash:{compare:0},fn:this.program(16,data,0),inverse:this.noop,data:data}))!=null?stack1:""},16:function(depth0,helpers,partials,data){return'\t\t<div class="form-group">\n\t\t\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sickness Type",{name:"s",hash:{},data:data}))+'\n\t\t\t</label>\n\t\t\t<div class="controls col-sm-5 col-md-4">\n\t\t\t\t<select class="form-control input-sm ddlCategory"></select>\n\t\t\t</div>\n\t\t</div>\n'},18:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.type:stack1,"toil",{name:"ifequal",hash:{},fn:this.program(19,data,0),inverse:this.program(21,data,0),data:data}))!=null?stack1:""},19:function(depth0,helpers,partials,data){return""},21:function(depth0,helpers,partials,data){return'<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Type",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<select class="form-control input-sm ddlCategory"></select>\n\t</div>\n</div>\n'},23:function(depth0,helpers,partials,data){return'<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Request Detail",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<div class="help-block">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Click to specify half days",{name:"s",hash:{},data:data}))+'</div>\n\t\t<div id="requestCalendarContainer"></div>\n\t</div>\n</div>\n'},25:function(depth0,helpers,partials,data){var stack1;return'<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<div class="checkbox">\n\t\t\t<label>\n'+((stack1=helpers.unless.call(depth0,(stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.category:stack1)!=null?stack1.deducted:stack1,{name:"unless",hash:{},fn:this.program(26,data,0),inverse:this.program(28,data,0),data:data}))!=null?stack1:"")+"\t\t\t\t\n\t\t\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Deduct from allowance",{name:"s",hash:{},data:data}))+"\n\t\t\t</label>\n\t\t</div>\n\t</div>\n</div>\n"},26:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t\t<input type="checkbox" id="chkDeduct" '+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.deducted:stack1,{name:"if",hash:{},fn:this.program(9,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+' disabled="disabled" />\n'},28:function(depth0,helpers,partials,data){var stack1;return'\t\t\t\t\t<input type="checkbox" id="chkDeduct" '+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.deducted:stack1,{name:"if",hash:{},fn:this.program(9,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+" />\n"},30:function(depth0,helpers,partials,data){return'{% if config.xero_status == 10 and user.xero_id %}\n<div class="form-group">\n\t<div class="controls col-sm-offset-4 col-md-offset-3 col-lg-offset-2  col-sm-5 col-md-4">\n\t\t<label class="checkbox">\n\t\t\t<input type="checkbox" id="chkXero" checked="checked" />\n\t\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sync to Xero?",{name:"s",hash:{},data:data}))+"\n\t\t</label>\n\t</div>\n</div>\n{% endif %}\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<form class="form-horizontal">\n\n<div class="form-group">\n\t<label class="control-label col-sm-4 col-md-3 col-lg-2">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<div class="controls col-sm-5 col-md-4">\n\t\t<span class="input-group"> \n\t\t\t<input type="text" id="txtEmployee" name="email" class="form-control input-sm"\n\t\t\t\tplaceholder="'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Enter Email Address",{name:"s",hash:{},data:data}))+'"\n\t\t\t\tvalue="'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.request:depth0)!=null?stack1.employee:stack1)!=null?stack1.email:stack1,depth0))+'"\n\t\t\t\t'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.request:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\n\t\t\t/>\n\t\t\t<span class="input-group-btn">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.request:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.program(5,data,0),data:data}))!=null?stack1:"")+"\t\t\t</span>\n\t\t</span>\n\t</div>\n</div>\n\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.request:depth0,{name:"if",hash:{},fn:this.program(7,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+"\n</form>"},useData:true});Handlebars.registerPartial("mgmt/leave/tmpl/Backfill",t);return t});define("mgmt/leave/views/Backfill",["jquery","underscore","appogee","leave/service","leave/enums","enums/RequestStatus","enums/RequestType","leave/models/Request","leave/models/Employee","leave/dialogs/RequestDialogBase","leave/views/RequestCalendar","hbs!mgmt/leave/tmpl/Backfill","jquery.appogee.hd","jquery.appogee.userPicker"],function($,_,appogee,service,enums,RequestStatus,RequestType,Request,Employee,RequestDialogBase,RequestCalendar,tmpl){"use strict";var S,R={errorNoEmployeeTitle:"No Employee Selected",errorNoEmployeeMsg:"Please select an Employee.",errorNoStartDate:"Please enter the Start Date of the request",errorNoEndDate:"Please enter the End Date of the request",errorInvalidHours:"Please enter the number of Hours for the request",errorClashTitle:"Clash",errorClashMsg:"The dates you entered are not valid as they clash with another request already approved by this user"};var View=function($container,options){S=appogee.getStrings("Backfill",R);RequestDialogBase.call(this,$container);options=$.extend({leaveTypes:[],sickTypes:[],employee:null},options||{});this.$container=$container;this.leaveTypes=options.leaveTypes;this.sickTypes=options.sickTypes;this.showRequestCalendar=false;this.onChangeEmployeeHandlers=[];this.onCreateHandlers=[];this.request=null;this.requestCalendar=null;if(options.employee){this.initRequest(new Employee(options.employee))}};View.prototype=new RequestDialogBase;View.prototype.constructor=View;View.prototype.initRequest=function(employee,allowances){var _this190=this;this.request=new Request({type:RequestType.Leave,employee:employee});var annualLeaveCategory=_.findWhere(this.leaveTypes,{system:true});this.request.setCategory(annualLeaveCategory);this.allowances=allowances;this.request.onRecalculate(function(){_this190.render()});this.request.recalculate();this.requestCalendar=new RequestCalendar(null,this.request)};View.prototype.onChangeEmployee=function(handler){this.onChangeEmployeeHandlers.push(handler)};View.prototype.onCreate=function(handler){this.onCreateHandlers.push(handler)};View.prototype.render=function(){var _this191=this;var data={leaveTypes:this.leaveTypes,sickTypes:this.sickTypes,toilTerm:appogee.getToilTerm(),request:this.request,showRequestCalendar:this.showRequestCalendar};if(this.request){data.requestedHours=this.request.getHours();data.requestedDays=this.request.getDays()}this.$container.html(tmpl(data));if(this.request){this.$container.find(".hd").data("hoursInDay",this.request.employee.hoursInDay).hd();this.$container.find(".txtHours,.txtDays").change(function(){var hours=_this191.$container.find(".txtHours").val();hours=parseFloat(hours);if(!isNaN(hours)){_this191.request.setHours(hours)}});var $requestCalendarContainer=this.$container.find("#requestCalendarContainer");this.requestCalendar.render($requestCalendarContainer)}if(this.request){if(this.request.isLeave()||this.request.isCustom1()||this.request.isCustom2()){this.populateLeaveTypes(this.leaveTypes)}else if(this.request.isSick()){this.populateSickTypes(this.sickTypes)}var $txtStartDate=this.$container.find(".txtStartDate");var $txtEndDate=this.$container.find(".txtEndDate");var options={changeYear:true,changeMonth:true,beforeShow:function(){$("#ui-datepicker-div").addClass("hide_prev_next")},onClose:function(){$("#ui-datepicker-div").removeClass("hide_prev_next")}};this.initDatePickers($txtStartDate,$txtEndDate,options)}var $txtEmployee=this.$container.find("#txtEmployee");$txtEmployee.userPicker({params:{status:["joining","active","former"],editable:true,aduTraverse:"down"}});this.$container.find("#btnToggleRequetsCalendar").click(function(){_this191.showRequestCalendar=!_this191.showRequestCalendar;_this191.render()});this.$container.find("#btnSetEmployee").click(function(){_this191.loadEmployee()});this.$container.find("#btnChangeEmployee").click(function(){_this191.request=null;_this191.allowances=null;_this191.render();_this191.onChangeEmployeeHandlers.forEach(function(h){return h(null)})});this.$container.find('input[name="radRequestType"]').change(function(){_this191.request.type=_this191.$container.find('input[name="radRequestType"]:checked').val();_this191.request.category=null;if(_this191.request.type==RequestType.Leave){var annualLeaveCategory=_.findWhere(_this191.leaveTypes,{system:true});_this191.request.setCategory(annualLeaveCategory)}_this191.render()});this.$container.find("#txtReason").blur(function(e){_this191.request.reason=e.currentTarget.value});this.$container.find("#chkDeduct").click(function(e){_this191.request.deducted=e.currentTarget.checked});this.$container.find(".ddlCategory").change(function(e){var category=null;if(_this191.request.isSick()){category=_.findWhere(_this191.sickTypes,{key:e.target.value});_this191.request.setCategory(category)}else if(_this191.request.isToil()){}else{category=_.findWhere(_this191.leaveTypes,{key:e.target.value});_this191.request.setCategory(category)}_this191.render()});$("#btnSave").click(function(){_this191.save()})};View.prototype.loadEmployee=function(){var _this192=this;var $txtEmployee=this.$container.find("#txtEmployee");var employeeKey=$txtEmployee.userPicker("getKey");if(!employeeKey){appogee.valert(S.errorNoEmployee);return}var batch=service.createBatch();batch.getEmployeeLeaveProfile(employeeKey);batch.listEmployeeAllowances(employeeKey);batch.wait(function(employee,allowances){_this192.initRequest(employee,allowances);_this192.render();_this192.onChangeEmployeeHandlers.forEach(function(h){return h(employee)})})};View.prototype.save=function(){var _this193=this;var reason=$("#txtReason").val();var request=this.request.toJSON();request.reason=reason;request.status=RequestStatus.Approved;if(!request.startDate){appogee.valert(S.errorNoStartDate);return}if(!request.endDate){appogee.valert(S.errorNoEndDate);return}if(!request.hours||request.hours<=0){appogee.valert(S.errorInvalidHours)}var deducted=$("#chkDeduct").prop("checked");if(!deducted){request.deduced=false}var options={error:function(xhr){if(xhr.responseText.indexOf("clash")>-1){appogee.valert(S.errorClash)}},artificialDelay:true};var url="/requests";var notifier=appogee.notifier.saving();appogee.api.post(url,request,function(){notifier.success();_this193.initRequest(_this193.request.employee,_this193.allowances);_this193.request.type=request.type;_this193.render();_this193.onCreateHandlers.forEach(function(h){return h(request)})},options)};return View});define("templates/helpers/enumRequestStatusString",["hbs/handlebars","appogee","enums/RequestStatus"],function(Handlebars,appogee,RequestStatus){"use strict";function enumRequestStatusString(key){return RequestStatus.toString(key)}Handlebars.registerHelper("enumRequestStatusString",enumRequestStatusString);return enumRequestStatusString});define("hbs!mgmt/leave/tmpl/RequestsView",["hbs/handlebars","templates/helpers/s","templates/helpers/ifequal","templates/helpers/formatDate","templates/helpers/enumRequestStatusString","templates/helpers/abstract"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'class="selected"'},3:function(depth0,helpers,partials,data){return'checked="checked"'},5:function(depth0,helpers,partials,data){var stack1,helper;return'<tr>\n\t<td><a href="#!/request/'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.employee:depth0)!=null?stack1.name:stack1,depth0))+"</a></td>\n\t<td>\n\t\t<div>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.startDate:depth0,depth0!=null?depth0.endDate:depth0,{name:"ifequal",hash:{},fn:this.program(6,data,0),inverse:this.program(8,data,0),data:data}))!=null?stack1:"")+"\t\t</div>\n\t\t<div>\n"+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.days:depth0,1,{name:"ifequal",hash:{},fn:this.program(16,data,0),inverse:this.program(18,data,0),data:data}))!=null?stack1:"")+'\t\t</div>\n\t</td>\n\t<td class="status">'+this.escapeExpression((helpers.enumRequestStatusString||depth0&&depth0.enumRequestStatusString||helpers.helperMissing).call(depth0,depth0!=null?depth0.status:depth0,{name:"enumRequestStatusString",hash:{},data:data}))+"</td>\n\t<td>\n\t\t<div>"+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.category:depth0)!=null?stack1.name:stack1,depth0))+"</div>\n\t\t<div><em>"+this.escapeExpression((helpers["abstract"]||depth0&&depth0["abstract"]||helpers.helperMissing).call(depth0,depth0!=null?depth0.reason:depth0,{name:"abstract",hash:{},data:data}))+"</em></div>\n\t</td>\n</tr>\n"},6:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,depth0!=null?depth0.startDate:depth0,{name:"formatDate",hash:{},data:data}))+"\n"},8:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.morning:depth0,{name:"if",hash:{},fn:this.program(9,data,0),inverse:this.program(11,data,0),data:data}))!=null?stack1:""},9:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,depth0!=null?depth0.startDate:depth0,{name:"formatDate",hash:{},data:data}))+" ("+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Morning Only",{name:"s",hash:{},data:data}))+")\n"},11:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,depth0!=null?depth0.afternoon:depth0,{name:"if",hash:{},fn:this.program(12,data,0),inverse:this.program(14,data,0),data:data}))!=null?stack1:""},12:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,depth0!=null?depth0.startDate:depth0,{name:"formatDate",hash:{},data:data}))+" ("+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Afternoon Only",{name:"s",hash:{},data:data}))+")\n"},14:function(depth0,helpers,partials,data){return"\t\t\t\t"+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,depth0!=null?depth0.startDate:depth0,{name:"formatDate",hash:{},data:data}))+" - "+this.escapeExpression((helpers.formatDate||depth0&&depth0.formatDate||helpers.helperMissing).call(depth0,depth0!=null?depth0.endDate:depth0,{name:"formatDate",hash:{},data:data}))+"\n\t\t\t"},16:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.days||(depth0!=null?depth0.days:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"days",hash:{},data:data}):helper))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Day",{name:"s",hash:{},data:data}))+" / "+this.escapeExpression((helper=(helper=helpers.hours||(depth0!=null?depth0.hours:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"hours",hash:{},data:data}):helper))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"\n"},18:function(depth0,helpers,partials,data){var helper;return"\t\t\t\t"+this.escapeExpression((helper=(helper=helpers.days||(depth0!=null?depth0.days:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"days",hash:{},data:data}):helper))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Days",{name:"s",hash:{},data:data}))+" / "+this.escapeExpression((helper=(helper=helpers.hours||(depth0!=null?depth0.hours:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"hours",hash:{},data:data}):helper))+" "+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Hours",{name:"s",hash:{},data:data}))+"\n"},20:function(depth0,helpers,partials,data){return'<tr>\n\t<td colspan="4" class="no-results">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"No Requests Found",{name:"s",hash:{},data:data}))+"\n\t</td>\n</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper;return'<div class="pull-left view-filters">\n\t<span>'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Show:",{name:"s",hash:{},data:data}))+' </span>\n\t<a href="javascript: void(0);" data-type="all" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestType:depth0,"all",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"All",{name:"s",hash:{},data:data}))+'</a>\n\t<a href="javascript: void(0);" data-type="leave" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestType:depth0,"leave",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave",{name:"s",hash:{},data:data}))+'</a>\n\t<a href="javascript: void(0);" data-type="sick" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestType:depth0,"sick",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Sick",{name:"s",hash:{},data:data}))+'</a>\n\t<a href="javascript: void(0);" data-type="toil" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestType:depth0,"toil",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helper=(helper=helpers.toilTerm||(depth0!=null?depth0.toilTerm:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"toilTerm",hash:{},data:data}):helper))+'</a>\n\t<a href="javascript: void(0);" data-type="custom1" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestType:depth0,"custom1",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Custom 1",{name:"s",hash:{},data:data
}))+'</a>\n\t<a href="javascript: void(0);" data-type="custom2" '+((stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,depth0!=null?depth0.requestType:depth0,"custom2",{name:"ifequal",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Custom 2",{name:"s",hash:{},data:data}))+'</a>\n</div>\n\n<div class="pull-right status-filter">\n\t<div class="checkbox-inline">\n\t\t'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Show:",{name:"s",hash:{},data:data}))+'\n\t</div>\n\t<label class="checkbox-inline">\n\t\t<input type="checkbox" class="request-status chk-pending" value="pending" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showPending:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Pending",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<label class="checkbox-inline">\n\t\t<input type="checkbox" class="request-status chk-approved" value="approved" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showApproved:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Approved",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<label class="checkbox-inline">\n\t\t<input type="checkbox" class="request-status chk-rejected" value="rejected" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showRejected:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Rejected",{name:"s",hash:{},data:data}))+'\n\t</label>\n\t<label class="checkbox-inline">\n\t\t<input type="checkbox" class="request-status chk-cancelled" value="cancelled" '+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.showCancelled:depth0,{name:"if",hash:{},fn:this.program(3,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+">\n\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Cancelled",{name:"s",hash:{},data:data}))+'\n\t</label>\n</div>\n\n<table class="table table-bordered table-shaded table-condensed">\n<thead>\n<tr>\n\t<th class="w150">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee",{name:"s",hash:{},data:data}))+'</th>\n\t<th class="w200">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Request",{name:"s",hash:{},data:data}))+'</th>\n\t<th class="w150">'+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Status",{name:"s",hash:{},data:data}))+"</th>\n\t<th>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Leave Type / Reason",{name:"s",hash:{},data:data}))+"</th>\n</tr>\n</thead>\n<body>\n"+((stack1=helpers.each.call(depth0,depth0!=null?depth0.requests:depth0,{name:"each",hash:{},fn:this.program(5,data,0),inverse:this.program(20,data,0),data:data}))!=null?stack1:"")+"</body>\n</table>"},useData:true});Handlebars.registerPartial("mgmt/leave/tmpl/RequestsView",t);return t});define("mgmt/leave/views/RequestsView",["jquery","underscore","appogee","hbs!mgmt/leave/tmpl/RequestsView"],function($,_,appogee,tmpl){"use strict";var View=function($container,requests){this.$container=$container;this.requests=requests;this.requestType="all";this.statuses=["pending","approved"]};View.prototype.render=function(){var _this194=this;var requests=_.filter(this.requests,function(request){if(_this194.requestType=="all"){return true}else{return request.type==_this194.requestType}});var showPending=this.statuses.indexOf("pending")>-1;var showApproved=this.statuses.indexOf("approved")>-1;var showRejected=this.statuses.indexOf("rejected")>-1;var showCancelled=this.statuses.indexOf("cancelled")>-1;requests=_.filter(requests,function(request){if(request.status=="open"){return showPending}else if(request.status=="pending"){return showPending}else if(request.status=="approved"){return showApproved}else if(request.status=="rejected"){return showRejected}else if(request.status=="cancelled"){return showCancelled}else if(request.status=="cancellation_pending"){return showPending}});var data={requestType:this.requestType,requests:requests,showPending:showPending,showApproved:showApproved,showRejected:showRejected,showCancelled:showCancelled,toilTerm:appogee.getToilTerm()};this.$container.html(tmpl(data));this.$container.find(".view-filters a").click(function(e){_this194.requestType=$(e.currentTarget).data("type");_this194.render()});this.$container.find(".status-filter input").change(function(e){var status=$(e.currentTarget).val();var i=_this194.statuses.indexOf(status);if(i>-1){_this194.statuses.splice(i,1)}else{_this194.statuses.push(status)}_this194.render()})};View.prototype.fetchByEmployee=function(employee,startDate,endDate){var url=this._buildUrl(null,null,employee,startDate,endDate);this._fetchByUrl(url)};View.prototype.fetchByTeam=function(team,startDate,endDate){var url=this._buildUrl(null,team,null,startDate,endDate);this._fetchByUrl(url)};View.prototype.fetchByAdu=function(adu,startDate,endDate){var url=this._buildUrl(adu,null,null,startDate,endDate);this._fetchByUrl(url)};View.prototype._buildUrl=function(adu,team,employee,startDate,endDate){var url="/requests";if(adu){url+="?aduKey={0}".format(adu.key)}else if(team){url+="?teamKey={0}".format(team.key)}else if(employee){url+="?employeeKey={0}".format(employee.key)}else{throw"adu, team or employee must be provided"}if(startDate){startDate=startDate.toISOString().substring(0,10);url+="&startDate={0}".format(startDate)}if(endDate){endDate=endDate.toISOString().substring(0,10);url+="&endDate={0}".format(endDate)}url+="&employeeStatus=joining,active,former";return url};View.prototype._fetchByUrl=function(url){var _this195=this;appogee.api.get(url,function(response){_this195.requests=response.items;_this195.render()})};return View});define("mgmt/leave/backfill",["jquery","appogee","mgmt/leave/views/Backfill","mgmt/leave/views/RequestsView"],function($,appogee,Backfill,RequestsView){"use strict";var COOKIE_ABOUT="bfam";return{getLoadUrls:function(){var urls=["/leave-types","/sick-types"];var key=$("#txtKey").val();if(key){urls.push("/employees/{0}?projection=leave-profile".format(key))}return{api:urls}},initialize:function(){this.initAbout()},onLoad:function(leaveTypes,sickTypes,employee){var _this196=this;this.leaveTypes=leaveTypes.items;this.sickTypes=sickTypes.items;this.setEmployee(employee);this.backfill=new Backfill($("#backfillContainer"),{leaveTypes:this.leaveTypes,sickTypes:this.sickTypes,employee:this.employee});this.backfill.render();this.backfill.onChangeEmployee(function(employee){_this196.setEmployee(employee)});this.backfill.onCreate(function(){_this196.requests.fetchByEmployee(_this196.employee)})},setEmployee:function(employee){if(employee){this.employee=employee;this.requests=new RequestsView($("#requestsContainer"));this.requests.fetchByEmployee(this.employee);$("#txtEmpName").html(employee.displayName);$("#tabRequests").show()}else{this.employee=null;this.requests=null;$("#txtEmpName").html("");$("#tabRequests").hide()}},initAbout:function(){if(!appogee.cookies.get(COOKIE_ABOUT)){$(".alert-about").show()}$(".btnCloseAbout").click(function(){appogee.cookies.set(COOKIE_ABOUT,1,365);$(".alert-about").hide()});$("#btnAbout").click(function(){$(".alert-about").show();appogee.cookies.set(COOKIE_ABOUT,1,0)})}}});define("hbs!templates/audit/GlobalTemplate",["hbs/handlebars"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<div class="col-sm-4">\n\t\t<div class="form-group">\n\t\t\t<label>Namespace:</label> \n\t\t\t<div class="input-group">\n\t\t\t\t<input type="text" class="form-control input-sm" id="txtNamespace" placeholder="Enter Namespace ...">\n\t\t\t\t<span class="input-group-btn">\n\t\t\t\t\t<button class="btn btn-sm btn-default" type="button" id="btnNamespace">Go!</button>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<style>\n.global-audit table tr:first-child th:first-child { min-width: 200px; }\n.global-audit table tr:first-child th:nth-child(2) { min-width: 200px; }\n.global-audit table tr:first-child th:nth-child(3) { min-width: 200px; }\n</style>\n\n<div class="row">\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.isSysAdmin:depth0,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.noop,data:data}))!=null?stack1:"")+'\t<div class="col-sm-4">\n\t\t<div class="form-group">\n\t\t\t<label>Log Type:</label>\n\t\t\t<select class="form-control input-sm ddlAuditType">\n\t\t\t\t<option value="">- Select Log Type -</option>\n\n\t\t\t\t<optgroup label="Employee Admin">\n\t\t\t\t\t<option value="200">Create Employee</option>\n\t\t\t\t\t<option value="201">Update Employee</option>\n\t\t\t\t\t<option value="202">Delete Employee</option>\n\t\t\t\t\t<option value="203">Restore Employee</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1006">Change Status</option>\n\t\t\t\t\t<option value="1007">Change Team</option>\n\t\t\t\t\t<option value="1020">Change Virtual Team</option>\n\t\t\t\t\t<option value="1016">Change ADU</option>\n\t\t\t\t\t<option value="1008">Change Email</option>\n\t\t\t\t\t<option value="1017">Change Roles</option>\n\t\t\t\t\t<option value="1018">Change Login</option>\n\t\t\t\t\t<option value="1019">Change Leave Profile</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1009">Enable Self Service</option>\n\t\t\t\t\t<option value="1010">Enable Self Service Failure</option>\n\t\t\t\t\t<option value="1011">Disable Self Service</option>\n\t\t\t\t</optgroup>\n\n\t\t\t\t<optgroup label="Employee Profile">\n\t\t\t\t\t<option value="1000">Create Employee Profile</option>\n\t\t\t\t\t<option value="1001">Update Employee Profile</option>\n\t\t\t\t\t<option value="1002">Delete Employee Profile</option>\n\t\t\t\t\t<option value="1003">Restore Employee Profile</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1004">View Employee Profile</option>\n\t\t\t\t\t<option value="1005">View Masked Field</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1501">Add Job History</option>\n\t\t\t\t\t<option value="1502">Update Job History</option>\n\t\t\t\t\t<option value="1503">Delete Job History</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1511">Add Dependent</option>\n\t\t\t\t\t<option value="1512">Update Dependent</option>\n\t\t\t\t\t<option value="1513">Delete Dependent</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1521">Add Next Of Kin</option>\n\t\t\t\t\t<option value="1522">Update Next Of Kin</option>\n\t\t\t\t\t<option value="1523">Delete Next Of Kin</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1531">Add Emergency Contact</option>\n\t\t\t\t\t<option value="1532">Update Emergency Contact</option>\n\t\t\t\t\t<option value="1533">Delete Emergency Contact</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1541">Add Learning Item</option>\n\t\t\t\t\t<option value="1542">Update Learning Item</option>\n\t\t\t\t\t<option value="1543">Delete Learning Item</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1551">Add Right to Work</option>\n\t\t\t\t\t<option value="1552">Update Right to Work</option>\n\t\t\t\t\t<option value="1553">Delete Right to Work</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1561">Add Disability</option>\n\t\t\t\t\t<option value="1562">Update Disability</option>\n\t\t\t\t\t<option value="1563">Delete Disability</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1571">Add Discipline</option>\n\t\t\t\t\t<option value="1572">Update Discipline</option>\n\t\t\t\t\t<option value="1573">Delete Discipline</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1581">Add Benefit</option>\n\t\t\t\t\t<option value="1582">Update Benefit</option>\n\t\t\t\t\t<option value="1583">Delete Benefit</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="1591">Add Asset</option>\n\t\t\t\t\t<option value="1592">Update Asset</option>\n\t\t\t\t\t<option value="1593">Delete Asset</option>\n\t\t\t\t</optgroup>\n\n\t\t\t\t<optgroup label="Xero">\n\t\t\t\t\t<option value="1012">Xero Sync</option>\n\t\t\t\t\t<option value="1013">Xero Sync</option>\n\t\t\t\t\t<option value="1014">Enable Xero Sync</option>\n\t\t\t\t\t<option value="1015">Disable Xero Sync</option>\n\t\t\t\t</optgroup>\n\t\t\t\t\n\t\t\t\t<optgroup label="Employee Records">\n\t\t\t\t\t<option value="2001">Create Employee Record</option>\n\t\t\t\t\t<option value="2002">Update Employee Record</option>\n\t\t\t\t\t<option value="2003">Delete Employee Record</option>\n\t\t\t\t\n\t\t\t\t\t<option value="2004">Record Acknowledgement Request</option>\n\t\t\t\t\t<option value="2005">Acknowledge Record</option>\n\t\t\t\t</optgroup>\n\t\t\t\t\n\t\t\t\t<optgroup label="Company Documents">\n\t\t\t\t\t<option value="2501">Create Company Document</option>\n\t\t\t\t\t<option value="2502">Update Company Document</option>\n\t\t\t\t\t<option value="2503">Delete Company Document</option>\n\t\t\t\t\t\n\t\t\t\t\t<option value="2504">Document Acknowledgement Request</option>\n\t\t\t\t\t<option value="2505">Acknowledge Document</option>\n\t\t\t\t</optgroup>\n\n\t\t\t\t<optgroup label="Leave Requests">\n\t\t\t\t    <option value="3001">Leave Request Submitted</option>\n\t\t\t\t    <option value="3002">Leave Request Approved</option>\n\t\t\t\t    <option value="3003">Leave Request Rejected</option>\n\t\t\t\t    <option value="3004">Leave Request Cancelled</option>\n\t\t\t\t    <option value="3005">Leave Request Cancellation Requested</option>\n\t\t\t\t    <option value="3006">Leave Request Cancellation Approved</option>\n\t\t\t\t    <option value="3007">Leave Request Cancellation Rejected</option>\n\t\t\t\t    <option value="3007">Edit Leave Request</option>\n\t\t\t\t</optgroup>\n\t\t\t\t\n\t\t\t\t<optgroup label="Sickness Requests">\n\t\t\t\t    <option value="3010">Sickness Report Created</option>\n\t\t\t\t    <option value="3011">Sickness Report Submitted</option>\n\t\t\t\t    <option value="3012">Sickness Report Approved</option>\n\t\t\t\t    <option value="3013">Sickness Report Rejected</option>\n\t\t\t\t    <option value="3014">Sickness Report Cancelled</option>\n\t\t\t\t    <option value="3015">Sickness Report Cancellation Requested</option>\n\t\t\t\t    <option value="3016">Sickness Report Cancellation Approved</option>\n\t\t\t\t    <option value="3017">Sickness Report Cancellation Rejected</option>\n\t\t\t\t    <option value="3017">Edit Sickness Report</option>\n\t\t\t\t</optgroup>\n\t\t\t\t\n\t\t\t\t<optgroup label="TOIL Requests">\n\t\t\t\t    <option value="3021">TOIL Request Submitted</option>\n\t\t\t\t    <option value="3022">TOIL Request Approved</option>\n\t\t\t\t    <option value="3023">TOIL Request Rejected</option>\n\t\t\t\t    <option value="3024">TOIL Request Cancelled</option>\n\t\t\t\t    <option value="3025">TOIL Request Cancellation Requested</option>\n\t\t\t\t    <option value="3026">TOIL Request Cancellation Approved</option>\n\t\t\t\t    <option value="3027">TOIL Request Cancellation Rejected</option>\n\t\t\t\t    <option value="3027">Edit TOIL Request</option>\n\t\t\t\t</optgroup>\n\t\t\t\t\n\t\t\t\t<optgroup label="Leave">\n\t\t\t\t    <option value="3030">Computed Hours Overridden</option>\n\t\t\t\t    <option value="3031">Update Allowance</option>\n\t\t\t\t</optgroup>\n\t\t\t\t\n\t\t\t\t<optgroup label="Teams">\n\t\t\t\t\t<option value="3000">Create Team</option>\n\t\t\t\t\t<option value="3001">Update Team</option>\n\t\t\t\t\t<option value="3002">Delete Team</option>\n\t\t\t\t\t<option value="3004">Restore Team</option>\n\t\t\t\t\t<option value="3003">Change Primary Manager</option>\n\t\t\t\t</optgroup>\n\t\t\t\t\n\t\t\t\t<optgroup label="Employee Profile Configuration">\n\t\t\t\t\t<option value="2100">Create Record Category</option>\n\t\t\t\t\t<option value="2101">Update Record Category</option>\n\t\t\t\t\t<option value="2102">Delete Record Category</option>\n\t\t\t\t\t<option value="2103">Restore Record Category</option>\n\t\t\t\t\t<option value="4000">Create Custom Field</option>\n\t\t\t\t\t<option value="4001">Update Employee Profile Field Access</option>\n\t\t\t\t\t<option value="4002">Delete Field</option>\n\t\t\t\t</optgroup>\n\t\t\t\t\n\t\t\t\t<optgroup label="Document Category Contiguration">\n\t\t\t\t\t<option value="2600">Create Document Category</option>\n\t\t\t\t\t<option value="2601">Update Document Category</option>\n\t\t\t\t\t<option value="2602">Delete Document Category</option>\n\t\t\t\t\t<option value="2603">Restore Document Category</option>\n\t\t\t\t</optgroup>\n\t\t\t\t\n\t\t\t\t<optgroup label="Leave Profiles">\n\t\t\t\t\t<option value="6000">Create Leave Profile</option>\n\t\t\t\t\t<option value="6001">Update Leave Profile</option>\n\t\t\t\t\t<option value="6002">Delete Leave Profile</option>\n\t\t\t\t\t<option value="6003">Restore Leave Profil)</option>\n\t\t\t\t</optgroup>\n\t\t\t\t\n\t\t\t</select>\n\t\t</div>\n\t</div>\n\t<div class="col-sm-4">\n\t\t<div class="form-group">\n\t\t\t<label>&nbsp;</label>\n\t\t\t<div>\n\t\t\t\t<div class="btn-group">\n\t\t\t\t\t<button class="btn btn-sm btn-default" id="btnRefresh">\n\t\t\t\t\t\t<i class="glyphicon glyphicon-refresh"></i>\n\t\t\t\t\t\tRefresh\n\t\t\t\t\t</button>\n\t\t\t\t\t\n\t\t\t\t\t<button class="btn btn-sm btn-default btnToggleDetail">\n\t\t\t\t\t\t<i class="glyphicon glyphicon-list-alt"></i>\n\t\t\t\t\t\tToggle Detail\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="global-audit"></div>'},useData:true});Handlebars.registerPartial("templates/audit/GlobalTemplate",t);return t});define("hbs!templates/audit/Activity",["hbs/handlebars","templates/helpers/ifequal","templates/helpers/s"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1;return(stack1=(helpers.ifequal||depth0&&depth0.ifequal||helpers.helperMissing).call(depth0,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.employee:stack1)!=null?stack1.key:stack1,(stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.target:stack1)!=null?stack1.key:stack1,{name:"ifequal",hash:{},fn:this.program(2,data,0),inverse:this.program(4,data,0),data:data}))!=null?stack1:""},2:function(depth0,helpers,partials,data){var stack1,helper;return"\t\t"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee",{name:"s",hash:{},data:data}))+': <a href="'+this.escapeExpression((helper=(helper=helpers.employeeUrl||(depth0!=null?depth0.employeeUrl:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"employeeUrl",hash:{},data:data}):helper))+'">'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.employee:stack1)!=null?stack1.email:stack1,depth0))+"</a>\n"},4:function(depth0,helpers,partials,data){var stack1,helper;return"\t\t <div>"+this.escapeExpression((helpers.s||depth0&&depth0.s||helpers.helperMissing).call(depth0,"Employee",{name:"s",hash:{},data:data}))+': <a href="'+this.escapeExpression((helper=(helper=helpers.employeeUrl||(depth0!=null?depth0.employeeUrl:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"employeeUrl",hash:{},data:data}):helper))+'">'+this.escapeExpression(this.lambda((stack1=(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.employee:stack1)!=null?stack1.email:stack1,depth0))+"</a></div>\n\t\t <div>"+this.escapeExpression((helper=(helper=helpers.kind||(depth0!=null?depth0.kind:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"kind",hash:{},data:data}):helper))+': <a href="'+this.escapeExpression((helper=(helper=helpers.targetUrl||(depth0!=null?depth0.targetUrl:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"targetUrl",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.targetDescription||(depth0!=null?depth0.targetDescription:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"targetDescription",hash:{},data:data}):helper))+"</a></div>\n"},6:function(depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.target:stack1,{name:"if",hash:{},fn:this.program(7,data,0),inverse:this.program(9,data,0),data:data}))!=null?stack1:""},7:function(depth0,helpers,partials,data){var helper;return"\t<div>"+this.escapeExpression((helper=(helper=helpers.kind||(depth0!=null?depth0.kind:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"kind",hash:{},data:data}):helper))+': <a href="'+this.escapeExpression((helper=(helper=helpers.targetUrl||(depth0!=null?depth0.targetUrl:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"targetUrl",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.targetDescription||(depth0!=null?depth0.targetDescription:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"targetDescription",hash:{},data:data}):helper))+"</a></div>\n"},9:function(depth0,helpers,partials,data){return""},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1;return'<p><strong>\n\t<a href="javascript: void(0);" class="btnType" data-type-id="'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.log:depth0)!=null?stack1.typeId:stack1,depth0))+'">\n\t\t'+this.escapeExpression(this.lambda((stack1=depth0!=null?depth0.log:depth0)!=null?stack1.type:stack1,depth0))+"\n\t</a>\n</strong></p>\n\n"+((stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.log:depth0)!=null?stack1.employee:stack1,{name:"if",hash:{},fn:this.program(1,data,0),inverse:this.program(6,data,0),data:data}))!=null?stack1:"")},useData:true});Handlebars.registerPartial("templates/audit/Activity",t);return t});define("views/audit/GlobalAuditView",["jquery","hbs/handlebars","appogee","hbs!templates/audit/GlobalTemplate","hbs!templates/audit/Activity","hbs!templates/audit/Detail"],function($,Handlebars,appogee,tmpl,tmplActivity,tmplDetail){"use strict";var KINDS={EmployeeProfile:"Employee Profile"};var View=function($container,options){options=$.extend({isSysAdmin:false},options||{});this.currentUser=appogee.getCurrentUser();if(!this.currentUser.isSysAdmin()){options.isSysAdmin=false}this.$container=$container;this.isSysAdmin=options.isSysAdmin;this.showDetail=true};View.prototype.render=function(){var _this197=this;var data={isSysAdmin:this.isSysAdmin,showDetail:this.showDetail};this.$container.html(tmpl(data));this.$container.find("#btnRefresh").click(function(){_this197.auditView.fetch()});this.$container.find(".btnToggleDetail").click(function(){_this197.showDetail=!_this197.showDetail;_this197.auditView.render()});this.$viewContainer=this.$container.find(".global-audit");var viewAlias=this.isSysAdmin?"logs":"audits";this.auditView=new appogee.View(this.$viewContainer,viewAlias,{showSearch:false,cssClass:"audit"});this.auditView.setDateFormatString(this.currentUser.dateFormatString);this.auditView.setDateTimeFormatString(this.currentUser.dateTimeFormatString);this.auditView.addDateTimeFormatter("timestamp");this.auditView.addColumn({type:"custom",label:"User / Date",width:200,render:function(log){var html="";if(log.email){html+="<div>"+log.email+"</div>"}else if(log.isSystem){html+="<div>System Operation</div>"}else{html+="<div>Unknown User</div>"}html+="<div>"+log.timestamp+"</div>";return html}});if(this.isSysAdmin){this.auditView.addColumn({type:"text",label:"Namespace",field:"[ns]"})}this.auditView.addColumn({type:"custom",label:"Activity / Employee / Target",width:300,render:function(log){var employeeUrl=me.getEmployeeUrl(log);var targetUrl=me.getTargetUrl(log);var targetDescription=me.getTargetDescription(log);var kind="";if(log.target){kind=me.getKindString(log.target.kind)}var html=tmplActivity({log:log,employeeUrl:employeeUrl,targetUrl:targetUrl,targetDescription:targetDescription,kind:kind});return html}});if(true||!this.isSysAdmin){this.auditView.addColumn({type:"custom",label:"Detail / Comments",className:"nopadding",render:function(log){var html=tmplDetail({showDetail:me.showDetail,log:log});return html}})}this.auditView.onRender(function(){_this197.$container.find(".btnType").click(function(e){var $btn=$(e.currentTarget);var typeId=$btn.data("typeId");_this197.$container.find(".ddlAuditType").val(typeId).change()})});var me=this;this.$container.find(".ddlAuditType").change(function(){if(this.value===""){me.auditView.removeFilter("type_id")}else{me.auditView.addFilter("type_id",this.value)}});this.$container.find("#btnNamespace").click(function(){var ns=$("#txtNamespace").val();if(ns===""){me.auditView.removeFilter("ns")}else{me.auditView.addFilter("ns",ns)}});if(this.onCloseHandler){this.$container.find("#btnCloseAudit").click(function(){me.onCloseHandler()})}};View.prototype.getEmployeeUrl=function(log){if(!log.employee){return null}var url="/admin/organisation/employee?key={0}".format(log.employee.key);return url};View.prototype.getTargetUrl=function(log){if(!log.target){return null}var url=null;var kind=log.target.kind;if(kind=="Employee"){url="/admin/organisation/employee?key={0}"}else if(kind=="EmployeeProfile"){url="/mgmt/profile?key={0}"}else if(kind=="Request"){url="/mgmt/dash#!/request/{0}"}else if(kind=="Team"){url="/admin/organisation/team?key={0}"}else if(kind=="Allowance"){}if(url){url=url.format(log.target.key)}return url};View.prototype.getTargetDescription=function(log){var description="";if(log.target){description=log.target.description;if(!description){description=log.target.kind}}return description};View.prototype.getTargetLink=function(log){if(!log.target){return null}var url=null;var kind=log.target.kind;if(kind=="Employee"){url='<a href="/admin/organisation/employee?key={0}">{1}</a>'}else if(kind=="EmployeeProfile"){url='<a href="/mgmt/profile?key={0}">{1}</a>'}else if(kind=="Request"){url='<a href="/mgmt/dash#!/request/{0}">{1}</a>'}else if(kind=="Team"){url='<a href="/admin/organisation/team?key={0}">{1}</a>'}else if(kind=="Allowance"){return log.target.description}if(url){var description=log.target.description;if(!description){description=log.target.kind}url=url.format(log.target.key,description)}return url};View.prototype.getKindString=function(kind){if(KINDS.hasOwnProperty(kind)){return KINDS[kind]}return kind};View.prototype.fetch=function(){this.auditView.fetch()};View.prototype.onClose=function(handler){this.onCloseHandler=handler};return View});define("admin/audit",["jquery","views/audit/GlobalAuditView"],function($,AuditView){"use strict";return{initialize:function(){this.view=new AuditView($("#viewContainer"));this.view.render();this.view.fetch()}}});define("hbs!admin/templates/UpdateUsers",["hbs/handlebars"],function(Handlebars){var t=Handlebars.template({1:function(depth0,helpers,partials,data){return'\t<th class="w200">\n\t\tDivision\n\t</th>\n'},3:function(depth0,helpers,partials,data,blockParams,depths){var stack1,helper;return'<tr data-key="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">\n\t<td>\n\t\t<div>'+this.escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+"</div>\n\t\t<div>"+this.escapeExpression((helper=(helper=helpers.email||(depth0!=null?depth0.email:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"email",hash:{},data:data}):helper))+"</div>\n\t</td>\n\t<td>"+this.escapeExpression((helper=(helper=helpers.status||(depth0!=null?depth0.status:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"status",hash:{},data:data}):helper))+"</td>\n"+((stack1=helpers["if"].call(depth0,depths[1]!=null?depths[1].adusEnabled:depths[1],{name:"if",hash:{},fn:this.program(4,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t<td>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.teamKey:depth0,{name:"if",hash:{},fn:this.program(10,data,0,blockParams,depths),inverse:this.program(12,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t</td>\n\t<td>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.leaveProfileKey:depth0,{name:"if",hash:{},fn:this.program(14,data,0,blockParams,depths),inverse:this.program(16,data,0,blockParams,depths),data:data}))!=null?stack1:"")+'\t</td>\n\t<td>\n\t\t<button class="btn btn-sm btn-primary btnSave" style="width: 120px;">\n\t\t\tSave Employee\n\t\t</button>\n\t\t<button class="btn btn-sm btn-danger btnArchive" style="width: 120px;">\n\t\t\tArchive Employee\n\t\t</button>\n\t</td>\n</tr>\n'},4:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return"\t<td>\n"+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.teamKey:depth0,{name:"if",hash:{},fn:this.program(5,data,0,blockParams,depths),inverse:this.program(7,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"\t</td>\n"},5:function(depth0,helpers,partials,data){var helper;return"\t\t\t"+this.escapeExpression((helper=(helper=helpers.aduPath||(depth0!=null?depth0.aduPath:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"aduPath",hash:{},data:data}):helper))+"\n"},7:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'\t\t\t<select class="form-control input-sm ddlAdu">\n\t\t\t\t<option value="">- Select Division -</option>\n'+((stack1=helpers.each.call(depth0,depths[3]!=null?depths[3].adus:depths[3],{name:"each",hash:{},fn:this.program(8,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+"\t\t\t</select>\n"},8:function(depth0,helpers,partials,data){var helper;return'\t\t\t\t<option value="'+this.escapeExpression((helper=(helper=helpers.key||(depth0!=null?depth0.key:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"key",hash:{},data:data}):helper))+'">'+this.escapeExpression((helper=(helper=helpers.path||(depth0!=null?depth0.path:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"path",hash:{},data:data}):helper))+"</option>\n"},10:function(depth0,helpers,partials,data){var helper;return"\t\t\t"+this.escapeExpression((helper=(helper=helpers.teamName||(depth0!=null?depth0.teamName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"teamName",hash:{},data:data}):helper))+"\n"},12:function(depth0,helpers,partials,data){return'\t\t\t<select class="form-control input-sm ddlTeam">\n\t\t\t\t<option value="">- Select Team -</option>\n\t\t\t</select>\n'},14:function(depth0,helpers,partials,data){var helper;return"\t\t\t"+this.escapeExpression((helper=(helper=helpers.leaveProfileName||(depth0!=null?depth0.leaveProfileName:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0,{name:"leaveProfileName",hash:{},data:data}):helper))+"\n"},16:function(depth0,helpers,partials,data){return'\t\t\t<select class="form-control input-sm ddlLeaveProfile">\n\t\t\t\t<option value="">- Select Leave Profile -</option>\n\t\t\t</select>\n'},18:function(depth0,helpers,partials,data){
return'<tr>\n\t<td colspan="6" class="no-results">\n\t\tNo More Actions Required\n\t</td>\n</tr>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,blockParams,depths){var stack1;return'<table class="table table-bordered table-shaded table-condensed">\n<thead>\n<tr>\n\t<th class="w200">Employee</th>\n\t<th class="w100">Status</th>\n'+((stack1=helpers["if"].call(depth0,depth0!=null?depth0.adusEnabled:depth0,{name:"if",hash:{},fn:this.program(1,data,0,blockParams,depths),inverse:this.noop,data:data}))!=null?stack1:"")+'\t<th class="w250">Team</th>\n\t<th class="w250">Leave Profile</th>\n\t<th>&nbsp;</th>\n</tr>\n</thead>\n<tbody>\n'+((stack1=helpers.each.call(depth0,depth0!=null?depth0.employees:depth0,{name:"each",hash:{},fn:this.program(3,data,0,blockParams,depths),inverse:this.program(18,data,0,blockParams,depths),data:data}))!=null?stack1:"")+"</tbody>\n</table>"},useData:true,useDepths:true});Handlebars.registerPartial("admin/templates/UpdateUsers",t);return t});define("admin/views/UpdateUsers",["jquery","underscore","appogee","admin/reg/util","hbs!admin/templates/UpdateUsers"],function($,_,appogee,util,tmpl){"use strict";var View=function($container){this.$container=$container;this.employees=[];this.adus=appogee.getAdus({root:"self"});this.adusEnabled=this.adus.length>1};View.prototype.fetch=function(){var url="/admin/org/invalid-users/fetch";var me=this;appogee.xhr.get(url,function(response){me.employees=response.employees;me.render()})};View.prototype.render=function(){var _this198=this;var data={employees:this.employees,adusEnabled:this.adusEnabled,adus:this.adus};this.$container.html(tmpl(data));if(this.adus.length==1){util.populateTeams(this.$container.find(".ddlTeam"),this.adus[0].key);util.populateLeaveProfiles(this.$container.find(".ddlLeaveProfile"),this.adus[0].key)}else{this.$container.find(".ddlAdu").change(function(){var $ddlTeam=$(this).closest("tr").find(".ddlTeam");var $ddlLeaveProfile=$(this).closest("tr").find(".ddlLeaveProfile");util.populateTeams($ddlTeam,this.value);util.populateLeaveProfiles($ddlLeaveProfile,this.value)});this.employees.forEach(function(e){var $tr=_this198.$container.find('tr[data-key="'+e.key+'"]');var $ddlLeaveProfile=$tr.find(".ddlLeaveProfile");var $ddlTeam=$tr.find(".ddlTeam");if($ddlTeam.length===0){util.populateLeaveProfiles($ddlLeaveProfile,e.aduKey)}})}this.$container.find(".btnSave").click(function(e){var $tr=$(e.currentTarget).closest("tr");var key=$tr.data("key");var teamKey=$tr.find(".ddlTeam").val();var leaveProfileKey=$tr.find(".ddlLeaveProfile").val();if($tr.find(".ddlTeam").length>0&&!teamKey){appogee.valert("Please select a Team");return}if($tr.find(".ddlLeaveProfile").length&&!leaveProfileKey){appogee.valert("Please select a Leave Profile");return}var body={key:key,teamKey:teamKey,leaveProfileKey:leaveProfileKey};$tr.find("button").prop("disabled",true);var url="/admin/org/invalid-users/save";appogee.xhr.post(url,body,function(response){if(response.success){_this198.employees=_.filter(_this198.employees,function(e){return e.key!=key});_this198.render();_this198.checkDone()}else if(response.reason){appogee.valert("Error",response.reason);$tr.find("button").prop("disabled",false)}else{$tr.find("button").prop("disabled",false)}},{artificialDelay:true})});this.$container.find(".btnArchive").click(function(e){var $tr=$(e.currentTarget).closest("tr");var key=$tr.data("key");var employee=_.findWhere(_this198.employees,{key:key});appogee.confirm("Archive Employee?","<p>This will Archive the Employee <strong>"+employee.email+"</strong>.</p><p>Do you wish to continue?</p>",function(){var body={key:key};$tr.find("button").prop("disabled",true);var url="/admin/org/invalid-users/archive";appogee.xhr.post(url,body,function(response){if(response.success){_this198.employees=_.filter(_this198.employees,function(e){return e.key!=key});_this198.render();_this198.checkDone()}else if(response.reason){appogee.valert("Error",response.reason);$tr.find("button").prop("disabled",false)}else{$tr.find("button").prop("disabled",false)}},{artificialDelay:true})})})};View.prototype.checkDone=function(){if(this.employees.length===0){appogee.alert("Update Complete","You have now completed updating Employees. You will be redirected to the Organization page.",function(){location.href="/admin/organisation"});return}};return View});define("admin/update-users",["jquery","appogee","admin/views/UpdateUsers"],function($,appogee,ConfigureUsers){"use strict";return{initialize:function(){this.view=new ConfigureUsers($("#container"));this.view.fetch()}}});define("admin/app",["module","app","admin/app_util","leave/app_util","admin/overview","admin/org/organisation","admin/org/adu_manager","admin/org/teams","admin/org/team","admin/org/vteams","admin/org/vteam","admin/org/employees","admin/org/employee","admin/org/employee_archived","admin/org/archived","admin/reg/registration","admin/reg/import-csv","admin/reg/import-gapps","admin/reg/import-o365","admin/reg/import-xero","admin/security/security","admin/leave/leave_profiles","admin/leave/leave_profile","admin/leave/calculator","admin/leave/adjust_allowance_range","admin/leave/bulk_adjust_allowances","mgmt/leave/backfill","admin/audit","admin/update-users"],function(m,App,appUtil,leaveAppUtil,Overview,Organisation,AduManager,Teams,Team,VTeams,VTeam,Employees,Employee,EmployeeArchived,Archived,Registration,CsvImport,GappsImport,O365Import,XeroImport,Security,LeaveProfiles,LeaveProfile,AllowanceCalculator,AdjustAllowanceRange,BulkAdjustAllowances,Backfill,Audit,UpdateUsers){"use strict";var MODULES={"admin-overview":Overview,"admin-organisation":Organisation,"admin-adu-manager":AduManager,"admin-teams":Teams,"admin-team":Team,"admin-vteams":VTeams,"admin-vteam":VTeam,"admin-employees":Employees,"admin-employee":Employee,"admin-employee-archived":EmployeeArchived,"admin-archived":Archived,"admin-registration":Registration,"admin-import-csv":CsvImport,"admin-import-gapps":GappsImport,"admin-import-o365":O365Import,"admin-import-xero":XeroImport,"admin-security":Security,"admin-leave-profiles":LeaveProfiles,"admin-leave-profile":LeaveProfile,"admin-allowance-calculator":AllowanceCalculator,"admin-adjust-allowance-range":AdjustAllowanceRange,"admin-bulk-adjust-allowances":BulkAdjustAllowances,"admin-backfill":Backfill,"admin-audit":Audit,"admin-update-users":UpdateUsers};var pageId=m.config().pageId;if(pageId in MODULES){var module=MODULES[pageId];var app=new App(pageId,module);appUtil.initApp(app);leaveAppUtil.initApp(app);return app}});require(["admin/app"],function(App){"use strict";if(App.initialize){App.initialize()}});